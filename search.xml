<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è¿è¡Œä¸­çš„mongoå‡å°‘å†…å­˜å ç”¨</title>
      <link href="/2021/09/17/centos/centos-mongo-memory/"/>
      <url>/2021/09/17/centos/centos-mongo-memory/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘æŸ¥çœ‹å…¬å¸æœºå™¨çš„å†…å­˜å ç”¨æƒ…å†µï¼Œå‘ç°mongodå¤§çº¦å äº†50%çš„å†…å­˜ã€‚<br>å‘½ä»¤ï¼š<code>ps auxc|head -1;ps auxc|grep -v PID|sort -rn -k +4|head;</code><br>åŸæ¥<code>å†…å­˜é»˜è®¤ä½¿ç”¨çš„æ˜¯(ç³»ç»Ÿå†…å­˜-1GB)*50%</code>ï¼ˆæ®è¯´æ˜¯3.4ç‰ˆæœ¬+ï¼‰ã€‚</p><p>è¿™ä¹Ÿå¤ªå‘äº†ï¼ŒæœåŠ¡å™¨åˆä¸æ˜¯ä¸“é—¨ç”¨ä½œDBçš„ï¼Œè¿˜æœ‰å…¶ä»–è¿›ç¨‹ä¹Ÿè¦åƒå†…å­˜ã€‚</p><p>è¿è¡Œä¸­çš„mongodï¼Œä¹Ÿä¸æ•¢restartï¼ŒæŸ¥è¯¢äº†å¯èƒ½çš„è¿è¡Œä¸­æ¸…ç†å†…å­˜ã€‚<br><font color=red>æ³¨æ„ï¼šæ²¡æœ‰åœ¨æ­£å¼ç¯å¢ƒä¸­æ‰§è¡Œè¿‡ï¼Œä»…ä½œå‚è€ƒã€‚</font></p><span id="more"></span><h3 id="æ–¹æ³•1-è¿™ä¸ªåº”è¯¥å¯ä»¥"><a href="#æ–¹æ³•1-è¿™ä¸ªåº”è¯¥å¯ä»¥" class="headerlink" title="æ–¹æ³•1(è¿™ä¸ªåº”è¯¥å¯ä»¥)"></a>æ–¹æ³•1(è¿™ä¸ªåº”è¯¥å¯ä»¥)</h3><p>å…³é—­æ‰€æœ‰çš„æ•°æ®åº“:<br><code>db.adminCommand(&#123;closeAllDatabases: 1&#125;)</code><br>æˆ–è€…<code>use admin; db.runCommand(&#123;closeAllDatabases: 1&#125;)</code></p><p>ä½¿ç”¨<code>crontab</code>å®šæ—¶æ‰§è¡Œ<code>mongo --eval &quot;db.adminCommand(&#123;closeAllDatabases: 1&#125;)&quot;</code>?ä¹Ÿè®¸å¯ä»¥</p><blockquote><p>æœ‰æ–°çš„æ•°æ®è¿›æ¥çš„è¯,ä¼šé‡æ–°å¼€æ•°æ®åº“çš„</p></blockquote><h3 id="æ–¹æ³•2-æ²¡è¯•è¿‡-ä¸çŸ¥é“è¿›ç¨‹æ˜¯å¦ä¼šé‡å¯"><a href="#æ–¹æ³•2-æ²¡è¯•è¿‡-ä¸çŸ¥é“è¿›ç¨‹æ˜¯å¦ä¼šé‡å¯" class="headerlink" title="æ–¹æ³•2(æ²¡è¯•è¿‡,ä¸çŸ¥é“è¿›ç¨‹æ˜¯å¦ä¼šé‡å¯)"></a>æ–¹æ³•2(æ²¡è¯•è¿‡,ä¸çŸ¥é“è¿›ç¨‹æ˜¯å¦ä¼šé‡å¯)</h3><p>è¦å®‰è£…<code>cgroups</code>ï¼Œæ­£å¼ç¯å¢ƒä¸­æ²¡æœ‰ï¼Œæ²¡è¯•è¿‡ï¼Œä¸æ¸…æ¥šè¿›ç¨‹ä¼šä¸ä¼šé‡å¯</p><ol><li><code>cgcreate -g memory:DBLimitedGroup</code> </li><li><code>echo 16G &gt; /sys/fs/cgroup/memory/DBLimitedGroup/memory.limit_in_bytes</code></li><li><code>sync; echo 3 &gt; /proc/sys/vm/drop_caches</code></li><li><code>cgclassify -g memory:DBLimitedGroup $(pidof mongod)</code></li></ol><h3 id="æ–¹æ³•3-åº”è¯¥è¦é‡å¯çš„ï¼Œæ²¡æœ‰è¯•è¿‡"><a href="#æ–¹æ³•3-åº”è¯¥è¦é‡å¯çš„ï¼Œæ²¡æœ‰è¯•è¿‡" class="headerlink" title="æ–¹æ³•3(åº”è¯¥è¦é‡å¯çš„ï¼Œæ²¡æœ‰è¯•è¿‡)"></a>æ–¹æ³•3(åº”è¯¥è¦é‡å¯çš„ï¼Œæ²¡æœ‰è¯•è¿‡)</h3><p><code>mongod.conf</code>å¢åŠ <code>wiredTigerCacheSizeGB=8</code>ï¼Œç„¶å<code>mongod reload</code><br>æˆ–è€…<br><code>/usr/bin/mongod --config /etc/mongod.conf --fork --wiredTigerCacheSizeGB 8</code></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="https://www.techpaste.com/2016/04/limit-mongodb-memory-usage/">https://www.techpaste.com/2016/04/limit-mongodb-memory-usage/</a></li><li><a href="https://www.cnblogs.com/On-my-way/p/9708225.html">https://www.cnblogs.com/On-my-way/p/9708225.html</a></li><li><a href="https://www.cnblogs.com/wt11/p/9291583.html">https://www.cnblogs.com/wt11/p/9291583.html</a></li><li><a href="https://stackoverflow.com/questions/6861184/is-there-any-option-to-limit-mongodb-memory-usage">https://stackoverflow.com/questions/6861184/is-there-any-option-to-limit-mongodb-memory-usage</a></li><li><a href="https://mongodb-documentation.readthedocs.io/en/latest/reference/command/listDatabases.html#gsc.tab=0">https://mongodb-documentation.readthedocs.io/en/latest/reference/command/listDatabases.html#gsc.tab=0</a></li><li><a href="https://segmentfault.com/q/1010000002953588">https://segmentfault.com/q/1010000002953588</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> mongo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> mongo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…±äº«Androidæ‰‹æœºä¸Šçš„éŸ³è§†é¢‘åˆ°æ™ºèƒ½ç”µè§†ä¸Š</title>
      <link href="/2021/08/13/mobile/mobile-dlna-server/"/>
      <url>/2021/08/13/mobile/mobile-dlna-server/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="serverç«¯"><a href="#serverç«¯" class="headerlink" title="serverç«¯"></a><code>serverç«¯</code></h2><p>ä¸‹è½½åœ°å€:</p><ul><li><a href="https://play.google.com/store/apps/details?id=com.al.dlnaserver">[fq]Google Play</a></li><li><a href="https://apkpure.com/cn/dlnaserver/com.al.dlnaserver">[fq]ApkPure</a></li><li><a href="/downloads/binary/DLNAServer_v2.14_apkpure.com.apk">æœ¬åœ°ä¸‹è½½</a></li></ul><p>å®‰è£…åˆ°è‡ªå·±çš„æ‰‹æœºä¸Šï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„+ï¼Œæ·»åŠ éœ€è¦å…±äº«çš„è§†é¢‘/éŸ³é¢‘<br>ç¡®ä¿å¯ä»¥åå°è¿è¡Œ</p><h2 id="clientç«¯"><a href="#clientç«¯" class="headerlink" title="clientç«¯"></a><code>clientç«¯</code></h2><p>ä¸‹è½½<a href="https://www.videolan.org/vlc/download-android.html">VLC for Android</a><br>å®‰è£…åˆ°<code>æŸç›’å­</code>æˆ–è€…<code>æ™ºèƒ½ç”µè§†</code>ä¸Š<br>ç¡®ä¿<code>serverç«¯</code>å’Œ<code>clientç«¯</code>åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­</p><p>æ‰“å¼€VLCï¼Œç¨ç­‰ç‰‡åˆ»å°±å¯ä»¥åœ¨<code>æœ¬åœ°ç½‘ç»œ</code>ä¸­çœ‹åˆ°äº†<br>å¦‚æœçœ‹ä¸åˆ°çš„è¯,å°±<code>é‡å¯</code>ä¸‹serverç«¯</p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹æœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‰‹æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†œå†å…¬å†è½¬æ¢</title>
      <link href="/2021/08/09/other/other-lunar2solar/"/>
      <url>/2021/08/09/other/other-lunar2solar/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>å†œå†è½¬å…¬å†æ˜¯æ²¡æœ‰è§„å¾‹çš„ï¼Œæ‰€ä»¥åªèƒ½æ ¹æ®å·²æœ‰çš„æ•°æ®è½¬æ¢</strong><br>é¦™æ¸¯å¤©æ–‡å°çš„æ•°æ®ï¼š<a href="https://www.hko.gov.hk/tc/gts/time/conversion1_text.htm#">https://www.hko.gov.hk/tc/gts/time/conversion1_text.htm#</a></p><p>è‡ªå·±è½¬æ¢å‡ºäº†ä¸€ä¸ª<code>lunar.db</code><a href="/downloads/binary/lunar.db">(ç‚¹å‡»ä¸‹è½½)</a>ï¼Œç”¨<code>sqilte3</code>æ‰“å¼€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">sqlite3 lunar.db <span class="string">&quot;SELECT solar from lunar2solar where lunar=\&quot;2023-02-22\&quot;&quot;</span></span></span><br><span class="line">2023-03-13</span><br><span class="line">2023-04-12</span><br></pre></td></tr></table></figure><p>è‡ªå·±éšä¾¿å†™äº†ä¸€ä¸ªå†œå†è½¬å…¬å†çš„æ¥å£ï¼Œå…¶å®å°±æ˜¯ä»<code>lunar.db</code>ä¸­æŸ¥è¯¢æ•°æ®è€Œå·²<br>å¾ˆéšæ„çš„ï¼Œæ€§èƒ½æ²¡æ³•ä¿è¯çš„<br><code>https://tools.web.mingilin.com/lunar2solar/lunar2solar.php?lunar=2023-02-22</code><br>æ—¥æœŸæ ¼å¼å¿…é¡»æ˜¯YYYY-MM-DD</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl --silent https://tools.web.mingilin.com/lunar2solar/lunar2solar.php?lunar=2023-02-22 | jq -r <span class="string">&#x27;.data | .[].solar&#x27;</span></span><br><span class="line">2023-03-13</span><br><span class="line">2023-04-12</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10ä¸‹git clone sshå…å¯†</title>
      <link href="/2021/08/08/windows/windows-git-clone-nopass/"/>
      <url>/2021/08/08/windows/windows-git-clone-nopass/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="git-for-windows"><a href="#git-for-windows" class="headerlink" title="git for windows"></a><code>git for windows</code></h2><ol><li>å¯åŠ¨<code>ssh-agent</code>æœåŠ¡<ol><li><code>Win+s</code>æœç´¢<code>æœåŠ¡</code>,ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</li><li>è®¾ç½®<code>OpenSSH Authentication Agent</code>ä¸ºå¼€æœºå¯åŠ¨</li></ol></li><li><code>ssh-add</code>å¢åŠ ç§é’¥<br>ç§é’¥æ”¾åˆ°<code>C:\Users\ç”¨æˆ·å</code>ç›®å½•ä¸‹,<code>ssh-add %USERPROFILE%\ssh_keys\id_rsa</code><br>å¯ä»¥åˆ›å»ºä¸€ä¸ªå¼€æœºå¯åŠ¨.bat(<code>Win+R</code>-&gt;<code>shell:startup</code>)<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> å¯åŠ¨win10_ssh-agent</span><br><span class="line"><span class="built_in">echo</span> ç¯å¢ƒå˜é‡å¢åŠ GIT_SSH=C:\WINDOWS\System32\OpenSSH\ssh.exe</span><br><span class="line"><span class="function">C:\<span class="title">WINDOWS</span>\<span class="title">System32</span>\<span class="title">OpenSSH</span>\<span class="title">ssh</span>-<span class="title">agent.exe</span></span></span><br><span class="line"><span class="function"><span class="title">ssh</span>-<span class="title">add</span> %<span class="title">USERPROFILE</span>%\<span class="title">ssh_keys</span>\<span class="title">id_rsa</span></span></span><br><span class="line"><span class="function"><span class="title">ssh</span>-<span class="title">add</span> %<span class="title">USERPROFILE</span>%\<span class="title">ssh_keys</span>\<span class="title">id_rsa2</span></span></span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹gité…ç½®<ol><li><code>Win+s</code>æœç´¢<code>ç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡</code></li><li>å¢åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡<code>GIT_SSH=C:\WINDOWS\System32\OpenSSH\ssh.exe</code></li></ol></li><li>å®Œæˆ<br><code>git clone ssh://xxx</code>åº”è¯¥å°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†</li></ol><h2 id="TortoiseGIT"><a href="#TortoiseGIT" class="headerlink" title="TortoiseGIT"></a><code>TortoiseGIT</code></h2><ol><li>æ–¹æ³•1:<ol><li>å…ˆè®¾ç½®å¥½<code>git for windows</code></li><li>ä¿®æ”¹é…ç½®(<code>Settings</code> -&gt; <code>Network</code> -&gt; <code>SSH Client</code>)<br>ä¿®æ”¹ä¸º<code>C:\WINDOWS\System32\OpenSSH\ssh.exe</code></li></ol></li><li>æ–¹æ³•2:<ol><li>å¯åŠ¨<code>Pageant</code>ï¼Œæ·»åŠ ç§é’¥.ppk</li><li>ä¿®æ”¹é…ç½®(<code>Settings</code> -&gt; <code>Network</code> -&gt; <code>SSH Client</code>)<br>ä¿®æ”¹ä¸º<code>Your\TortoiseGit\Path\bin\TortoisePlink.exe</code></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬ã€‘DAVx5æ— æ³•å¼€å¯OpenTasks/Tasks.orgæƒé™çš„é—®é¢˜</title>
      <link href="/2021/07/30/other/other-davx5-sync/"/>
      <url>/2021/07/30/other/other-davx5-sync/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab active"><a href="#tab-1">åŸæ–‡</a></li><li class="tab"><a href="#tab-2">é™„åŠ </a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-1"><blockquote><p>åŸæ–‡é“¾æ¥: <a href="https://blog.wanfajie.com/2021/02/566">https://blog.wanfajie.com/2021/02/566</a></p></blockquote><p>å°ç±³6æ‰‹æœºï¼ˆMIUI 11 20.1.16ï¼‰ä¸­ä½¿ç”¨ DAVx5 æ˜¾ç¤ºç¼ºå°‘æƒé™ã€æ— æ³•åŒæ­¥ Tasks/OpenTasks ä¸­ä»»åŠ¡ã€‚å¹¶ä¸”åœ¨ â€œè®¾ç½®â€ -&gt; â€œåº”ç”¨æƒé™â€ ä¸­ç‚¹å‡» â€œOpenTasksæƒé™â€/â€œTasksæƒé™â€ å¼€å…³æ— æ³•æ‰“å¼€ã€‚æŸ¥çœ‹ DAVx5 æ—¥å¿—å‘ç°ä»¥ä¸‹å››é¡¹æƒé™è¢«ç¦æ­¢ï¼š</p><ul><li>org.dmfs.permission.READ_TASKS: denied</li><li>org.dmfs.permission.WRITE_TASKS: denied</li><li>org.tasks.permission.READ_TASKS: denied</li><li>org.tasks.permission.WRITE_TASKS: denied</li></ul><p>ä»¤äººå›°æƒ‘çš„æ˜¯ï¼ŒMIUI æ—¢ä¸ç»™å‡ºæˆæƒæç¤ºï¼Œåœ¨æƒé™ç®¡ç†ä¸­ä¹Ÿæ‰¾ä¸åˆ°è‡ªå®šä¹‰åº”ç”¨æƒé™æˆæƒçš„åœ°æ–¹ã€‚å¯¹ MIUI çš„â€œè®¾ç½®â€åœ°æ¯¯å¼æœç´¢åï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ³•ã€‚</p><ol><li>é¦–å…ˆå®‰è£…å¥½ DAVx5 åŠ OpenTasks/Tasks.org åº”ç”¨ã€‚</li><li>åœ¨â€œå…¨éƒ¨å‚æ•°â€ä¸­ç‚¹å‡»5æ¬¡â€œMIUI ç‰ˆæœ¬â€ï¼Œå¼€å¯å¼€å‘è€…æ¨¡å¼ã€‚</li><li>åœ¨â€œå¼€å‘è€…é€‰é¡¹â€ä¸­ï¼Œå…³é—­ä½äºæœ€ä¸‹é¢çš„å‡ ä¸ªé€‰é¡¹ä¸­çš„â€œå¯ç”¨MIUIä¼˜åŒ–â€ã€‚</li><li>å›åˆ°æ¡Œé¢ï¼Œé•¿æŒ‰ DAVx5 åº”ç”¨çš„å›¾æ ‡ï¼Œç‚¹å‡»â€œåº”ç”¨ä¿¡æ¯â€ã€‚<br>P.S.: æ­¤æ—¶ï¼Œåº”ç”¨ä¿¡æ¯ç•Œé¢å˜äº†ä¸ªæ ·å­ã€‚å¦‚æœæ˜¯é€šè¿‡â€œè®¾ç½®â€è¿›å…¥â€œåº”ç”¨ä¿¡æ¯â€çš„è¯ï¼Œç•Œé¢å°†ä¿æŒ MIUI çš„åŸçŠ¶ã€‚</li><li>ç„¶åï¼Œç‚¹å‡»â€œåº”ç”¨ä¿¡æ¯â€ç•Œé¢ä¸­çš„â€œæƒé™â€ã€‚è¿›å…¥â€œåº”ç”¨æƒé™â€ç•Œé¢åï¼Œä½ ä¼šåœ¨æœ€ä¸‹æ–¹çœ‹åˆ°â€œå…¶ä»–æƒé™â€é€‰é¡¹ã€‚</li><li>è¿›å…¥â€œå…¶ä»–æƒé™â€ï¼Œæƒé™åˆ—è¡¨ä¸­å°†å‡ºç° â€œTasksâ€ ä¹‹ç±»çš„æƒé™ï¼Œæ‰“å¼€æƒé™å¼€å…³ã€‚<br>è¿›å…¥ DAVx5 çš„ â€œè®¾ç½®â€ -&gt; â€œåº”ç”¨æƒé™â€ï¼Œæ­¤æ—¶å°±å¯ä»¥å¼€å¯ â€œOpenTasksæƒé™â€/â€œTasksæƒé™â€ å¼€å…³å¹¶æ­£å¸¸åŒæ­¥ OpenTasks ä¸­çš„æ•°æ®ã€‚</li></ol><p>æœ€åï¼Œå»ºè®®å†é‡æ–°å¼€å¯â€œå¯ç”¨MIUIä¼˜åŒ–â€ã€‚å…³é—­ä¼˜åŒ–åï¼Œè®¸å¤šè®¾ç½®åƒæ˜¯é‡ç½®äº†ä¸€æ ·ï¼Œä¸€æ¥é‡æ–°è®¾ç½®å«Œéº»çƒ¦ï¼ŒäºŒæ¥å¼€å¯MIUIä¼˜åŒ–æ‰‹æœºä½¿ç”¨èµ·æ¥äºæˆ‘è€Œè¨€ä¹Ÿæ²¡ä»€ä¹ˆä¸è¶³ã€‚ç½‘ç»œä¸Šå¯¹MIUIä¼˜åŒ–ä¼—è¯´çº·çº­ï¼Œå°±çœ‹å„ä½è‡ªè¡Œåˆ¤æ–­äº†ã€‚</p></div><div class="tab-pane" id="tab-2"><ol><li>åœ¨<code>Google Play</code>ä¸Š<code>DAVx5</code>éœ€è¦ç±³ï¼Œåœ¨<a href="https://f-droid.org/"><code>F-Droid</code></a>å…è´¹ï¼›</li><li>æŒ‰ç…§åŸæ–‡çš„æ–¹æ³•ï¼Œç¬¬ä¸€æ¬¡é‡æ–°â€œå¼€å¯MIUIä¼˜åŒ–â€åï¼Œ<code>DAVx5</code>æƒé™è¢«é‡ç½®äº†ï¼Œ<br>åˆé‡æ–°å…³é—­å†å¼€å¯ï¼Œ<code>DAVx5</code>å¯ä»¥ç”¨äº†ï¼Œ<br>å¯èƒ½æˆåŠŸä¸å¦è¦çœ‹äººå“ï¼›</li><li><code>Tasks.org</code>éœ€è¦è®¢è´­åæ‰èƒ½ä½¿ç”¨<code>DAVx5</code>åŒæ­¥ï¼Œæ²¡ç±³ï¼Œæœæ–­æ”¾å¼ƒï¼Œç”¨<code>OpenTasks</code>ï¼›</li><li>ä½¿ç”¨<a href="https://radicale.org/3.0.html"><code>Radicale</code></a>è‡ªå»º<code>CalDAV</code>å’Œ<code>CardDAV</code>Serverï¼ŒçœŸé¦™ï¼Œ<br>å¦‚æœé…åˆdockerå°±æ›´é¦™ï¼›</li><li>PCä¸Šç”¨<code>Thunder Bird</code>+<code>TbSync</code>æ’ä»¶ï¼Œç®¡ç†æ—¥ç¨‹å’Œè”ç³»äººï¼›</li></ol></div></div></div>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Termux(Android)é…ç½®</title>
      <link href="/2021/07/29/centos/centos-termux/"/>
      <url>/2021/07/29/centos/centos-termux/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘è¦æ¥æ‰‹ä¸€äº›è¿ç»´çš„å·¥ä½œ<br>æœ‰æ—¶å€™éœ€è¦è¿œç¨‹æ›´æ–°ä¸‹<br>å¯¹æ¯”äº†å‡ ä¸ªå®‰å“çš„sshå®¢æˆ·ç«¯,å‘ç°<code>termux</code>æœ€å¥½ç”¨äº†(å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è¿ç§»sessions)(<code>Termius</code>ä¹ŸæŒºå¥½çš„)</p><span id="more"></span><h2 id="ä¿®æ”¹æº"><a href="#ä¿®æ”¹æº" class="headerlink" title="ä¿®æ”¹æº"></a>ä¿®æ”¹æº</h2><p><code>termux-change-repo</code></p><h2 id="æ ¹ç›®å½•åœ°å€"><a href="#æ ¹ç›®å½•åœ°å€" class="headerlink" title="æ ¹ç›®å½•åœ°å€"></a>æ ¹ç›®å½•åœ°å€</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$PREFIX</span></span></span><br><span class="line">/data/data/com.termux/files/usr</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…sshdæœåŠ¡"><a href="#å®‰è£…sshdæœåŠ¡" class="headerlink" title="å®‰è£…sshdæœåŠ¡"></a>å®‰è£…<code>sshd</code>æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pkg install termux-services</span><br><span class="line">pkg install openssh</span><br><span class="line">sv-enable sshd</span><br><span class="line">sv start sshd</span><br></pre></td></tr></table></figure><p>é»˜è®¤ç«¯å£ <code>8022</code><br>ç°åœ¨å°±å¯ä»¥ç”¨sshç™»å½•äº†,ç”¨<code>sftp</code>å‘é€æ–‡ä»¶äº†</p><h2 id="è®¾ç½®Termuxè½¯é”®ç›˜"><a href="#è®¾ç½®Termuxè½¯é”®ç›˜" class="headerlink" title="è®¾ç½®Termuxè½¯é”®ç›˜"></a>è®¾ç½®Termuxè½¯é”®ç›˜</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ~/.termux/termux.properties</span></span></span><br><span class="line">extra-keys = [ \</span><br><span class="line"> [&#x27;|&#x27;, &#x27;~&#x27;, &#x27;/&#x27;, &#x27;.&#x27;, &#x27;-&#x27;, &#x27;_&#x27;, &#x27;ENTER&#x27;], \</span><br><span class="line"> [&#x27;ESC&#x27;, &#x27;TAB&#x27;, &#x27;HOME&#x27;,&#x27;UP&#x27;,&#x27;END&#x27;,&#x27;DEL&#x27;, &#x27;exit&#x27;], \</span><br><span class="line"> [&#x27;CTRL&#x27;,&#x27;ALT&#x27;,&#x27;LEFT&#x27;,&#x27;DOWN&#x27;,&#x27;RIGHT&#x27;, &#x27;BKSP&#x27;, &#x27;KEYBOARD&#x27;] \</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>grep ä¸­æ–‡é—®é¢˜<br><a href="https://unix.stackexchange.com/questions/580139/termux-grep-fails-to-detect-chinese-character">ç›¸åŒé—®é¢˜çš„é“¾æ¥</a>, è§£å†³æ–¹å¼:<code>pkg install busybox</code>, ä½¿ç”¨<code>busybox grep</code></li></ul><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/termux/">https://mirrors.tuna.tsinghua.edu.cn/help/termux/</a></li><li><a href="https://wiki.termux.com/wiki/Termux-services">https://wiki.termux.com/wiki/Termux-services</a></li><li><a href="https://wiki.termux.com/wiki/Touch_Keyboard">https://wiki.termux.com/wiki/Touch_Keyboard</a></li></ol><h2 id="é™„å¸¦è‡ªåŠ¨ç”Ÿæˆçš„è¿œç¨‹ç™»å½•çš„è„šæœ¬"><a href="#é™„å¸¦è‡ªåŠ¨ç”Ÿæˆçš„è¿œç¨‹ç™»å½•çš„è„šæœ¬" class="headerlink" title="é™„å¸¦è‡ªåŠ¨ç”Ÿæˆçš„è¿œç¨‹ç™»å½•çš„è„šæœ¬"></a>é™„å¸¦è‡ªåŠ¨ç”Ÿæˆçš„è¿œç¨‹ç™»å½•çš„è„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">eval &quot;$(curl --silent https://www.mingilin.com/downloads/code/printcolor.sh)&quot;</span><br><span class="line">CACHE_DIR=~/.cache/</span><br><span class="line">mkdir -p $CACHE_DIR</span><br><span class="line">CFG_FILE=$&#123;CACHE_DIR&#125;/ssh_test_cfg.cfg</span><br><span class="line">if [ &quot;$(uname -o)&quot; == &quot;Android&quot; ];then</span><br><span class="line">    GREP=&quot;busybox grep&quot;</span><br><span class="line">else</span><br><span class="line">    GREP=grep</span><br><span class="line">fi</span><br><span class="line">MYSSH_KEY_DIR=~/myssh</span><br><span class="line">cat &gt; $CFG_FILE &lt;&lt;EOF</span><br><span class="line">&#123;&quot;id&quot;:&quot;7&quot;, &quot;group&quot;:[&quot;&quot;,&quot;0. å†…ç½‘æœºå™¨&quot;], &quot;name&quot;:&quot;DNSæœåŠ¡å™¨-192.168.50.12&quot;, &quot;user&quot;:&quot;root&quot;, &quot;host&quot;:&quot;192.168.50.12&quot;, &quot;port&quot;:&quot;9022&quot;&#125;</span><br><span class="line">&#123;&quot;id&quot;:&quot;63&quot;, &quot;group&quot;:[&quot;&quot;,&quot;Z101. vagrant&quot;], &quot;name&quot;:&quot;192.168.56.10&quot;, &quot;user&quot;:&quot;root&quot;, &quot;host&quot;:&quot;192.168.56.10&quot;, &quot;port&quot;:&quot;22&quot;&#125;</span><br><span class="line">&#123;&quot;id&quot;:&quot;64&quot;, &quot;group&quot;:[&quot;&quot;,&quot;Z101. vagrant&quot;], &quot;name&quot;:&quot;192.168.56.11&quot;, &quot;user&quot;:&quot;root&quot;, &quot;host&quot;:&quot;192.168.56.11&quot;, &quot;port&quot;:&quot;22&quot;&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">function show_list() &#123;</span><br><span class="line">    filter=$1</span><br><span class="line">    group=&quot;&quot;</span><br><span class="line">    while read line_t; do</span><br><span class="line">        if [ &quot;$filter&quot; == &quot;&quot; ]; then</span><br><span class="line">            line=$line_t</span><br><span class="line">        else</span><br><span class="line">            line=$(echo $line_t | $&#123;GREP&#125; &quot;$filter&quot;)</span><br><span class="line">        fi</span><br><span class="line">        if [ &quot;$line&quot; == &quot;&quot; ]; then</span><br><span class="line">            continue</span><br><span class="line">        fi</span><br><span class="line">        group1=$(echo $line | jq &#x27;.group | join(&quot;&quot;)&#x27;)</span><br><span class="line">        port=$(echo $line | jq .port | sed &#x27;s/&quot;//g&#x27;)</span><br><span class="line">        if [ &quot;$port&quot; == &quot;0&quot; ]; then</span><br><span class="line">            continue</span><br><span class="line">        fi</span><br><span class="line">        if [ &quot;$group&quot; == &quot;$group1&quot; ]; then</span><br><span class="line">            echo -n &quot; &quot;</span><br><span class="line">            echo $line | jq &#x27;[.id,.name] | join(&quot; ===&gt; &quot;)&#x27; | sed &#x27;s/&quot;//g&#x27;</span><br><span class="line">        else</span><br><span class="line">            group=$group1</span><br><span class="line">            echo &quot;&quot;</span><br><span class="line">            print_info &quot;=======================================================&quot;</span><br><span class="line">            _print_info &quot;&gt;&gt;&gt; &quot;</span><br><span class="line">            print_info $(echo $line | jq -r &#x27;.group | .[1:] | join(&quot; &gt; &quot;)&#x27;)</span><br><span class="line">            print_info &quot;-------------------------------------------------------&quot;</span><br><span class="line">            echo -n &quot; &quot;</span><br><span class="line">            echo $line | jq -r &#x27;[.id,.name] | join(&quot; ===&gt; &quot;)&#x27;</span><br><span class="line">        fi</span><br><span class="line">    done &lt; $CFG_FILE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function login() &#123;</span><br><span class="line">    id=$1</span><br><span class="line">    line=$(cat $CFG_FILE | $&#123;GREP&#125; &quot;\&quot;id\&quot;:\&quot;$id\&quot;&quot;)</span><br><span class="line">    sshhost=$(echo $line | jq -r .host)</span><br><span class="line">    sshport=$(echo $line | jq -r .port)</span><br><span class="line">    sshuser=$(echo $line | jq -r .user)</span><br><span class="line">    print_info &quot;===&gt; login $sshuser@$sshhost port:$sshport&quot;</span><br><span class="line">    ssh -o GSSAPIAuthentication=no -o StrictHostKeyChecking=no -p $sshport $sshuser@$sshhost</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function start_sshagent() &#123;</span><br><span class="line">    [ ! -d $MYSSH_KEY_DIR ] &amp;&amp; echo &quot;[error] not found dir: $MYSSH_KEY_DIR&quot; &amp;&amp; exit</span><br><span class="line"></span><br><span class="line">    eval $(ssh-agent)</span><br><span class="line">    for i in $(find $MYSSH_KEY_DIR -type f); do</span><br><span class="line">        ssh-add -q $i</span><br><span class="line">    done</span><br><span class="line">    ssh-add -l</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function stop_sshagent() &#123;</span><br><span class="line">    eval $(ssh-agent -k)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function help() &#123;</span><br><span class="line">    print_info &quot;=======================================&quot;</span><br><span class="line">    print_info &quot;show_list         - list all sessions  &quot;</span><br><span class="line">    print_info &quot;show_list group   - list group sessions&quot;</span><br><span class="line">    print_info &quot;login id          - login&quot;</span><br><span class="line">    print_info &quot;=======================================&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">    &quot;login&quot;)</span><br><span class="line">        start_sshagent</span><br><span class="line">        login $2</span><br><span class="line">        stop_sshagent</span><br><span class="line">        ;;</span><br><span class="line">    &quot;show_list&quot;)</span><br><span class="line">        show_list $2</span><br><span class="line">        ;;</span><br><span class="line">    *) </span><br><span class="line">        help</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> termux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>screen</title>
      <link href="/2021/07/04/centos/centos-screentool/"/>
      <url>/2021/07/04/centos/centos-screentool/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸ªäººç»å¸¸ä½¿ç”¨çš„æ˜¯<code>tmux</code>, ä½¿ç”¨<code>tmuxinator</code>ç®¡ç†session</p><p>ç°åœ¨éœ€è¦æ¥æ‰‹ä¸€äº›è¿ç»´å·¥ä½œï¼Œä½†æ˜¯é»˜è®¤å®‰è£…çš„æ˜¯<code>screen</code>ï¼Œå› æ­¤éœ€è¦ä¸€äº›<code>screen</code>çš„çŸ¥è¯†</p><p>ç”¨æƒ¯äº†<code>tmuxinator</code>ï¼Œä¹Ÿæƒ³ä½¿ç”¨ç±»ä¼¼çš„å·¥å…·ç®¡ç†<code>screen</code>çš„session</p><blockquote><p>å…¶å®å°±æ˜¯ç®€å•çš„ç”Ÿæˆä¸åŒçš„<code>screenrc</code>é…ç½®ï¼Œä½¿ç”¨<code>screen -c xxx.rc</code>è°ƒç”¨ä¸åŒçš„é…ç½®</p></blockquote><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab active"><a href="#tab-1">æ•ˆæœå›¾</a></li><li class="tab"><a href="#tab-2">HELP</a></li><li class="tab"><a href="#tab-3">æºç </a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-1"><p><img src="/downloads/assets/screentool.png" alt="æ•ˆæœå›¾"></p></div><div class="tab-pane" id="tab-2"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ screentool</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;&gt;&gt; COMMAND &lt;&lt;&lt;&lt;&lt;</span><br><span class="line">new session      # create new session</span><br><span class="line">ls               # list all session</span><br><span class="line">edit session     # edit session config</span><br><span class="line">rm session       # remove session config</span><br><span class="line">start session    # start session</span><br><span class="line">stop session     # stop session</span><br><span class="line">status session   # status session</span><br><span class="line">install binname  # install screentool</span><br><span class="line">exec session cmd # exec &quot;cmd&quot;(use quotes)</span><br><span class="line">  cmd:</span><br><span class="line">    1. a command(ex. python)</span><br><span class="line">    2. -t python 10 python</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;&gt;&gt; KEYBINDINGS &lt;&lt;&lt;&lt;&lt;</span><br><span class="line">+---------------+---------------------+</span><br><span class="line">| ctrl-a d      | detach              |</span><br><span class="line">| ctrl-a c      | åˆ›å»º window         |</span><br><span class="line">| ctrl-a k      | å…³é—­ window         |</span><br><span class="line">| ctrl-a A      | é‡å‘½å windows      |</span><br><span class="line">| ctrl-a w      | æ˜¾ç¤ºæ‰€æœ‰çª—å£        |</span><br><span class="line">|---------------+---------------------|</span><br><span class="line">| ctrl-a 0~9    | åˆ‡æ¢çª—å£            |</span><br><span class="line">| ctrl-a ctrl-a | å¿«é€Ÿåˆ‡æ¢çª—å£        |</span><br><span class="line">| ctrl-a Tab    | åˆ‡æ¢åˆ°å¦ä¸€ä¸ª(åˆ†å±)  |</span><br><span class="line">| ctrl-a p      | prev window         |</span><br><span class="line">| ctrl-a n      | next window         |</span><br><span class="line">|---------------+---------------------|</span><br><span class="line">| ctrl-a S      | æ°´å¹³åˆ†å±            |</span><br><span class="line">| ctrl-a |      | å‚ç›´åˆ†å±            |</span><br><span class="line">| ctrl-a Q      | å»é™¤åˆ†å±            |</span><br><span class="line">|---------------+---------------------|</span><br><span class="line">| ctrl-a [      | copy                |</span><br><span class="line">|               | ç©ºæ ¼æ˜¯å¼€å§‹/ç»“æŸé€‰æ‹© |</span><br><span class="line">| ctrl-a ]      | paste               |</span><br><span class="line">+---------------+---------------------+</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="tab-3"><p>é™„å¸¦<a href="/downloads/code/screentool/myscreen"><code>æºç </code></a></p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> screen </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨èä¸¤ä¸ªå®‰å“ä¸‹çš„æ¡Œé¢è‚¡ç¥¨æ’ä»¶</title>
      <link href="/2020/12/04/other/other-deskstock-android/"/>
      <url>/2020/12/04/other/other-deskstock-android/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/downloads/assets/deskstock.jpg" alt="æ•ˆæœå›¾"></p><p>ä¸Šé¢æ˜¯ï¼š<a href="https://play.google.com/store/apps/details?id=top.ministock"><strong>æ¡Œé¢è‚¡ç¥¨</strong></a><br>ä¸‹é¢æ˜¯ï¼š<a href="https://play.google.com/store/apps/details?id=com.virsir.android.smartstockcn"><strong>æœºçµè‚¡ç¥¨</strong></a></p><p>æ’ä»¶æ˜¯æå¥½çš„ï¼Œå°±æ˜¯è‚¡ç¥¨ä¸èµšé’±ğŸ˜‚<br>åŸæ¥<code>è‚¡ç¥¨ç²¾çµ</code>æŒºå¥½ç”¨çš„ï¼Œç°åœ¨å·²ç»åºŸæ‰äº†ğŸ˜‚</p>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªç”¨çš„NGINX+MYSQL+PHPé›†æˆç¯å¢ƒ</title>
      <link href="/2020/12/04/other/other-mywnmp/"/>
      <url>/2020/12/04/other/other-mywnmp/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ†äº«ä¸€ä¸ªè‡ªç”¨çš„webé›†æˆç¯å¢ƒ<br>åœ¨å…¶ä»–äººçš„åŸºç¡€ä¸Šä¿®æ”¹çš„ï¼Œç°åœ¨å®åœ¨æ‰¾ä¸åˆ°æ˜¯åœ¨å“ªä¸ªåŸºç¡€ä¸Šä¿®æ”¹çš„ï¼ŒæŠ±æ­‰<br>åªè¦æœ‰ç‚¹å¼€å‘åŸºç¡€ï¼Œå°±å¯ä»¥å¿«é€Ÿçš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œç›®å‰åŒ…æ‹¬ï¼š</p><ul><li>NGINX + PHP + MYSQL</li><li>MONGO</li><li>REDIS + MEMCACHED</li><li>XLIGHT(FTP SERVER)</li><li>OpenSSH-Win64</li></ul><p>é“¾æ¥: <a href="https://pan.baidu.com/s/1xi2MzcR6P7lNrQ3JItYXUQ">https://pan.baidu.com/s/1xi2MzcR6P7lNrQ3JItYXUQ</a> æå–ç : w15d<br><img src="/downloads/assets/mywnmp_qrcode.jpg" alt="äºŒç»´ç "> </p>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERLANGè§£å†³â€œè¯ä¹¦å‡ºé”™ï¼Œè¯·ç™»å½•å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°ä¸‹è½½è¯ä¹¦â€</title>
      <link href="/2020/12/04/erlang/erlang-wx-pay/"/>
      <url>/2020/12/04/erlang/erlang-wx-pay/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="è§£å†³â€œè¯ä¹¦å‡ºé”™ï¼Œè¯·ç™»å½•å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°ä¸‹è½½è¯ä¹¦â€çš„æ ¸å¿ƒä»£ç "><a href="#è§£å†³â€œè¯ä¹¦å‡ºé”™ï¼Œè¯·ç™»å½•å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°ä¸‹è½½è¯ä¹¦â€çš„æ ¸å¿ƒä»£ç " class="headerlink" title="è§£å†³â€œè¯ä¹¦å‡ºé”™ï¼Œè¯·ç™»å½•å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°ä¸‹è½½è¯ä¹¦â€çš„æ ¸å¿ƒä»£ç "></a>è§£å†³â€œè¯ä¹¦å‡ºé”™ï¼Œè¯·ç™»å½•å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°ä¸‹è½½è¯ä¹¦â€çš„æ ¸å¿ƒä»£ç </h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">request_post</span><span class="params">(Url, Path, &#123;data, Str&#125;)</span> -&gt;</span></span><br><span class="line">    ReqUrl = lists:concat([Url, Path]),</span><br><span class="line">    <span class="comment">%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></span><br><span class="line">    <span class="comment">%% ğŸ˜Šè¿™ä¸ªæ˜¯æ ¸å¿ƒçš„æ ¸å¿ƒğŸ˜Š</span></span><br><span class="line">    SSLOptions = [</span><br><span class="line">        &#123;keyfile,<span class="string">&quot;apiclient_key.pem&quot;</span>&#125;,</span><br><span class="line">        &#123;certfile,<span class="string">&quot;apiclient_cert.pem&quot;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    HTTPOptions = [&#123;ssl, SSLOptions&#125;, &#123;timeout, <span class="number">5000</span>&#125;, &#123;version, <span class="string">&quot;HTTP/1.1&quot;</span>&#125;],</span><br><span class="line">    <span class="comment">%% +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></span><br><span class="line">    Request = &#123;ReqUrl, [], <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>, iolist_to_binary(Str)&#125;,</span><br><span class="line">    httpc:request(post, Request, HTTPOptions, []).</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="ä½¿ç”¨xmerlè§£æxml"><a href="#ä½¿ç”¨xmerlè§£æxml" class="headerlink" title="ä½¿ç”¨xmerlè§£æxml"></a>ä½¿ç”¨<code>xmerl</code>è§£æxml</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">scan_str</span><span class="params">(Str)</span> -&gt;</span></span><br><span class="line">    &#123;XmlElement, _Rest&#125; = xmerl_scan:string(Str, [&#123;space, normalize&#125;]),</span><br><span class="line">    [XmlElement1] = xmerl_lib:remove_whitespace([XmlElement]),</span><br><span class="line">    XmlElement1.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">value_of</span><span class="params">(Key, #xmlElement&#123;&#125; = X)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> xmerl_xs:select(Key, X) <span class="keyword">of</span></span><br><span class="line">        [#xmlElement&#123;&#125; = Find] -&gt;</span><br><span class="line">            de_cdata(xmerl_xs:value_of(Find));</span><br><span class="line">        [] -&gt;</span><br><span class="line">            []</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"><span class="function"><span class="title">de_cdata</span><span class="params">(<span class="string">&quot;![CDATA[&quot;</span> ++ Data)</span> -&gt;</span></span><br><span class="line">    [_,_|Data1] = lists:reverse(Data),</span><br><span class="line">    unescape_str(lists:reverse(Data1));</span><br><span class="line"><span class="function"><span class="title">de_cdata</span><span class="params">(Data)</span> -&gt;</span></span><br><span class="line">    unescape_str(Data).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">unescape_str</span><span class="params">(Str)</span> -&gt;</span></span><br><span class="line">    Str1 = unicode:characters_to_binary(Str),</span><br><span class="line">    GtEsc  = re:replace(Str1, <span class="string">&quot;&amp;amp;&quot;</span>, <span class="string">&quot;\\&amp;&quot;</span>, [global]),</span><br><span class="line">    LtEsc  = re:replace(GtEsc,  <span class="string">&quot;&amp;gt;&quot;</span>,  <span class="string">&quot;&gt;&quot;</span>,   [global]),</span><br><span class="line">    AmpEsc = re:replace(LtEsc,  <span class="string">&quot;&amp;lt;&quot;</span>,  <span class="string">&quot;&lt;&quot;</span>,   [global]),</span><br><span class="line">    Text   = re:replace(AmpEsc, <span class="string">&quot;&amp;amp;&quot;</span>, <span class="string">&quot;\\&amp;&quot;</span>, [global]),</span><br><span class="line">    util:to_list(Text).</span><br></pre></td></tr></table></figure><h3 id="å°†proplistsè½¬æ¢ä¸ºxml"><a href="#å°†proplistsè½¬æ¢ä¸ºxml" class="headerlink" title="å°†proplistsè½¬æ¢ä¸ºxml"></a>å°†<code>proplists</code>è½¬æ¢ä¸ºxml</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">export_xml</span><span class="params">(List)</span> -&gt;</span></span><br><span class="line">    Fields = lists:map(</span><br><span class="line">               <span class="keyword">fun</span>(&#123;Key, Value&#125;) -&gt;</span><br><span class="line">                       &#123;Key, [], [util:to_list(Value)]&#125;</span><br><span class="line">               <span class="keyword">end</span>, List),</span><br><span class="line">    Xml = xmerl:export_simple([&#123;xml, Fields&#125;], xmerl_xml, [&#123;prolog, <span class="string">&quot;&quot;</span>&#125;]),</span><br><span class="line">    Xml.</span><br></pre></td></tr></table></figure><h3 id="ç›¸å¯¹å®Œæ•´çš„é€»è¾‘ä»£ç "><a href="#ç›¸å¯¹å®Œæ•´çš„é€»è¾‘ä»£ç " class="headerlink" title="ç›¸å¯¹å®Œæ•´çš„é€»è¾‘ä»£ç "></a>ç›¸å¯¹å®Œæ•´çš„é€»è¾‘ä»£ç </h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">notice_wx</span><span class="params">(UserName, PlayerId, Amount, OrderNum)</span> -&gt;</span></span><br><span class="line">    <span class="comment">%% æ’å…¥æ—¥å¿—</span></span><br><span class="line">    insert_extract_log(OrderNum, Amount),</span><br><span class="line"></span><br><span class="line">    Url = <span class="string">&quot;https://api.mch.weixin.qq.com/mmpaymkttransfers/promotion/transfers&quot;</span>,</span><br><span class="line"></span><br><span class="line">    MchAppId = <span class="string">&quot;wx1234567890&quot;</span>,</span><br><span class="line">    MchId = <span class="number">1234567890</span>,</span><br><span class="line">    Key = <span class="string">&quot;key1234567890&quot;</span>,</span><br><span class="line">    Desc = <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="comment">%% ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span></span><br><span class="line">    RandStr = util:rand_str(<span class="number">16</span>, <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span>),</span><br><span class="line">    DataT = [</span><br><span class="line">            &#123;mch_appid, MchAppId&#125;,</span><br><span class="line">            &#123;mchid, MchId&#125;,</span><br><span class="line">            &#123;device_info, config:server_id()&#125;,</span><br><span class="line">            &#123;nonce_str, RandStr&#125;,</span><br><span class="line">            &#123;partner_trade_no, OrderNum&#125;,</span><br><span class="line">            &#123;openid, UserName&#125;,</span><br><span class="line">            &#123;check_name, <span class="string">&quot;NO_CHECK&quot;</span>&#125;,</span><br><span class="line">            &#123;amount, Amount&#125;,</span><br><span class="line">            &#123;desc, Desc&#125;</span><br><span class="line">           ],</span><br><span class="line">    Data = lists:sort(DataT),</span><br><span class="line">    DataStrList = lists:map( </span><br><span class="line">                    <span class="keyword">fun</span>(&#123;K, V&#125;) -&gt;</span><br><span class="line">                            io_lib:format(<span class="string">&quot;~p=~s&quot;</span>, [K, util:to_list(V)])</span><br><span class="line">                    <span class="keyword">end</span>, Data),</span><br><span class="line">    DataStr1 = string:join(DataStrList, <span class="string">&quot;&amp;&quot;</span>),</span><br><span class="line">    DataStr = lists:concat([DataStr1, <span class="string">&quot;&amp;key=&quot;</span>, Key]),</span><br><span class="line">    Sign = util:md5(DataStr),</span><br><span class="line">    Data1 = [&#123;sign, util:to_upper(Sign)&#125;|Data],</span><br><span class="line">    Str = export_xml(Data1),</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% POSTè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">case</span> request_post(Url, <span class="string">&quot;&quot;</span>, &#123;data, Str&#125;) <span class="keyword">of</span></span><br><span class="line">        &#123;ok, &#123;&#123;_,<span class="number">200</span>,<span class="string">&quot;OK&quot;</span>&#125;, _, Content&#125;&#125; -&gt;</span><br><span class="line">            Xml = scan_str(Content),</span><br><span class="line">            Val = value_of(<span class="string">&quot;return_code&quot;</span>, Xml),</span><br><span class="line">            <span class="keyword">case</span> Val <span class="keyword">of</span></span><br><span class="line">                <span class="string">&quot;SUCCESS&quot;</span> -&gt; </span><br><span class="line">                    Code = value_of(<span class="string">&quot;result_code&quot;</span>, Xml),</span><br><span class="line">                    <span class="keyword">case</span> Code <span class="keyword">of</span></span><br><span class="line">                        <span class="string">&quot;SUCCESS&quot;</span> -&gt; </span><br><span class="line">                            WxPayNo = value_of(<span class="string">&quot;payment_no&quot;</span>, Xml),</span><br><span class="line">                            <span class="comment">%% æ›´æ–°æ—¥å¿—</span></span><br><span class="line">                            update_extract_log(OrderNum, WxPayNo, ?WX_REDBAT_EXTRACT_STATE_SUCC, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                        <span class="string">&quot;FAIL&quot;</span> -&gt;</span><br><span class="line">                            ErrCode = value_of(<span class="string">&quot;err_code&quot;</span>, Xml),</span><br><span class="line">                            ErrCodeDesc = value_of(<span class="string">&quot;err_code_des&quot;</span>, Xml),</span><br><span class="line">                            <span class="comment">%% æ›´æ–°æ—¥å¿—</span></span><br><span class="line">                            update_extract_log(OrderNum, <span class="string">&quot;&quot;</span>, ErrCode, ErrCodeDesc)</span><br><span class="line">                    <span class="keyword">end</span>;</span><br><span class="line">                <span class="string">&quot;FAIL&quot;</span> -&gt;</span><br><span class="line">                    Msg = value_of(<span class="string">&quot;return_msg&quot;</span>, Xml),</span><br><span class="line">                    update_extract_log(OrderNum, <span class="string">&quot;&quot;</span>, <span class="string">&quot;FAIL&quot;</span>, Msg),</span><br><span class="line">                    ?ERROR_MSG(<span class="string">&quot;return_msg: ~ts&quot;</span>, [utf8_list_to_string(Msg)])</span><br><span class="line">            <span class="keyword">end</span>;</span><br><span class="line">        Ret -&gt;</span><br><span class="line">            ?ERROR_MSG(<span class="string">&quot;ret:~p&quot;</span>, [Ret])</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">request_post</span><span class="params">(Url, Path, &#123;data, Str&#125;)</span> -&gt;</span></span><br><span class="line">    ReqUrl = lists:concat([Url, Path]),</span><br><span class="line">    SSLOptions = [</span><br><span class="line">        &#123;keyfile,<span class="string">&quot;apiclient_key.pem&quot;</span>&#125;,</span><br><span class="line">        &#123;certfile,<span class="string">&quot;apiclient_cert.pem&quot;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    HTTPOptions = [&#123;ssl, SSLOptions&#125;, &#123;timeout, <span class="number">5000</span>&#125;, &#123;version, <span class="string">&quot;HTTP/1.1&quot;</span>&#125;],</span><br><span class="line">    Request = &#123;ReqUrl, [], <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>, iolist_to_binary(Str)&#125;,</span><br><span class="line">    httpc:request(post, Request, HTTPOptions, []).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">scan_str</span><span class="params">(Str)</span> -&gt;</span></span><br><span class="line">    &#123;XmlElement, _Rest&#125; = xmerl_scan:string(Str, [&#123;space, normalize&#125;]),</span><br><span class="line">    [XmlElement1] = xmerl_lib:remove_whitespace([XmlElement]),</span><br><span class="line">    XmlElement1.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">value_of</span><span class="params">(Key, #xmlElement&#123;&#125; = X)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> xmerl_xs:select(Key, X) <span class="keyword">of</span></span><br><span class="line">        [#xmlElement&#123;&#125; = Find] -&gt;</span><br><span class="line">            de_cdata(xmerl_xs:value_of(Find));</span><br><span class="line">        [] -&gt;</span><br><span class="line">            []</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"><span class="function"><span class="title">de_cdata</span><span class="params">(<span class="string">&quot;![CDATA[&quot;</span> ++ Data)</span> -&gt;</span></span><br><span class="line">    [_,_|Data1] = lists:reverse(Data),</span><br><span class="line">    unescape_str(lists:reverse(Data1));</span><br><span class="line"><span class="function"><span class="title">de_cdata</span><span class="params">(Data)</span> -&gt;</span></span><br><span class="line">    unescape_str(Data).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">unescape_str</span><span class="params">(Str)</span> -&gt;</span></span><br><span class="line">    Str1 = unicode:characters_to_binary(Str),</span><br><span class="line">    GtEsc  = re:replace(Str1, <span class="string">&quot;&amp;amp;&quot;</span>, <span class="string">&quot;\\&amp;&quot;</span>, [global]),</span><br><span class="line">    LtEsc  = re:replace(GtEsc,  <span class="string">&quot;&amp;gt;&quot;</span>,  <span class="string">&quot;&gt;&quot;</span>,   [global]),</span><br><span class="line">    AmpEsc = re:replace(LtEsc,  <span class="string">&quot;&amp;lt;&quot;</span>,  <span class="string">&quot;&lt;&quot;</span>,   [global]),</span><br><span class="line">    Text   = re:replace(AmpEsc, <span class="string">&quot;&amp;amp;&quot;</span>, <span class="string">&quot;\\&amp;&quot;</span>, [global]),</span><br><span class="line">    util:to_list(Text).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">export_xml</span><span class="params">(List)</span> -&gt;</span></span><br><span class="line">    Fields = lists:map(</span><br><span class="line">               <span class="keyword">fun</span>(&#123;Key, Value&#125;) -&gt;</span><br><span class="line">                       &#123;Key, [], [util:to_list(Value)]&#125;</span><br><span class="line">               <span class="keyword">end</span>, List),</span><br><span class="line">    Xml = xmerl:export_simple([&#123;xml, Fields&#125;], xmerl_xml, [&#123;prolog, <span class="string">&quot;&quot;</span>&#125;]),</span><br><span class="line">    Xml.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">utf8_list_to_string</span><span class="params">(List)</span> -&gt;</span></span><br><span class="line">    unicode:characters_to_list(list_to_binary(List)).</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="https://pay.weixin.qq.com/wiki/doc/api/tools/mch_pay.php?chapter=14_2">https://pay.weixin.qq.com/wiki/doc/api/tools/mch_pay.php?chapter=14_2</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7/8è¶…ç®€å•å®‰è£…nginx-quic</title>
      <link href="/2020/11/06/centos/centos-nginx-quic/"/>
      <url>/2020/11/06/centos/centos-nginx-quic/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://hg.nginx.org/nginx-quic/shortlog/quic">nginx-quic</a>æ˜¯nginxæ­£åœ¨å¼€å‘ä¸­çš„æ”¯æŒhttp3çš„ç‰ˆæœ¬<br>ç›®å‰ç½‘ä¸Šå¤§éƒ¨åˆ†çš„æ–‡ç« éƒ½æ˜¯åŸºäºæºç ç¼–è¯‘å®‰è£…çš„<br><strong>ä½†å¯¹äºæˆ‘è¿™ç§åªæœ‰ä¸€å°åƒåœ¾æœåŠ¡å™¨çš„ç©å®¶ï¼Œæºç ç¼–è¯‘ä¸å¤ªç°å®</strong><br>æ‰¾äº†å¥½ä¹…ï¼Œç»ˆäºæ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç›´æ¥yumå®‰è£…çš„ç‰ˆæœ¬ï¼š<span id="more"></span><br><a href="https://copr.fedorainfracloud.org/coprs/ryoh/nginx-quic/">https://copr.fedorainfracloud.org/coprs/ryoh/nginx-quic/</a><br>å…¶ä»–å‘è¡Œç‰ˆå¯èƒ½è¿˜æ˜¯è¦æºç ç¼–è¯‘ã€‚ã€‚ã€‚</p><p>å®‰è£…åæ„Ÿè§‰æ˜¯è®¿é—®å˜å¿«äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯å¿ƒç†ä½œç”¨å§</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>For CentOS 7</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br><span class="line">sudo yum install centos-release-scl</span><br><span class="line">sudo yum install yum-plugin-copr</span><br><span class="line">sudo yum copr enable ryoh/nginx-quic</span><br><span class="line">sudo yum install nginx-quic</span><br></pre></td></tr></table></figure><p>For CentOS 8</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install epel-release</span><br><span class="line">sudo dnf copr enable ryoh/nginx-quic</span><br><span class="line">sudo dnf install nginx-quic</span><br></pre></td></tr></table></figure><blockquote><p>å¤‡æ³¨ï¼šnginx ä¸ nginx-quic ä¸èƒ½å…±å­˜ï¼Œæ³¨æ„å¤‡ä»½æ•°æ®</p></blockquote><p>é…ç½®ï¼š<br>åœ¨<code>server&#123;&#125;</code>ä¸­æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">listen 443 http3 reuseport;  # UDP listener for QUIC+HTTP/3</span><br><span class="line">ssl_protocols TLSv1.3; # QUIC requires TLS 1.3</span><br><span class="line">add_header Alt-Svc &#x27;$http3=&quot;:443&quot;; ma=86400&#x27;; # Advertise that QUIC is available</span><br><span class="line">add_header QUIC-Status $quic;</span><br></pre></td></tr></table></figure><h2 id="æ£€æµ‹æ˜¯å¦æˆåŠŸ"><a href="#æ£€æµ‹æ˜¯å¦æˆåŠŸ" class="headerlink" title="æ£€æµ‹æ˜¯å¦æˆåŠŸ"></a>æ£€æµ‹æ˜¯å¦æˆåŠŸ</h2><ol><li><p><a href="https://http3check.net/">https://http3check.net/</a></p></li><li><p>Firefoxå¯åŠ¨<br><code>about:config</code><br><code>network.http.http3.enabled</code>è®¾ç½®ä¸º<code>true</code><br><img src="/downloads/assets/http3.png" alt="æ•ˆæœå›¾å¦‚ä¸‹"></p></li></ol><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>1 é¦–æ¬¡å¯åŠ¨å¤±è´¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx: [emerg] cannot load certificate &quot;/etc/pki/tls/certs/localhost.crt&quot;: BIO_new_file() ...</span><br></pre></td></tr></table></figure><p>æ˜¯å› ä¸ºåœ¨<code>/etc/nginx/vhost.d/http/00-default.conf</code>æœ‰é…ç½®æœ¬åœ°ç­¾å<br>å¯ä»¥å°†å…¶æ”¹å <code>00-default.conf_bak</code> æˆ–è€…åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªè¯ä¹¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/pki/tls/private/localhost.key -out /etc/ssl/certs/localhost.crt</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://copr.fedorainfracloud.org/coprs/ryoh/nginx-quic/">https://copr.fedorainfracloud.org/coprs/ryoh/nginx-quic/</a></li><li><a href="https://serverfault.com/questions/648534/accidently-removed-localhost-crt-ssl-in-centos-6-what-can-i-do">https://serverfault.com/questions/648534/accidently-removed-localhost-crt-ssl-in-centos-6-what-can-i-do</a></li><li><a href="https://zhuanlan.zhihu.com/p/159100819">https://zhuanlan.zhihu.com/p/159100819</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsä¸‹ä½¿ç”¨å‘½ä»¤è¡Œå°†OpenSSH Keyè½¬æ¢ä¸ºppk</title>
      <link href="/2020/10/14/windows/windows-puttygen-command/"/>
      <url>/2020/10/14/windows/windows-puttygen-command/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>LINUXä¸‹å¯ä»¥é€šè¿‡å®‰è£…<code>putty-tools</code>,ä½¿ç”¨<code>puttygen</code>è½¬æ¢</p></blockquote><p><strong>Windowsä¸‹ï¼Œ<code>PUTTYGEN</code>æ˜¯ä¸æ”¯æŒä½¿ç”¨å‘½ä»¤è¡Œçš„</strong>ï¼Œå¯ä»¥ä½¿ç”¨<code>WinSCP</code>å®ç°å‘½ä»¤è¡Œä¸‹è½¬æ¢ï¼š<br><code>WinSCP.com /keygen private_key /output=vagrant.ppk /comment=vagrant</code></p><hr><p>é…åˆ<code>pageant.exe</code>ï¼Œå¯ä»¥å®ç°åœ¨vagrantä¸­å¿«é€Ÿæ·»åŠ keyï¼Œå†ä½¿ç”¨**<a href="/2019/12/26/windows/windows-kitty-winscp-mtputty/">MTPUTTY</a>**ç™»å½•è™šæ‹Ÿæœº</p><figure class="highlight bat"><figcaption><span>add_key.bat</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> &quot;WINSCP_DIR=C:\Program Files (x86)\WinSCP&quot;</span><br><span class="line">&quot;<span class="variable">%WINSCP_DIR%</span>\WinSCP.com&quot; /keygen .vagrant\machines\default\virtualbox\private_key /output=vagrant.ppk /comment=vagrant</span><br><span class="line">pageant.exe vagrant.ppk</span><br><span class="line"><span class="built_in">del</span> vagrant.ppk</span><br></pre></td></tr></table></figure><blockquote><p>å¤‡æ³¨ï¼šä½¿ç”¨<code>vagrant ssh-config</code>å¯ä»¥æŸ¥çœ‹å…·ä½“private keyæ–‡ä»¶ä½ç½®ã€sshç«¯å£ç­‰ä¿¡æ¯</p></blockquote><figure class="highlight ruby"><figcaption><span>Vagrantfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(<span class="string">&quot;2&quot;</span>) <span class="keyword">do</span> <span class="params">|config|</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">system(<span class="string">&#x27;./add_key.bat&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³Googleæœç´¢è·³è½¬åˆ°yahoo</title>
      <link href="/2020/09/17/other/other-google-search-redirect-yahoo/"/>
      <url>/2020/09/17/other/other-google-search-redirect-yahoo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸ªäººä½¿ç”¨<code>Edge Betaæµè§ˆå™¨</code><br>ä»Šå¤©ä½¿ç”¨Googleæœç´¢çš„æ—¶å€™ï¼Œä¼šè·³è½¬åˆ°yahooæœç´¢ï¼Œå¾ˆæ˜¯çƒ¦äºº<br>ä¸­é—´æœ‰ä¸ªè·³è½¬é“¾æ¥æ˜¯<code>www.coolnewtabtheme.com/...</code></p><p><del>ä¸€å¼€å§‹æœ‰æ–‡ç« è¯´åœ¨æœç´¢å¼•æ“ç®¡ç†å°†yahooçš„åˆ æ‰ï¼Œå‘ç°<strong>æ²¡ç”¨</strong></del></p><blockquote><p><strong>æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆï¼š</strong><br><strong>ç¦ç”¨æ‰€æœ‰çš„æ‰©å±•ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªå¼€å¯ï¼Œç„¶åéªŒè¯Googleæœç´¢æ˜¯å¦æ­£å¸¸</strong></p></blockquote><p>ä¸ªäººæœ€åæ’æŸ¥å‡ºæœ‰é—®é¢˜çš„æ’ä»¶ï¼š<code>TabSplit</code>ï¼Œåˆ°<code>Google Web Store</code>çœ‹äº†ä¸‹ï¼Œå·²ç»æ²¡æœ‰è¿™ä¸ªæ’ä»¶äº†<br>æ˜¯å¦ç”¨<code>Chromeæµè§ˆå™¨</code>å°±ä¸ä¼šæœ‰è¿™ç§å®‰å…¨é—®é¢˜äº†ï¼Ÿï¼Ÿï¼Ÿ</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://forum.vivaldi.net/topic/48969/google-search-switches-automatically-to-yahoo/6">https://forum.vivaldi.net/topic/48969/google-search-switches-automatically-to-yahoo/6</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zealæ·»åŠ æ–‡æ¡£çš„å†å²ç‰ˆæœ¬</title>
      <link href="/2020/08/18/other/other-zeal/"/>
      <url>/2020/08/18/other/other-zeal/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://zealdocs.org/">Zeal</a>æ˜¯æ”¯æŒè¶…å¤šè¯­è¨€çš„ç¦»çº¿æ–‡æ¡£æŸ¥çœ‹å™¨<br>é»˜è®¤åªä¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨æ—§ç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œéœ€è¦æ—§ç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œè®°å½•ä¸‹æ·»åŠ æ–¹å¼</p><span id="more"></span><p>ä»¥<code>Erlang21.2</code>ä¸ºä¾‹è®°å½•ä¸‹ï¼Œå®‰è£…æ—§ç‰ˆæœ¬çš„æ–‡æ¡£</p><h2 id="æ‰¾åˆ°ä¸‹è½½é“¾æ¥"><a href="#æ‰¾åˆ°ä¸‹è½½é“¾æ¥" class="headerlink" title="æ‰¾åˆ°ä¸‹è½½é“¾æ¥"></a>æ‰¾åˆ°ä¸‹è½½é“¾æ¥</h2><p>å…ˆä» <a href="https://github.com/Kapeli/feeds">https://github.com/Kapeli/feeds</a> æŸ¥çœ‹<code>Erlang.xml</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>23.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ios_version</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ios_version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://sanfrancisco.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://london.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://newyork.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://tokyo.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://frankfurt.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://singapore.kapeli.com/feeds/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">other-versions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>23.0<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>22.3<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>22.2<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>22.1<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>22.0<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>21.3<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>21.2<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>21.1<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">other-versions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ <a href="https://jlice.top/p/879df/">https://jlice.top/p/879df/</a> æ–‡ç« è·å¾—å†å²ç‰ˆæœ¬é“¾æ¥æ¨¡æ¿ï¼š<br><a href="http://sanfrancisco.kapeli.com/feeds/zzz/versions/%7BDocsetName%7D/%7Bversion%7D/%7BDocsetName%7D.tgz">http://sanfrancisco.kapeli.com/feeds/zzz/versions/{DocsetName}/{version}/{DocsetName}.tgz</a></p><p>æ›¿æ¢åçš„é“¾æ¥ï¼š<br><code>http://sanfrancisco.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz</code></p><h2 id="è‡ªå®šä¹‰xml"><a href="#è‡ªå®šä¹‰xml" class="headerlink" title="è‡ªå®šä¹‰xml"></a>è‡ªå®šä¹‰xml</h2><p>è‡ªå®šä¹‰xmlæ–‡ä»¶åå­—ï¼š<code>Erlang21.2.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>21.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ios_version</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ios_version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://sanfrancisco.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://london.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://newyork.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://tokyo.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://frankfurt.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://singapore.kapeli.com/feeds/zzz/versions/Erlang/21.2/Erlang.tgz<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">other-versions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">other-versions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>Add Feed</code>æ·»åŠ é“¾æ¥<code>file:///E:/web/zeal/Erlang21.2.xml</code></p><blockquote><p>E:/web/zeal/Erlang21.2.xml æ˜¯ xmlçš„è·¯å¾„</p></blockquote><h2 id="ä¿®æ”¹æœç´¢åå­—"><a href="#ä¿®æ”¹æœç´¢åå­—" class="headerlink" title="ä¿®æ”¹æœç´¢åå­—"></a>ä¿®æ”¹æœç´¢åå­—</h2><p>åœ¨zealå®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°<code>docsets/Erlang21.2.docset/Contents/Info.plist</code>æ–‡ä»¶ï¼Œå°†<code>erlang</code>ä¿®æ”¹ä¸º<code>erlang21</code><br>é‡å¯åå°±å¯ä»¥ä½¿ç”¨<code>erlang21: lists:seq</code>æŸ¥è¯¢æ–‡æ¡£äº†</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://jlice.top/p/879df/">https://jlice.top/p/879df/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>powershellå®ç°çš„è‚¡ç¥¨æŸ¥çœ‹å°å·¥å…·</title>
      <link href="/2020/06/05/windows/window-powershell-stock/"/>
      <url>/2020/06/05/windows/window-powershell-stock/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/downloads/code/stock/stock.gif" alt="æ•ˆæœå±•ç¤º"></p><span id="more"></span><p>åŒ…æ‹¬é…ç½®æ–‡ä»¶(<a href="/downloads/code/stock/stock.json">stock.json</a>)å’Œä»£ç (<a href="/downloads/code/stock/stock.ps1">stock.ps1</a>)</p><blockquote><p><font color=darkred>å¤‡æ³¨: ä¸‹è½½åå°†ä¸¤ä¸ªæ–‡ä»¶çš„ç¼–ç ä¿®æ”¹ä¸ºGBK(CP936)</font></p></blockquote><p>ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç :</p><figure class="highlight json"><figcaption><span>é…ç½®æ–‡ä»¶</span><a href="/downloads/code/stock/stock.json">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">&quot;comment_stock_list&quot;</span>: <span class="string">&quot;è‚¡ç¥¨ä»£ç ,è‹¥ä¸æ˜¯å¾ˆæ¸…æ¥š,ä½¿ç”¨http://hq.sinajs.cn/list=sh000001çœ‹ä¸‹æ˜¯å¦æœ‰è¿”å›&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;stock_list&quot;</span>: [</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz002548&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;é‡‘æ–°å†œ&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sh603005&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;æ™¶æ–¹ç§‘æŠ€&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz000725&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;äº¬ä¸œæ–¹A&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sh601012&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;éš†åŸºè‚¡ä»½&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz300722&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;æ–°ä½™å›½ç§‘&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz300564&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ç­‘åšè®¾è®¡&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz000708&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ä¸­ä¿¡ç‰¹é’¢&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz002625&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;å…‰å¯æŠ€æœ¯&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz002230&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ç§‘å¤§è®¯é£&quot;</span>},</span><br><span class="line">        {<span class="attr">&quot;stock_id&quot;</span>: <span class="string">&quot;sz002156&quot;</span>, <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;é€šå¯Œå¾®ç”µ&quot;</span>}</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;comment_refresh_time&quot;</span>: <span class="string">&quot;åˆ·æ–°æ—¶é—´&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;refresh_time&quot;</span>: <span class="number">10</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><figcaption><span>ä»£ç </span><a href="/downloads/code/stock/stock.ps1">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä½¿ç”¨powershellæŸ¥çœ‹è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">## kingwen0302@msn.com</span></span><br><span class="line"><span class="comment">## www.mingilin.com</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$cfgPath</span> = <span class="built_in">Join-Path</span> <span class="variable">$PSScriptRoot</span> <span class="string">&quot;stock.json&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStockCode</span><span class="params">()</span></span> {</span><br><span class="line">    <span class="variable">$json</span> = <span class="built_in">Get-Content</span> <span class="variable">$cfgPath</span> | <span class="built_in">ConvertFrom-Json</span></span><br><span class="line">    <span class="variable">$json</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">## -1: è‚¡ç¥¨ä»£ç ;</span></span><br><span class="line"><span class="comment">## 0:&quot;å¤§ç§¦é“è·¯&quot;,è‚¡ç¥¨åå­—;</span></span><br><span class="line"><span class="comment">## 1:&quot;27.55&quot;,ä»Šæ—¥å¼€ç›˜ä»·;</span></span><br><span class="line"><span class="comment">## 2:&quot;27.25&quot;,æ˜¨æ—¥æ”¶ç›˜ä»·;</span></span><br><span class="line"><span class="comment">## 3:&quot;26.91&quot;,å½“å‰ä»·æ ¼;</span></span><br><span class="line"><span class="comment">## 4:&quot;27.55&quot;,ä»Šæ—¥æœ€é«˜ä»·;</span></span><br><span class="line"><span class="comment">## 5:&quot;26.20&quot;,ä»Šæ—¥æœ€ä½ä»·;</span></span><br><span class="line"><span class="comment">## 6:&quot;26.91&quot;,ç«ä¹°ä»·,å³â€œä¹°ä¸€&quot;æŠ¥ä»·;</span></span><br><span class="line"><span class="comment">## 7:&quot;26.92&quot;,ç«å–ä»·,å³â€œå–ä¸€&quot;æŠ¥ä»·;</span></span><br><span class="line"><span class="comment">## 8:&quot;22114263&quot;,æˆäº¤çš„è‚¡ç¥¨æ•°,ç”±äºè‚¡ç¥¨äº¤æ˜“ä»¥ä¸€ç™¾è‚¡ä¸ºåŸºæœ¬å•ä½,æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶,é€šå¸¸æŠŠè¯¥å€¼é™¤ä»¥ä¸€ç™¾;</span></span><br><span class="line"><span class="comment">## 9:&quot;589824680&quot;,æˆäº¤é‡‘é¢,å•ä½ä¸ºâ€œå…ƒ&quot;,ä¸ºäº†ä¸€ç›®äº†ç„¶,é€šå¸¸ä»¥â€œä¸‡å…ƒ&quot;ä¸ºæˆäº¤é‡‘é¢çš„å•ä½,æ‰€ä»¥é€šå¸¸æŠŠè¯¥å€¼é™¤ä»¥ä¸€ä¸‡;</span></span><br><span class="line"><span class="comment">## 10:&quot;4695&quot;,â€œä¹°ä¸€&quot;ç”³è¯·4695è‚¡,å³47æ‰‹;</span></span><br><span class="line"><span class="comment">## 11:&quot;26.91&quot;,â€œä¹°ä¸€&quot;æŠ¥ä»·;</span></span><br><span class="line"><span class="comment">## 12:&quot;57590&quot;,â€œä¹°äºŒ&quot;</span></span><br><span class="line"><span class="comment">## 13:&quot;26.90&quot;,â€œä¹°äºŒ&quot;</span></span><br><span class="line"><span class="comment">## 14:&quot;14700&quot;,â€œä¹°ä¸‰&quot;</span></span><br><span class="line"><span class="comment">## 15:&quot;26.89&quot;,â€œä¹°ä¸‰&quot;</span></span><br><span class="line"><span class="comment">## 16:&quot;14300&quot;,â€œä¹°å››&quot;</span></span><br><span class="line"><span class="comment">## 17:&quot;26.88&quot;,â€œä¹°å››&quot;</span></span><br><span class="line"><span class="comment">## 18:&quot;15100&quot;,â€œä¹°äº”&quot;</span></span><br><span class="line"><span class="comment">## 19:&quot;26.87&quot;,â€œä¹°äº”&quot;</span></span><br><span class="line"><span class="comment">## 20:&quot;3100&quot;,â€œå–ä¸€&quot;ç”³æŠ¥3100è‚¡,å³31æ‰‹;</span></span><br><span class="line"><span class="comment">## 21:&quot;26.92&quot;,â€œå–ä¸€&quot;æŠ¥ä»·</span></span><br><span class="line"><span class="comment">## (22, 23), (24, 25), (26,27), (28, 29)åˆ†åˆ«ä¸ºâ€œå–äºŒ&quot;è‡³â€œå–å››çš„æƒ…å†µ&quot;</span></span><br><span class="line"><span class="comment">## 30:&quot;2008-01-11&quot;,æ—¥æœŸ;</span></span><br><span class="line"><span class="comment">## 31:&quot;15:05:32&quot;,æ—¶é—´;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowOne</span><span class="params">([string]<span class="variable">$content</span>)</span></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$content</span> <span class="operator">-match</span> <span class="string">&quot;^\n<span class="variable">$</span>&quot;</span>) {</span><br><span class="line">    } <span class="keyword">else</span>{</span><br><span class="line">        <span class="variable">$str_splits</span> = <span class="variable">$content</span>.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        <span class="variable">$stockName</span> = <span class="variable">$str_splits</span>[<span class="number">0</span>].split(<span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable">$myStockId</span> = <span class="variable">$stockName</span>[<span class="number">0</span>].Split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>].Split(<span class="string">&#x27;_&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">        <span class="variable">$myStock</span> = <span class="variable">$stockName</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="variable">$lastPrice</span> = <span class="variable">$str_splits</span>[<span class="number">2</span>]</span><br><span class="line">        <span class="variable">$nowPrice</span> = <span class="variable">$str_splits</span>[<span class="number">3</span>]</span><br><span class="line">        <span class="variable">$higePrice</span> = <span class="variable">$str_splits</span>[<span class="number">4</span>]</span><br><span class="line">        <span class="variable">$lowPrice</span>= <span class="variable">$str_splits</span>[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">        <span class="variable">$exchange</span> = (<span class="variable">$str_splits</span>[<span class="number">9</span>] / <span class="number">10000</span>) <span class="operator">-as</span> [<span class="built_in">int</span>]</span><br><span class="line"></span><br><span class="line">        <span class="variable">$buy1Count</span> = (<span class="variable">$str_splits</span>[<span class="number">10</span>] / <span class="number">100</span>) <span class="operator">-as</span> [<span class="built_in">int</span>]</span><br><span class="line">        <span class="variable">$buy1Price</span> = <span class="variable">$str_splits</span>[<span class="number">11</span>]</span><br><span class="line">        <span class="variable">$sale1Count</span> = (<span class="variable">$str_splits</span>[<span class="number">20</span>] / <span class="number">100</span>) <span class="operator">-as</span> [<span class="built_in">int</span>]</span><br><span class="line">        <span class="variable">$sale1Price</span> = <span class="variable">$str_splits</span>[<span class="number">21</span>]</span><br><span class="line"></span><br><span class="line"><span class="variable">$diffPrice</span> = <span class="variable">$nowPrice</span> - <span class="variable">$lastPrice</span></span><br><span class="line">        <span class="variable">$priceP</span> = <span class="variable">$diffPrice</span> / <span class="variable">$lastPrice</span></span><br><span class="line"><span class="comment">#        [double] $a=&quot;{0:0.####}&quot; -f $priceP</span></span><br><span class="line"><span class="comment">#        $b=&quot;{0:p2}&quot; -f $a</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$b</span> = <span class="string">&quot;{0:p2}&quot;</span> <span class="operator">-f</span> <span class="variable">$priceP</span></span><br><span class="line">        <span class="variable">$dp</span>=<span class="string">&quot;{0:0.####}&quot;</span> <span class="operator">-f</span> <span class="variable">$diffPrice</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>([<span class="type">convert</span>]::ToDouble(<span class="variable">$lastPrice</span>) <span class="operator">-gt</span> [<span class="type">convert</span>]::ToDouble(<span class="variable">$nowPrice</span>) ) {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Green&quot;</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Red&quot;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>([<span class="type">convert</span>]::ToDouble(<span class="variable">$sale1Count</span>) <span class="operator">-gt</span> [<span class="type">convert</span>]::ToDouble(<span class="variable">$buy1Count</span>)) {</span><br><span class="line">            <span class="variable">$saleColor</span> = <span class="string">&quot;DarkGreen&quot;</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$saleColor</span> = <span class="string">&quot;DarkRed&quot;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> (<span class="string">&quot;<span class="variable">$myStockId</span>&quot;</span>.PadRight(<span class="number">10</span>))</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;<span class="variable">$myStock</span>`t&quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;N<span class="variable">$nowPrice</span>&quot;</span>.PadRight(<span class="number">10</span>) <span class="string">&quot;(&quot;</span> <span class="string">&quot;<span class="variable">$dp</span>&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;<span class="variable">$b</span>&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;) &quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;H<span class="variable">$higePrice</span>&quot;</span>.PadRight(<span class="number">10</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;L<span class="variable">$lowPrice</span>&quot;</span>.PadRight(<span class="number">10</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-BackgroundColor</span> <span class="variable">$saleColor</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;S<span class="variable">$sale1Price</span> (<span class="variable">$sale1Count</span>)&quot;</span>.PadRight(<span class="number">20</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-BackgroundColor</span> <span class="variable">$saleColor</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;B<span class="variable">$buy1Price</span> (<span class="variable">$buy1Count</span>)&quot;</span>.PadRight(<span class="number">20</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> (<span class="string">&quot;E<span class="variable">$exchange</span>&quot;</span>).PadRight(<span class="number">6</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowOne2</span><span class="params">([string]<span class="variable">$content</span>)</span></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$content</span> <span class="operator">-match</span> <span class="string">&quot;^\n<span class="variable">$</span>&quot;</span>)</span><br><span class="line">    {</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="variable">$str_splits</span> = <span class="variable">$content</span>.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        <span class="variable">$stockName</span> = <span class="variable">$str_splits</span>[<span class="number">0</span>].split(<span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line">        <span class="variable">$myStockId</span> = <span class="variable">$stockName</span>[<span class="number">0</span>].Split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>].Split(<span class="string">&#x27;_&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">        <span class="variable">$myStock</span> = <span class="variable">$stockName</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="variable">$nowPrice</span> = <span class="variable">$str_splits</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="variable">$ricePrice</span> = <span class="variable">$str_splits</span>[<span class="number">2</span>]</span><br><span class="line">        <span class="variable">$ricePriceP</span> = <span class="variable">$str_splits</span>[<span class="number">3</span>]</span><br><span class="line">        <span class="variable">$mon</span>=<span class="variable">$str_splits</span>[<span class="number">5</span>].Replace(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$ricePrice</span> <span class="operator">-match</span> <span class="string">&#x27;^-&#x27;</span>) {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Green&quot;</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Red&quot;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> (<span class="string">&quot;<span class="variable">$myStockId</span>&quot;</span>.PadRight(<span class="number">10</span>))</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;<span class="variable">$myStock</span>`t&quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;N<span class="variable">$nowPrice</span>&quot;</span>.PadRight(<span class="number">10</span>) <span class="string">&quot;(&quot;</span> <span class="string">&quot;<span class="variable">$ricePrice</span>&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;<span class="variable">$ricePriceP</span>%&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;) &quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> (<span class="string">&quot;M<span class="variable">$mon</span>&quot;</span>.PadRight(<span class="number">20</span>))</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowOne4</span><span class="params">([string]<span class="variable">$content</span>)</span></span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$content</span> <span class="operator">-match</span> <span class="string">&quot;^\n<span class="variable">$</span>&quot;</span>)</span><br><span class="line">    {</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="variable">$str_splits</span> = <span class="variable">$content</span>.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        <span class="variable">$stockName</span> = <span class="variable">$str_splits</span>[<span class="number">0</span>].split(<span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line">        <span class="variable">$myStockId</span> = <span class="variable">$stockName</span>[<span class="number">0</span>].Split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>].Split(<span class="string">&#x27;_&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line">        <span class="variable">$myStock</span> = <span class="variable">$stockName</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="variable">$nowPrice</span> = <span class="variable">$str_splits</span>[<span class="number">1</span>]</span><br><span class="line">        <span class="variable">$ricePrice</span> = <span class="variable">$str_splits</span>[<span class="number">2</span>]</span><br><span class="line">        <span class="variable">$ricePriceP</span> = <span class="variable">$str_splits</span>[<span class="number">3</span>].Replace(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$ricePrice</span> <span class="operator">-match</span> <span class="string">&#x27;^-&#x27;</span>) {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Green&quot;</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="variable">$myColor</span>=<span class="string">&quot;Red&quot;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> (<span class="string">&quot;<span class="variable">$myStockId</span>&quot;</span>.PadRight(<span class="number">10</span>))</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;<span class="variable">$myStock</span>`t&quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="literal">-NoNewline</span> <span class="literal">-ForegroundColor</span> <span class="variable">$myColor</span> <span class="string">&quot;N<span class="variable">$nowPrice</span>&quot;</span>.PadRight(<span class="number">10</span>) <span class="string">&quot;(&quot;</span> <span class="string">&quot;<span class="variable">$ricePrice</span>&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;<span class="variable">$ricePriceP</span>%&quot;</span>.PadLeft(<span class="number">8</span>) <span class="string">&quot;) &quot;</span></span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowOne3</span><span class="params">(<span class="variable">$stockCode</span>)</span></span> {</span><br><span class="line"></span><br><span class="line">    <span class="variable">$date</span> = <span class="built_in">Get-Date</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="literal">-BackgroundColor</span> Blue <span class="string">&quot;é…ç½®æ–‡ä»¶: <span class="variable">$cfgPath</span>&quot;</span></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="literal">-BackgroundColor</span> DarkRed <span class="string">&quot;åˆ·æ–°æ—¶é—´: <span class="variable">$date</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;=&quot;</span>*<span class="number">130</span></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="literal">-ForegroundColor</span> Yellow <span class="string">&quot;N-å½“å‰ä»·æ ¼; H-ä»Šæ—¥æœ€é«˜ä»·æ ¼; L-ä»Šæ—¥æœ€ä½ä»·æ ¼ B-ä¹°1ä»·æ ¼,ä¹°1æ•°é‡ S-å–1ä»·æ ¼,å–1æ•°é‡ E-äº¤æ˜“é‡‘é¢(ä¸‡å…ƒ)&quot;</span></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="built_in">Write-Host</span> <span class="literal">-BackgroundColor</span> DarkRed <span class="string">&quot;`t`t`t`t`t`t`t`tPOWERED BY kingwen0302@msn.com(https://www.mingilin.com)&quot;</span></span><br><span class="line">    <span class="string">&quot;-&quot;</span>*<span class="number">130</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## æ˜¾ç¤ºæŒ‡æ•°</span></span><br><span class="line">    <span class="variable">$sourceURL</span> = <span class="string">&quot;http://hq.sinajs.cn/list=s_sh000001,s_sz399001&quot;</span></span><br><span class="line">    <span class="variable">$wc</span> = <span class="built_in">New-Object</span> system.net.webclient</span><br><span class="line">    <span class="variable">$content</span> = <span class="variable">$wc</span>.downloadstring(<span class="variable">$sourceURL</span>)</span><br><span class="line">    <span class="variable">$content</span>.Split(<span class="string">&#x27;;&#x27;</span>) | <span class="built_in">ForEach-Object</span> {ShowOne2 <span class="variable">$_</span> }</span><br><span class="line"></span><br><span class="line">    <span class="comment">## æ˜¾ç¤ºå›½å¤–æŒ‡æ•°</span></span><br><span class="line">    <span class="comment">## $sourceURL = &quot;http://hq.sinajs.cn/list=int_dji,int_nasdaq,int_hangseng,int_nikkei,b_TWSE,b_FSSTI&quot;</span></span><br><span class="line">    <span class="comment">## $wc = New-Object system.net.webclient</span></span><br><span class="line">    <span class="comment">## $content = $wc.downloadstring($sourceURL)</span></span><br><span class="line">    <span class="comment">## $content.Split(&#x27;;&#x27;) | ForEach-Object {ShowOne4 $_ }</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;-&quot;</span>*<span class="number">130</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## æ˜¾ç¤ºä¸ªè‚¡</span></span><br><span class="line">    <span class="variable">$sourceURL</span> = <span class="string">&quot;http://hq.sinajs.cn/list=<span class="variable">$stockCode</span>&quot;</span></span><br><span class="line">    <span class="variable">$wc</span> = <span class="built_in">New-Object</span> system.net.webclient</span><br><span class="line">    <span class="variable">$content</span> = <span class="variable">$wc</span>.downloadstring(<span class="variable">$sourceURL</span>)</span><br><span class="line">    <span class="variable">$content</span>.Split(<span class="string">&#x27;;&#x27;</span>) | <span class="built_in">ForEach-Object</span> {ShowOne <span class="variable">$_</span> }</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;=&quot;</span>*<span class="number">130</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) {</span><br><span class="line">    <span class="built_in">Clear-Host</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$json</span> = loadStockCode</span><br><span class="line"></span><br><span class="line">    <span class="variable">$stockCode</span> = <span class="variable">$json</span>.stock_list | <span class="built_in">ForEach-Object</span> {<span class="variable">$_</span>.stock_id}</span><br><span class="line">    <span class="variable">$stockCode</span> = <span class="variable">$stockCode</span> <span class="operator">-Join</span> <span class="string">&quot;,&quot;</span></span><br><span class="line">    ShowOne3 <span class="variable">$stockCode</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$refreshTime</span> = <span class="variable">$json</span>.refresh_time</span><br><span class="line">    <span class="built_in">Start-Sleep</span> <span class="variable">$refreshTime</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ç§å¼€æºç½‘ç›˜æ•´ç†</title>
      <link href="/2020/03/13/centos/centos-filemanager-list/"/>
      <url>/2020/03/13/centos/centos-filemanager-list/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è®°å½•ä¸‹è‡ªå·±ä½¿ç”¨è¿‡çš„å¼€æºç½‘ç›˜: <code>KODExplorer</code>,<code>NextCloud</code></p></blockquote><span id="more"></span><h2 id="KODExplorer"><a href="#KODExplorer" class="headerlink" title="KODExplorer"></a>KODExplorer</h2><p>èŠ’æœäº‘æ˜¯ä¸€ä¸ªå¼€æºç½‘ç›˜,æ”¯æŒåœ¨çº¿ç¼–è¾‘å’Œé¢„è§ˆæ–‡ä»¶, ä»˜è´¹ç‰ˆåŠŸèƒ½æ›´å¤š, è¯¥ç½‘ç›˜ä¸éœ€è¦æ•°æ®åº“æ”¯æŒ<br><a href="http://kodcloud.com/index.html">http://kodcloud.com/index.html</a></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum install -y http://rpms.remirepo.net/enterprise/remi-release-7.rpm</span><br><span class="line">yum install -y php72 php72-php-fpm nginx php72-php-mbstring php72-php-gd httpd-tools</span><br><span class="line">systemctl enable nginx</span><br><span class="line">systemctl enable php72-php-fpm</span><br><span class="line">systemctl start nginx</span><br><span class="line">systemctl start php72-php-fpm</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä¸‹è½½æºç </span></span></span><br><span class="line">git clone https://github.com/kalcaddle/KODExplorer.git</span><br><span class="line">chmod -Rf 777 ./KODExplorer/*</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># è¿™ä¸ªä¸€æ­¥ä¸€å®šè¦, å¦åˆ™ä¼šæç¤ºæƒé™ä¸è¶³</span></span></span><br><span class="line">chmod 777 ./KODExplorer</span><br></pre></td></tr></table></figure><h3 id="NGINX-é…ç½®"><a href="#NGINX-é…ç½®" class="headerlink" title="NGINX é…ç½®"></a>NGINX é…ç½®</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å…¶ä»–é…ç½®...</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">charset</span> utf8;</span><br><span class="line">        <span class="attribute">root</span>   /data/KODExplorer;</span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line">        <span class="attribute">autoindex</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">autoindex_exact_size</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">autoindex_localtime</span> <span class="literal">on</span>;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">         <span class="attribute">root</span>           /data/KODExplorer;</span><br><span class="line">         <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">         <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">         <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">         <span class="attribute">fastcgi_connect_timeout</span> <span class="number">75</span>;</span><br><span class="line">         <span class="attribute">fastcgi_read_timeout</span> <span class="number">1200</span>;</span><br><span class="line">         <span class="attribute">fastcgi_send_timeout</span> <span class="number">1200</span>;</span><br><span class="line">         <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">## å…¶ä»–é…ç½®...</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> /filemanager/ &#123;</span><br><span class="line">        <span class="attribute">root</span> /data/web;</span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line">        <span class="attribute">location</span> ~\.php$ &#123;</span><br><span class="line">            <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">            <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">            <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">            <span class="attribute">fastcgi_connect_timeout</span> <span class="number">75</span>; </span><br><span class="line">            <span class="attribute">fastcgi_read_timeout</span> <span class="number">1200</span>;</span><br><span class="line">            <span class="attribute">fastcgi_send_timeout</span> <span class="number">1200</span>;</span><br><span class="line">            <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ä¸è¦æŠ˜è…¾aliasäº†,å¤ªéº»çƒ¦äº†,ç›´æ¥rootå°±å¯ä»¥äº†<br>rootè¦æ±‚æºç ç›®å½•åœ°å€æ˜¯/data/web/filemanager/</p></blockquote><h2 id="NextCloud"><a href="#NextCloud" class="headerlink" title="NextCloud"></a>NextCloud</h2><p><a href="https://nextcloud.com/">NextCloud</a>æ˜¯å›½å¤–çš„ä¸€æ¬¾å¼€æºç½‘ç›˜ï¼Œç›¸è¾ƒäº<a href="http://kodcloud.com/">èŠ’æœäº‘</a>ï¼Œä¸ªäººæ„Ÿè§‰æ˜¯å®¢æˆ·ç«¯æ¯”è¾ƒå®Œå–„ã€‚ä½†æ˜¯ï¼Œè¦æ±‚æœåŠ¡å™¨åé«˜ï¼Œæ— å¥ˆæ”¾å¼ƒã€‚</p><!-- more --><h3 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h3><ul><li><code>PHP5.6</code>ï¼ˆ<a href="https://www.mingilin.com/2017/09/29/centos/centos-php56/">å®‰è£…æ–¹å¼</a>ï¼‰<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">rpm -qa | grep php</span></span><br><span class="line">php71w-pdo-7.1.10-1.w6.i386</span><br><span class="line">php71w-opcache-7.1.10-1.w6.i386</span><br><span class="line">mod_php71w-7.1.10-1.w6.i386</span><br><span class="line">php71w-mysql-7.1.10-1.w6.i386</span><br><span class="line">php71w-gd-7.1.10-1.w6.i386</span><br><span class="line">php71w-common-7.1.10-1.w6.i386</span><br><span class="line">php71w-fpm-7.1.10-1.w6.i386</span><br><span class="line">php71w-xml-7.1.10-1.w6.i386</span><br><span class="line">php71w-cli-7.1.10-1.w6.i386</span><br><span class="line">php71w-mbstring-7.1.10-1.w6.i386</span><br></pre></td></tr></table></figure></li><li><code>MYSQL</code>ï¼ˆå¯é€‰ï¼‰</li></ul><h3 id="NGINX-é…ç½®-1"><a href="#NGINX-é…ç½®-1" class="headerlink" title="NGINX é…ç½®"></a>NGINX é…ç½®</h3><figure class="highlight nginx"><figcaption><span>nextcloudé…ç½®å¤‡ä»½</span><a href="/downloads/code/nextcloud.web.mingilin.com.conf_bak">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> php-handler {</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">    <span class="comment">#server unix:/var/run/php5-fpm.sock;</span></span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> nextcloud.web.mingilin.com;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Add headers to serve security related headers</span></span><br><span class="line">    <span class="comment"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></span><br><span class="line">    <span class="attribute">add_header</span> Strict-Transport-Security <span class="string">&quot;max-age=15552000; includeSubDomains&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-Content-Type-Options nosniff;</span><br><span class="line">    <span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-Robots-Tag <span class="literal">none</span>;</span><br><span class="line">    <span class="attribute">add_header</span> X-Download-Options noopen;</span><br><span class="line">    <span class="attribute">add_header</span> X-Permitted-Cross-Domain-Policies <span class="literal">none</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Path to the root of your installation</span></span><br><span class="line">    <span class="attribute">root</span> /data/nextcloud/nextcloud;</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> = /robots.txt {</span><br><span class="line">        <span class="attribute">allow</span> all;</span><br><span class="line">        <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># The following 2 rules are only needed for the user_webfinger app.</span></span><br><span class="line">    <span class="comment"># Uncomment it if you&#x27;re planning to use this app.</span></span><br><span class="line">    <span class="comment">#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span></span><br><span class="line">    <span class="comment">#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;</span></span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> = /.well-known/carddav {</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> $scheme://$host/remote.php/dav;</span><br><span class="line">    }</span><br><span class="line">    <span class="attribute">location</span> = /.well-known/caldav {</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> $scheme://$host/remote.php/dav;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> /.well-known/acme-challenge { }</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># set max upload size</span></span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">512M</span>;</span><br><span class="line">    <span class="attribute">fastcgi_buffers</span> <span class="number">64</span> <span class="number">4K</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Disable gzip to avoid the removal of the ETag header</span></span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">off</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Uncomment if your server is build with the ngx_pagespeed module</span></span><br><span class="line">    <span class="comment"># This module is currently not supported.</span></span><br><span class="line">    <span class="comment">#pagespeed off;</span></span><br><span class="line"> </span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">403</span> /core/templates/<span class="number">403</span>.php;</span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">404</span> /core/templates/<span class="number">404</span>.php;</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> / {</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^</span> /index.php$uri;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/</span> {</span><br><span class="line">        <span class="attribute">return</span> <span class="number">404</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ ^/(?:\.|autotest|occ|issue|indie|db_|console)</span> {</span><br><span class="line">        <span class="attribute">return</span> <span class="number">404</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\.php(?:$|/)</span> {</span><br><span class="line">        <span class="attribute">fastcgi_split_path_info</span><span class="regexp"> ^(.+\.php)(/.*)$</span>;</span><br><span class="line">        <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">        <span class="attribute">fastcgi_param</span> SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">        <span class="attribute">fastcgi_param</span> PATH_INFO $fastcgi_path_info;</span><br><span class="line">        <span class="attribute">fastcgi_param</span> HTTPS <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">fastcgi_param</span> modHeadersAvailable <span class="literal">true</span>; <span class="comment">#Avoid sending the security headers twice</span></span><br><span class="line">        <span class="attribute">fastcgi_param</span> front_controller_active <span class="literal">true</span>;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> php-handler;</span><br><span class="line">        <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">fastcgi_request_buffering</span> <span class="literal">off</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ ^/(?:updater|ocs-provider)(?:$|/)</span> {</span><br><span class="line">        <span class="attribute">try_files</span> $uri $uri/ =<span class="number">404</span>;</span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Adding the cache control header for js and css files</span></span><br><span class="line">    <span class="comment"># Make sure it is BELOW the PHP block</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~* \.(?:css|js)$</span> {</span><br><span class="line">        <span class="attribute">try_files</span> $uri /index.php$uri$is_args$args;</span><br><span class="line">        <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;public, max-age=7200&quot;</span>;</span><br><span class="line">        <span class="comment"># Add headers to serve security related headers (It is intended to have those duplicated to the ones above)</span></span><br><span class="line">        <span class="comment"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></span><br><span class="line">        <span class="comment">#add_header Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;;</span></span><br><span class="line">        <span class="attribute">add_header</span> X-Content-Type-Options nosniff;</span><br><span class="line">        <span class="attribute">add_header</span> X-Frame-Options <span class="string">&quot;SAMEORIGIN&quot;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> X-XSS-Protection <span class="string">&quot;1; mode=block&quot;</span>;</span><br><span class="line">        <span class="attribute">add_header</span> X-Robots-Tag <span class="literal">none</span>;</span><br><span class="line">        <span class="attribute">add_header</span> X-Download-Options noopen;</span><br><span class="line">        <span class="attribute">add_header</span> X-Permitted-Cross-Domain-Policies <span class="literal">none</span>;</span><br><span class="line">        <span class="comment"># Optional: Don&#x27;t log access to assets</span></span><br><span class="line">        <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~* \.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg)$</span> {</span><br><span class="line">        <span class="attribute">try_files</span> $uri /index.php$uri$is_args$args;</span><br><span class="line">        <span class="comment"># Optional: Don&#x27;t log access to other assets</span></span><br><span class="line">        <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl; <span class="comment"># managed by Certbot</span></span><br><span class="line"><span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/mingilin.com/fullchain.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line"><span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/mingilin.com/privkey.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">    <span class="attribute">include</span> /etc/letsencrypt/options-ssl-nginx.conf; <span class="comment"># managed by Certbot</span></span><br><span class="line">    <span class="attribute">ssl_dhparam</span> /etc/letsencrypt/ssl-dhparams.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="attribute">if</span> ($scheme != <span class="string">&quot;https&quot;</span>) {</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> https://$host$request_uri;</span><br><span class="line">    } <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®å¯¼å…¥"><a href="#æ•°æ®å¯¼å…¥" class="headerlink" title="æ•°æ®å¯¼å…¥"></a>æ•°æ®å¯¼å…¥</h3><ul><li>å®‰è£…<code>davfs</code><br>  éœ€è¦yumæº<a href="https://www.mingilin.com/2016/03/10/centos/centos-yum/">rpmforge</a>, ç„¶å<code>yum install davfs2</code></li><li>æŒ‚åœ¨åˆ°æœ¬åœ°<br>  <code>mount -t davfs https://nextcloud.web.mingilin.com/remote.php/webdav/ /root/ttt -o username=ä½ çš„ç”¨æˆ·å</code></li><li>åœ¨<code>/root/ttt</code>ç›®å½•ä¸‹å¢åˆ æ–‡ä»¶</li></ul><h3 id="å·²çŸ¥é—®é¢˜"><a href="#å·²çŸ¥é—®é¢˜" class="headerlink" title="å·²çŸ¥é—®é¢˜"></a>å·²çŸ¥é—®é¢˜</h3><p><code>nextcloud</code>ä½¿ç”¨é‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li><em><strong>æœåŠ¡å™¨è¦æ±‚åé«˜ï¼Œåœ¨512Mçš„æœºå™¨ä¸Šç©ä¸è½¬ï¼Œè´Ÿè½½é«˜çš„å“äºº</strong></em></li><li>è¦æ±‚æ•°æ®åº“æ”¯æŒ</li><li>æ‰‹åŠ¨ä¿®æ”¹ç”¨æˆ·æ–‡ä»¶ä¸ç”Ÿæ•ˆï¼Œè¿™ä¸ª<code>KODExplorer</code>å°±å¾ˆå¥½ç”¨äº†</li></ol><p>å› ä¸ºç¬¬ä¸€ç‚¹ï¼Œæ— å¥ˆåªèƒ½æ”¾å¼ƒä½¿ç”¨ï¼Œè™½ç„¶å®¢æˆ·ç«¯ç¡®å®å¾ˆå®Œå–„ï¼Œæœ‰æ¡ä»¶çš„åŒå­¦å¯ä»¥è¯•ä¸‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> å¼€æºç½‘ç›˜ </tag>
            
            <tag> KODExplorer </tag>
            
            <tag> NextCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ç§å¸¸ç”¨git server</title>
      <link href="/2020/03/13/centos/centos-gitserver-list/"/>
      <url>/2020/03/13/centos/centos-gitserver-list/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è®°å½•ä¸‹è‡ªå·±ç”¨è¿‡çš„å‡ ç§<code>git server</code>:<code>GITEA</code>,<code>gitolite3</code>,<code>Gidder/Gitrepo</code></p></blockquote><span id="more"></span><h2 id="GITEA"><a href="#GITEA" class="headerlink" title="GITEA"></a>GITEA</h2><blockquote><p>ç°åœ¨æ­£åœ¨ç”¨,ç®€å•æ–¹ä¾¿,åŸºæœ¬çš„åŠŸèƒ½éƒ½æœ‰äº†</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## install docker</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">yum install -y docker-ce</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="comment">## gitea</span></span><br><span class="line">docker pull gitea/gitea:latest</span><br><span class="line">mkdir -p /data/gitea</span><br><span class="line">docker run -d --name=gitea -p 2222:22 -p 3000:3000 -v /data/gitea:/data gitea/gitea:latest</span><br><span class="line">docker update --restart=always gitea</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## nginx config</span></span><br><span class="line"><span class="attribute">cat</span> &gt; /etc/nginx/conf.d/001_<span class="variable">$&#123;DOMAIN&#125;</span>.conf &lt;&lt; <span class="string">&quot;EOF&quot;</span></span><br><span class="line">server &#123;</span><br><span class="line">    <span class="section">server_name</span>  &#123;DOMAIN&#125;;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>; </span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:3000/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="gitolite3"><a href="#gitolite3" class="headerlink" title="gitolite3"></a>gitolite3</h2><h3 id="å‡†å¤‡key"><a href="#å‡†å¤‡key" class="headerlink" title="å‡†å¤‡key"></a>å‡†å¤‡key</h3><p>å®‰è£…å‰å…ˆå‡†å¤‡å…¬é’¥,ç§é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi /data % tree ssh </span><br><span class="line">ssh</span><br><span class="line">â”œâ”€â”€ mingilin</span><br><span class="line">â””â”€â”€ mingilin.pub</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gitolite3</span><br><span class="line">æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ</span><br><span class="line">æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       </span><br><span class="line">æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ       </span><br><span class="line">å°†ä¼šå®‰è£…ä¸‹åˆ—é¢å¤–çš„è½¯ä»¶åŒ…ï¼š</span><br><span class="line">  libcommon-sense-perl libjson-perl libjson-xs-perl</span><br><span class="line">å»ºè®®å®‰è£…çš„è½¯ä»¶åŒ…ï¼š</span><br><span class="line">  git-daemon-sysvinit gitweb</span><br><span class="line">ä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼š</span><br><span class="line">  gitolite3 libcommon-sense-perl libjson-perl libjson-xs-perl</span><br><span class="line">å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 4 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 100 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚</span><br><span class="line">éœ€è¦ä¸‹è½½ 0 B/336 kB çš„è½¯ä»¶åŒ…ã€‚</span><br><span class="line">è§£å‹ç¼©åä¼šæ¶ˆè€—æ‰ 1,040 kB çš„é¢å¤–ç©ºé—´ã€‚</span><br><span class="line">æ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ[Y/n]y</span><br><span class="line">æ­£åœ¨é¢„è®¾å®šè½¯ä»¶åŒ… ...</span><br><span class="line">Selecting previously unselected package libjson-perl.</span><br><span class="line">(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 85705 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)</span><br><span class="line">æ­£åœ¨è§£å‹ç¼© libjson-perl (ä» .../libjson-perl_2.53-1_all.deb) ...</span><br><span class="line">Selecting previously unselected package gitolite3.</span><br><span class="line">æ­£åœ¨è§£å‹ç¼© gitolite3 (ä» .../gitolite3_3.6.4-1~bpo70+1_all.deb) ...</span><br><span class="line">Selecting previously unselected package libcommon-sense-perl.</span><br><span class="line">æ­£åœ¨è§£å‹ç¼© libcommon-sense-perl (ä» .../libcommon-sense-perl_3.6-1_all.deb) ...</span><br><span class="line">Selecting previously unselected package libjson-xs-perl.</span><br><span class="line">æ­£åœ¨è§£å‹ç¼© libjson-xs-perl (ä» .../libjson-xs-perl_2.320-1_armhf.deb) ...</span><br><span class="line">æ­£åœ¨å¤„ç†ç”¨äº man-db çš„è§¦å‘å™¨...</span><br><span class="line">æ­£åœ¨è®¾ç½® libjson-perl (2.53-1) ...</span><br><span class="line">æ­£åœ¨è®¾ç½® gitolite3 (3.6.4-1~bpo70+1) ...</span><br><span class="line">åˆå§‹åŒ–ç©ºçš„ Git ç‰ˆæœ¬åº“äº /var/lib/gitolite3/repositories/gitolite-admin.git/</span><br><span class="line">åˆå§‹åŒ–ç©ºçš„ Git ç‰ˆæœ¬åº“äº /var/lib/gitolite3/repositories/testing.git/</span><br><span class="line">WARNING: /var/lib/gitolite3/.ssh missing; creating a new one</span><br><span class="line">    (this is normal on a brand new install)</span><br><span class="line">WARNING: /var/lib/gitolite3/.ssh/authorized_keys missing; creating a new one</span><br><span class="line">    (this is normal on a brand new install)</span><br><span class="line">æ­£åœ¨è®¾ç½® libcommon-sense-perl (3.6-1) ...</span><br><span class="line">æ­£åœ¨è®¾ç½® libjson-xs-perl (2.320-1) ...</span><br></pre></td></tr></table></figure><p><strong>åœ¨å®‰è£…è¿‡ç¨‹ä¸­æç¤ºè¾“å…¥å…¬é’¥(.pub), å°†å…¬é’¥çš„ç»å¯¹è·¯å¾„è¾“å…¥</strong><br>ç„¶åç­‰å¾…å®‰è£…å®Œæˆ<br>åœ¨å®‰è£…è¿‡ç¨‹ä¸­æœ‰æç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹åŒ–ç©ºçš„ Git ç‰ˆæœ¬åº“äº /var/lib/gitolite3/repositories/gitolite-admin.git/</span><br><span class="line">åˆå§‹åŒ–ç©ºçš„ Git ç‰ˆæœ¬åº“äº /var/lib/gitolite3/repositories/testing.git/</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi ~ % ll /var/lib|grep gitolite3</span><br><span class="line">drwxr-xr-x 5 gitolite3 gitolite3 4.0K  5æœˆ 11 09:56 gitolite3</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜useræ˜¯gitolite3</strong></p><h3 id="CLONE"><a href="#CLONE" class="headerlink" title="CLONE"></a>CLONE</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cp /data/ssh/mingilin ~/.ssh/id_rsa &amp;&amp; chmod 400 ~/.ssh/id_rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># GITHOSTä¸ºæœåŠ¡å™¨IP</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># éœ€è¦æ‰“å¼€gitç«¯å£9418</span></span></span><br><span class="line">git clone gitolite3@GITHOST:gitolite-admin.git</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># æ–¹æ³•2</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># SSHHostä¸ºSSH IP</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># SSHPortä¸ºSSHç«¯å£</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># git clone ssh://gitolite3@SSHHost:SSHPort/gitolite-admin.git</span></span></span><br></pre></td></tr></table></figure><p>æƒé™è®¾ç½®è¯·å‚è€ƒ<a href="http://www.server-world.info/en/note?os=CentOS_6&p=gitolite&f=4">http://www.server-world.info/en/note?os=CentOS_6&amp;p=gitolite&amp;f=4</a></p><h3 id="ä¿®æ”¹ç”¨æˆ·å"><a href="#ä¿®æ”¹ç”¨æˆ·å" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·å"></a>ä¿®æ”¹ç”¨æˆ·å</h3><p>å¦‚æœè§‰å¾—<code>gitolite3@xxxx</code>æ¯”è¾ƒåˆ«æ‰­çš„è¯,ä½¿ç”¨<code>sudo usermod -l git gitolite3</code>æ›´æ”¹ç”¨æˆ·å</p><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨<code>git clone ssh://git@SSHHost:SSHPort/xxx.git</code>äº†</p><h2 id="åŸºäºlinux-ssh"><a href="#åŸºäºlinux-ssh" class="headerlink" title="åŸºäºlinux ssh"></a>åŸºäºlinux ssh</h2><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -g git</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºrepo"><a href="#åˆ›å»ºrepo" class="headerlink" title="åˆ›å»ºrepo"></a>åˆ›å»ºrepo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /repos</span><br><span class="line">git init --bare /repos/test.git</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">touch config &amp;&amp; chmod 600 config</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;HostkeyAlgorithms +ssh-dss&quot;</span> &gt;&gt; config</span><br><span class="line">git <span class="built_in">clone</span> ssh://username@ip:port/repos/test.git <span class="built_in">test</span></span><br><span class="line"><span class="comment">## git clone ssh://kingwen0302@192.168.1.100:22/repos/test.git test</span></span><br></pre></td></tr></table></figure><h2 id="Gidder-Gitrepo"><a href="#Gidder-Gitrepo" class="headerlink" title="Gidder/Gitrepo"></a>Gidder/Gitrepo</h2><p><code>Google Play</code>å·²ç»æ‰¾ä¸åˆ°è¿™ä¸¤ä¸ªè½¯ä»¶äº†<br>ä¸ªäººåªå¤‡ä»½äº†ä¸€ä¸ª<a href="/downloads/binary/Gitrepo_0.02.apk">Gitrepo</a></p><h3 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h3><h4 id="Users"><a href="#Users" class="headerlink" title="Users"></a>Users</h4><p><code>setup</code> -&gt; <code>users</code> -&gt; <code>add new user</code></p><h4 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h4><p><code>setup</code> -&gt; <code>repositories</code> -&gt; <code>add repository</code> -&gt; <code>add permission</code></p><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><p>å¢åŠ ssh-dssæ”¯æŒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">touch config &amp;&amp; chmod 600 config</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;HostkeyAlgorithms +ssh-dss&quot;</span> &gt;&gt; config</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> ssh://username@ip:port/reponame.git</span><br></pre></td></tr></table></figure><h2 id="gitlab"><a href="#gitlab" class="headerlink" title="gitlab"></a>gitlab</h2><blockquote><p>VPSå¤ªåƒåœ¾,ä¸æ•¢ç”¨</p></blockquote><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://www.server-world.info/en/note?os=CentOS_6&p=gitolite">http://www.server-world.info/en/note?os=CentOS_6&amp;p=gitolite</a></li><li><a href="http://www.uml.org.cn/pzgl/201404092.asp">http://www.uml.org.cn/pzgl/201404092.asp</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> git </tag>
            
            <tag> gitea </tag>
            
            <tag> gitolite3 </tag>
            
            <tag> git server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”ŸæˆUUID</title>
      <link href="/2020/03/07/misc/misc-uuid/"/>
      <url>/2020/03/07/misc/misc-uuid/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="LIUNX"><a href="#LIUNX" class="headerlink" title="LIUNX"></a>LIUNX</h2><p>å¦‚æœè¦å†™è„šæœ¬çš„è¯,å¯ä»¥ç”¨ä¸‹é¢çš„,ç®€å•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/kernel/random/uuid</span><br></pre></td></tr></table></figure><h2 id="WINDOWS"><a href="#WINDOWS" class="headerlink" title="WINDOWS"></a>WINDOWS</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-Command</span> <span class="string">&quot;Write-Host (New-Guid)&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> linux </category>
          
          <category> uuid </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´(windows/linuxéƒ½å¯ä»¥)</title>
      <link href="/2020/03/07/misc/misc-faketime/"/>
      <url>/2020/03/07/misc/misc-faketime/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¡¹ç›®ä¸­æœ‰äº›åŠŸèƒ½æµ‹è¯•éœ€è¦ä¿®æ”¹æ—¶é—´,ä»¥å‰åªæ‰¾åˆ°äº†linuxçš„ç‰ˆæœ¬<br>ç›´åˆ°æ˜¨å¤©åœ¨æŸäº›è®ºå›ä¸Š,çœ‹åˆ°äº†windowsä¹Ÿæ˜¯æœ‰çš„</p><h2 id="LINUXä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´"><a href="#LINUXä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´" class="headerlink" title="LINUXä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´"></a>LINUXä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´</h2><p><a href="https://github.com/wolfcw/libfaketime">libfaketime</a></p><h2 id="WINDOWSä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´"><a href="#WINDOWSä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´" class="headerlink" title="WINDOWSä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´"></a>WINDOWSä¿®æ”¹è½¯ä»¶çš„å¯åŠ¨æ—¶é—´</h2><p><a href="http://www.nirsoft.net/utils/run_as_date.html">runasdate</a></p><p>ä¿®æ”¹æ—¶é—´å…·ä½“ç”¨å¤„å°±ä¸è¯´äº†, æ¯”å¦‚å¯ä»¥å»¶é•¿è½¯ä»¶çš„è¯•ç”¨æœŸ, (<em>^__^</em>) å˜»å˜»â€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10 wslå­ç³»ç»Ÿå¼€æœºè‡ªå¯sshd</title>
      <link href="/2020/02/22/windows/windows-wsl-ssh/"/>
      <url>/2020/02/22/windows/windows-wsl-ssh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è®°å½•ä¸‹<code>windows10 wsl</code>å®‰è£…<code>openssh-server</code>å¹¶ä¸”å¼€æœºè‡ªå¯åŠ¨çš„è¿‡ç¨‹</p></blockquote><span id="more"></span><h2 id="éœ€è¦å…ˆå®‰è£…openssh-server"><a href="#éœ€è¦å…ˆå®‰è£…openssh-server" class="headerlink" title="éœ€è¦å…ˆå®‰è£…openssh-server"></a>éœ€è¦å…ˆå®‰è£…<code>openssh-server</code></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>/etc/ssh/sshd_config</code><br>ä¿®æ”¹ç«¯å£,æ˜¯å¦å¯ä»¥å¯†ç ç™»é™†ç­‰é…ç½®</p><blockquote><p>å¯åŠ¨: <code>sudo service ssh --full-restart</code><br>åœæ­¢: <code>sudo service ssh stop</code></p></blockquote><p>æ³¨æ„: </p><blockquote><p>åœ¨<code>Debian</code>wslä¸­<br>å¯åŠ¨æ˜¯<code>service ssh --full-restart</code><br>ä¸æ˜¯<code>service sshd --full-restart</code><br>ä¸æ˜¯ç¬”è¯¯</p></blockquote><p>å¯åŠ¨å,ä½¿ç”¨<code>ssh client</code>(<code>putty</code>,<code>xshell</code>ç­‰)è¿æ¥,æ£€æµ‹sshdæ˜¯å¦å¯åŠ¨æˆåŠŸ</p><h2 id="æ·»åŠ ä¸€ä¸ªè„šæœ¬-ç”¨äºæ‰§è¡Œå¯åŠ¨ssh-server"><a href="#æ·»åŠ ä¸€ä¸ªè„šæœ¬-ç”¨äºæ‰§è¡Œå¯åŠ¨ssh-server" class="headerlink" title="æ·»åŠ ä¸€ä¸ªè„šæœ¬,ç”¨äºæ‰§è¡Œå¯åŠ¨ssh server"></a>æ·»åŠ ä¸€ä¸ªè„šæœ¬,ç”¨äºæ‰§è¡Œå¯åŠ¨<code>ssh server</code></h2><p>ä¾‹å¦‚<code>/etc/init.wsl</code></p><h3 id="ç¼–è¾‘init-wsl-sudo-vi-etc-init-wsl"><a href="#ç¼–è¾‘init-wsl-sudo-vi-etc-init-wsl" class="headerlink" title="ç¼–è¾‘init.wsl(sudo vi /etc/init.wsl)"></a>ç¼–è¾‘<code>init.wsl</code>(<code>sudo vi /etc/init.wsl</code>)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">sudo service ssh --full-restart</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–çš„è‡ªå¯åŠ¨å‘½ä»¤</span></span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ä¸ºrootå¯æ‰§è¡Œ"><a href="#æ·»åŠ ä¸ºrootå¯æ‰§è¡Œ" class="headerlink" title="æ·»åŠ ä¸ºrootå¯æ‰§è¡Œ"></a>æ·»åŠ ä¸ºrootå¯æ‰§è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /etc/init.wsl</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ rootå…å¯†æ‰§è¡Œ-sudo-vi-etc-sudoers"><a href="#æ·»åŠ rootå…å¯†æ‰§è¡Œ-sudo-vi-etc-sudoers" class="headerlink" title="æ·»åŠ rootå…å¯†æ‰§è¡Œ(sudo vi /etc/sudoers)"></a>æ·»åŠ rootå…å¯†æ‰§è¡Œ(<code>sudo vi /etc/sudoers</code>)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># sudo vi /etc/sudoers</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># åœ¨Debian wslä¸­, æ˜¾ç¤ºæ˜¯åªè¯»æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä½†æ˜¯å¯ä»¥é€šè¿‡ :w! å¼ºåˆ¶ä¿å­˜</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># æ·»åŠ ä¸‹é¢è¡Œ, /etc/init.wslå¯ä»¥å…å¯†æ‰§è¡Œ</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">sudo ALL=NOPASSWD: /etc/init.wsl</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ"><a href="#æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ" class="headerlink" title="æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ"></a>æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ</h3><p>æ‰“å¼€ä¸€ä¸ª<code>cmd</code>(<code>powershell</code>)</p><p>æ‰§è¡Œ<code>C:\Windows\System32\bash.exe -c &#39;sudo /etc/init.wsl&#39;</code></p><p>å¦‚æœæˆåŠŸ,åˆ™è¡¨ç¤ºä¸Šé¢çš„é…ç½®å·²ç»okäº†</p><h2 id="å¢åŠ å¼€æœºå¯åŠ¨è„šæœ¬"><a href="#å¢åŠ å¼€æœºå¯åŠ¨è„šæœ¬" class="headerlink" title="å¢åŠ å¼€æœºå¯åŠ¨è„šæœ¬"></a>å¢åŠ å¼€æœºå¯åŠ¨è„šæœ¬</h2><h3 id="æ‰“å¼€å¼€æœºå¯åŠ¨ç›®å½•"><a href="#æ‰“å¼€å¼€æœºå¯åŠ¨ç›®å½•" class="headerlink" title="æ‰“å¼€å¼€æœºå¯åŠ¨ç›®å½•"></a>æ‰“å¼€å¼€æœºå¯åŠ¨ç›®å½•</h3><p>æŒ‰é”®<code>win+R</code> è¾“å…¥<code>shell:startup</code>ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªç›®å½•</p><h3 id="å¢åŠ è„šæœ¬startservice-vbs-åå­—éšä¾¿"><a href="#å¢åŠ è„šæœ¬startservice-vbs-åå­—éšä¾¿" class="headerlink" title="å¢åŠ è„šæœ¬startservice.vbs(åå­—éšä¾¿)"></a>å¢åŠ è„šæœ¬<code>startservice.vbs</code>(åå­—éšä¾¿)</h3><p>å†…å®¹ä¸º</p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span> ws = WScript.<span class="built_in">CreateObject</span>(<span class="string">&quot;WScript.Shell&quot;</span>)</span><br><span class="line">ws.run <span class="string">&quot;C:\Windows\System32\bash.exe -c &#x27;sudo /etc/init.wsl&#x27;&quot;</span>,<span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="é‡å¯ç”µè„‘"><a href="#é‡å¯ç”µè„‘" class="headerlink" title="é‡å¯ç”µè„‘"></a>é‡å¯ç”µè„‘</h2><p>OK</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://blog.csdn.net/fuyuande/article/details/90510250">https://blog.csdn.net/fuyuande/article/details/90510250</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> wsl </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jså¤åˆ¶å†…å®¹åˆ°å‰ªåˆ‡æ¿(Firefox/Chrome/IEé€šç”¨)</title>
      <link href="/2020/02/20/php/js-copy-to-clipboard/"/>
      <url>/2020/02/20/php/js-copy-to-clipboard/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyToClipboard</span>(<span class="params">copyTxt</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> createInput = <span class="built_in">document</span>.createElement(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">  createInput.value = copyTxt;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(createInput);</span><br><span class="line">  createInput.select(); <span class="comment">// é€‰æ‹©å¯¹è±¡</span></span><br><span class="line">  <span class="built_in">document</span>.execCommand(<span class="string">&quot;Copy&quot;</span>); <span class="comment">// æ‰§è¡Œæµè§ˆå™¨å¤åˆ¶å‘½ä»¤</span></span><br><span class="line">  createInput.className = <span class="string">&#x27;createInput&#x27;</span>;</span><br><span class="line">  createInput.style.display=<span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  <span class="comment">//alert(&#x27;å¤åˆ¶æˆåŠŸï¼Œå¯ä»¥ç²˜è´´äº†ï¼&#x27;);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://blog.csdn.net/qq_31384551/article/details/82117137">https://blog.csdn.net/qq_31384551/article/details/82117137</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowså®‰è£…DNS Server(Bind9)</title>
      <link href="/2020/01/17/windows/windows-bind9/"/>
      <url>/2020/01/17/windows/windows-bind9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è®°å½•åœ¨windowsä¸Šå®‰è£…<code>DNS Server(Bind9)</code>çš„è¿‡ç¨‹<br>å¹¶ä¸”é…ç½®è‡ªå®šä¹‰åŸŸå,å’Œæ·»åŠ å­åŸŸå</p></blockquote><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ol><li><p>ä» <a href="%5Bhttp://ftp.isc.org/isc/bind9/%5D">http://ftp.isc.org/isc/bind9/</a>ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„windowså®‰è£…åŒ…</p></li><li><p>ç‚¹å‡»<code>BINDInstall.exe</code> å®‰è£…æœåŠ¡,å¡«ä¸‹å¯†ç ,ç„¶åä¸€è·¯é»˜è®¤å°±å¯ä»¥äº†</p></li><li><p>åˆ°å®‰è£…åçš„ç›®å½•ä¸‹æ‰§è¡Œ<code>rndc-confgen.exe -a</code>,åœ¨<code>etc</code>ç›®å½•ä¸‹ä¼šç”Ÿæˆ<code>rndc.key</code>æ–‡ä»¶</p></li><li><p>å°†<code>etc</code>ç›®å½•è®¾ç½®ä¸º<code>named</code>ç”¨æˆ·å¯ä»¥è®¿é—®</p><p> å³å‡»<code>etc</code>ç›®å½• -&gt; å®‰å…¨ -&gt;  <code>ç»„æˆ–ç”¨æˆ·å</code>å¢åŠ <code>named</code>ç”¨æˆ·</p></li><li><p>åœ¨<code>etc</code>ç›®å½•ä¸‹æ–°å»º<code>named.conf</code></p> <figure class="highlight bash"><figcaption><span>named/named.conf</span><a href="/downloads/code/named/named.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">options {</span><br><span class="line">    // zoneæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">    directory <span class="string">&quot;C:\Program Files\ISC BIND 9\etc&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    // æ— æ³•è§£æçš„åŸŸåå°±å»æŸ¥è¯¢ISPæä¾›çš„DNS</span><br><span class="line">    // åœ¨ä¸‹é¢çš„IPåœ°å€ä½ç½®ä¸Šå¡«å†™ISPçš„DNSåœ°å€</span><br><span class="line">    </span><br><span class="line">    forwarders {</span><br><span class="line">        // è¿™é‡Œé…ç½®å…¶ä»–çš„DNS,ç”¨äºæœ¬åœ°æ²¡æœ‰é…ç½®çš„åŸŸåè½¬å‘ä¸‹é¢çš„dnsæŸ¥è¯¢</span><br><span class="line">        192.168.100.9;</span><br><span class="line">        192.168.100.8;</span><br><span class="line">        // 8.8.8.8;</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    recursion yes;</span><br><span class="line">    dnssec-validation no;</span><br><span class="line">    dnssec-enable no;</span><br><span class="line"></span><br><span class="line">    allow-query-cache {</span><br><span class="line">        any; </span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    // ä»…å…è®¸æœ¬æœºä¸192.168.0.0ç½‘æ®µå†…çš„æœºå™¨æŸ¥è¯¢</span><br><span class="line">    allow-query { any; };</span><br><span class="line">    // allow-query {</span><br><span class="line">    //     127.0.0.1;</span><br><span class="line">    //     192.168.0.0/24;</span><br><span class="line">    // };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">logging {</span><br><span class="line">    channel default_debug {</span><br><span class="line">        file <span class="string">&quot;log/named.log&quot;</span>;</span><br><span class="line">        severity dynamic;</span><br><span class="line">    };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">// æ ¹DNS</span><br><span class="line">zone <span class="string">&quot;.&quot;</span> {</span><br><span class="line">    <span class="built_in">type</span> hint;</span><br><span class="line">    file <span class="string">&quot;zone/root.zone&quot;</span>;</span><br><span class="line">};</span><br><span class="line">// localhost</span><br><span class="line">zone <span class="string">&quot;localhost&quot;</span> IN {</span><br><span class="line">    <span class="built_in">type</span> master;</span><br><span class="line">    file <span class="string">&quot;zone/localhost.zone&quot;</span>;</span><br><span class="line">    allow-update { none; };</span><br><span class="line">};</span><br><span class="line">// localhostçš„åå‘è§£æ</span><br><span class="line">zone <span class="string">&quot;0.0.127.in-addr.arpa&quot;</span> {</span><br><span class="line">    <span class="built_in">type</span> master;</span><br><span class="line">    file <span class="string">&quot;zone/localhost.rev&quot;</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰åŸŸåè§£æ</span><br><span class="line">zone <span class="string">&quot;example.com&quot;</span> IN {</span><br><span class="line">    <span class="built_in">type</span> master;</span><br><span class="line">    file <span class="string">&quot;zone/example.com.zone&quot;</span>;</span><br><span class="line">    allow-update { none; };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰å­åŸŸåè§£æ</span><br><span class="line">// åªæœ‰example.example.comä»¥åŠa.example.example.com</span><br><span class="line">zone <span class="string">&quot;example.example.com&quot;</span> IN {</span><br><span class="line">    <span class="built_in">type</span> master;</span><br><span class="line">    file <span class="string">&quot;zone/example.example.com.zone&quot;</span>;</span><br><span class="line">    allow-update { none; };</span><br><span class="line">};</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<a href="ftp://ftp.rs.internic.net/domain/">ftp://ftp.rs.internic.net/domain/</a>ä¸‹è½½<code>named.root</code>,<code>root.zone</code>ä¸¤ä¸ªæ–‡ä»¶,æ”¾åˆ°<code>/etc/zone</code>ç›®å½•ä¸‹</p></li><li><p>æ–°å»º<code>localhost.zone</code>åˆ°<code>/etc/zone</code></p> <figure class="highlight bash"><figcaption><span>named/zone/localhost.zone</span><a href="/downloads/code/named/zone/localhost.zone">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$TTL</span> 1D </span><br><span class="line">@ IN SOA localhost. root.localhost. ( </span><br><span class="line"> 2007091701  ; Serial </span><br><span class="line"> 30800  ; Refresh </span><br><span class="line"> 7200  ; Retry </span><br><span class="line"> 604800  ; Expire </span><br><span class="line"> 300 )  ; Minimum </span><br><span class="line"> IN NS localhost. </span><br><span class="line">localhost. IN A 127.0.0.1</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»º<code>localhost.rev</code>åˆ°<code>/etc/zone</code></p> <figure class="highlight bash"><figcaption><span>named/zone/localhost.rev</span><a href="/downloads/code/named/zone/localhost.rev">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$TTL</span> 1D </span><br><span class="line">@ IN SOA localhost. root.localhost. ( </span><br><span class="line"> 2007091701  ; Serial </span><br><span class="line"> 30800  ; Refresh </span><br><span class="line"> 7200  ; Retry </span><br><span class="line"> 604800  ; Expire </span><br><span class="line"> 300 )  ; Minimum </span><br><span class="line">  IN NS localhost. </span><br><span class="line">1  IN PTR localhost.</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ è‡ªå®šä¹‰åŸŸå</p><blockquote><p>å°†<code>example.com</code>æ›¿æ¢æˆè‡ªå·±çš„åŸŸåå³å¯</p></blockquote> <figure class="highlight bash"><figcaption><span>named/zone/example.com.zone</span><a href="/downloads/code/named/zone/example.com.zone">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">;; åŸŸåè§£æ</span><br><span class="line">;; ç”¨äºæ‰€æœ‰çš„å­åŸŸåéƒ½ä½¿ç”¨æœ¬æ–‡ä»¶è§£æ</span><br><span class="line"></span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@ IN SOA ns1.example.com. root.example.com. ( </span><br><span class="line">        2007091701  ; Serial </span><br><span class="line">        30800  ; Refresh </span><br><span class="line">        7200  ; Retry </span><br><span class="line">        604800  ; Expire </span><br><span class="line">        300 )  ; Minimum </span><br><span class="line">    IN  NS  ns1.example.com</span><br><span class="line"></span><br><span class="line">; Aè®°å½•</span><br><span class="line">ns1 IN  A   192.168.50.100          ; ns1.example.com          </span><br><span class="line">@   IN  A   192.168.50.100          ; example.com</span><br><span class="line">e   IN  A   127.0.0.1               ; e.example.com</span><br><span class="line">a.b IN  A   127.0.0.1               ; a.b.example.com</span><br><span class="line">*   IN  A   127.0.0.1               ; xxxx.example.com</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ è‡ªå®šä¹‰å­åŸŸå</p><blockquote><p>å°†<code>example.example.com</code>æ›¿æ¢æˆè‡ªå·±çš„å­åŸŸåå³å¯</p></blockquote> <figure class="highlight bash"><figcaption><span>named/zone/example.example.com.zone</span><a href="/downloads/code/named/zone/example.example.com.zone">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">;; å­åŸŸåè§£æ</span><br><span class="line">;; åªè§£æè¯¥å­åŸŸå,å…¶ä»–çš„å­åŸŸåèµ°å…¶ä»–çš„æ¸ é“</span><br><span class="line"></span><br><span class="line"><span class="variable">$TTL</span> 1D</span><br><span class="line">@   IN SOA ns1.example.example.com. ns2.example.example.com. (</span><br><span class="line">        2007091701  ; Serial </span><br><span class="line">        30800  ; Refresh </span><br><span class="line">        7200  ; Retry </span><br><span class="line">        604800  ; Expire </span><br><span class="line">        300 )  ; Minimum </span><br><span class="line">    IN  NS  ns1</span><br><span class="line">ns1 IN  A   192.168.50.100      ; ns1.example.example.com</span><br><span class="line">@   IN  A   192.168.50.100      ; example.example.com</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>net stop named</code>, <code>net start named</code>åœæ­¢/å¯åŠ¨æœåŠ¡</p></li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li>[<a href="http://www.yinxi.net/doc/show.php?DocID=10275%5D">http://www.yinxi.net/doc/show.php?DocID=10275]</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> bind9 </tag>
            
            <tag> dns server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨kitty/putty,winscp,mtputtyæ­å»ºå®‰å…¨å…è´¹çš„sshå®¢æˆ·ç«¯</title>
      <link href="/2019/12/26/windows/windows-kitty-winscp-mtputty/"/>
      <url>/2019/12/26/windows/windows-kitty-winscp-mtputty/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è‡ªä»Xshellå‡çº§å,å…è´¹ç‰ˆå•ä¸ªçª—å£åªèƒ½æ‰“å¼€å››ä¸ªçª—å£äº†<br>ç ´è§£ç‰ˆçš„è½¯ä»¶(SecureCRT)åˆä¸å¤ªæ•¢ç”¨<br>å¯»æ‰¾äº†å¾ˆä¹…æ‰è‡ªå·±æŠ˜è…¾å‡ºæ¥çš„ç»„åˆ: <code>MTPutty+Kitty+WinScp</code><br>ç»å¯¹çš„å®‰å…¨ </p></blockquote><span id="more"></span><p>å…ˆæ¥ä¸€å¼ ç•Œé¢æ•ˆæœ:<br><img src="/downloads/assets/mtputty.png" alt="mtputty"></p><h2 id="éœ€è¦è½¯ä»¶"><a href="#éœ€è¦è½¯ä»¶" class="headerlink" title="éœ€è¦è½¯ä»¶"></a>éœ€è¦è½¯ä»¶</h2><ul><li><a href="http://www.winscp.net/">winscp</a> ftp/sftpå®¢æˆ·ç«¯</li><li><a href="https://github.com/cyd01/KiTTY">kitty</a> puttyåˆ†æ”¯ç‰ˆæœ¬</li><li><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">putty</a> sshå®¢æˆ·ç«¯</li><li><a href="http://ttyplus.com/multi-tabbed-putty/">mtputty</a> å¤šæ ‡ç­¾</li></ul><p><code>kitty</code>æ˜¯<code>putty</code>çš„ä¸€ä¸ªåˆ†æ”¯,å¢åŠ äº†ä¸€äº›åŠŸèƒ½,æœ‰ä¾¿æºç‰ˆ,ä¸ä¼šå†™æ³¨å†Œè¡¨</p><h2 id="Command-Lineå¸¸ç”¨é€‰é¡¹"><a href="#Command-Lineå¸¸ç”¨é€‰é¡¹" class="headerlink" title="Command Lineå¸¸ç”¨é€‰é¡¹"></a><code>Command Line</code>å¸¸ç”¨é€‰é¡¹</h2><p><code>-load ä¸»é¢˜ IPåœ°å€ -ssh -P PORT -l ç”¨æˆ·å -i ç§é’¥.ppk</code><br><code>-load ä¸»é¢˜ IPåœ°å€ -ssh -P PORT -l ç”¨æˆ·å -pw å¯†ç </code></p><p><code>rz/sz</code>å¯ä»¥é€šè¿‡å³å‡»æ ‡ç­¾é¡µé€‰æ‹©<code>Start WinSCP</code>å¯åŠ¨<code>WinSCP</code>ä¸Šä¼ ä¸‹è½½</p><h2 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h2><p><a href="/downloads/binary/mtputty.zip">ä¸åŒ…æ‹¬<code>WinSCP</code>çš„MTPutty.zip</a></p>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•ä½¿ç”¨tortoisesvnå¯¹å¤šä¸ªåŠŸèƒ½åŒæ—¶å¼€å‘</title>
      <link href="/2019/12/26/windows/windows-svn-project/"/>
      <url>/2019/12/26/windows/windows-svn-project/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å®é™…å·¥ä½œä¸­,ç»å¸¸éœ€è¦åœæ­¢å½“å‰æ­£åœ¨å¼€å‘çš„åŠŸèƒ½å»ä¿®å¤ä¹‹å‰çš„bug,<br><code>git</code>å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™äº›é—®é¢˜,ä½†æ˜¯å¾ˆå¤šå…¬å¸å†…éƒ¨è¿˜æ˜¯ä½¿ç”¨svnä½œä¸ºç‰ˆæœ¬æ§åˆ¶çš„</p><span id="more"></span><h2 id="ç®€å•è§£å†³æ–¹æ¡ˆ"><a href="#ç®€å•è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç®€å•è§£å†³æ–¹æ¡ˆ"></a>ç®€å•è§£å†³æ–¹æ¡ˆ</h2><p>åˆ›å»ºå¤šä¸ªç›¸åŒçš„ç‰ˆæœ¬åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">project</span><br><span class="line">â”œâ”€â”€â”€trunk_1 (ç”¨äºå¼€å‘åŠŸèƒ½1)</span><br><span class="line">â”œâ”€â”€â”€trunk_2 (ç”¨äºå¼€å‘åŠŸèƒ½2)</span><br><span class="line">â”œâ”€â”€â”€trunk_commit (åªç”¨äºæäº¤)</span><br></pre></td></tr></table></figure><p>åŠŸèƒ½å¼€å‘å®Œæˆå,<br>ä½¿ç”¨<code>meld</code>æˆ–è€…å…¶ä»–ä»£ç åˆå¹¶å·¥å…·,<br>å°†ä»£ç åˆå¹¶åˆ°<code>trunk_commit</code>,<br>ç„¶åä»<code>trunk_commit</code>æäº¤ä»£ç </p><figure class="highlight bat"><figcaption><span>ç®€å•ä¾‹å­</span><a href="/downloads/code/commit.bat">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">@<span class="built_in">set</span> src_root_dir=%~dp0</span><br><span class="line">@<span class="built_in">set</span> dest_root_dir=e:\sgh5\server\trunk_commit</span><br><span class="line">@<span class="built_in">set</span> TortoiseProc=D:\TortoiseSVN\bin\TortoiseProc.exe</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">1</span>]svn update src ...</span><br><span class="line"><span class="variable">%TortoiseProc%</span> /command:update /<span class="built_in">path</span>:<span class="variable">%src_root_dir%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">2</span>]svn update dest ...</span><br><span class="line"><span class="variable">%TortoiseProc%</span> /command:update /<span class="built_in">path</span>:<span class="variable">%dest_root_dir%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">3</span>]meld ...</span><br><span class="line">meld <span class="variable">%src_root_dir%</span> <span class="variable">%dest_root_dir%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">4</span>]compile ...</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">%dest_root_dir%</span></span><br><span class="line"><span class="built_in">start</span> xctl_commit.bat compile</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">%src_root_dir%</span></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">5</span>]commit ...</span><br><span class="line"><span class="variable">%TortoiseProc%</span> /command:commit /<span class="built_in">path</span>:<span class="variable">%dest_root_dir%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">6</span>]svn update src again ...</span><br><span class="line"><span class="variable">%TortoiseProc%</span> /command:update /<span class="built_in">path</span>:<span class="variable">%src_root_dir%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> [<span class="number">7</span>]finish</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsä¸‹ä¿®æ”¹é”å±å£çº¸</title>
      <link href="/2019/06/28/windows/windows-change-lock-background/"/>
      <url>/2019/06/28/windows/windows-change-lock-background/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¢«æµæ°“è½¯ä»¶ä¿®æ”¹äº†é”å±å£çº¸,è™½ç„¶è¢«æµæ°“äº†,ä½†è¿˜æ˜¯è¦çŸ¥é“æ˜¯æ€ä¹ˆåšåˆ°çš„</p><span id="more"></span><ol><li><p>æ³¨å†Œè¡¨ä¿®æ”¹[<strong>è‡ªæµ‹å¹¶ä¸éœ€è¦ä¿®æ”¹</strong>]<br>æ‰“å¼€æ³¨å†Œè¡¨å‰ªè¾‘å™¨: <code>Win+R</code> -&gt; <code>regedit</code><br>ä¾æ¬¡æ‰“å¼€:<br><code>HKEY_LOCAL_MACHINE\SOFTWARE</code><br><code>\Microsoft\Windows\CurrentVersion</code><br><code>\Authentication\LogonUI</code><br><code>\Background\OEMBackground</code></p><blockquote><p>ä¿®æ”¹ä¸º1</p></blockquote></li><li><p>ç»„ç­–ç•¥ç¼–è¾‘å™¨<br>æ‰“å¼€ç»„ç­–ç•¥ç¼–è¾‘å™¨: <code>Win+R</code> -&gt; <code>gpedit.msc</code><br>ä¾æ¬¡æ‰“å¼€: è®¡ç®—æœºé…ç½®-&gt;ç®¡ç†æ¨¡ç‰ˆ-&gt;ç³»ç»Ÿ-&gt;ç™»å½•-&gt;å§‹ç»ˆä½¿ç”¨è‡ªå®šä¹‰ç™»å½•èƒŒæ™¯</p><blockquote><p>é€‰æ‹©å·²å¯ç”¨</p></blockquote></li><li><p>ä¿®æ”¹èƒŒæ™¯<br>æ‰“å¼€ç›®å½•: <code>C:\Windows\System32\oobe\info\backgrounds\</code>,è‹¥ä¸å­˜åœ¨,æ‰‹åŠ¨åˆ›å»º<br>å°†èƒŒæ™¯å›¾(å¿…é¡»æ˜¯jpgæ ¼å¼)å‘½åä¸º<code>backgroundDefault.jpg</code>,ä¿å­˜åˆ°è¯¥ç›®å½•ä¸‹</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang httpcä½¿ç”¨ä»£ç†</title>
      <link href="/2019/06/26/erlang/erlang-httpc-proxy/"/>
      <url>/2019/06/26/erlang/erlang-httpc-proxy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å·¥ä½œä¸­ä¸ªåˆ«é¡¹ç›®éœ€è¦è¿æ¥VPN,<br>æœ¬åœ°ä¹Ÿæœ‰é¡¹ç›®éœ€è¦è¿›è¡Œ<br>è¿æ¥ä¸Švpnå,æœ¬åœ°çš„é¡¹ç›®å°±æ— æ³•è¿›è¡Œ</p><p>ç°åœ¨çš„æ–¹æ³•æ˜¯:</p><ol><li><p>å¼€ä¸ªè™šæ‹Ÿæœº(virtualbox)</p><ul><li>è¿æ¥<code>vpn</code></li><li>æ­å»º<code>v2ray server</code></li><li><code>host</code>ä¸­æ·»åŠ åŸŸåè§£æ</li></ul></li><li><p>ç‰©ç†æœº</p><ul><li>æ­å»º<code>v2ray client</code>, æ‰€æœ‰æµé‡èµ°<code>v2ray</code>, åœ¨<code>route</code>é…ç½®è§„åˆ™</li><li><code>host</code>ä¸­æ·»åŠ åŸŸåè§£æ</li><li>æ­å»º<code>privoxy</code>,å°†<code>v2ray client</code>çš„<code>sock5</code>ä»£ç†è½¬æ¢ä¸º<code>http</code>ä»£ç†  </li></ul></li></ol><p>æ›´æ–°ä»£ç :<br>windows: ä¿®æ”¹<code>TortoiseSVN</code>çš„ç½‘ç»œè®¾ç½®,æ·»åŠ <code>http</code>ä»£ç†<br>linux: <code>proxychain4 svn xxx</code></p><p>é¡¹ç›®ä¸­ä½¿ç”¨<code>erlang</code>è¯­è¨€</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpc:set_options([&#123;proxy, &#123; &#123;<span class="string">&quot;192.168.10.26&quot;</span>, <span class="number">8119</span>&#125;, <span class="string">&quot;&quot;</span> &#125; &#125;]).</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨qpdfå¯¹pdfè¿›è¡Œåˆ†å‰²åˆå¹¶</title>
      <link href="/2019/06/26/centos/centos7-qpdf/"/>
      <url>/2019/06/26/centos/centos7-qpdf/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘è´­ä¹°äº†ä¸€å°å®¶ç”¨æ‰“å°æœºMG3080<br>æ‰“å°æœºåªèƒ½æ‰“å•é¡µ,ä¸èƒ½æ‰“åŒé¡µ<br>éœ€è¦æ‰‹åŠ¨æ¢çº¸,æ¯”è¾ƒéº»çƒ¦<br>æ‰¾äº†ä¸ª<a href="https://sourceforge.net/projects/qpdf/">pdfåˆ†å‰²åˆå¹¶çš„å·¥å…·</a></p><span id="more"></span><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install qpdf</span><br></pre></td></tr></table></figure><p><a href="https://sourceforge.net/projects/qpdf/">windowsç‰ˆæœ¬</a></p><h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><p>æŸ¥è¯¢é¡µæ•°: <code>qpdf src.pdf --show-npages</code><br>åˆ†å‰²: <code>qpdf src.pdf --pages src.pdf 1,3,5,7 -- 1357.pdf</code><br>åˆå¹¶: <code>qpdf --empty --pages 1.pdf 3.pdf -- 13.pdf</code></p><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><figure class="highlight bash"><figcaption><span>split_pdf.sh</span><a href="/downloads/code/split_pdf.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash - </span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#          FILE: split_pdf.sh</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#         USAGE: ./split_pdf.sh xxx.pdf</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#######color code########</span></span><br><span class="line">RED=<span class="string">&quot;31m&quot;</span></span><br><span class="line">GREEN=<span class="string">&quot;32m&quot;</span></span><br><span class="line">YELLOW=<span class="string">&quot;33m&quot;</span></span><br><span class="line">BLUE=<span class="string">&quot;36m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################</span></span><br><span class="line"><span class="function"><span class="title">colorEcho</span></span>(){</span><br><span class="line">    COLOR=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[<span class="variable">${COLOR}</span><span class="variable">${@:2}</span>\033[0m&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">colorEchoN</span></span>(){</span><br><span class="line">    COLOR=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> -n -e <span class="string">&quot;\033[<span class="variable">${COLOR}</span><span class="variable">${@:2}</span>\033[0m&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">CUR_DIR=$(<span class="built_in">cd</span> $(dirname <span class="variable">$0</span>); <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">QPDF=<span class="variable">${CUR_DIR}</span>/qpdf-8.4.2/bin/qpdf.exe</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">splitPdf</span></span>(){</span><br><span class="line">    PDF_FILE=<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">${PDF_FILE}</span>&quot;</span> == <span class="string">&quot;exit&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        colorEcho <span class="variable">$RED</span> <span class="string">&quot;exit&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [[ ! -e <span class="variable">${PDF_FILE}</span> ]]; <span class="keyword">then</span></span><br><span class="line">        colorEcho <span class="variable">$RED</span> <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°è¯¥æ–‡ä»¶&quot;</span></span><br><span class="line">        <span class="built_in">continue</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    EXT=<span class="variable">${PDF_FILE##*.}</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">${EXT}</span>&quot;</span> != <span class="string">&quot;pdf&quot;</span> &amp;&amp; <span class="string">&quot;<span class="variable">${EXT}</span>&quot;</span> != <span class="string">&quot;PDF&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        colorEcho <span class="variable">$RED</span> <span class="string">&quot;ä¸æ˜¯pdfæ–‡ä»¶&quot;</span></span><br><span class="line">        <span class="built_in">continue</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    DEST_DIR=<span class="variable">${PDF_FILE}</span>.d</span><br><span class="line">    mkdir -p <span class="variable">${DEST_DIR}</span></span><br><span class="line">    </span><br><span class="line">    TotalPage=$(<span class="variable">${QPDF}</span> <span class="variable">${PDF_FILE}</span> --show-npages)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">## é€†åº</span></span><br><span class="line">    Page1=$(seq 1 2 <span class="variable">$TotalPage</span> | tac | paste -sd,)</span><br><span class="line">    Page2=$(seq 2 2 <span class="variable">$TotalPage</span> | tac | paste -sd,)</span><br><span class="line">    </span><br><span class="line">    <span class="variable">${QPDF}</span> <span class="variable">${PDF_FILE}</span> --pages <span class="variable">${PDF_FILE}</span> <span class="variable">$Page1</span> -- <span class="variable">${DEST_DIR}</span>/1.pdf</span><br><span class="line">    <span class="variable">${QPDF}</span> <span class="variable">${PDF_FILE}</span> --pages <span class="variable">${PDF_FILE}</span> <span class="variable">$Page2</span> -- <span class="variable">${DEST_DIR}</span>/2.pdf</span><br><span class="line"></span><br><span class="line">    colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;åˆ†å‰²å®Œæˆï¼Œè¯·åœ¨åŒåç›®å½•ä¸‹æŸ¥çœ‹ã€‚&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;-------------------------------------------------------------&quot;</span></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;æ¬¢è¿ä½¿ç”¨pdfåˆ†å‰²å·¥å…·&quot;</span></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;&quot;</span></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;è¯¥å·¥å…·åŸºäºqpdf,æ›´é«˜çº§çš„åº”ç”¨è¯·æŸ¥çœ‹qpdf --help&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$GREEN</span> <span class="string">&quot;è¯¥å·¥å…·ä¼šå°†pdfæ–‡ä»¶åˆ†å‰²æˆ&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$BLUE</span>  <span class="string">&quot;çº¯å•é¡µpdf(1.pdf)&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$GREEN</span> <span class="string">&quot;å’Œ&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$BLUE</span>  <span class="string">&quot;çº¯åŒé¡µpdf(2.pdf)&quot;</span></span><br><span class="line">colorEcho  <span class="variable">$GREEN</span> <span class="string">&quot;&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$GREEN</span> <span class="string">&quot;åˆ†å‰²åçš„æ–‡å»ºä¿å­˜åœ¨&quot;</span></span><br><span class="line">colorEchoN <span class="variable">$BLUE</span>  <span class="string">&quot;pdfæ–‡ä»¶.d&quot;</span></span><br><span class="line">colorEcho  <span class="variable">$GREEN</span> <span class="string">&quot;ç›®å½•ä¸‹&quot;</span></span><br><span class="line">colorEcho <span class="variable">$YELLOW</span> <span class="string">&quot;è¿è¡Œä¸­çš„warningå¯ä»¥å¿½ç•¥,ä¸å½±å“ç»“æœ&quot;</span></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;-------------------------------------------------------------&quot;</span></span><br><span class="line">colorEcho <span class="variable">$GREEN</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    colorEchoN <span class="variable">$GREEN</span> <span class="string">&quot;è¯·è¾“å…¥pdfæ–‡ä»¶(Ctrl-c/exit-é€€å‡º,ç›´æ¥æ‹‰æ–‡ä»¶åˆ°çª—å£å³å¯):&quot;</span></span><br><span class="line">    <span class="built_in">read</span> PDF_FILE</span><br><span class="line">    splitPdf <span class="string">&quot;<span class="variable">$PDF_FILE</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><blockquote><p>å…ˆæ‰“<code>1.pdf</code><br>å°†æ‰“å°å®Œæˆçš„åè¿‡æ¥(ä¸éœ€è¦è°ƒæ•´é¡ºåº),å†æ‰“<code>2.pdf</code></p></blockquote><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ol><li>è„šæœ¬å³ä½¿çœå»äº†æ¯æ¬¡éƒ½è¦æ¢çº¸çš„éº»çƒ¦,ä½†æ˜¯è¿˜æ˜¯éœ€è¦åœ¨æ‰“å°å®Œæˆåæ‰‹åŠ¨è°ƒæ•´é¡ºåº</li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> qpdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsä¸‹ä½¿ç”¨Qemu</title>
      <link href="/2019/05/22/windows/windows-qemu/"/>
      <url>/2019/05/22/windows/windows-qemu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><ul><li><p><a href="https://github.com/intel/haxm">haxm</a></p><p>  intelå¼€æºçš„åŠ é€Ÿqemué©±åŠ¨</p></li><li><p>tap-windows</p><p>  ç”¨äºè™šæ‹Ÿç½‘å¡</p><p>  åˆ›å»ºæ–°çš„è™šæ‹Ÿç½‘å¡</p><ul><li>tap-windows: Add a new Tap virtual ethernet adapter  </li><li>ä¿®æ”¹åå­—ä¸ºtap0  </li><li>å°†æœ¬åœ°è¿æ¥(æœ‰ç½‘ç»œ)å…±äº«ç»™tap0  </li></ul></li></ul><h2 id="åˆ›å»ºè™šæ‹Ÿæœº"><a href="#åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæœº"></a>åˆ›å»ºè™šæ‹Ÿæœº</h2><hr><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># åˆ›å»ºç›˜</span></span></span><br><span class="line">qemu-img create -f raw centos.img 30G</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># å¯åŠ¨è™šæ‹Ÿæœº</span></span></span><br><span class="line">qemu-system-x86_64.exe -name test -m 2048 -machine accel=hax -net nic -net tap,ifname=tap0 -cdrom e:/download/CentOS-7-x86_64-Minimal-1810.iso .\centos.img</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -m 2048 è®¾ç½®å†…å­˜</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -machine accel=hax åŠ é€Ÿ</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -net nic -net tap,ifname=tap0 ç½‘ç»œè®¾ç½®,tap0ä¸ºä¸Šé¢åˆ›å»ºçš„è™šæ‹Ÿç½‘å¡</span></span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>hax</code>å,å¯åŠ¨é€Ÿåº¦ä¼šå¿«å¾ˆå¤š<br>ä½†åœ¨<code>win</code>ä¸‹,ä¸<code>virtualbox</code>(<code>vagrant</code>)ç›¸æ¯”,ç®¡ç†èµ·æ¥ä¸æ˜¯å¾ˆæ–¹ä¾¿,æœ€ç»ˆæ”¾å¼ƒ</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://www.cnblogs.com/bingzhu/p/10746102.html">https://www.cnblogs.com/bingzhu/p/10746102.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ZIPè§£å‹ä¸­æ–‡ä¹±ç çš„é—®é¢˜</title>
      <link href="/2019/02/25/ubuntu/ubuntu-unar/"/>
      <url>/2019/02/25/ubuntu/ubuntu-unar/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å¤‡ä»½ä¸ªäººèµ„æ–™çš„æ—¶å€™,zipæ–‡ä»¶è§£å‹æ—¶ä¸­æ–‡å‡ºç°ä¹±ç <br>ç½‘ä¸Šæœç´¢è·å¾—ä¸‰ä¸ªè§£å†³æ–¹æ¡ˆ:</p><ol><li><p>ä½¿ç”¨<code>unzip -O</code>é€‰é¡¹<br>ä½†æ˜¯å¤§éƒ¨åˆ†çš„å‘è¡Œç‰ˆä¸­çš„<code>unzip</code>è½¯ä»¶éƒ½æ²¡æœ‰è¿™ä¸ªå‚æ•°,è‡³å°‘debianæ˜¯æ²¡æœ‰çš„</p></li><li><p>å®‰è£…<code>unzip-iconv</code><br>æºä¸­éƒ½æœç´¢ä¸åˆ°è¿™ä¸ªè½¯ä»¶</p></li><li><p><strong>ä½¿ç”¨<code>unar</code>æ›¿ä»£<code>unzip</code>(æ­£ç¡®æ–¹æ¡ˆ)</strong>  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install unar</span><br><span class="line">unar -e utf8 xxx.zip</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>func_merge_runtime</title>
      <link href="/2018/09/13/erlang/erlang-func_merge/"/>
      <url>/2018/09/13/erlang/erlang-func_merge/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><ul><li>å°†å¤šä¸ªæ¨¡å—ä¸­çš„å‡½æ•°ä½¿ç”¨åŒä¸€æ¨¡å—è°ƒç”¨</li><li>å®ç°ç±»ä¼¼é¢å‘å¯¹è±¡<code>ç»§æ‰¿</code>/<code>é‡è½½</code>é€»è¾‘</li></ul><span id="more"></span><ul><li><p>çæŠ˜è…¾</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚:</span><br><span class="line">å­˜åœ¨`util_lists`, `util_time` ç­‰æ¨¡å—  </span><br><span class="line">ä½¿ç”¨ç»Ÿä¸€æ¥å£`util:func/x`è°ƒç”¨, æ— éœ€çŸ¥é“`func`å…·ä½“åœ¨å“ªä¸ªæ¨¡å—</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><pre><code>éœ€è¦åŠ è½½çš„æ¨¡å—éœ€è¦å…ˆç¼–è¯‘</code></pre><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-compile</span><span class="params">([&#123;parse_transform, func_merge_runtime&#125;])</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% åŠ è½½aæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå‡½æ•°</span></span><br><span class="line">-load_all<span class="params">(a)</span>.</span><br><span class="line"><span class="comment">%% åŠ è½½a:f1/0,a:f2/1å‡½æ•°</span></span><br><span class="line">-load_func<span class="params">(&#123;a, [f1/<span class="number">0</span>, f2/<span class="number">1</span>]&#125;)</span>.</span><br></pre></td></tr></table></figure><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><table><thead><tr><th>erlæ–‡ä»¶</th><th></th></tr></thead><tbody><tr><td><a href="/downloads/code/func_merge_runtime/func_merge_runtime.erl"><code>func_merge_runtime.erl</code></a></td><td>Parse transform</td></tr><tr><td><a href="/downloads/code/func_merge_runtime/func_a.erl"><code>func_a.erl</code></a></td><td>æ¨¡å—a</td></tr><tr><td><a href="/downloads/code/func_merge_runtime/func_b.erl"><code>func_b.erl</code></a></td><td>æ¨¡å—b</td></tr><tr><td><a href="/downloads/code/func_merge_runtime/func_merge.erl"><code>func_merge.erl</code></a></td><td>åˆå¹¶æ–‡ä»¶</td></tr><tr><td><a href="/downloads/code/func_merge_runtime/Emakefile"><code>Emakefile</code></a></td><td>emakefile</td></tr><tr><td><a href="/downloads/code/func_merge_runtime/readme.md"><code>readme.md</code></a></td><td>readme</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ ebin</span><br><span class="line">â”œâ”€â”€ Emakefile</span><br><span class="line">â”œâ”€â”€ readme.md</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ func_a.erl</span><br><span class="line">    â”œâ”€â”€ func_b.erl</span><br><span class="line">    â”œâ”€â”€ func_merge.erl</span><br><span class="line">    â””â”€â”€ func_merge_runtime.erl</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">erl -pa ebin -make</span></span><br><span class="line"></span><br><span class="line">Recompile: src/func_a</span><br><span class="line">Recompile: src/func_b</span><br><span class="line">Recompile: src/func_merge_runtime</span><br><span class="line">Recompile: src/func_merge</span><br><span class="line">Warning: func_b:a/0 function duplicate, Used: a/0 -&gt; func_a:a/0</span><br><span class="line">Warning: func_b:b/0 function duplicate, Used: b/0 -&gt; func_a:b/0</span><br><span class="line">Warning: func_a:a/0 function duplicate, Used: a/0 -&gt; func_a:a/0</span><br><span class="line">Warning: func_a:b/0 function duplicate, Used: b/0 -&gt; func_a:b/0</span><br><span class="line">Warning: a/0 overloaded ...</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Eshell V6.<span class="number">3</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; func_merge:module_info().</span><br><span class="line">[&#123;exports,[&#123;a,<span class="number">1</span>&#125;,</span><br><span class="line">           &#123;a,<span class="number">2</span>&#125;,</span><br><span class="line">           &#123;a,<span class="number">0</span>&#125;,</span><br><span class="line">           &#123;b,<span class="number">0</span>&#125;,</span><br><span class="line">           &#123;c,<span class="number">0</span>&#125;,</span><br><span class="line">           &#123;d,<span class="number">0</span>&#125;,</span><br><span class="line">           &#123;module_info,<span class="number">0</span>&#125;,</span><br><span class="line">           &#123;module_info,<span class="number">1</span>&#125;]&#125;,</span><br><span class="line"> &#123;imports,[]&#125;,</span><br><span class="line"> &#123;attributes,[&#123;vsn,[<span class="number">51615201590186967477100822039580749453</span>]&#125;]&#125;,</span><br><span class="line"> &#123;compile,[&#123;options,[error_summary,debug_info,</span><br><span class="line">                     &#123;outdir,<span class="string">&quot;./ebin&quot;</span>&#125;]&#125;,</span><br><span class="line">           &#123;version,<span class="string">&quot;5.0.3&quot;</span>&#125;,</span><br><span class="line">           &#123;time,&#123;<span class="number">2018</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">3</span>,<span class="number">14</span>,<span class="number">3</span>&#125;&#125;,</span><br><span class="line">           &#123;source,<span class="string">&quot;e:/zzzz/src/func_merge.erl&quot;</span>&#125;]&#125;]</span><br><span class="line"><span class="number">2</span>&gt; func_merge:a().</span><br><span class="line">func_merge_a</span><br><span class="line"><span class="number">3</span>&gt; func_merge:b().</span><br><span class="line">func_a_b</span><br><span class="line"><span class="number">4</span>&gt; func_merge:c().</span><br><span class="line">func_b_c</span><br><span class="line"><span class="number">5</span>&gt; func_merge:d().</span><br><span class="line">func_b_d</span><br><span class="line"><span class="number">6</span>&gt; func_merge:a(<span class="number">1</span>).</span><br><span class="line">func_merge_a1</span><br><span class="line"><span class="number">7</span>&gt; func_merge:a(<span class="number">2</span>).</span><br><span class="line">func_merge_a2</span><br><span class="line"><span class="number">8</span>&gt; func_merge:a(c).</span><br><span class="line">func_merge_a3</span><br><span class="line"><span class="number">9</span>&gt; </span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨ä¿®æ”¹<code>func_a</code>,<code>func_b</code>æ¨¡å—å,<code>func_merge</code>ä¸ä¼šé‡æ–°ç¼–è¯‘<br><strong>è¦æ‰‹åŠ¨åˆ é™¤é‡æ–°ç¼–è¯‘</strong></p>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlè¡Œè½¬åˆ—</title>
      <link href="/2018/08/17/mysql/mysql-row-to-col/"/>
      <url>/2018/08/17/mysql/mysql-row-to-col/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä»Šå¤©çœ‹åˆ°ä¸€ä¸ªmysqlè¡Œè½¬åˆ—çš„é—®é¢˜</p><p>å°†<code>è¡¨1</code> è½¬æ¢ä¸º <code>è¡¨2</code></p><p><code>è¡¨1</code></p><table><thead><tr><th align="right">year</th><th align="right">month</th><th align="right">amount</th></tr></thead><tbody><tr><td align="right">2011</td><td align="right">1</td><td align="right">1.1</td></tr><tr><td align="right">2011</td><td align="right">2</td><td align="right">1.2</td></tr><tr><td align="right">2011</td><td align="right">3</td><td align="right">1.3</td></tr><tr><td align="right">2011</td><td align="right">4</td><td align="right">1.4</td></tr><tr><td align="right">2012</td><td align="right">1</td><td align="right">2.1</td></tr><tr><td align="right">2012</td><td align="right">2</td><td align="right">2.2</td></tr><tr><td align="right">2012</td><td align="right">3</td><td align="right">2.3</td></tr><tr><td align="right">2012</td><td align="right">4</td><td align="right">2.4</td></tr></tbody></table><p><code>è¡¨2</code></p><table><thead><tr><th align="right">year</th><th align="right">m1</th><th align="right">m2</th><th align="right">m3</th><th align="right">m4</th></tr></thead><tbody><tr><td align="right">2011</td><td align="right">1.1</td><td align="right">1.2</td><td align="right">1.3</td><td align="right">1.4</td></tr><tr><td align="right">2012</td><td align="right">2.1</td><td align="right">2.2</td><td align="right">2.3</td><td align="right">2.4</td></tr></tbody></table><span id="more"></span><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>ç™¾åº¦è·å¾—ä»¥ä¸‹ä¸¤ç§æ–¹æ³•</p><h3 id="CASE-WHEN"><a href="#CASE-WHEN" class="headerlink" title="CASE WHEN"></a><code>CASE WHEN</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    `<span class="keyword">year</span>`,</span><br><span class="line">    <span class="built_in">MAX</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> `<span class="keyword">month</span>` <span class="operator">=</span> <span class="number">1</span> <span class="keyword">THEN</span> amount <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">as</span> &quot;m1&quot;,</span><br><span class="line">    <span class="built_in">MAX</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> `<span class="keyword">month</span>` <span class="operator">=</span> <span class="number">2</span> <span class="keyword">THEN</span> amount <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">as</span> &quot;m2&quot;, </span><br><span class="line">    <span class="built_in">MAX</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> `<span class="keyword">month</span>` <span class="operator">=</span> <span class="number">3</span> <span class="keyword">THEN</span> amount <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">as</span> &quot;m3&quot;,</span><br><span class="line">    <span class="built_in">MAX</span>( <span class="keyword">CASE</span> <span class="keyword">WHEN</span> `<span class="keyword">month</span>` <span class="operator">=</span> <span class="number">4</span> <span class="keyword">THEN</span> amount <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span>) <span class="keyword">as</span> &quot;m4&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    test</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> `<span class="keyword">year</span>`;</span><br></pre></td></tr></table></figure><h3 id="GROUP-CONCAT"><a href="#GROUP-CONCAT" class="headerlink" title="GROUP_CONCAT"></a><code>GROUP_CONCAT</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">year</span>, </span><br><span class="line">    SUBSTRING_INDEX(SUBSTRING_INDEX(str, &quot;,&quot;, <span class="number">-4</span>),&quot;,&quot;,<span class="number">1</span>) <span class="keyword">as</span> m1 ,</span><br><span class="line">    SUBSTRING_INDEX(SUBSTRING_INDEX(str, &quot;,&quot;, <span class="number">-3</span>),&quot;,&quot;,<span class="number">1</span>) <span class="keyword">as</span> m2 ,</span><br><span class="line">    SUBSTRING_INDEX(SUBSTRING_INDEX(str, &quot;,&quot;, <span class="number">-2</span>),&quot;,&quot;,<span class="number">1</span>) <span class="keyword">as</span> m3 ,</span><br><span class="line">    SUBSTRING_INDEX(SUBSTRING_INDEX(str, &quot;,&quot;, <span class="number">-1</span>),&quot;,&quot;,<span class="number">1</span>) <span class="keyword">as</span> m4 </span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">year</span>, GROUP_CONCAT(amount) <span class="keyword">as</span> str <span class="keyword">FROM</span> test <span class="keyword">GROUP</span> <span class="keyword">BY</span> `<span class="keyword">year</span>`) <span class="keyword">as</span> t;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://hchmsguo.iteye.com/blog/555543">http://hchmsguo.iteye.com/blog/555543</a></li><li><a href="https://www.cnblogs.com/crystaltu/p/6699392.html">https://www.cnblogs.com/crystaltu/p/6699392.html</a></li><li><a href="https://www.oschina.net/question/3937294_2285120">https://www.oschina.net/question/3937294_2285120</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang è¿”å›å€¼</title>
      <link href="/2018/08/16/erlang/erlang-return/"/>
      <url>/2018/08/16/erlang/erlang-return/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>erlang</code>å‡½æ•°è¿”å›çš„å‡ ç§æ–¹å¼</p><h2 id="case"><a href="#case" class="headerlink" title="case"></a>case</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> A <span class="keyword">of</span></span><br><span class="line">    <span class="literal">true</span> -&gt;</span><br><span class="line">        <span class="keyword">case</span> B <span class="keyword">of</span></span><br><span class="line">            <span class="literal">true</span> -&gt;</span><br><span class="line">                <span class="keyword">case</span> C <span class="keyword">of</span></span><br><span class="line">                    <span class="literal">true</span> -&gt;</span><br><span class="line">                        ok;</span><br><span class="line">                    <span class="literal">false</span> -&gt;</span><br><span class="line">                        error</span><br><span class="line">                <span class="keyword">end</span>;</span><br><span class="line">            <span class="literal">false</span> -&gt;</span><br><span class="line">                error</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">    <span class="literal">false</span> -&gt;</span><br><span class="line">        error</span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure><p>å¦‚æœåˆ¤æ–­å¾ˆå¤šçš„è¯, é‚£ä¹ˆä»£ç å¯è¯»æ€§å°±å¤ªå·®äº†</p><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span></span><br><span class="line">    A -&gt; ok;</span><br><span class="line">    B -&gt; ok;</span><br><span class="line">    C -&gt; ok;</span><br><span class="line">    <span class="literal">true</span> -&gt; error</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ä»£ç çœ‹èµ·æ¥è§„æ•´äº†,ä½†æ˜¯å˜é‡<code>A</code>,<code>B</code>,<code>C</code>å¿…é¡»å…ˆç®—å‡ºç»“æœ<br>æ€§èƒ½æ˜¯ä¸ªé—®é¢˜</p><h2 id="catch-1"><a href="#catch-1" class="headerlink" title="catch-1"></a>catch-1</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">test</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    <span class="keyword">catch</span> test_f1().</span><br><span class="line"><span class="function"><span class="title">test_f1</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> A <span class="keyword">of</span></span><br><span class="line">        <span class="literal">false</span> -&gt; throw(error);</span><br><span class="line">        _ -&gt; ok </span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    <span class="keyword">case</span> B <span class="keyword">of</span></span><br><span class="line">        <span class="literal">false</span> -&gt; throw(error);</span><br><span class="line">        _ -&gt; ok</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    <span class="keyword">case</span> C <span class="keyword">of</span></span><br><span class="line">        <span class="literal">false</span> -&gt; throw(error);</span><br><span class="line">        _ -&gt; ok </span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>test_1/0</code>å­˜åœ¨é€»è¾‘æŠ¥é”™,ä¹Ÿä¼šè¢«<code>catch</code><br>éœ€è¦æ‰‹åŠ¨åœ¨<code>test/0</code>å†åŠ åˆ¤æ–­</p><h2 id="catch-2"><a href="#catch-2" class="headerlink" title="catch-2"></a>catch-2</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(RETURN(Ret)</span>, throw<span class="params">(&#123;catch_return, Ret&#125;)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(CATCH(A)</span>, mycatch<span class="params">(catch (A)</span>)).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">mycatch</span><span class="params">(&#123;catch_return, Ret&#125;)</span> -&gt;</span> Ret;</span><br><span class="line"><span class="function"><span class="title">mycatch</span><span class="params">(&#123;&#x27;EXIT&#x27;, _Ret&#125; = Catch)</span> -&gt;</span> throw(Catch);</span><br><span class="line"><span class="function"><span class="title">mycatch</span><span class="params">(Ret)</span> -&gt;</span> Ret.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    ?CATCH(</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">case</span> A <span class="keyword">of</span></span><br><span class="line">            <span class="literal">false</span> -&gt; ?RETURN(error);</span><br><span class="line">            _ -&gt; ok </span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        <span class="keyword">case</span> B <span class="keyword">of</span></span><br><span class="line">            <span class="literal">false</span> -&gt; ?RETURN(error);</span><br><span class="line">            _ -&gt; ok</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        <span class="keyword">case</span> C <span class="keyword">of</span></span><br><span class="line">            <span class="literal">false</span> -&gt; ?RETURN(error);</span><br><span class="line">            _ -&gt; ok </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>).</span><br></pre></td></tr></table></figure><p>ä¸ªäººæ„Ÿè§‰è¿™ä¸ªæ¯”è¾ƒå¥½<br>è¯¥<code>catch</code>çš„<code>catch</code>äº†<br>è¯¥<code>throw</code>çš„ä¹Ÿ<code>throw</code>äº†</p>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›®å½•è·³è½¬ç¥å™¨autojump</title>
      <link href="/2018/08/15/centos/centos-autojump/"/>
      <url>/2018/08/15/centos/centos-autojump/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install autojump</span><br></pre></td></tr></table></figure><h2 id="CENTOS-LINUXä½¿ç”¨"><a href="#CENTOS-LINUXä½¿ç”¨" class="headerlink" title="CENTOS/LINUXä½¿ç”¨"></a>CENTOS/LINUXä½¿ç”¨</h2><p>å®‰è£…å,é‡æ–°æ‰“å¼€ç»ˆç«¯,æˆ–æ‰§è¡Œ<code>source etc/profile.d/autojump.sh</code>æ‰å¯ä½¿ç”¨<br>åœ¨ä½¿ç”¨<code>j xxxx</code>å‰,è¦å…ˆ<code>cd xxx/xxxx</code>ä¸€æ¬¡<br>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨<code>j xxxx</code>è¿›è¡Œè·³è½¬äº†</p><blockquote><p>æŸ¥çœ‹è®°å½•/é…ç½®æ–‡ä»¶: <code>j --stat</code></p></blockquote><h2 id="WINä½¿ç”¨"><a href="#WINä½¿ç”¨" class="headerlink" title="WINä½¿ç”¨"></a>WINä½¿ç”¨</h2><p><code>autojump</code>åœ¨<code>WINDOWS</code>æ²¡æœ‰å®‰è£…æˆåŠŸ,è€Œä¸”ä¸ªäººä¹ æƒ¯ä½¿ç”¨<code>PowerShell</code></p><p><code>PowerShell</code>ä¸‹æœ‰ä¸€ä¸ªæ›¿ä»£è€…</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> ZLocation <span class="literal">-Scope</span> CurrentUser</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> xxxx</span><br><span class="line">z xxxx</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•å’Œ<code>autojump</code>ç±»ä¼¼,åªæ˜¯<code>j</code>æ¢æˆäº†<code>z</code></p><blockquote><p>æŸ¥çœ‹è®°å½•: <code>Get-ZLocation</code><br>é…ç½®æ–‡ä»¶: <code>C:\Users\Administrator\z-location.txt</code></p></blockquote><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://github.com/vors/ZLocation.git">https://github.com/vors/ZLocation.git</a></li><li><a href="https://github.com/wting/autojump.git">https://github.com/wting/autojump.git</a></li><li><a href="https://github.com/vors/ZLocation/pull/42">https://github.com/vors/ZLocation/pull/42</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨erl_tidyæ ¼å¼åŒ–ä»£ç å®å®šä¹‰æ³¨æ„</title>
      <link href="/2018/08/09/erlang/erlang-macro/"/>
      <url>/2018/08/09/erlang/erlang-macro/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è‡ªå·±å†™äº†ä¸€ä¸ªrebar3æ’ä»¶,ç”¨äºæ ¼å¼åŒ–ä»£ç ,åŸºäº<code>erl_tidy</code><br>é“¾æ¥åœ°å€: <a href="https://github.com/kingwen0302/rebar3_plugin_fmt.git">rebar3_plugin_fmt</a><br>æ— æ„ä¸­å‘ç°ä¸€ä¸ªå®å®šä¹‰çš„é—®é¢˜</p><p>æºä»£ç :</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-define</span><span class="params">(CALC_PERIOD_RATE, <span class="number">0.6</span>)</span>. <span class="comment">%% æƒé‡æ¦‚ç‡</span></span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–åä»£ç :</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-define</span><span class="params">(CALC_PERIOD_RATE, <span class="number">5.99999999999999977796e-1</span>)</span>. <span class="comment">%% æƒé‡æ¦‚ç‡</span></span><br></pre></td></tr></table></figure><p>å› æ­¤,è‹¥æ˜¯å°æ•°, è¯·ä½¿ç”¨<code>(6/10)</code>è¿™ç§æ ¼å¼</p>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>proxychainså¯¹å•ä¸ªåº”ç”¨ä»£ç†</title>
      <link href="/2018/08/01/centos/centos7-proxychains/"/>
      <url>/2018/08/01/centos/centos7-proxychains/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#</span></span> </span><br><span class="line">git clone https://github.com/rofl0r/proxychains-ng</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># è‡ªè¡Œé€‰æ‹©ç‰ˆæœ¬</span></span></span><br><span class="line">git checkout -b v4.13</span><br><span class="line"></span><br><span class="line">cd proxychains-ng</span><br><span class="line">./configure --prefix=/usr --sysconfdir=/etc</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç”Ÿæˆé…ç½®æ–‡ä»¶</span></span></span><br><span class="line">make install-config</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/proxychains.conf</span><br><span class="line"></span><br><span class="line">dynamic_chain</span><br><span class="line">proxy_dns</span><br><span class="line">localnet 127.0.0.0/255.0.0.0</span><br><span class="line">localnet 10.0.0.0/255.0.0.0</span><br><span class="line">localnet 172.16.0.0/255.240.0.0</span><br><span class="line">localnet 192.168.0.0/255.255.0.0</span><br><span class="line"></span><br><span class="line">[ProxyList]</span><br><span class="line">socks5 192.168.70.71 1080</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p><code>proxychains4 git clone https://github.com/rofl0r/proxychains-ng</code></p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ol><li>ä¸æ˜¯æ‰€æœ‰çš„éƒ½èƒ½å¤Ÿä»£ç†,è‡³å°‘<code>ping</code>å°±ä¸è¡Œ(æ®è¯´æ˜¯ä¸æ”¯æŒå¯¹icmpä»£ç†)</li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://www.hi-linux.com/posts/48321.html">https://www.hi-linux.com/posts/48321.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°†linuxç›®å½•æ˜ å°„åˆ°windowsæœ¬åœ°</title>
      <link href="/2018/07/30/windows/window-mount-by-ssh/"/>
      <url>/2018/07/30/windows/window-mount-by-ssh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Dokan-win-sshfs"><a href="#Dokan-win-sshfs" class="headerlink" title="Dokan+win-sshfs"></a><code>Dokan</code>+<code>win-sshfs</code></h2><p>æ²¡æœ‰å®é™…ä½¿ç”¨,åªåšè®°å½•</p><ul><li><a href="https://github.com/dokan-dev/dokany/releases">Dokan</a>  </li><li><a href="https://github.com/feo-cz/win-sshfs/releases">win-sshfs</a></li><li><a href="https://www.raidrive.com/Download">RaiDrive</a></li></ul><blockquote><p><code>win-sshfs</code>å·²ç»åœæ­¢æ›´æ–°</p></blockquote><h2 id="SFTP-Net-Drive-ä¸ªäººåœ¨ç”¨"><a href="#SFTP-Net-Drive-ä¸ªäººåœ¨ç”¨" class="headerlink" title="SFTP Net Drive(ä¸ªäººåœ¨ç”¨)"></a><code>SFTP Net Drive</code>(ä¸ªäººåœ¨ç”¨)</h2><ul><li><a href="https://www.nsoftware.com/download/getfile.aspx?file=free/NDXC-A/setup.exe&name=SFTP+Net+Drive">SFTP Net Drive</a></li></ul><blockquote><p>æ–°å‘ç°çš„<code>RaiDrive</code>ä¼¼ä¹æ›´åŠ å¥½ç”¨</p></blockquote><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://blog.csdn.net/Site1997/article/details/79048480">https://blog.csdn.net/Site1997/article/details/79048480</a></li><li><a href="https://wsgzao.github.io/post/winsshfs/">https://wsgzao.github.io/post/winsshfs/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang kvlist,recordäº’è½¬</title>
      <link href="/2018/07/23/erlang/erlang-rec2kvlist/"/>
      <url>/2018/07/23/erlang/erlang-rec2kvlist/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç›®å‰é¡¹ç›®ä¸­å°†recordç»“æ„è½¬æ¢ä¸ºKVList, ç„¶åä¿å­˜åˆ°mongodbä¸­<br>ç”±äº<code>record_info(fields,Record)</code>ä¸æ”¯æŒä¼ å…¥å‚æ•°,å¤„ç†ä»recordè½¬æ¢ä¸ºkvlistæ¯”è¾ƒéº»çƒ¦</p><span id="more"></span><h2 id="ç›®å‰åšæ³•"><a href="#ç›®å‰åšæ³•" class="headerlink" title="ç›®å‰åšæ³•"></a>ç›®å‰åšæ³•</h2><p>ç›®å‰çš„åšæ³•æ˜¯ç½—åˆ—æ‰€æœ‰çš„record,å¦‚ä¸‹:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">save</span><span class="params">(Rec)</span> <span class="title">when</span> <span class="title">is_record</span><span class="params">(Rec, aaa)</span> -&gt;</span></span><br><span class="line">    KvList = lists:zip(erlang:tl(tuple_to_list(Rec), record_info(fields, aaa)),</span><br><span class="line">    <span class="comment">%% ä¿å­˜åˆ°mongodb</span></span><br><span class="line">    save_db(KvList);</span><br><span class="line">save(Rec) when is_record(Rec, bbb) -&gt;</span><br><span class="line">    KvList = lists:zip(erlang:tl(tuple_to_list(Rec), record_info(fields, bbb)),</span><br><span class="line">    <span class="comment">%% ä¿å­˜åˆ°mongodb</span></span><br><span class="line">    save_db(KvList);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å¦‚æœå­˜åœ¨<code>#aaa&#123;id = #bbb&#123;&#125;&#125;</code>è¿™ç§ç»“æ„,éœ€è¦ä¸€å±‚ä¸€å±‚çš„æ‰‹åŠ¨è§£æ</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-define</span><span class="params">(REC_TO_KVLIST(Rec, RecName)</span>,</span><br><span class="line">        lists:zip<span class="params">(erlang:tl(tuple_to_list(Rec)), record_info(fields, RecName))</span></span><br><span class="line">        ).</span><br><span class="line"></span><br><span class="line">A = #aaa&#123;id = #bbb&#123;&#125;&#125;,</span><br><span class="line">A1 = A#aaa&#123;id = ?REC_TO_KVLIST(A#aaa.id, bbb)&#125;,</span><br><span class="line">A2 = ?REC_TO_KVLIST(A1, aaa),</span><br><span class="line">ä¿å­˜åˆ°mongodbä¸­</span><br><span class="line"><span class="function"><span class="title">save_db</span><span class="params">(A2)</span></span></span><br></pre></td></tr></table></figure><p>ç›¸åº”çš„,ä»mongodbä¸­è¯»å–æ•°æ®,ä¹Ÿè¦è¿›è¡Œå¤šæ¬¡è½¬æ¢<br>ç¨å¾®ä¸æ³¨æ„å°±ä¼šå‡ºç°dbå‡çº§å¤±è´¥,æ•°æ®ä¸¢å¤±</p><h2 id="å¯èƒ½çš„è§£å†³æ–¹æ³•-æœªåœ¨é¡¹ç›®ä¸­ä½¿ç”¨"><a href="#å¯èƒ½çš„è§£å†³æ–¹æ³•-æœªåœ¨é¡¹ç›®ä¸­ä½¿ç”¨" class="headerlink" title="å¯èƒ½çš„è§£å†³æ–¹æ³•(æœªåœ¨é¡¹ç›®ä¸­ä½¿ç”¨)"></a>å¯èƒ½çš„è§£å†³æ–¹æ³•(æœªåœ¨é¡¹ç›®ä¸­ä½¿ç”¨)</h2><p><strong>å½’æ ¹åˆ°åº•è¿˜æ˜¯<code>record_info</code>,ä¸æ”¯æŒä¼ å…¥å‚æ•°</strong><br>æœç´¢github, å‘ç°<a href="https://github.com/okeuday/record_info_runtime.git">record_info_runtime</a></p><table><thead><tr><th>erlæ–‡ä»¶</th><th></th></tr></thead><tbody><tr><td><a href="/downloads/code/record_info_runtime.erl"><code>record_info_runtime.erl</code></a></td><td>Parse transform for using record_info(size, _) and record_info(fields, _) during runtime<br/>å¢åŠ äº†<code>record_init/1</code></td></tr><tr><td><a href="/downloads/code/l2r.erl"><code>l2r.erl</code></a></td><td>record,kvlistäº’è½¬</td></tr><tr><td><a href="/downloads/code/rec_a.hrl"><code>rec_a.hrl</code></a></td><td>æµ‹è¯•å¤´æ–‡ä»¶</td></tr></tbody></table><h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Eshell V6.<span class="number">3</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; rr(<span class="string">&quot;rec_a.hrl&quot;</span>).</span><br><span class="line">[name,person]</span><br><span class="line"><span class="number">2</span>&gt; KV = l2r:rec_to_kvlist(#person&#123;&#125;).</span><br><span class="line">[&#123;&#x27;__record_name__&#x27;,person&#125;,</span><br><span class="line"> &#123;id,<span class="number">0</span>&#125;,</span><br><span class="line"> &#123;name,[&#123;&#x27;__record_name__&#x27;,name&#125;,&#123;first,<span class="string">&quot;aaa&quot;</span>&#125;,&#123;last,<span class="string">&quot;bbb&quot;</span>&#125;]&#125;,</span><br><span class="line"> &#123;names,[[&#123;&#x27;__record_name__&#x27;,name&#125;,&#123;first,<span class="string">&quot;abc&quot;</span>&#125;,&#123;last,[]&#125;],</span><br><span class="line">         [&#123;&#x27;__record_name__&#x27;,name&#125;,&#123;first,[]&#125;,&#123;last,<span class="string">&quot;def&quot;</span>&#125;]]&#125;,</span><br><span class="line"> &#123;sex,<span class="number">0</span>&#125;]</span><br><span class="line"><span class="number">3</span>&gt; l2r:kvlist_to_rec(KV).</span><br><span class="line">#person&#123;id = <span class="number">0</span>,</span><br><span class="line">        name = #name&#123;first = <span class="string">&quot;aaa&quot;</span>,last = <span class="string">&quot;bbb&quot;</span>&#125;,</span><br><span class="line">        names = [#name&#123;first = <span class="string">&quot;abc&quot;</span>,last = []&#125;,</span><br><span class="line">                 #name&#123;first = [],last = <span class="string">&quot;def&quot;</span>&#125;],</span><br><span class="line">        sex = <span class="number">0</span>&#125;</span><br><span class="line"><span class="number">4</span>&gt; #person&#123;&#125;.</span><br><span class="line">#person&#123;id = <span class="number">0</span>,</span><br><span class="line">        name = #name&#123;first = <span class="string">&quot;aaa&quot;</span>,last = <span class="string">&quot;bbb&quot;</span>&#125;,</span><br><span class="line">        names = [#name&#123;first = <span class="string">&quot;abc&quot;</span>,last = []&#125;,</span><br><span class="line">                 #name&#123;first = [],last = <span class="string">&quot;def&quot;</span>&#125;],</span><br><span class="line">        sex = <span class="number">0</span>&#125;</span><br><span class="line"><span class="number">5</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="æœ€åè´´ä»£ç å‡‘å­—æ•°"><a href="#æœ€åè´´ä»£ç å‡‘å­—æ•°" class="headerlink" title="æœ€åè´´ä»£ç å‡‘å­—æ•°"></a>æœ€åè´´ä»£ç å‡‘å­—æ•°</h2><figure class="highlight erlang"><figcaption><span>record_info_runtime.erl</span><a href="/downloads/code/record_info_runtime.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%-*-Mode:erlang;coding:utf-8;tab-width:4;c-basic-offset:4;indent-tabs-mode:()-*-</span></span><br><span class="line"><span class="comment">% ex: set ft=erlang fenc=utf-8 sts=4 ts=4 sw=4 et:</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%%------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">%%% @doc</span></span><br><span class="line"><span class="comment">%%% ==Record Info Runtime Parse Transform==</span></span><br><span class="line"><span class="comment">%%% Insert private functions into a module if the module contains any</span></span><br><span class="line"><span class="comment">%%% record definitions (including those from header files).  The private</span></span><br><span class="line"><span class="comment">%%% functions inserted are record_info_size/1 and record_info_fields/1, so</span></span><br><span class="line"><span class="comment">%%% the record_info(size, _) and record_info(fields, _) can be called at</span></span><br><span class="line"><span class="comment">%%% runtime, but without exported functions.  The unused function warning</span></span><br><span class="line"><span class="comment">%%% is automatically turned off for the inserted functions, so they</span></span><br><span class="line"><span class="comment">%%% don&#x27;t necessarily need to be used.</span></span><br><span class="line"><span class="comment">%%% @end</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%% BSD LICENSE</span></span><br><span class="line"><span class="comment">%%% </span></span><br><span class="line"><span class="comment">%%% Copyright (c) 2013, Michael Truog &lt;mjtruog at gmail dot com&gt;</span></span><br><span class="line"><span class="comment">%%% All rights reserved.</span></span><br><span class="line"><span class="comment">%%% </span></span><br><span class="line"><span class="comment">%%% Redistribution and use in source and binary forms, with or without</span></span><br><span class="line"><span class="comment">%%% modification, are permitted provided that the following conditions are met:</span></span><br><span class="line"><span class="comment">%%% </span></span><br><span class="line"><span class="comment">%%%     * Redistributions of source code must retain the above copyright</span></span><br><span class="line"><span class="comment">%%%       notice, this list of conditions and the following disclaimer.</span></span><br><span class="line"><span class="comment">%%%     * Redistributions in binary form must reproduce the above copyright</span></span><br><span class="line"><span class="comment">%%%       notice, this list of conditions and the following disclaimer in</span></span><br><span class="line"><span class="comment">%%%       the documentation and/or other materials provided with the</span></span><br><span class="line"><span class="comment">%%%       distribution.</span></span><br><span class="line"><span class="comment">%%%     * All advertising materials mentioning features or use of this</span></span><br><span class="line"><span class="comment">%%%       software must display the following acknowledgment:</span></span><br><span class="line"><span class="comment">%%%         This product includes software developed by Michael Truog</span></span><br><span class="line"><span class="comment">%%%     * The name of the author may not be used to endorse or promote</span></span><br><span class="line"><span class="comment">%%%       products derived from this software without specific prior</span></span><br><span class="line"><span class="comment">%%%       written permission</span></span><br><span class="line"><span class="comment">%%% </span></span><br><span class="line"><span class="comment">%%% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND</span></span><br><span class="line"><span class="comment">%%% CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span></span><br><span class="line"><span class="comment">%%% INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></span><br><span class="line"><span class="comment">%%% OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></span><br><span class="line"><span class="comment">%%% DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR</span></span><br><span class="line"><span class="comment">%%% CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></span><br><span class="line"><span class="comment">%%% SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span></span><br><span class="line"><span class="comment">%%% BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></span><br><span class="line"><span class="comment">%%% SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span></span><br><span class="line"><span class="comment">%%% INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span></span><br><span class="line"><span class="comment">%%% WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span></span><br><span class="line"><span class="comment">%%% NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></span><br><span class="line"><span class="comment">%%% OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span></span><br><span class="line"><span class="comment">%%% DAMAGE.</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%% @author Michael Truog &lt;mjtruog [at] gmail (dot) com&gt;</span></span><br><span class="line"><span class="comment">%%% @copyright 2013 Michael Truog</span></span><br><span class="line"><span class="comment">%%% @version 1.0.0 {@date} {@time}</span></span><br><span class="line"><span class="comment">%%%------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-module</span><span class="params">(record_info_runtime)</span>.</span><br><span class="line"><span class="keyword">-author</span><span class="params">(&#x27;mjtruog [at] gmail (dot)</span> com&#x27;).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([parse_transform/<span class="number">2</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(state,</span></span><br><span class="line"><span class="params">    {</span></span><br><span class="line"><span class="params">        records = [], <span class="comment">% stored in reverse order</span></span></span><br><span class="line"><span class="params">        types = dict:new()</span></span><br><span class="line"><span class="params">    })</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">parse_transform</span><span class="params">(Forms, _CompileOptions)</span> -&gt;</span></span><br><span class="line">    <span class="comment">%% {ok, IO} = file:open(&quot;a.txt&quot;, [write]),</span></span><br><span class="line">    <span class="comment">%% io:format(IO, &quot;~p&quot;, [Forms]),</span></span><br><span class="line">    <span class="comment">%% io:close(IO),</span></span><br><span class="line">    forms_process(Forms, [], #state{}).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">forms_process</span><span class="params">([{eof, _} = EOF], L,</span></span></span><br><span class="line"><span class="params"><span class="function">              #state{records = []})</span> -&gt;</span></span><br><span class="line">    <span class="comment">% nothing to do (no records found)</span></span><br><span class="line">    lists:reverse([EOF | L]);</span><br><span class="line"><span class="function"><span class="title">forms_process</span><span class="params">([{eof, _} = EOF], L,</span></span></span><br><span class="line"><span class="params"><span class="function">              #state{records = Records,</span></span></span><br><span class="line"><span class="params"><span class="function">                     types = Types})</span> -&gt;</span></span><br><span class="line">    [{attribute, _, file, _} = FILE |</span><br><span class="line">     NewForms] = lists:reverse([EOF,</span><br><span class="line">                                record_init(Records),</span><br><span class="line">                                record_info_size(Records),</span><br><span class="line">                                record_info_fields(Records),</span><br><span class="line">                                record_info_fieldtypes(Records, Types),</span><br><span class="line">                                record_new(Records),</span><br><span class="line">                                records(Records) | L]),</span><br><span class="line">    [FILE, record_info_f_nowarn() | NewForms];</span><br><span class="line"><span class="function"><span class="title">forms_process</span><span class="params">([{attribute, _Line, record,</span></span></span><br><span class="line"><span class="params"><span class="function">                {Name, _Fields}} = H | Forms], L,</span></span></span><br><span class="line"><span class="params"><span class="function">              #state{records = Records} = State)</span> -&gt;</span></span><br><span class="line">  forms_process(Forms, [H | L],</span><br><span class="line">                State#state{records = [Name | Records]});</span><br><span class="line"><span class="function"><span class="title">forms_process</span><span class="params">([{attribute, _Line, type,</span></span></span><br><span class="line"><span class="params"><span class="function">                {{record, Name}, Fields, _}} = H | Forms], L,</span></span></span><br><span class="line"><span class="params"><span class="function">              State)</span> -&gt;</span></span><br><span class="line">  forms_process(Forms, [H | L],</span><br><span class="line">                type_record_fields(Fields, Name, State));</span><br><span class="line"><span class="function"><span class="title">forms_process</span><span class="params">([H | Forms], L, State)</span> -&gt;</span></span><br><span class="line">    forms_process(Forms, [H | L], State).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_f_nowarn</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    {attribute, <span class="number">1</span>, compile,</span><br><span class="line">     {nowarn_unused_function,</span><br><span class="line">      [{records, <span class="number">0</span>},</span><br><span class="line">       {record_new, <span class="number">1</span>},</span><br><span class="line">       {record_info_fieldtypes, <span class="number">1</span>},</span><br><span class="line">       {record_info_fields, <span class="number">1</span>},</span><br><span class="line">       {record_init, <span class="number">1</span>},</span><br><span class="line">       {record_info_size, <span class="number">1</span>}]}}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">records</span><span class="params">(Records)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, records, <span class="number">0</span>,</span><br><span class="line">     [{clause, <span class="number">1</span>, [], [],</span><br><span class="line">       [records_f(lists:reverse(Records))]}]}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">records_f</span><span class="params">([Name])</span> -&gt;</span></span><br><span class="line">    {cons, <span class="number">1</span>, {atom, <span class="number">1</span>, Name}, {nil, <span class="number">1</span>}};</span><br><span class="line"><span class="function"><span class="title">records_f</span><span class="params">([Name | Records])</span> -&gt;</span></span><br><span class="line">    {cons, <span class="number">1</span>, {atom, <span class="number">1</span>, Name}, records_f(Records)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_new</span><span class="params">(Records)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, record_new, <span class="number">1</span>,</span><br><span class="line">     record_new_f([], Records)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_new_f</span><span class="params">(L, [])</span> -&gt;</span></span><br><span class="line">    L;</span><br><span class="line"><span class="function"><span class="title">record_new_f</span><span class="params">(L, [Name | Records])</span> -&gt;</span></span><br><span class="line">    record_new_f([{clause, <span class="number">1</span>,</span><br><span class="line">                   [{atom, <span class="number">1</span>, Name}], [],</span><br><span class="line">                   [{record, <span class="number">1</span>, Name, []}]} | L], Records).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes</span><span class="params">(Records, Types)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, record_info_fieldtypes, <span class="number">1</span>,</span><br><span class="line">     record_info_fieldtypes_f([], Records, Types)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_types</span><span class="params">([])</span> -&gt;</span></span><br><span class="line">    {nil, <span class="number">1</span>};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_types</span><span class="params">([TypeInfo | TypeList])</span> -&gt;</span></span><br><span class="line">    {cons, <span class="number">1</span>,</span><br><span class="line">     record_info_fieldtypes_f_entry_typeinfo(TypeInfo, false),</span><br><span class="line">     record_info_fieldtypes_f_entry_types(TypeList)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo_type</span><span class="params">({M, T})</span></span></span><br><span class="line"><span class="function">    <span class="title">when</span> <span class="title">is_atom</span><span class="params">(M)</span>, <span class="title">is_atom</span><span class="params">(T)</span> -&gt;</span></span><br><span class="line">    {tuple, <span class="number">1</span>, [{atom, <span class="number">1</span>, M}, {atom, <span class="number">1</span>, T}]};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo_type</span><span class="params">(T)</span></span></span><br><span class="line"><span class="function">    <span class="title">when</span> <span class="title">is_atom</span><span class="params">(T)</span> -&gt;</span></span><br><span class="line">    {atom, <span class="number">1</span>, T}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo</span><span class="params">({Type, []}, false)</span> -&gt;</span></span><br><span class="line">    record_info_fieldtypes_f_entry_typeinfo_type(Type);</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo</span><span class="params">({Type, TypeList}, _)</span> -&gt;</span></span><br><span class="line">    {tuple, <span class="number">1</span>,</span><br><span class="line">     [record_info_fieldtypes_f_entry_typeinfo_type(Type),</span><br><span class="line">      record_info_fieldtypes_f_entry_types(TypeList)]};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo</span><span class="params">(Type, _)</span></span></span><br><span class="line"><span class="function">    <span class="title">when</span> <span class="title">is_atom</span><span class="params">(Type)</span> -&gt;</span></span><br><span class="line">    <span class="comment">% e.g.: any</span></span><br><span class="line">    {atom, <span class="number">1</span>, Type};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo</span><span class="params">({Type, _Line, Constant}, _)</span></span></span><br><span class="line"><span class="function">    <span class="title">when</span> <span class="title">is_atom</span><span class="params">(Type)</span> -&gt;</span></span><br><span class="line">    <span class="comment">% e.g.: {integer, 1, 128}</span></span><br><span class="line">    {Type, <span class="number">1</span>, Constant};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry_typeinfo</span><span class="params">(Literal, _)</span> -&gt;</span></span><br><span class="line">    exit({badarg, Literal}).</span><br><span class="line">    <span class="comment">%{string, 1, lists:flatten(io_lib:format(&quot;~p&quot;,[Literal]))}.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry</span><span class="params">(FieldName, undefined)</span> -&gt;</span></span><br><span class="line">    {tuple, <span class="number">1</span>,</span><br><span class="line">     [{atom, <span class="number">1</span>, FieldName},</span><br><span class="line">      {atom, <span class="number">1</span>, undefined}]};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entry</span><span class="params">(FieldName, TypeInfo)</span> -&gt;</span></span><br><span class="line">    {tuple, <span class="number">1</span>,</span><br><span class="line">     [{atom, <span class="number">1</span>, FieldName},</span><br><span class="line">      record_info_fieldtypes_f_entry_typeinfo(TypeInfo, true)]}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entries</span><span class="params">([{FieldName, TypeInfo}])</span> -&gt;</span></span><br><span class="line">    {cons, <span class="number">1</span>, record_info_fieldtypes_f_entry(FieldName, TypeInfo),</span><br><span class="line">     {nil, <span class="number">1</span>}};</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f_entries</span><span class="params">([{FieldName, TypeInfo} | L])</span> -&gt;</span></span><br><span class="line">    {cons, <span class="number">1</span>, record_info_fieldtypes_f_entry(FieldName, TypeInfo),</span><br><span class="line">     record_info_fieldtypes_f_entries(L)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f</span><span class="params">(L, [], _Types)</span> -&gt;</span></span><br><span class="line">    L;</span><br><span class="line"><span class="function"><span class="title">record_info_fieldtypes_f</span><span class="params">(L, [Name | Records], Types)</span> -&gt;</span></span><br><span class="line">    ClauseBody = <span class="keyword">case</span> dict:find(Name, Types) <span class="keyword">of</span></span><br><span class="line">        {ok, FieldTypes} -&gt;</span><br><span class="line">            [record_info_fieldtypes_f_entries(lists:reverse(FieldTypes))];</span><br><span class="line">        error -&gt;</span><br><span class="line">            [{lc, <span class="number">1</span>,</span><br><span class="line">              {tuple, <span class="number">1</span>,</span><br><span class="line">               [{var, <span class="number">1</span>, &#x27;FieldName&#x27;},</span><br><span class="line">                {atom, <span class="number">1</span>, undefined}]},</span><br><span class="line">              [{generate, <span class="number">1</span>,</span><br><span class="line">                {var, <span class="number">1</span>, &#x27;FieldName&#x27;},</span><br><span class="line">                {call, <span class="number">1</span>,</span><br><span class="line">                 {atom, <span class="number">1</span>, record_info},</span><br><span class="line">                 [{atom, <span class="number">1</span>, fields},</span><br><span class="line">                  {atom, <span class="number">1</span>, Name}]}}]}]</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    record_info_fieldtypes_f([{clause, <span class="number">1</span>,</span><br><span class="line">                               [{atom, <span class="number">1</span>, Name}], [],</span><br><span class="line">                               ClauseBody} | L], Records, Types).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_init</span><span class="params">(Records)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, record_init, <span class="number">1</span>,</span><br><span class="line">    record_init_f([], Records)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_init_f</span><span class="params">(L, [])</span> -&gt;</span></span><br><span class="line">    L;</span><br><span class="line"><span class="function"><span class="title">record_init_f</span><span class="params">(L, [Name|Records])</span> -&gt;</span></span><br><span class="line">    record_init_f([{clause, <span class="number">1</span>,</span><br><span class="line">                   [{atom, <span class="number">1</span>, Name}], [],</span><br><span class="line">                   [{record,<span class="number">1</span>,Name, []}]}|L], Records).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fields</span><span class="params">(Records)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, record_info_fields, <span class="number">1</span>,</span><br><span class="line">     record_info_fields_f([], Records)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_fields_f</span><span class="params">(L, [])</span> -&gt;</span></span><br><span class="line">    L;</span><br><span class="line"><span class="function"><span class="title">record_info_fields_f</span><span class="params">(L, [Name | Records])</span> -&gt;</span></span><br><span class="line">    record_info_fields_f([{clause, <span class="number">1</span>,</span><br><span class="line">                           [{atom, <span class="number">1</span>, Name}], [],</span><br><span class="line">                           [{call, <span class="number">1</span>,</span><br><span class="line">                             {atom, <span class="number">1</span>, record_info},</span><br><span class="line">                             [{atom, <span class="number">1</span>, fields},</span><br><span class="line">                              {atom, <span class="number">1</span>, Name}]}]} | L], Records).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_size</span><span class="params">(Records)</span> -&gt;</span></span><br><span class="line">    {function, <span class="number">1</span>, record_info_size, <span class="number">1</span>,</span><br><span class="line">     record_info_size_f([], Records)}.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">record_info_size_f</span><span class="params">(L, [])</span> -&gt;</span></span><br><span class="line">    L;</span><br><span class="line"><span class="function"><span class="title">record_info_size_f</span><span class="params">(L, [Name | Records])</span> -&gt;</span></span><br><span class="line">    record_info_size_f([{clause, <span class="number">1</span>,</span><br><span class="line">                         [{atom, <span class="number">1</span>, Name}], [],</span><br><span class="line">                         [{call, <span class="number">1</span>,</span><br><span class="line">                           {atom, <span class="number">1</span>, record_info},</span><br><span class="line">                           [{atom, <span class="number">1</span>, size},</span><br><span class="line">                            {atom, <span class="number">1</span>, Name}]}]} | L], Records).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">type_record_field_info</span><span class="params">({type, _Line1, union,</span></span></span><br><span class="line"><span class="params"><span class="function">                        [{atom, _Line2, undefined}, TypeInfo]})</span> -&gt;</span></span><br><span class="line">    type_record_field_info(TypeInfo);</span><br><span class="line"><span class="function"><span class="title">type_record_field_info</span><span class="params">({type, _Line, Type, any})</span> -&gt;</span></span><br><span class="line">    {Type, [any]};</span><br><span class="line"><span class="function"><span class="title">type_record_field_info</span><span class="params">({type, _Line, Type, TypeList})</span> -&gt;</span></span><br><span class="line">    {Type, [type_record_field_info(T) || T &lt;- TypeList]};</span><br><span class="line"><span class="function"><span class="title">type_record_field_info</span><span class="params">({remote_type, _Line1,</span></span></span><br><span class="line"><span class="params"><span class="function">                        [{atom, _Line2, Module},</span></span></span><br><span class="line"><span class="params"><span class="function">                         {atom, _Line3, Type}, Arguments]})</span> -&gt;</span></span><br><span class="line">    {{Module, Type}, Arguments};</span><br><span class="line"><span class="function"><span class="title">type_record_field_info</span><span class="params">(Literal)</span> -&gt;</span></span><br><span class="line">    Literal.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">type_record_fields</span><span class="params">([], _RecordName, State)</span> -&gt;</span></span><br><span class="line">    State;</span><br><span class="line"><span class="function"><span class="title">type_record_fields</span><span class="params">([{record_field, _Line1,</span></span></span><br><span class="line"><span class="params"><span class="function">                     {atom, _Line2, FieldName}, _Value} | Fields],</span></span></span><br><span class="line"><span class="params"><span class="function">                   RecordName, #state{types = Types} = State)</span> -&gt;</span></span><br><span class="line">    Entry = {FieldName, undefined},</span><br><span class="line">    NewTypes = dict:update(RecordName, <span class="keyword">fun</span>(L) -&gt;</span><br><span class="line">        [Entry | L]</span><br><span class="line">    <span class="keyword">end</span>, [Entry], Types),</span><br><span class="line">    type_record_fields(Fields, RecordName, State#state{types = NewTypes});</span><br><span class="line"><span class="function"><span class="title">type_record_fields</span><span class="params">([{typed_record_field, RecordField, TypeInfo} | Fields],</span></span></span><br><span class="line"><span class="params"><span class="function">                   RecordName, #state{types = Types} = State)</span> -&gt;</span></span><br><span class="line">    FieldName = <span class="keyword">case</span> RecordField <span class="keyword">of</span></span><br><span class="line">        {record_field, _Line1,</span><br><span class="line">         {atom, _Line2, Name}, _Value} -&gt;</span><br><span class="line">            Name;</span><br><span class="line">        {record_field, _Line1,</span><br><span class="line">         {atom, _Line2, Name}} -&gt;</span><br><span class="line">            Name</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    Entry = {FieldName, type_record_field_info(TypeInfo)},</span><br><span class="line">    NewTypes = dict:update(RecordName, <span class="keyword">fun</span>(L) -&gt;</span><br><span class="line">        [Entry | L]</span><br><span class="line">    <span class="keyword">end</span>, [Entry], Types),</span><br><span class="line">    type_record_fields(Fields, RecordName, State#state{types = NewTypes}).</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><figcaption><span>rec_a.hrl</span><a href="/downloads/code/rec_a.hrl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-record</span><span class="params">(name, {</span></span><br><span class="line"><span class="params">    first = <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="params">    last = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="params">})</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(person, {</span></span><br><span class="line"><span class="params">    id = <span class="number">0</span></span></span><br><span class="line"><span class="params">    ,name = #name{first=<span class="string">&quot;aaa&quot;</span>, last=<span class="string">&quot;bbb&quot;</span>}</span></span><br><span class="line"><span class="params">    ,names = [#name{first=<span class="string">&quot;abc&quot;</span>}, #name{last=<span class="string">&quot;def&quot;</span>}]</span></span><br><span class="line"><span class="params">    ,sex = <span class="number">0</span></span></span><br><span class="line"><span class="params">})</span>.</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><figcaption><span>l2r.erl</span><a href="/downloads/code/l2r.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% coding: latin-1</span></span><br><span class="line"><span class="comment">%%%-----------------------------------------------</span></span><br><span class="line"><span class="comment">%%% @doc</span></span><br><span class="line"><span class="comment">%%%     record,kvlistäº’è½¬</span></span><br><span class="line"><span class="comment">%%%     åŒ…å«å¤´æ–‡ä»¶å³å¯</span></span><br><span class="line"><span class="comment">%%% @end</span></span><br><span class="line"><span class="comment">%%%-----------------------------------------------</span></span><br><span class="line"><span class="keyword">-module</span><span class="params">(l2r)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-include</span><span class="params">(<span class="string">&quot;rec_a.hrl&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(RECORD_NAME, &#x27;__record_name__&#x27;)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(ERROR_MSG(Format, Args)</span>, io:format<span class="params">(<span class="string">&quot;[ERROR]&quot;</span> ++ Format ++ <span class="string">&quot;\n&quot;</span>, Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(INFO_MSG(Format, Args)</span>, io:format<span class="params">(<span class="string">&quot;[INFO]&quot;</span> ++ Format ++ <span class="string">&quot;\n&quot;</span>, Args)</span>).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-compile</span><span class="params">([{parse_transform, record_info_runtime}])</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([</span></span><br><span class="line"><span class="params">         rec_to_kvlist/<span class="number">1</span>,</span></span><br><span class="line"><span class="params">         kvlist_to_rec/<span class="number">1</span></span></span><br><span class="line"><span class="params">        ])</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([</span></span><br><span class="line"><span class="params">         records/<span class="number">0</span>,</span></span><br><span class="line"><span class="params">         record_info_fields/<span class="number">1</span>,</span></span><br><span class="line"><span class="params">         record_info_size/<span class="number">1</span></span></span><br><span class="line"><span class="params">        ])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">rec_to_kvlist</span><span class="params">(Rec)</span> -&gt;</span></span><br><span class="line">    rec_to_kvlist_f1(Rec, <span class="number">1</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">rec_to_kvlist_f1</span><span class="params">(Rec, Depth)</span> <span class="title">when</span> D<span class="title">epth</span> &gt; 10 -&gt;</span></span><br><span class="line">    throw({error, Depth, Rec});</span><br><span class="line"><span class="function"><span class="title">rec_to_kvlist_f1</span><span class="params">(Rec, Depth)</span> <span class="title">when</span> <span class="title">is_tuple</span><span class="params">(Rec)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> is_record(Rec) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt;</span><br><span class="line">            RecName = erlang:element(<span class="number">1</span>, Rec),</span><br><span class="line">            Fields = [?RECORD_NAME|record_info_fields(RecName)],</span><br><span class="line">            Values = tuple_to_list(Rec),</span><br><span class="line">            Fun = <span class="keyword">fun</span>({Field, Value}) <span class="keyword">when</span> is_tuple(Value) -&gt;</span><br><span class="line">                          {Field, rec_to_kvlist_f1(Value, Depth + <span class="number">1</span>)};</span><br><span class="line">                     ({Field, Value}) <span class="keyword">when</span> is_list(Value) -&gt;</span><br><span class="line">                          {Field, [rec_to_kvlist_f1(V, Depth + <span class="number">1</span>) || V &lt;- Value]};</span><br><span class="line">                     ({Field, Value}) -&gt;</span><br><span class="line">                          {Field, Value}</span><br><span class="line">                  <span class="keyword">end</span>,</span><br><span class="line">            lists:map(Fun, lists:zip(Fields, Values));</span><br><span class="line">        <span class="literal">false</span> -&gt;</span><br><span class="line">            Rec</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="title">rec_to_kvlist_f1</span><span class="params">(Val, _)</span> -&gt;</span> Val.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">kvlist_to_rec</span><span class="params">(KvList)</span> <span class="title">when</span> <span class="title">is_list</span><span class="params">(KvList)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> proplists:get_value(?RECORD_NAME, KvList) <span class="keyword">of</span></span><br><span class="line">        undefined -&gt;</span><br><span class="line">            Fun = <span class="keyword">fun</span>(Val) -&gt; kvlist_to_rec(Val) <span class="keyword">end</span>,</span><br><span class="line">            lists:map(Fun, KvList);</span><br><span class="line">        RecName -&gt;</span><br><span class="line">            InitList = lists:zip(</span><br><span class="line">                         [?RECORD_NAME|record_info_fields(RecName)],</span><br><span class="line">                         tuple_to_list(record_init(RecName))),</span><br><span class="line">            Fun = <span class="keyword">fun</span>(Field) -&gt;</span><br><span class="line">                          <span class="keyword">case</span> proplists:get_value(Field, KvList) <span class="keyword">of</span></span><br><span class="line">                              undefined -&gt;</span><br><span class="line">                                  proplists:get_value(Field, InitList);</span><br><span class="line">                              Val <span class="keyword">when</span> is_list(Val) -&gt;</span><br><span class="line">                                  kvlist_to_rec(Val);</span><br><span class="line">                              Val -&gt;</span><br><span class="line">                                  Val</span><br><span class="line">                          <span class="keyword">end</span></span><br><span class="line">                  <span class="keyword">end</span>,</span><br><span class="line">            list_to_tuple(lists:map(Fun, [?RECORD_NAME|record_info_fields(RecName)]))</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="title">kvlist_to_rec</span><span class="params">(KvList)</span> -&gt;</span> KvList.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">is_record</span><span class="params">(Rec)</span> <span class="title">when</span> <span class="title">is_tuple</span><span class="params">(Rec)</span>, <span class="title">tuple_size</span><span class="params">(Rec)</span> &gt;= 1 -&gt;</span></span><br><span class="line">    RecName = erlang:element(<span class="number">1</span>, Rec),</span><br><span class="line"></span><br><span class="line">    is_list(record_info_fields(RecName))</span><br><span class="line">    <span class="keyword">andalso</span> length(tuple_to_list(Rec)) =:= record_info_size(RecName);</span><br><span class="line"><span class="function"><span class="title">is_record</span><span class="params">(_Other)</span> -&gt;</span> <span class="literal">false</span>.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä½¿ç”¨YUMå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„è½¯ä»¶</title>
      <link href="/2018/07/18/centos/centos-yum-install-soft/"/>
      <url>/2018/07/18/centos/centos-yum-install-soft/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨<code>--showduplicates</code>å‚æ•°åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum search wget</span><br><span class="line">=================================================================================== N/S matched: wget ===================================================================================</span><br><span class="line">wget.x86_64 : A utility for retrieving files using the HTTP or FTP protocols</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# yum search wget --showduplicates</span><br><span class="line">============================================================ N/S matched: wget =============================================================</span><br><span class="line">wget-1.14-10.el7_0.1.x86_64 : A utility for retrieving files using the HTTP or FTP protocols</span><br><span class="line">wget-1.14-15.el7_4.1.x86_64 : A utility for retrieving files using the HTTP or FTP protocols</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum list wget</span><br><span class="line">Installed Packages</span><br><span class="line">wget.x86_64      1.14-10.el7_0.1       @base</span><br><span class="line">Available Packages</span><br><span class="line">wget.x86_64      1.14-15.el7_4.1       base</span><br><span class="line">[root@localhost ~]#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# yum list wget --showduplicates</span><br><span class="line">Installed Packages</span><br><span class="line">wget.x86_64      1.14-10.el7_0.1       @base</span><br><span class="line">Available Packages</span><br><span class="line">wget.x86_64      1.14-15.el7_4.1       base</span><br></pre></td></tr></table></figure><p><strong>ä½†æ˜¯ä¸å»ºè®®å®‰è£…å‰ç‰ˆæœ¬çš„è½¯ä»¶,æœ‰å¯èƒ½å‡ºç°ä¸æ»¡è¶³ä¾èµ–çš„æŠ¥é”™</strong></p>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ å¿«erlangç¼–è¯‘</title>
      <link href="/2018/07/12/windows/windows-erlang-make/"/>
      <url>/2018/07/12/windows/windows-erlang-make/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘åœ¨å­¦ä¹ <code>powershell</code>,éšä¾¿å†™äº†ä¸ªå¯ä»¥åŠ å¿«ç¼–è¯‘çš„è„šæœ¬<br>ä¸å¾—ä¸è¯´,<code>powershell</code>ç®—æ˜¯<code>windows</code>ä¸‹æœ€å¥½ç”¨çš„è„šæœ¬å·¥å…·äº†<br>ç†è®ºä¸Šè¿™ä¸ªè„šæœ¬ä¹Ÿæ˜¯å¯ä»¥åœ¨linuxä¸‹ä½¿ç”¨çš„, <a href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-powershell-core-on-linux?view=powershell-6">powershellå®‰è£…æ•™ç¨‹</a><br><strong>windowsä¸‹çš„è„šæœ¬è¦ç”¨gbkç¼–ç </strong>,è›‹ç–¼â€¦<br>linuxä¸‹åŠ å¿«ç¼–è¯‘çš„è„šæœ¬è¯·ç§»æ­¥<a href="https://www.mingilin.com/2018/02/08/erlang/erlang-quick-make/">ERLANGå¿«é€Ÿç¼–è¯‘è„šæœ¬</a></p><span id="more"></span><hr><p>è„šæœ¬åŸºæœ¬åŸç†æ˜¯æ‰¾å‡ºé¡¹ç›®ä¸­ä¿®æ”¹æ—¶é—´å¤§äº<code>timefile</code>çš„æœ€åä¿®æ”¹æ—¶é—´çš„æ–‡ä»¶,ç„¶ååˆ†æ®µç¼–è¯‘<br><strong>è„šæœ¬è¯·æ‰‹åŠ¨ä¿®æ”¹ç¼–ç ä¸ºgbk,å¦åˆ™æŠ¥é”™</strong><br>ä¸‹é¢è„šæœ¬å¯¹åº”çš„ç›®å½•ç»“æ„å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">proj_root</span><br><span class="line">  â”œâ”€src</span><br><span class="line">  â”œâ”€include</span><br><span class="line">  â”œâ”€ebin</span><br><span class="line">  â”‚  â””â”€mmake.beam</span><br><span class="line">  â”œâ”€script</span><br><span class="line">  â”‚  â”œâ”€ctl.ps1</span><br><span class="line">  â”‚  â””â”€funlib.ps1</span><br><span class="line">  â”œâ”€Emakefile</span><br><span class="line">  â””â”€timefile</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><figcaption><span>ctl.ps1</span><a href="/downloads/code/ctl.ps1">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:gbk</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$cur_dir</span> = <span class="built_in">Split-Path</span> <span class="variable">$MyInvocation</span>.MyCommand.Path</span><br><span class="line"><span class="variable">$dir_main</span> = <span class="string">&quot;<span class="variable">$cur_dir</span>/../&quot;</span></span><br><span class="line"><span class="variable">$dir_erl</span> = <span class="variable">$dir_main</span></span><br><span class="line"><span class="variable">$dir_log</span> = <span class="string">&quot;<span class="variable">$dir_erl</span>/logs&quot;</span></span><br><span class="line"><span class="variable">$werl</span> = <span class="string">&quot;werl&quot;</span></span><br><span class="line"><span class="variable">$erl</span> = <span class="string">&quot;erl&quot;</span></span><br><span class="line"><span class="variable">$node_name</span> = <span class="string">&quot;cymmo&quot;</span></span><br><span class="line"><span class="variable">$node_domain</span> = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line"><span class="variable">$cookie</span> = <span class="string">&quot;cy_log&quot;</span></span><br><span class="line"><span class="variable">$erl_port_min</span> = <span class="number">41001</span></span><br><span class="line"><span class="variable">$erl_port_max</span> = <span class="number">41100</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$param_kernel</span> = <span class="string">&quot;-kernel inet_dist_listen_min <span class="variable">$erl_port_min</span> -kernel inet_dist_listen_max <span class="variable">$erl_port_max</span>&quot;</span></span><br><span class="line"><span class="variable">$param_other</span> = <span class="string">&quot;+P 204800 -smp enable -server_base <span class="variable">$dir_main</span> -setcookie <span class="variable">$cookie</span>&quot;</span></span><br><span class="line"><span class="variable">$param_env</span> = <span class="string">&quot;-evn ERL_MAX_PORTS 10240&quot;</span></span><br><span class="line"><span class="variable">$param_pa</span> = <span class="string">&quot;-pa <span class="variable">$dir_erl</span>/config -pa <span class="variable">$dir_erl</span>/ebin -pa <span class="variable">$dir_erl</span>/baseebin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$param_config_game</span> = <span class="string">&quot;-config <span class="variable">$dir_erl</span>/config/run_game&quot;</span></span><br><span class="line"><span class="variable">$game_dump_log_file</span> = <span class="string">&quot;-env ERL_CRASH_DUMP <span class="variable">$dir_log</span>/game_crash.dump&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$conf</span> = <span class="selector-tag">@</span>{</span><br><span class="line">    cur_dir            = <span class="variable">$cur_dir</span>;</span><br><span class="line">    dir_main           = <span class="variable">$dir_main</span>;</span><br><span class="line">    dir_erl            = <span class="variable">$dir_erl</span>;</span><br><span class="line">    dir_log            = <span class="variable">$dir_log</span>;</span><br><span class="line">    werl               = <span class="variable">$werl</span>;</span><br><span class="line">    erl                = <span class="variable">$erl</span>;</span><br><span class="line">    node_name          = <span class="variable">$node_name</span>;</span><br><span class="line">    node_domain        = <span class="variable">$node_domain</span>;</span><br><span class="line">    cookie             = <span class="variable">$cookie</span>;</span><br><span class="line">    erl_port_min       = <span class="variable">$erl_port_min</span>;</span><br><span class="line">    erl_port_max       = <span class="variable">$erl_port_max</span>;</span><br><span class="line"></span><br><span class="line">    param_kernel       = <span class="variable">$param_kernel</span>;</span><br><span class="line">    param_other        = <span class="variable">$param_other</span>;</span><br><span class="line">    param_env          = <span class="variable">$param_env</span>;</span><br><span class="line">    param_pa           = <span class="variable">$param_pa</span>;</span><br><span class="line">    </span><br><span class="line">    param_config_game  = <span class="variable">$param_config_game</span>;</span><br><span class="line">    game_dump_log_file = <span class="variable">$game_dump_log_file</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">. (<span class="built_in">Join-Path</span> <span class="variable">$conf</span>[<span class="string">&quot;cur_dir&quot;</span>] funlib.ps1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$args</span>.Count <span class="operator">-eq</span> <span class="number">0</span>) {</span><br><span class="line">    fun_wait_input <span class="variable">$conf</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span> {</span><br><span class="line">    fun_run <span class="variable">$conf</span> <span class="variable">$args</span>[<span class="number">0</span>]</span><br><span class="line">}</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><figcaption><span>funlib.ps1</span><a href="/downloads/code/funlib.ps1">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:gbk</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_make</span><span class="params">(<span class="variable">$conf</span>)</span></span>{</span><br><span class="line">    <span class="variable">$src</span> = <span class="variable">$conf</span>[<span class="string">&quot;dir_main&quot;</span>] + <span class="string">&quot;/src&quot;</span></span><br><span class="line">    <span class="variable">$inc</span> = <span class="variable">$conf</span>[<span class="string">&quot;dir_main&quot;</span>] + <span class="string">&quot;/include&quot;</span></span><br><span class="line">    <span class="variable">$timefile</span> = <span class="variable">$conf</span>[<span class="string">&quot;dir_main&quot;</span>] + <span class="string">&quot;/timefile&quot;</span></span><br><span class="line">    <span class="variable">$latestTime</span> = <span class="variable">$</span>(<span class="built_in">Get-Item</span> <span class="variable">$timefile</span>).LastWriteTime</span><br><span class="line">    <span class="variable">$now</span> = <span class="variable">$</span>(<span class="built_in">Get-Date</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_hrl_str</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">begin</span>{ <span class="variable">$list</span> = <span class="selector-tag">@</span>() }</span><br><span class="line">        <span class="keyword">process</span>{ <span class="variable">$list</span> += <span class="variable">$_</span>.Name }</span><br><span class="line">        <span class="keyword">end</span>{</span><br><span class="line">            <span class="variable">$str</span> = <span class="variable">$list</span> <span class="operator">-join</span> <span class="string">&quot;|&quot;</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$str</span> <span class="operator">-ne</span> <span class="string">&quot;&quot;</span>){</span><br><span class="line">                <span class="variable">$str</span> = <span class="string">&quot;(<span class="variable">$str</span>)&quot;</span></span><br><span class="line">            }</span><br><span class="line">            <span class="variable">$str</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$chhrl_str</span> = <span class="built_in">Get-ChildItem</span> <span class="variable">$inc</span> <span class="literal">-Include</span> *.hrl <span class="literal">-Recurse</span> | <span class="built_in">Where-Object</span> {<span class="variable">$_</span>.LastWriteTime <span class="operator">-gt</span> <span class="variable">$latestTime</span>} | get_hrl_str</span><br><span class="line"></span><br><span class="line">    <span class="comment">## ä½¿ç”¨ç®¡é“è·å–å˜åŒ–çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">## 1. è·å–æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">## 2. æ£€æµ‹å˜åŒ–æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">## 3. ç”Ÿæˆæ–‡ä»¶å…¨ååˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_erl_list</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">## æ¯æ¬¡ç¼–è¯‘100ä¸ªæ–‡ä»¶,é˜²æ­¢æ–‡ä»¶è¿‡å¤šé€ æˆå­—ç¬¦ä¸²è¿‡é•¿æŠ¥é”™</span></span><br><span class="line">        <span class="comment">## https://support.microsoft.com/zh-cn/help/830473/command-prompt-cmd-exe-command-line-string-limitation</span></span><br><span class="line">        <span class="keyword">begin</span>{</span><br><span class="line">            <span class="variable">$ii</span> = <span class="number">0</span></span><br><span class="line">            <span class="variable">$list1</span> = <span class="selector-tag">@</span>()</span><br><span class="line">            <span class="variable">$list</span> = <span class="selector-tag">@</span>()</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">process</span>{</span><br><span class="line">            <span class="variable">$f</span> = <span class="variable">$_</span>.FullName <span class="operator">-replace</span> <span class="string">&quot;\\&quot;</span>, <span class="string">&quot;/&quot;</span></span><br><span class="line">            <span class="variable">$f</span> = <span class="string">&quot;`\`&quot;<span class="variable">$f</span>`\`&quot;&quot;</span></span><br><span class="line">            <span class="variable">$list1</span> += <span class="variable">$f</span></span><br><span class="line">            <span class="variable">$i</span>++</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$i</span> % <span class="number">2</span> <span class="operator">-eq</span> <span class="number">0</span>){</span><br><span class="line">                <span class="variable">$list</span> += <span class="variable">$list1</span> <span class="operator">-join</span> <span class="string">&quot;,&quot;</span></span><br><span class="line">                <span class="variable">$i</span> = <span class="number">0</span></span><br><span class="line">                <span class="variable">$list1</span> = <span class="selector-tag">@</span>()</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">end</span>{</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$list1</span>){</span><br><span class="line">                <span class="variable">$list</span> += <span class="variable">$list1</span> <span class="operator">-join</span> <span class="string">&quot;,&quot;</span></span><br><span class="line">            }</span><br><span class="line">            <span class="variable">$list</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$erl_list</span> = <span class="built_in">Get-ChildItem</span> <span class="variable">$src</span> <span class="literal">-Include</span> *.erl <span class="literal">-Exclude</span> .svn,.git <span class="literal">-Recurse</span> | <span class="built_in">Where-Object</span> {</span><br><span class="line">        <span class="keyword">if</span> ( <span class="variable">$</span>(<span class="built_in">Get-Item</span> <span class="variable">$_</span>.FullName).LastWriteTime <span class="operator">-gt</span> <span class="variable">$latestTime</span> ){</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$_</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$chhrl_str</span> <span class="operator">-eq</span> <span class="string">&quot;&quot;</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$false</span></span><br><span class="line">        } </span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Select-String</span> <span class="literal">-Path</span> <span class="variable">$_</span>.FullName <span class="literal">-Pattern</span> <span class="variable">$chhrl_str</span> <span class="literal">-Quiet</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$_</span></span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$false</span></span><br><span class="line">        }</span><br><span class="line">    } | get_erl_list</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">Set-Location</span> <span class="variable">$conf</span>[<span class="string">&quot;dir_erl&quot;</span>]</span><br><span class="line">    <span class="comment">## åœ¨windowsä¸‹</span></span><br><span class="line">    <span class="comment">## ç›´æ¥mmake:files(500, [])æ— æ•ˆ</span></span><br><span class="line">    <span class="comment">## å¿…é¡»mmake:files(500, [], Opts)</span></span><br><span class="line">    <span class="comment">## why?</span></span><br><span class="line">    <span class="variable">$cmd_str</span> = <span class="string">&#x27;{0} {1} -noshell -eval &quot;{{ok,[{{_, Opts}}|_]}}=file:consult(\&quot;./Emakefile\&quot;),case mmake:files(500,[{2}], Opts) of up_to_date -&gt; init:stop(); _ -&gt; init:stop(1) end&quot;&#x27;</span></span><br><span class="line">    <span class="variable">$compile_status</span> = <span class="variable">$true</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$erl_list</span>.gettype().Name <span class="operator">-eq</span> <span class="string">&quot;String&quot;</span>){</span><br><span class="line">        <span class="variable">$erl_list</span> = <span class="selector-tag">@</span>() + <span class="variable">$erl_list</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$erl_list</span>.Count; <span class="variable">$i</span>++) {</span><br><span class="line">        <span class="variable">$erl_str</span> = <span class="variable">$erl_list</span>[<span class="variable">$i</span>]</span><br><span class="line">        <span class="variable">$cmd</span> = <span class="variable">$cmd_str</span> <span class="operator">-f</span> <span class="variable">$conf</span>[<span class="string">&quot;erl&quot;</span>], <span class="variable">$conf</span>[<span class="string">&quot;param_pa&quot;</span>], <span class="variable">$erl_str</span></span><br><span class="line">        cmd /C <span class="variable">$cmd</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$</span>?) {</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="variable">$compile_status</span> = <span class="variable">$false</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment"># $cmd = $cmd_str -f $conf[&quot;erl&quot;], $conf[&quot;param_pa&quot;], $erl_str</span></span><br><span class="line">    cmd /C <span class="variable">$cmd</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$compile_status</span>) {</span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="string">&quot;=============&gt; ç¼–è¯‘æˆåŠŸ&quot;</span></span><br><span class="line">        <span class="variable">$now</span>.ToString() | <span class="built_in">Out-File</span> <span class="variable">$timefile</span> <span class="literal">-Append</span></span><br><span class="line">        (<span class="built_in">Get-Item</span> <span class="variable">$timefile</span>).LastWriteTime = <span class="variable">$now</span></span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="built_in">Write-Error</span> <span class="string">&quot;==============&gt; ç¼–è¯‘å¤±è´¥&quot;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_start_game</span> <span class="params">(<span class="variable">$conf</span>)</span></span> {</span><br><span class="line">    <span class="variable">$node_name</span> = <span class="variable">$conf</span>[<span class="string">&quot;node_name&quot;</span>]</span><br><span class="line">    <span class="variable">$node_domain</span> = <span class="variable">$conf</span>[<span class="string">&quot;node_domain&quot;</span>]</span><br><span class="line">    <span class="variable">$param_pa</span> = <span class="variable">$conf</span>[<span class="string">&quot;param_pa&quot;</span>]</span><br><span class="line">    <span class="variable">$param_kernel</span> = <span class="variable">$conf</span>[<span class="string">&quot;param_kernel&quot;</span>] </span><br><span class="line">    <span class="variable">$param_env</span> = <span class="variable">$conf</span>[<span class="string">&quot;param_env&quot;</span>]</span><br><span class="line">    <span class="variable">$game_dump_log_file</span> = <span class="variable">$conf</span>[<span class="string">&quot;game_dump_log_file&quot;</span>]</span><br><span class="line">    <span class="variable">$param_other</span> = <span class="variable">$conf</span>[<span class="string">&quot;param_other&quot;</span>]</span><br><span class="line">    <span class="variable">$param_config_game</span> = <span class="variable">$conf</span>[<span class="string">&quot;param_config_game&quot;</span>]</span><br><span class="line">    <span class="built_in">Set-Location</span> <span class="variable">$conf</span>[<span class="string">&quot;dir_erl&quot;</span>]</span><br><span class="line">    <span class="variable">$arg_str</span> = <span class="string">&quot;-name <span class="variable">$</span>{node_name}_game@<span class="variable">$node_domain</span>&quot;</span></span><br><span class="line">    <span class="variable">$arg_str</span> += <span class="string">&quot; <span class="variable">$param_pa</span> <span class="variable">$param_kernel</span> <span class="variable">$param_env</span>&quot;</span></span><br><span class="line">    <span class="variable">$arg_str</span> += <span class="string">&quot; <span class="variable">$game_dump_log_file</span> <span class="variable">$param_other</span> <span class="variable">$param_config_game</span>&quot;</span></span><br><span class="line">    <span class="variable">$arg_str</span> += <span class="string">&quot;  -hidden -s main -s reloader&quot;</span></span><br><span class="line">    <span class="built_in">Start-Process</span> <span class="literal">-FilePath</span> <span class="variable">$conf</span>[<span class="string">&quot;werl&quot;</span>] <span class="literal">-ArgumentList</span> <span class="variable">$arg_str</span>    </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_run</span> <span class="params">(<span class="variable">$conf</span>,<span class="variable">$inp</span>)</span></span> {</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$inp</span>) {</span><br><span class="line">        <span class="string">&quot;make&quot;</span> {</span><br><span class="line">            fun_make <span class="variable">$conf</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        <span class="string">&quot;start_game&quot;</span> {</span><br><span class="line">            fun_start_game <span class="variable">$conf</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        }</span><br><span class="line">        Default {</span><br><span class="line">            <span class="built_in">Write-Output</span> <span class="string">&quot;é”™è¯¯çš„å‘½ä»¤&quot;</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">Set-Location</span> <span class="variable">$conf</span>[<span class="string">&quot;cur_dir&quot;</span>]</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_wait_input</span> <span class="params">(<span class="variable">$conf</span>)</span></span> {</span><br><span class="line">    <span class="variable">$helpText</span> = <span class="string">@&quot;</span></span><br><span class="line"><span class="string">==============================</span></span><br><span class="line"><span class="string">make       : ç¼–è¯‘æºç </span></span><br><span class="line"><span class="string">start_game : å¯åŠ¨æ¸¸æˆæœ</span></span><br><span class="line"><span class="string">quit       : ç»“æŸè¿è¡Œ</span></span><br><span class="line"><span class="string">==============================  </span></span><br><span class="line"><span class="string">&quot;@</span></span><br><span class="line">    <span class="built_in">Write-Output</span> <span class="variable">$helpText</span></span><br><span class="line">    <span class="variable">$inp</span> = <span class="built_in">Read-Host</span> <span class="string">&quot;è¯·é€‰æ‹©&quot;</span></span><br><span class="line">    <span class="variable">$inp</span> = <span class="variable">$inp</span>.Trim().ToLower()</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$inp</span>) {</span><br><span class="line">        <span class="string">&quot;&quot;</span>      { </span><br><span class="line">            fun_wait_input <span class="variable">$conf</span> </span><br><span class="line">            <span class="keyword">break</span> </span><br><span class="line">        }</span><br><span class="line">        <span class="string">&quot;quit&quot;</span>  {</span><br><span class="line">            <span class="built_in">Set-Location</span> <span class="variable">$conf</span>[<span class="string">&quot;cur_dir&quot;</span>] </span><br><span class="line">            <span class="keyword">break</span> </span><br><span class="line">        }</span><br><span class="line">        Default { </span><br><span class="line">            fun_run <span class="variable">$conf</span> <span class="variable">$inp</span></span><br><span class="line">            fun_wait_input <span class="variable">$conf</span> </span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> erlang </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Intellij Ideaå¿«æ·é”®</title>
      <link href="/2018/07/11/other/other-idea/"/>
      <url>/2018/07/11/other/other-idea/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>Erlang</code>é¡¹ç›®,å…¶ä»–æˆå‘˜ä½¿ç”¨Ideaå¼€å‘,å”¯ç‹¬æˆ‘ä½¿ç”¨vimå¼€å‘<br>å¹¶ä¸æ˜¯è‡ªå·±<code>zhuangbility</code>,è¯•ç€è½¬è¿‡å»,å„ç§ä¸èˆ’æœ,å†è½¬ä¸€æ¬¡  </p><span id="more"></span><h2 id="é¦–å…ˆ"><a href="#é¦–å…ˆ" class="headerlink" title="é¦–å…ˆ"></a>é¦–å…ˆ</h2><p><strong>å®‰è£…å®Œæˆ,é¦–æ¬¡å¯åŠ¨,æ‰€æœ‰æ’ä»¶éƒ½é€‰æ‹©<code>disable</code></strong></p><h2 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h2><p><code>File</code>-&gt;<code>Setting</code>-&gt;<code>Plugins</code></p><table><thead><tr><th>æ’ä»¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>terminal</td><td>é›†æˆå‘½ä»¤è¡Œ</td></tr><tr><td>erlang</td><td>erlangå¼€å‘</td></tr><tr><td>Markdown Navigator</td><td>Markdowné¢„è§ˆ</td></tr><tr><td>CodeGlance</td><td>ä»£ç mini map</td></tr><tr><td>Translation</td><td>ç¿»è¯‘</td></tr><tr><td>BrowseWordAtCaret</td><td>é«˜äº®é€‰ä¸­å•è¯,å¿«æ·é”®ä¸winå†²çª<br/>ä½¿ç”¨é¼ æ ‡é€‰ä¸­</td></tr><tr><td>Key promoter</td><td>å¿«æ·é”®æç¤º</td></tr><tr><td>BashSupport</td><td>bash</td></tr><tr><td>String Manipulation</td><td></td></tr><tr><td>Background image Plus</td><td>è®¾ç½®èƒŒæ™¯å›¾ç‰‡<br/>åœ¨<code>View</code>-&gt;<code>Set Background Image</code>ä¸­è®¾ç½®</td></tr><tr><td>Main Menu toggler</td><td>éšè—/å¼€å¯èœå•æ <br/>Shift_Shift-&gt;view</td></tr></tbody></table><h2 id="å­—ä½“è®¾ç½®"><a href="#å­—ä½“è®¾ç½®" class="headerlink" title="å­—ä½“è®¾ç½®"></a>å­—ä½“è®¾ç½®</h2><p><code>File</code>-&gt;<code>Setting</code>-&gt;<code>Editor</code>-&gt;<code>Font</code></p><blockquote><p>Font: Consoles<br>Size: 20<br>Line spacing: 1.1</p></blockquote><h2 id="æ¨¡æ¿è®¾ç½®"><a href="#æ¨¡æ¿è®¾ç½®" class="headerlink" title="æ¨¡æ¿è®¾ç½®"></a>æ¨¡æ¿è®¾ç½®</h2><p>Tabé•¿åº¦è®¾ç½®<br><code>File</code>-&gt;<code>Setting</code>-&gt;<code>Editor</code>-&gt;<code>Code Style</code>-&gt;<code>Erlang</code>-&gt;<code>Tabs and Indents</code></p><blockquote><p>Table size: 4<br>Indent: 4</p></blockquote><p>Author/Companyè®¾ç½®<br><code>File</code>-&gt;<code>Setting</code>-&gt;<code>Editor</code>-&gt;<code>File and Code Templates</code>-&gt;<code>Includes</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Erlang Custom Template Variable: </span><br><span class="line">#set( $FULLNAME = &quot;kingwen0302 &lt;kingwen0302@msn.com&gt;&quot; )</span><br><span class="line">#set( $COMPANY = &quot;xxxx&quot; )</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><p>åœ¨å®‰è£…ç›®å½•ä¸‹,ä¿®æ”¹<code>idea64.exe.vmoptions</code>|<code>idea.exe.vmoptions</code>,<strong>å…·ä½“å€¼å¯ä»¥æ ¹æ®é¡¹ç›®å¤§å°ä»¥åŠæœºå­æ€§èƒ½ä¿®æ”¹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Xms512m</span><br><span class="line">-Xmx1024m</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ‰©å±•å·¥å…·"><a href="#è‡ªå®šä¹‰æ‰©å±•å·¥å…·" class="headerlink" title="è‡ªå®šä¹‰æ‰©å±•å·¥å…·"></a>è‡ªå®šä¹‰æ‰©å±•å·¥å…·</h2><p><code>File</code>-&gt;<code>Setting</code>-&gt;<code>Tools</code>-&gt;<code>External Tools</code><br>æ·»åŠ erlangç¼–è¯‘å•ä¸ªæ–‡ä»¶:</p><blockquote><p>Name: emake<br>Description: erlangå•æ–‡ä»¶ç¼–è¯‘<br>Program: erl<br>Arguments:  </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-noshell</span><br><span class="line">-pa $ProjectFileDir$/baseebin</span><br><span class="line">-eval &quot;make:files([\&quot;$/FileRelativePath$\&quot;]),init:stop(0).&quot;</span><br></pre></td></tr></table></figure><blockquote><p>Working directory: $ProjectFileDir$  </p></blockquote><h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><table><thead><tr><th>ä¸ªäººä½¿ç”¨é¢‘ç‡</th><th>å¿«æ·é”®</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>â˜…â˜…â˜…â˜…â˜…</td><td>Ctrl_Shift_N</td><td>å¿«é€Ÿæ–‡ä»¶å®šä½</td></tr><tr><td>â˜…â˜…â˜…â˜…â˜…</td><td>Ctrl_F,Ctrl_Shift_F<br/>Ctrl_R,Ctrl_Shift_R</td><td>æœç´¢<br/>æ›¿æ¢</td></tr><tr><td>â˜…â˜…â˜…â˜…â˜…</td><td>Ctrl_B<br/>Ctrl_Shift_I</td><td>è·³è½¬åˆ°å®šä¹‰, è‹¥æ˜¯å®šä¹‰åˆ™æ˜¾ç¤ºè°ƒç”¨åˆ—è¡¨<br/>é¢„è§ˆå‡½æ•°å®šä¹‰</td></tr><tr><td>â˜…â˜…â˜…â˜…</td><td>Ctrl_E,Ctrl_Tab</td><td>æœ€è¿‘æ‰“å¼€æ–‡ä»¶</td></tr><tr><td>â˜…â˜…</td><td>Ctrl_Alt_I,ç›¸åŒä½ç½®å‰ªåˆ‡&amp;&amp;ç²˜è´´</td><td>æ ¼å¼åŒ–ä»£ç </td></tr><tr><td>â˜…â˜…</td><td>Ctrl_D<br/>Ctrl_X,Ctrl_Y</td><td>å¤åˆ¶è¡Œ<br/>åˆ é™¤è¡Œ</td></tr><tr><td>â˜…</td><td>Ctrl_/</td><td>æ³¨é‡Š</td></tr><tr><td>â˜…</td><td>Ctrl_â†‘/â†“</td><td>è·³åˆ°ä¸Š/ä¸‹ä¸€ä¸ªå‡½æ•°</td></tr><tr><td>â˜…</td><td>Ctrl_+/-,Ctrl_Shift_+/-</td><td>æŠ˜å </td></tr><tr><td>â˜…â˜…â˜…â˜…</td><td>Ctrl_F4,Shift_Clickæ ‡ç­¾é¡µ</td><td>å…³é—­æ ‡ç­¾</td></tr><tr><td>â˜…â˜…â˜…â˜…â˜…</td><td>Alt_1</td><td>å¼€å¯/å…³é—­é¡¹ç›®ç›®å½•ç»“æ„</td></tr><tr><td>â˜…â˜…â˜…</td><td>Alt_6</td><td>å¼€å¯/å…³é—­TODO</td></tr><tr><td>â˜…â˜…â˜…</td><td>Alt_7,Ctrl_F12</td><td>å¼€å¯/å…³é—­å½“å‰æ–‡ä»¶å‡½æ•°åˆ—è¡¨</td></tr><tr><td>â˜…â˜…â˜…â˜…â˜…</td><td>Alt_F12</td><td>æ‰“å¼€/å…³é—­Terminal</td></tr><tr><td>â˜…</td><td>Ctrl_Alt_[/]</td><td>é¡¹ç›®åˆ‡æ¢</td></tr></tbody></table><h2 id="ç•Œé¢"><a href="#ç•Œé¢" class="headerlink" title="ç•Œé¢"></a>ç•Œé¢</h2><p>éšè—(<code>view</code>-&gt;)</p><blockquote><p><code>Toolbar</code><br><code>Tool Buttons</code><br><code>Status Bar</code><br><code>Navigation Bar</code><br><code>Main Menu</code>  </p></blockquote><h2 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h2><h3 id="ç¦æ­¢è‡ªåŠ¨åˆ é™¤è¡Œå°¾ç©ºæ ¼"><a href="#ç¦æ­¢è‡ªåŠ¨åˆ é™¤è¡Œå°¾ç©ºæ ¼" class="headerlink" title="ç¦æ­¢è‡ªåŠ¨åˆ é™¤è¡Œå°¾ç©ºæ ¼"></a>ç¦æ­¢è‡ªåŠ¨åˆ é™¤è¡Œå°¾ç©ºæ ¼</h3><p><code>File</code>-&gt;<code>Settings</code>-&gt;<code>Editor</code>-&gt;<code>General</code><br><code>Virtual Space</code>å…ˆé€‰ä¸­<code>Allow placement of caret after end of line</code><br><code>Other</code>ä¿®æ”¹<code>Strip trailing spaces on Save</code>,é€‰æ‹©<code>None</code>å³å¯</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://www.cnblogs.com/tonycody/p/3257601.html">https://www.cnblogs.com/tonycody/p/3257601.html</a></li><li><a href="https://www.cnblogs.com/jeffen/p/6014868.html">https://www.cnblogs.com/jeffen/p/6014868.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOS7æºç ç¼–è¯‘vim8</title>
      <link href="/2018/06/07/centos/centos7-vim8/"/>
      <url>/2018/06/07/centos/centos7-vim8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove vim</span><br><span class="line">yum -y install gcc ncurses-devel</span><br><span class="line">git <span class="built_in">clone</span> -b v8.1.0037 https://github.com/vim/vim.git </span><br><span class="line"><span class="built_in">cd</span> vim</span><br><span class="line">./configure -enable-pythoninterp -enable-luainterp -enable-multibyte -enable-cscope</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/vim /usr/bin/vim</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://blog.csdn.net/lj_trestg/article/details/79754268">https://blog.csdn.net/lj_trestg/article/details/79754268</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos7 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos7 </tag>
            
            <tag> vim8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellåˆ é™¤é¢œè‰²ä»£ç </title>
      <link href="/2018/05/25/shell/shell-delete-color-code/"/>
      <url>/2018/05/25/shell/shell-delete-color-code/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -r &quot;s/\x1B\[([0-9]&#123;1,2&#125;(;[0-9]&#123;1,2&#125;)?)?[m|K]//g&quot;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li>[<a href="https://stackoverflow.com/questions/17998978/removing-colors-from-output]">https://stackoverflow.com/questions/17998978/removing-colors-from-output]</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³æ— æ³•åœ¨æ‚¨æ‰€åœ¨çš„å›½å®¶/åœ°åŒºè´­ä¹°google play</title>
      <link href="/2018/05/25/other/other-googleplay/"/>
      <url>/2018/05/25/other/other-googleplay/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ç›´æ— æ³•è´­ä¹°google playä¸Šçš„å†…å®¹<br>å„ç§ç™¾åº¦/google,å¤§å¤šè¯´<code>åŒå¸ä¿¡ç”¨å¡ä¸æ”¯æŒ</code>ä¹‹ç±»çš„è¯<br>ç»è¿‡å¤šæ¬¡æ‘¸ç´¢,ç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¯ç”¨çš„æµç¨‹</p><span id="more"></span><p>æ­¥éª¤:</p><ol><li><p>å‡†å¤‡ä¿¡ç”¨å¡<br> <code>å•å¸ä¿¡ç”¨å¡</code>,<code>åŒå¸ä¿¡ç”¨å¡</code>éƒ½å¯ä»¥<br> åªè¦google playæ”¯æŒçš„å‘å¡æœºæ„å°±å¯ä»¥</p></li><li><p>æŸ¥çœ‹ä»˜æ¬¾æ–¹å¼<br> æ‰“å¼€<a href="https://payments.google.com/">https://payments.google.com</a>æŸ¥çœ‹ä»˜æ¬¾æ–¹å¼<br> å¦‚æœä»˜æ¬¾æ–¹å¼ä¸­å·²ç»æœ‰ç»‘å®šé“¶è¡Œå¡,æ£€æŸ¥åœ°å€æ‰€åœ¨åœ°æ˜¯å¦æ˜¯ä¸­å›½,å¦‚æœæ˜¯,æŒ‰ç…§<code>æ­¥éª¤3</code>åˆ é™¤</p></li><li><p>åˆ é™¤ä»˜æ¬¾æ–¹å¼<br> åœ¨è®¾ç½®ä¸­,<code>å…³é—­ä»˜æ¬¾èµ„æ–™</code></p></li><li><p>é‡æ–°æ·»åŠ ä»˜æ¬¾æ–¹å¼<br> æ·»åŠ ä»˜æ¬¾æ–¹å¼,å°†åœ°å€å¡«ä¸ºå›½å¤–åœ°å€<br> è¿™æ˜¯ä¸€ä¸ªç”Ÿæˆå‡åœ°å€çš„ç½‘ç«™<a href="https://www.fakenamegenerator.com/gen-male-us-us.php">https://www.fakenamegenerator.com/gen-male-us-us.php</a></p></li><li><p>æ‰£æ¬¾æˆåŠŸå°±å¯ä»¥æ”¯ä»˜äº†</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v2rayé…ç½®[ä¸ªäººç†è§£]</title>
      <link href="/2018/04/09/windows/windows-v2ray/"/>
      <url>/2018/04/09/windows/windows-v2ray/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘çœ‹åˆ°è¿™ç¯‡çš„æµè§ˆé‡çªç„¶ä¸Šå‡äº†<br>åŸå› è‡ªç„¶ä½ æ‡‚å¾—çš„<br>ä½†æ˜¯è¿™ç¯‡æ˜¯æ²¡æœ‰å®è´¨å†…å®¹çš„<br>æ‰€ä»¥å¢åŠ ä¸€ä¸ªè„šæœ¬,å¿«é€Ÿæ­å»º<code>v2ray+nginx-tls-ws</code>æ¢¯å­<br>é€Ÿåº¦ç›¸å¯¹kcpæ¥è¯´ç¨æ…¢,ä½†æ˜¯èƒœåœ¨å®‰å…¨</p><span id="more"></span><p><a href="https://github.com/v2ray/v2ray-core">v2ray</a>æ®è¯´æ˜¯æ–°ä¸€ä»£çš„ä»£ç†ç¥å™¨,æ²¡æœ‰ç”¨è¿‡,åªçŸ¥é“ç›¸å¯¹ss,æœåŠ¡å™¨è¦æ±‚é«˜,è€Œä¸”é…ç½®å¤æ‚æ— æ¯”.</p><p>v2rayæ²¡æœ‰æœåŠ¡å™¨/å®¢æˆ·ç«¯åŒºåˆ«,åªæ˜¯é…ç½®çš„åŒºåˆ«<br>v2rayé…ç½®çš„æ•´ä½“æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;log&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;api&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;dns&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;stats&quot;</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;routing&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;policy&quot;</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;inbound&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;inboundDetour&quot;</span>: [],</span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;outbound&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;outboundDetour&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;transport&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>json ä¸æ”¯æŒæ³¨é‡Š, è¯„è®ºä½¿ç”¨<code>&quot;comment&quot;: &quot;&quot;,</code><br><strong>è™½ç„¶v2rayå¼€å‘è€…æœ‰å¢åŠ æ³¨é‡Š,å®æµ‹å‘ç°å¹¶ä¸èƒ½å®Œå…¨è§£æ</strong></p></blockquote><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><p>æ—¥å¿—ä½ç½®ä»¥åŠæ—¥å¿—ç­‰çº§</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;access&quot;</span>: <span class="string">&quot;e:/vmess/log/access.log&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;error&quot;</span>: <span class="string">&quot;e:/vmess/log/error.log&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;loglevel&quot;</span>: <span class="string">&quot;debug&quot;</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h3 id="routing"><a href="#routing" class="headerlink" title="routing"></a>routing</h3><p>è·¯ç”±è®¾ç½®,ç±»ä¼¼firefoxçš„autoproxy/chromeçš„switchyæ’ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;routing&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;strategy&quot;</span>: <span class="string">&quot;rules&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;rules&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;ip&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;0.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;10.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;100.64.0.0/10&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;127.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;169.254.0.0/16&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;172.16.0.0/12&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.0.0.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.0.2.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.168.0.0/16&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;198.18.0.0/15&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;198.51.100.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;203.0.113.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;::1/128&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;fc00::/7&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;fe80::/10&quot;</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;blocked&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;routing&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;strategy&quot;</span>: <span class="string">&quot;rules&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;rules&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;54-79&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;81-442&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;444-65535&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;domain&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;gc.kis.scr.kaspersky-labs.com&quot;</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;chinasites&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;domain&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;google.com&quot;</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;ss_web&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;ip&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;0.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;10.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;100.64.0.0/10&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;127.0.0.0/8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;169.254.0.0/16&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;172.16.0.0/12&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.0.0.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.0.2.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;192.168.0.0/16&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;198.18.0.0/15&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;198.51.100.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;203.0.113.0/24&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;::1/128&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;fc00::/7&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;fe80::/10&quot;</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;chinaip&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;outboundTag&quot;</span>: <span class="string">&quot;direct&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="inbound-inboundDetour"><a href="#inbound-inboundDetour" class="headerlink" title="inbound / inboundDetour"></a>inbound / inboundDetour</h3><p>æ¥æ”¶ä¼ å…¥çš„æ•°æ®</p><p><code>inbound</code>æ˜¯é…ç½®ä¸»å…¥å£,å¿…é¡»æœ‰é…ç½®<br><code>inboundDetour</code>æ˜¯é…ç½®å‰©ä½™çš„å…¥å£,ä¸ºåˆ—è¡¨</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;inbound&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;port&quot;</span>: <span class="number">10086</span>,</span><br><span class="line">        <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;clients&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;299c53c1-20bf-598b-c97c-771dabb62a21&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">&quot;alterId&quot;</span>: <span class="number">64</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;kcp&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;detour&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;to&quot;</span>: <span class="string">&quot;vmess-detour-310971&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;outbound&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;settings&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;inboundDetour&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="number">1089</span>,</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;socks&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;auth&quot;</span>: <span class="string">&quot;noauth&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;udp&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">&quot;ip&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="number">3128</span>,</span><br><span class="line">            <span class="attr">&quot;listen&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;http&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;timeout&quot;</span>: <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="string">&quot;10000-20000&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;vmess-detour-310971&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">&quot;allocate&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;strategy&quot;</span>: <span class="string">&quot;random&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;concurrency&quot;</span>: <span class="number">5</span>,</span><br><span class="line">                <span class="attr">&quot;refresh&quot;</span>: <span class="number">5</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;kcp&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="number">10087</span>,</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;clients&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;299c53c1-20bf-598b-c97c-771dabb62a21&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;level&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">&quot;alterId&quot;</span>: <span class="number">64</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;shadowsocks&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="number">20001</span>,</span><br><span class="line">            <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;method&quot;</span>: <span class="string">&quot;aes-256-cfb&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;dasfdsafdfs&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;udp&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">&quot;level&quot;</span>: <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><h3 id="outbound-outboundDetour"><a href="#outbound-outboundDetour" class="headerlink" title="outbound / outboundDetour"></a>outbound / outboundDetour</h3><p>æ•°æ®çš„è¯·æ±‚åœ°å€</p><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><p>å¢åŠ ä¸€ä¸ªå¿«é€Ÿå®‰è£…çš„è„šæœ¬,ä½†æ˜¯æ²¡æœ‰è‡ªæµ‹è¿‡</p><blockquote><p>å‰æ: å°†<code>www.example.com</code>åŸŸåæŒ‡å‘å½“å‰çš„æœåŠ¡å™¨IP</p></blockquote><p>æµç¨‹æ˜¯:</p><ol><li>å®‰è£…/é…ç½®v2ray</li><li>å®‰è£…/é…ç½®nginx</li><li>ä½¿ç”¨certbotç”Ÿæˆè¯ä¹¦</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## é…ç½®</span></span><br><span class="line"><span class="comment">## å…ˆè®¾ç½®åŸŸå</span></span><br><span class="line">DOMAIN=www.example.com</span><br><span class="line">UUID=$(cat /proc/sys/kernel/random/uuid)</span><br><span class="line">UUID_ARR=(<span class="variable">$&#123;UUID//-/ &#125;</span>)</span><br><span class="line">UUID_LAST=<span class="variable">$&#123;UUID_ARR[-1]&#125;</span></span><br><span class="line"></span><br><span class="line">yum install -y epel-release curl git</span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…v2ray</span></span><br><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br><span class="line">systemctl <span class="built_in">enable</span> v2ray</span><br><span class="line">cat &gt; /etc/v2ray/config.json &lt;&lt; <span class="string">&quot;EOF&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;port&quot;</span>: 10000,</span><br><span class="line">      <span class="string">&quot;listen&quot;</span>:<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;clients&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="string">&quot;&#123;UUID&#125;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;alterId&quot;</span>: 64</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;network&quot;</span>: <span class="string">&quot;ws&quot;</span>,</span><br><span class="line">        <span class="string">&quot;wsSettings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/&#123;UUID_LAST&#125;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sed -i <span class="string">&quot;s/&#123;UUID&#125;/<span class="variable">$&#123;UUID&#125;</span>/g&quot;</span> /etc/v2ray/config.json</span><br><span class="line">sed -i <span class="string">&quot;s/&#123;UUID_LAST&#125;/<span class="variable">$&#123;UUID_LAST&#125;</span>/g&quot;</span> /etc/v2ray/config.json</span><br><span class="line">systemctl restart v2ray</span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…nginx</span></span><br><span class="line">yum install -y nginx</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¼„ä¸€ä¸ªæ­£å¸¸çš„ç½‘å€</span></span><br><span class="line">git <span class="built_in">clone</span> xxxx /data/web/<span class="variable">$&#123;DOMAIN&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## nginx config</span></span><br><span class="line">cat &gt; /etc/nginx/conf.d/001_<span class="variable">$&#123;DOMAIN&#125;</span>.conf &lt;&lt; <span class="string">&quot;EOF&quot;</span></span><br><span class="line">server &#123;</span><br><span class="line">    server_name  &#123;DOMAIN&#125;;</span><br><span class="line">    listen 80; </span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /data/web/&#123;DOMAIN&#125;;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /&#123;UUID_LAST&#125; &#123;</span><br><span class="line">        proxy_pass       http://127.0.0.1:10000;</span><br><span class="line">        proxy_redirect             off;</span><br><span class="line">        proxy_http_version         1.1;</span><br><span class="line">        proxy_set_header Upgrade   <span class="variable">$http_upgrade</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        proxy_set_header Host      <span class="variable">$http_host</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sed -i <span class="string">&quot;s/&#123;DOMAIN&#125;/<span class="variable">$&#123;DOMAIN&#125;</span>/g&quot;</span> /etc/nginx/conf.d/001_<span class="variable">$&#123;DOMAIN&#125;</span>.conf</span><br><span class="line">systemctl restart nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## é€‰æ‹©Redirect</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/certbot/certbot.git ~/certbot</span><br><span class="line"><span class="built_in">cd</span> ~ &amp;&amp; ./certbot-auto</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[V2RAY]------------------------------&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UUID: <span class="variable">$&#123;UUID&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;DOMAIN: <span class="variable">$&#123;DOMAIN&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PORT: 443&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ALTERID: 64&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;WS_PATH: /<span class="variable">$&#123;UUID_LAST&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[V2RAY]------------------------------&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://www.v2ray.com/chapter_02/">https://www.v2ray.com/chapter_02/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> v2ray </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBoxä¸‹Linuxè™šæœºæ‰©å®¹</title>
      <link href="/2018/03/21/centos/centos-virtualbox-partition-extend/"/>
      <url>/2018/03/21/centos/centos-virtualbox-partition-extend/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨<code>vagrant</code>æ­å»ºå¼€å‘ç¯å¢ƒ,éƒ¨åˆ†boxé»˜è®¤çš„ç©ºé—´å¤ªå°,éœ€è¦æ‰©å®¹<br>éä¸“ä¸šäººå‘˜,åªæ˜¯ç™¾åº¦å‡ºçš„ç»“æœ,äº²æµ‹æœ‰æ•ˆ</p><span id="more"></span><h2 id="è™šæœºç¡¬ç›˜æ‰©å®¹"><a href="#è™šæœºç¡¬ç›˜æ‰©å®¹" class="headerlink" title="è™šæœºç¡¬ç›˜æ‰©å®¹"></a>è™šæœºç¡¬ç›˜æ‰©å®¹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage clonehd box_disk1.vmdk  box_disk1.vdi --format VDI</span><br><span class="line">VBoxManage modifyhd box_disk1.vdi --resize 60000</span><br></pre></td></tr></table></figure><p><em><strong><code>vmdk</code>æ ¼å¼ç£ç›˜ä¸æ”¯æŒæ‰©å®¹, è¦å…ˆå°†<code>vmdk</code>è½¬æ¢ä¸º<code>vdi</code></strong></em></p><p>ä¿®æ”¹ç£ç›˜é…ç½®</p><blockquote><p><code>è®¾ç½®</code>-&gt;<code>å­˜å‚¨</code>-&gt;<code>æ§åˆ¶å™¨</code>,ä½¿ç”¨<code>box_disk1.vdi</code>æ›¿æ¢æ‰<code>box_disk1.vmdk</code></p></blockquote><h2 id="æŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿçš„ç©ºé—´æƒ…å†µ"><a href="#æŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿçš„ç©ºé—´æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿçš„ç©ºé—´æƒ…å†µ"></a>æŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿçš„ç©ºé—´æƒ…å†µ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost qqjy]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root  6.7G  2.1G  4.7G  31% /</span><br><span class="line">devtmpfs                 487M     0  487M   0% /dev</span><br><span class="line">tmpfs                    497M     0  497M   0% /dev/shm</span><br><span class="line">tmpfs                    497M  6.6M  490M   2% /run</span><br><span class="line">tmpfs                    497M     0  497M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  122M  375M  25% /boot</span><br><span class="line">vagrant                  406G   61G  345G  16% /vagrant</span><br><span class="line">tmpfs                    100M     0  100M   0% /run/user/0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost qqjy]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 62.9 GB, 62914560000 bytes, 122880000 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x00068d77</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/sda2         1026048    16777215     7875584   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-root: 7159 MB, 7159676928 bytes, 13983744 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-swap: 859 MB, 859832320 bytes, 1679360 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br></pre></td></tr></table></figure><p><strong>æ‰©å®¹åçš„ç£ç›˜çº¦60G,å®é™…ä½¿ç”¨8G,å­˜åœ¨æœªåˆ†é…çš„ç©ºé—´</strong><br>ç°æ‰“ç®—å°†<code>/</code>æ‰©å®¹åˆ°55Gå·¦å³</p><h2 id="å°†-dev-sdaä¸Šæœªåˆ†é…çš„ç£ç›˜ç©ºé—´åˆ†åŒº"><a href="#å°†-dev-sdaä¸Šæœªåˆ†é…çš„ç£ç›˜ç©ºé—´åˆ†åŒº" class="headerlink" title="å°†/dev/sdaä¸Šæœªåˆ†é…çš„ç£ç›˜ç©ºé—´åˆ†åŒº"></a>å°†<code>/dev/sda</code>ä¸Šæœªåˆ†é…çš„ç£ç›˜ç©ºé—´åˆ†åŒº</h2><blockquote><p><code>fdisk /dev/sda</code>-&gt;<code>n</code>-&gt;<code>p</code>-&gt;<code>3</code>-&gt;<code>w</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk /dev/sda</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (3,4, default 3): 3</span><br><span class="line">First sector (16777216-122879999, default 16777216):</span><br><span class="line">Using default value 16777216</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (16777216-122879999, default 122879999):</span><br><span class="line">Using default value 122879999</span><br><span class="line">Partition 3 of type Linux and of size 50.6 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line"></span><br><span class="line">WARNING: Re-reading the partition table failed with error 16: Device or resource busy.</span><br><span class="line">The kernel still uses the old table. The new table will be used at</span><br><span class="line">the next reboot or after you run partprobe(8) or kpartx(8)</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 62.9 GB, 62914560000 bytes, 122880000 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x00068d77</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/sda2         1026048    16777215     7875584   8e  Linux LVM</span><br><span class="line">/dev/sda3        16777216   122879999    53051392   83  Linux</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-root: 7159 MB, 7159676928 bytes, 13983744 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-swap: 859 MB, 859832320 bytes, 1679360 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br></pre></td></tr></table></figure><p><strong><code>sda3</code>å·²ç»åˆ›å»ºæˆåŠŸ</strong></p><h2 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="å°†æ–°å»ºçš„åˆ†åŒºæ ¼å¼åŒ–ï¼Œå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ"><a href="#å°†æ–°å»ºçš„åˆ†åŒºæ ¼å¼åŒ–ï¼Œå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="å°†æ–°å»ºçš„åˆ†åŒºæ ¼å¼åŒ–ï¼Œå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ"></a>å°†æ–°å»ºçš„åˆ†åŒºæ ¼å¼åŒ–ï¼Œå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkfs.ext4 /dev/sda3</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=4096 (log=2)</span><br><span class="line">Fragment size=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">3317760 inodes, 13262848 blocks</span><br><span class="line">663142 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=2162163712</span><br><span class="line">405 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">8192 inodes per group</span><br><span class="line">Superblock backups stored on blocks:</span><br><span class="line">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,</span><br><span class="line">        4096000, 7962624, 11239424</span><br><span class="line"></span><br><span class="line">Allocating group tables: done</span><br><span class="line">Writing inode tables: done</span><br><span class="line">Creating journal (32768 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç‰©ç†å·"><a href="#åˆ›å»ºç‰©ç†å·" class="headerlink" title="åˆ›å»ºç‰©ç†å·"></a>åˆ›å»ºç‰©ç†å·</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# pvcreate /dev/sda3</span><br><span class="line">WARNING: ext4 signature detected on /dev/sda3 at offset 1080. Wipe it? [y/n]: y</span><br><span class="line">  Wiping ext4 signature on /dev/sda3.</span><br><span class="line">  Physical volume &quot;/dev/sda3&quot; successfully created</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# pvdisplay</span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda2</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               7.51 GiB / not usable 3.00 MiB</span><br><span class="line">  Allocatable           yes</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              1922</span><br><span class="line">  Free PE               10</span><br><span class="line">  Allocated PE          1912</span><br><span class="line">  PV UUID               v3Ulr1-lAnh-XdSy-4oGg-CQmE-4aWZ-1Zaxx6</span><br><span class="line"></span><br><span class="line">  &quot;/dev/sda3&quot; is a new physical volume of &quot;50.59 GiB&quot;</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sda3</span><br><span class="line">  VG Name</span><br><span class="line">  PV Size               50.59 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0</span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               UYFro7-8ttA-3eQ9-yZfY-fr3V-d3St-DvM06V</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å·ç»„"><a href="#æŸ¥çœ‹å·ç»„" class="headerlink" title="æŸ¥çœ‹å·ç»„"></a>æŸ¥çœ‹å·ç»„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vgdisplay</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  3</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               7.51 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              1922</span><br><span class="line">  Alloc PE / Size       1912 / 7.47 GiB</span><br><span class="line">  Free  PE / Size       10 / 40.00 MiB</span><br><span class="line">  VG UUID               oN3432-gfKs-TOYw-n8Jy-fu6j-ZR0i-xg1i6y</span><br></pre></td></tr></table></figure><p><strong>ç›®å‰å­˜åœ¨ä¸€ä¸ª7.5Gçš„å·ç»„</strong></p><h2 id="æ‰©å±•å·ç»„"><a href="#æ‰©å±•å·ç»„" class="headerlink" title="æ‰©å±•å·ç»„"></a>æ‰©å±•å·ç»„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vgextend centos /dev/sda3</span><br><span class="line">  Volume group &quot;centos&quot; successfully extended</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹é€»è¾‘å·"><a href="#æŸ¥çœ‹é€»è¾‘å·" class="headerlink" title="æŸ¥çœ‹é€»è¾‘å·"></a>æŸ¥çœ‹é€»è¾‘å·</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lvdisplay</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/centos/swap</span><br><span class="line">  LV Name                swap</span><br><span class="line">  VG Name                centos</span><br><span class="line">  LV UUID                fy3cy2-d2Pd-eNQ8-DWXO-DaT0-3o6v-Ee2SKq</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time localhost.localdomain, 2016-08-26 13:30:06 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 2</span><br><span class="line">  LV Size                820.00 MiB</span><br><span class="line">  Current LE             205</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:1</span><br><span class="line"></span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/centos/root</span><br><span class="line">  LV Name                root</span><br><span class="line">  VG Name                centos</span><br><span class="line">  LV UUID                wdrHLD-l66S-jkAF-2fE4-I8NC-liQ9-mEAXKH</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time localhost.localdomain, 2016-08-26 13:30:07 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line">  # open                 1</span><br><span class="line">  LV Size                6.67 GiB</span><br><span class="line">  Current LE             1707</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root  6.7G  2.1G  4.7G  31% /</span><br><span class="line">devtmpfs                 487M     0  487M   0% /dev</span><br><span class="line">tmpfs                    497M     0  497M   0% /dev/shm</span><br><span class="line">tmpfs                    497M  6.6M  490M   2% /run</span><br><span class="line">tmpfs                    497M     0  497M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  122M  375M  25% /boot</span><br><span class="line">vagrant                  406G   61G  345G  16% /vagrant</span><br><span class="line">tmpfs                    100M     0  100M   0% /run/user/0</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•é€»è¾‘å·"><a href="#æ‰©å±•é€»è¾‘å·" class="headerlink" title="æ‰©å±•é€»è¾‘å·"></a>æ‰©å±•é€»è¾‘å·</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lvextend -L 55G -n /dev/mapper/centos-root</span><br><span class="line">  Size of logical volume centos/root changed from 6.67 GiB (1707 extents) to 55.00 GiB (14080 extents).</span><br><span class="line">  Logical volume root successfully resized.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root  6.7G  2.1G  4.7G  31% /</span><br><span class="line">devtmpfs                 487M     0  487M   0% /dev</span><br><span class="line">tmpfs                    497M     0  497M   0% /dev/shm</span><br><span class="line">tmpfs                    497M  6.6M  490M   2% /run</span><br><span class="line">tmpfs                    497M     0  497M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  122M  375M  25% /boot</span><br><span class="line">vagrant                  406G   61G  345G  16% /vagrant</span><br><span class="line">tmpfs                    100M     0  100M   0% /run/user/0</span><br></pre></td></tr></table></figure><h2 id="è°ƒæ•´æ ¹é€»è¾‘å·å¤§å°"><a href="#è°ƒæ•´æ ¹é€»è¾‘å·å¤§å°" class="headerlink" title="è°ƒæ•´æ ¹é€»è¾‘å·å¤§å°"></a>è°ƒæ•´æ ¹é€»è¾‘å·å¤§å°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# resize2fs /dev/mapper/centos-root</span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">resize2fs: Bad magic number in super-block while trying to open /dev/mapper/centos-root</span><br><span class="line">Couldn&#x27;t find valid filesystem superblock.</span><br></pre></td></tr></table></figure><p><strong>è¿™ä¸ªå‘½ä»¤æ˜¯é”™è¯¯çš„,ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# xfs_growfs /dev/mapper/centos-root</span><br><span class="line">meta-data=/dev/mapper/centos-root isize=256    agcount=4, agsize=436992 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=0        finobt=0</span><br><span class="line">data     =                       bsize=4096   blocks=1747968, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=0</span><br><span class="line">log      =internal               bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">data blocks changed from 1747968 to 14417920</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root   55G  2.1G   53G   4% /</span><br><span class="line">devtmpfs                 739M     0  739M   0% /dev</span><br><span class="line">tmpfs                    749M     0  749M   0% /dev/shm</span><br><span class="line">tmpfs                    749M  8.4M  741M   2% /run</span><br><span class="line">tmpfs                    749M     0  749M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  122M  375M  25% /boot</span><br><span class="line">vagrant                  406G   63G  344G  16% /vagrant</span><br><span class="line">data_server              406G   63G  344G  16% /data/server</span><br><span class="line">tmpfs                    150M     0  150M   0% /run/user/0</span><br></pre></td></tr></table></figure><p>ç°åœ¨å·²ç»æ˜¯55Gçš„ç©ºé—´äº†</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li>[<a href="http://blog.csdn.net/wzy0623/article/details/50667442]">http://blog.csdn.net/wzy0623/article/details/50667442]</a></li><li>[<a href="http://blog.csdn.net/a349458532/article/details/52117618]">http://blog.csdn.net/a349458532/article/details/52117618]</a></li><li>[<a href="https://www.cnblogs.com/chenmh/p/5096592.html]">https://www.cnblogs.com/chenmh/p/5096592.html]</a></li><li>[<a href="https://www.linuxidc.com/Linux/2017-06/144722.htm]">https://www.linuxidc.com/Linux/2017-06/144722.htm]</a></li><li>[<a href="https://www.cnblogs.com/pinganzi/p/6478255.html]">https://www.cnblogs.com/pinganzi/p/6478255.html]</a></li><li>[<a href="http://blog.csdn.net/weiguang1017/article/details/52252448]">http://blog.csdn.net/weiguang1017/article/details/52252448]</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> virtualbox </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> virtualbox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>binary_to_term safeä½¿ç”¨çš„å°é—®é¢˜</title>
      <link href="/2018/03/13/erlang/erlang-binary_to_term_safe/"/>
      <url>/2018/03/13/erlang/erlang-binary_to_term_safe/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>binary_to_term(Str, [safe])</code>å°é—®é¢˜</p><span id="more"></span><p>ç°æœ‰äºŒè¿›åˆ¶å¦‚ä¸‹, éœ€è¦å°†å…¶è½¬æ¢ä¸ºmod_gvg<br>å‡ºäºå®‰å…¨çš„è€ƒè™‘,éœ€è¦ä½¿ç”¨`erlang:binary_to_term(Bin, [safe]).</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Eshell V6.<span class="number">2</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; erlang:term_to_binary(&#123;mod_gvg&#125;).</span><br><span class="line">&lt;&lt;<span class="number">131</span>,<span class="number">104</span>,<span class="number">1</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">109</span>,<span class="number">111</span>,<span class="number">100</span>,<span class="number">95</span>,<span class="number">103</span>,<span class="number">118</span>,<span class="number">103</span>&gt;&gt;</span><br><span class="line"><span class="number">2</span>&gt; </span><br></pre></td></tr></table></figure><p>ç°å­˜åœ¨æ¨¡å—<code>safe</code></p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(safe)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([get/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get</span><span class="params">(mod_gvg)</span> -&gt;</span> <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="title">get</span><span class="params">(_)</span> -&gt;</span> <span class="number">0</span>.</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Eshell V6.<span class="number">2</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; safe:module_info().</span><br><span class="line">[&#123;exports,[&#123;get,<span class="number">1</span>&#125;,&#123;module_info,<span class="number">0</span>&#125;,&#123;module_info,<span class="number">1</span>&#125;]&#125;,</span><br><span class="line"> &#123;imports,[]&#125;,</span><br><span class="line"> &#123;attributes,[&#123;vsn,[<span class="number">260324741032660828457261428974125625377</span>]&#125;]&#125;,</span><br><span class="line"> &#123;compile,[&#123;options,[]&#125;,</span><br><span class="line">           &#123;version,<span class="string">&quot;5.0.2&quot;</span>&#125;,</span><br><span class="line">           &#123;time,&#123;<span class="number">2018</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">43</span>&#125;&#125;,</span><br><span class="line">           &#123;source,<span class="string">&quot;e:/ff/safe.erl&quot;</span>&#125;]&#125;]</span><br><span class="line"><span class="number">2</span>&gt; erlang:binary_to_term(&lt;&lt;<span class="number">131</span>,<span class="number">104</span>,<span class="number">1</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">109</span>,<span class="number">111</span>,<span class="number">100</span>,<span class="number">95</span>,<span class="number">103</span>,<span class="number">118</span>,<span class="number">103</span>&gt;&gt;, [safe]).</span><br><span class="line">** exception error: bad argument</span><br><span class="line">     in function  binary_to_term/<span class="number">2</span></span><br><span class="line">        called as binary_to_term(&lt;&lt;<span class="number">131</span>,<span class="number">104</span>,<span class="number">1</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">109</span>,<span class="number">111</span>,<span class="number">100</span>,<span class="number">95</span>,<span class="number">103</span>,<span class="number">118</span>,<span class="number">103</span>&gt;&gt;,</span><br><span class="line">                                 [safe])</span><br><span class="line"><span class="number">3</span>&gt; </span><br></pre></td></tr></table></figure><p>æ˜æ˜<code>mod_gvg</code>å·²ç»åœ¨<code>safe</code>ä»£ç ä¸­,ä¸ºä»€ä¹ˆè¿˜æ˜¯æç¤ºå¤±è´¥?<br>å°†ä»£ç ä¿®æ”¹å¦‚ä¸‹:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(safe)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([get/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get</span><span class="params">(mod_gvg)</span> -&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="title">get</span><span class="params">(_)</span> -&gt;</span> <span class="number">0</span>.</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œ,ä¸€åˆ‡ok</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Eshell V6.<span class="number">2</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; safe:module_info().</span><br><span class="line">[&#123;exports,[&#123;get,<span class="number">1</span>&#125;,&#123;module_info,<span class="number">0</span>&#125;,&#123;module_info,<span class="number">1</span>&#125;]&#125;,</span><br><span class="line"> &#123;imports,[]&#125;,</span><br><span class="line"> &#123;attributes,[&#123;vsn,[<span class="number">50307215724812432190773629780968579091</span>]&#125;]&#125;,</span><br><span class="line"> &#123;compile,[&#123;options,[]&#125;,</span><br><span class="line">           &#123;version,<span class="string">&quot;5.0.2&quot;</span>&#125;,</span><br><span class="line">           &#123;time,&#123;<span class="number">2018</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">45</span>&#125;&#125;,</span><br><span class="line">           &#123;source,<span class="string">&quot;e:/ff/safe.erl&quot;</span>&#125;]&#125;]</span><br><span class="line"><span class="number">2</span>&gt; erlang:binary_to_term(&lt;&lt;<span class="number">131</span>,<span class="number">104</span>,<span class="number">1</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">109</span>,<span class="number">111</span>,<span class="number">100</span>,<span class="number">95</span>,<span class="number">103</span>,<span class="number">118</span>,<span class="number">103</span>&gt;&gt;, [safe]).</span><br><span class="line">&#123;mod_gvg&#125;</span><br><span class="line"><span class="number">3</span>&gt; </span><br></pre></td></tr></table></figure><p>è¯´æ˜åœ¨ç¼–è¯‘ä»£ç æ—¶,ç¼–è¯‘å™¨æœ‰åšä¼˜åŒ–,å°†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get(mod_gvg) -&gt; 0;</span><br><span class="line">get(_) -&gt; 0.</span><br></pre></td></tr></table></figure><p>ç®€åŒ–ä¸º<code>get(_) -&gt; 0.</code><br>å› æ­¤, å¦‚æœè¦æ ‡æ˜åŸå­å­˜åœ¨, éœ€è¦æ˜¯<strong>æœ‰ç”¨</strong>çš„ä»£ç .</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li>[<a href="http://erlang.org/doc/man/erlang.html#binary_to_term-2]">http://erlang.org/doc/man/erlang.html#binary_to_term-2]</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ConEmu(Cmder)åˆ†å±</title>
      <link href="/2018/03/07/windows/windows-conemu-split/"/>
      <url>/2018/03/07/windows/windows-conemu-split/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>è®¾ç½®</code> -&gt; <code>å¯åŠ¨</code> -&gt; <code>ç¯å¢ƒ</code>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¾“å…¥ vs, sp åˆ†å±</span></span><br><span class="line"><span class="comment">## vs æ˜¯å‚ç›´åˆ†å±</span></span><br><span class="line">alias vs=cmd <span class="literal">-new_console</span>:sTHn</span><br><span class="line"><span class="comment">## sp æ˜¯æ°´å¹³åˆ†å±</span></span><br><span class="line">alias <span class="built_in">sp</span>=cmd <span class="literal">-new_console</span>:sTVn</span><br></pre></td></tr></table></figure><span id="more"></span><p>æ›´å¤æ‚çš„åˆ†å±ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cmd /K ctl.bat -new_console:n:d:&quot;E:\syjy\server\trunk\script&quot;:t:å¯åŠ¨è„šæœ¬</span><br><span class="line">cmd /K tail -f console.log -cur_console:s1TVn:d:&quot;E:\syjy\server\trunk\logs\game\&quot;:t:æ¸¸æˆæœ</span><br><span class="line">cmd /K tail -f console.log -new_console:s1THn:d:&quot;E:\syjy\server\trunk\logs\cross\&quot;:t:è·¨æœ</span><br><span class="line">cmd /K tail -f console.log -new_console:s2THn:d:&quot;E:\syjy\server\trunk\logs\mgr\&quot;:t:ç®¡ç†æœ</span><br><span class="line">cmd /K my_ssh.bat -new_console:s1THn:d:&quot;E:\my_ssh&quot;:t:SSH</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="https://conemu.github.io/en/SplitScreen.html">https://conemu.github.io/en/SplitScreen.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ConEmu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Plink+Privoxyä¸ºsvnæä¾›ä»£ç†</title>
      <link href="/2018/02/13/windows/windows-plink-proxy-svn/"/>
      <url>/2018/02/13/windows/windows-plink-proxy-svn/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å³ä½¿è¿‡å¹´å›å®¶,ä¹Ÿè¦å®‰æ’å€¼ç­,å‘å‘å‘<br>å…¬å¸æä¾›äº†vpn,ä½†æ˜¯æ— æ³•æ›´æ–°ä»£ç ,æ›´åŠ çš„å‘<br>åªèƒ½ä½¿ç”¨å¥‡æ€æ·«å·§äº†</p><span id="more"></span><h2 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h2><p>éœ€è¦æœ‰å†…ç½‘æœåŠ¡å™¨æƒé™(ä¹Ÿå¯ä»¥è‡ªå·±åœ¨ç”µè„‘ä¸Šæ­å»º,ä½†æ˜¯å…³æœºå°±æ²¡åŠæ³•äº†)</p><h2 id="éœ€è¦è½¯ä»¶"><a href="#éœ€è¦è½¯ä»¶" class="headerlink" title="éœ€è¦è½¯ä»¶"></a>éœ€è¦è½¯ä»¶</h2><ol><li><a href="https://www.putty.org/">Putty</a></li><li><a href="https://sourceforge.net/projects/ijbswa/">Privoxy</a></li></ol><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><ol><li><p>Putty<br>plinkç”¨äºå»ºç«‹SSHéš§é“,å®ç°<code>socks5ä»£ç†</code><br><code>plink -C -N -D 127.0.0.1:7000 -i ä¸ªäººç§˜é’¥.ppk ç”¨æˆ·å@IP</code></p><blockquote><p>-C å¯ç”¨å‹ç¼©<br>-D ç«¯å£è½¬å‘<br>-i xxx.ppk æ˜¯ä½¿ç”¨ç§é’¥(ppkå¦‚ä½•è½¬æ¢,è¯·è‡ªè¡Œç™¾åº¦)</p></blockquote></li><li><p>Privoxy<br><code>Privoxy</code>å¯ä»¥å°†<code>socks5ä»£ç†</code>è½¬æ¢ä¸º<code>httpä»£ç†</code><br>åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forward-socks5 / 127.0.0.1:7000 .</span><br><span class="line">listen-address 127.0.0.1:8118</span><br></pre></td></tr></table></figure></li><li><p>svn</p><ul><li>Windows<br>ä½¿ç”¨<code>TortoiseSVN</code>çš„åŒå­¦å¯ä»¥åœ¨<code>Settings</code>-&gt;<code>Network</code>ä¸­è®¾ç½®ä»£ç†</li><li>Linux<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.subversion/servers</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line">http-proxy-host = 127.0.0.1</span><br><span class="line">http-proxy-port = 8118</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å®Œæˆ<br>ç°åœ¨å¯ä»¥æ›´æ–°ä»£ç äº†</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svn </tag>
            
            <tag> putty </tag>
            
            <tag> privoxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERLANGå¿«é€Ÿç¼–è¯‘è„šæœ¬</title>
      <link href="/2018/02/08/erlang/erlang-quick-make/"/>
      <url>/2018/02/08/erlang/erlang-quick-make/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¡¹ç›®ä¸­ä½¿ç”¨<code>mmake:all/1</code>è¿›è¡Œç¼–è¯‘,ä½†æ˜¯è¿™ä¼šéå†æ‰€æœ‰æ–‡ä»¶,æ•ˆç‡ä¸æ˜¯å¾ˆé«˜</p><p>å…ˆ<code>svn up</code>, ç„¶åæ‰§è¡Œä¸‹é¢çš„è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fun_quick_make</span></span>()&#123;</span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$SERVER_DIR</span></span><br><span class="line">    <span class="comment">## è·å–å˜åŒ–çš„å¤´æ–‡ä»¶</span></span><br><span class="line">    hrl_file_list=$(find . -newer time_file -regex .*.hrl -<span class="built_in">exec</span> basename &#123;&#125; \;)</span><br><span class="line">    hrl_f_list=<span class="variable">$hrl_file_list</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## è·å–å…³è”çš„å¤´æ–‡ä»¶</span></span><br><span class="line">    all_hrl_files=$(find include -name <span class="string">&quot;*.hrl&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;hrl_file_list[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="comment">## for j in $(ag &quot;$i&quot; include/**/* | awk -F &quot;:&quot; &#x27;&#123;print $1&#125;&#x27;); do</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> $(grep <span class="string">&quot;<span class="variable">$i</span>&quot;</span> <span class="variable">$all_hrl_files</span> | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>); <span class="keyword">do</span></span><br><span class="line">            hrl_f_list=<span class="string">&quot;<span class="subst">$(basename $j)</span> <span class="variable">$hrl_f_list</span>&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## è·å–å˜åŒ–çš„erlæ–‡ä»¶</span></span><br><span class="line">    erl_file_list=<span class="string">&quot;\&quot;src/main.erl\&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $(find . -newer time_file -regex .*.erl); <span class="keyword">do</span></span><br><span class="line">        erl_file_list=<span class="string">&quot;<span class="variable">$erl_file_list</span>,\&quot;<span class="variable">$&#123;i/.\//&#125;</span>\&quot;&quot;</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## è·å–å…³è”çš„erlæ–‡ä»¶</span></span><br><span class="line">    all_files=$(find . -name <span class="string">&quot;*.erl&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;hrl_f_list[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment">## why??? php_ssh call fail</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment">## for j in $(ag --ignore &quot;robot&quot; &quot;$i&quot; **/* | awk -F &quot;:&quot; &#x27;&#123;print $1&#125;&#x27; | grep &quot;.erl&quot;); do</span></span><br><span class="line">        <span class="comment">##     erl_file_list=&quot;$erl_file_list,\&quot;$j\&quot;&quot;</span></span><br><span class="line">        <span class="comment">## done</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> $(grep <span class="string">&quot;<span class="variable">$i</span>&quot;</span> <span class="variable">$all_files</span> | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;/robot/&quot;</span>); <span class="keyword">do</span></span><br><span class="line">            erl_file_list=<span class="string">&quot;<span class="variable">$erl_file_list</span>,\&quot;<span class="variable">$&#123;j/.\//&#125;</span>\&quot;&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## ä½¿ç”¨`mmake:files/2`ç¼–è¯‘</span></span><br><span class="line">    <span class="variable">$&#123;ERL&#125;</span> -pa <span class="variable">$&#123;SERVER_EBIN&#125;</span> -pa <span class="variable">$&#123;SERVER_BASEEBIN&#125;</span> -noshell -<span class="built_in">eval</span> <span class="string">&quot;case mmake:files(500,[<span class="variable">$erl_file_list</span>]) of up_to_date -&gt; init:stop(); _ -&gt; init:stop(1) end&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;$?&quot;</span> == <span class="string">&quot;0&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        touch time_file</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä½¿ç”¨REè¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢çš„å‘</title>
      <link href="/2018/02/05/erlang/erlang-re-and/"/>
      <url>/2018/02/05/erlang/erlang-re-and/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>erlangä½¿ç”¨REè¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢æ—¶â€&amp;â€ç‰¹æ®Šå¤„ç†</p><span id="more"></span><h2 id="æ‰¾é—®é¢˜"><a href="#æ‰¾é—®é¢˜" class="headerlink" title="æ‰¾é—®é¢˜"></a>æ‰¾é—®é¢˜</h2><p>å…ˆæ¥è´´ä¸€æ®µä»£ç </p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, [])</span> -&gt;</span></span><br><span class="line">    String;</span><br><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, [&#123;RE,Replacement&#125;|Left])</span> -&gt;</span></span><br><span class="line">    NewString = replace(String, RE, Replacement),</span><br><span class="line">    replace(NewString, Left).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, RE, Replacement)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> re:run(String, RE) <span class="keyword">of</span></span><br><span class="line">        nomatch -&gt; String;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            NewString = re:replace(String, RE, NewReplacement, [&#123;return,list&#125;]),</span><br><span class="line">            replace(NewString, RE, Replacement)</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure><p>è¿™å—ä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜:</p><ol><li>[å°é—®é¢˜]åœ¨11,12è¡Œå¯ä»¥ä½¿ç”¨<code>re:replace(String, RE, NewReplacement, [&#123;return,list&#125;, global])</code>ä»£æ›¿</li><li>[å¤§é—®é¢˜]è¿™å—ä»£ç ä¼šé€ æˆæ­»å¾ªç¯, é‡ç°æ–¹å¼:<code>replace(&quot;abcdefg&quot;, [&#123;&quot;a&quot;, &quot;&amp;&quot;&#125;]).</code></li></ol><h2 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h2><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% æ›¿æ¢å­—ç¬¦ä¸²å†…å®¹</span></span><br><span class="line"><span class="comment">%% A = re:replace(&quot;a&amp;b&quot;, &quot;&amp;&quot;, &quot;\\\\\\&amp;&quot;, [&#123;return,list&#125;]).</span></span><br><span class="line"><span class="comment">%% util:replace(&quot;&#123;0&#125;aaa&#123;1&#125;&quot;, [&#123;&quot;\\&#123;0\\&#125;&quot;, A&#125;]).</span></span><br><span class="line"><span class="comment">%% util:replace(&quot;&#123;0&#125;aaa&#123;1&#125;&quot;, [&#123;&quot;\\&#123;0\\&#125;&quot;, &quot;a&amp;b&quot;&#125;]).</span></span><br><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, [])</span> -&gt;</span></span><br><span class="line">    String;</span><br><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, [&#123;RE,Replacement&#125;|Left])</span> -&gt;</span></span><br><span class="line">    NewString = replace(String, RE, Replacement),</span><br><span class="line">    replace(NewString, Left).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">replace</span><span class="params">(String, RE, Replacement)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> re:run(String, RE) <span class="keyword">of</span></span><br><span class="line">        nomatch -&gt; String;</span><br><span class="line">        _ -&gt;</span><br><span class="line">            NewReplacement = re:replace(Replacement, <span class="string">&quot;&amp;&quot;</span>, <span class="string">&quot;\\\\\\&amp;&quot;</span>, [global, &#123;return,list&#125;]),</span><br><span class="line">            NewString = re:replace(String, RE, NewReplacement, [&#123;return,list&#125;, global]),</span><br><span class="line">            NewString</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Xming+Puttyå®ç°æ˜¾ç¤ºLinuxGUI</title>
      <link href="/2018/02/05/windows/windows-xming-putty/"/>
      <url>/2018/02/05/windows/windows-xming-putty/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨Xming+Puttyå®ç°æ˜¾ç¤ºLinuxGUI</p><span id="more"></span><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ul><li><code>Windows</code>(å®¢æˆ·ç«¯)<ul><li>ä¸‹è½½å®‰è£…<a href="https://sourceforge.net/projects/xming/files/Xming/">Xming</a>,<a href="https://sourceforge.net/projects/xming/files/Xming-fonts/">Xming-Fonts</a></li></ul></li></ul><ul><li><code>Linux</code>(æœåŠ¡å™¨)<ul><li><code>yum install -y xauth</code>,é‡æ–°ç™»å½•,å¦‚æœ<code>echo $DISPLAY</code>æœ‰è¾“å‡ºè¡¨ç¤ºæˆåŠŸ</li><li><code>yum -y groupinstall fonts</code>,å®‰è£…å„ç§å­—ä½“,å¦åˆ™ä¸­æ–‡ä¹±ç </li><li><code>/etc/ssh/sshd_config</code>æ–‡ä»¶ä¸­å¢åŠ <code>X11 Forwarding yes</code> </li></ul></li></ul><h2 id="Xmingè®¾ç½®"><a href="#Xmingè®¾ç½®" class="headerlink" title="Xmingè®¾ç½®"></a>Xmingè®¾ç½®</h2><h3 id="ä¿®æ”¹å­—ä½“å¤§å°"><a href="#ä¿®æ”¹å­—ä½“å¤§å°" class="headerlink" title="ä¿®æ”¹å­—ä½“å¤§å°"></a>ä¿®æ”¹å­—ä½“å¤§å°</h3><p><code>Xmingå³å‡»</code> -&gt; <code>å±æ€§</code> -&gt; <code>-dpi 96</code> </p><h3 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h3><p>å¯åŠ¨<code>XLaunch</code>æŒ‰æ­¥éª¤è®¾ç½®(é»˜è®¤è®¾ç½®å³å¯) </p><h2 id="Xmingçª—å£å¯åŠ¨"><a href="#Xmingçª—å£å¯åŠ¨" class="headerlink" title="Xmingçª—å£å¯åŠ¨"></a>Xmingçª—å£å¯åŠ¨</h2><h3 id="putty-éœ€è¦å…ˆè¿æ¥-å†å¯åŠ¨GUIåº”ç”¨"><a href="#putty-éœ€è¦å…ˆè¿æ¥-å†å¯åŠ¨GUIåº”ç”¨" class="headerlink" title="putty(éœ€è¦å…ˆè¿æ¥,å†å¯åŠ¨GUIåº”ç”¨)"></a>putty(éœ€è¦å…ˆè¿æ¥,å†å¯åŠ¨GUIåº”ç”¨)</h3><ol><li>å‹¾é€‰<code>Enable X11 forwarding</code>, å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œçš„è¯<code>putty -ssh -X</code></li><li>å…¶ä»–é…ç½®æŒ‰ç…§æ­£å¸¸çš„é…ç½®</li><li>è¿æ¥æˆåŠŸå, ä½¿ç”¨å‘½ä»¤å¯åŠ¨GUIç¨‹åº, æ¯”å¦‚<code>gvim</code></li></ol><h3 id="plink-ç›´æ¥å¯åŠ¨åº”ç”¨-ä¸ä¼šæœ‰å‘½ä»¤çª—å£"><a href="#plink-ç›´æ¥å¯åŠ¨åº”ç”¨-ä¸ä¼šæœ‰å‘½ä»¤çª—å£" class="headerlink" title="plink(ç›´æ¥å¯åŠ¨åº”ç”¨,ä¸ä¼šæœ‰å‘½ä»¤çª—å£)"></a>plink(ç›´æ¥å¯åŠ¨åº”ç”¨,ä¸ä¼šæœ‰å‘½ä»¤çª—å£)</h3><ol><li>åˆ›å»º<a href="/downloads/assets/RunHiddenConsole.exe">RunHiddenConsole</a>å¿«æ·æ–¹å¼</li><li>ç›®æ ‡å¢åŠ <code>plink -ssh -X -P ç«¯å£ -pw å¯†ç  ç”¨æˆ·å@127.0.0.1 gvim</code></li></ol><h2 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h2><p><img src="/downloads/assets/gnome-terminal.png" alt="gnome-terminal"></p><h2 id="å·²çŸ¥é—®é¢˜"><a href="#å·²çŸ¥é—®é¢˜" class="headerlink" title="å·²çŸ¥é—®é¢˜"></a>å·²çŸ¥é—®é¢˜</h2><ul><li>å°½ç®¡å¯ä»¥åœ¨<code>windows</code>ä¸‹æ˜¾ç¤ºç•Œé¢,ä½†æ˜¯å¤§éƒ¨åˆ†è½¯ä»¶çš„å­—ä½“ç¡®å®ä¸æ€ä¹ˆå¥½çœ‹</li><li><code>yum</code>å®‰è£…çš„emacsä¼šå´©æºƒ,è¯·æºç ç¼–è¯‘å®‰è£…</li></ul>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹å®‰è£…mosh server</title>
      <link href="/2017/11/22/centos/centos-mosh/"/>
      <url>/2017/11/22/centos/centos-mosh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>MOSHä½¿ç”¨UDPè¿›è¡Œä¼ è¾“,å®ç°åŸºæœ¬çš„sshåŠŸèƒ½,åœ¨çŸ­æ—¶é—´å†…æ–­ç½‘/åˆ‡æ¢ç½‘ç»œèƒ½å¤Ÿä¿è¯è¿æ¥ä¸ä¼šæ–­å¼€.</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mosh</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h3><p>æŒ‰ç…§sshçš„è¿æ¥å³å¯,åªæ˜¯æŠŠåè®®ä¿®æ”¹ä¸ºmosh</p>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> mosh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTMLè°ƒç”¨æœ¬åœ°EXEç¨‹åº</title>
      <link href="/2017/11/03/other/other-html-call-exe/"/>
      <url>/2017/11/03/other/other-html-call-exe/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>HTMLè°ƒç”¨æœ¬åœ°EXEç¨‹åº</p><span id="more"></span><h2 id="æ–¹æ³•1-ActiveXObject"><a href="#æ–¹æ³•1-ActiveXObject" class="headerlink" title="æ–¹æ³•1-ActiveXObject"></a>æ–¹æ³•1-ActiveXObject</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="javascript">          </span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">RunExe</span>(<span class="params"></span>)</span>&#123;  </span></span><br><span class="line"><span class="javascript">        w = <span class="keyword">new</span> ActiveXObject(<span class="string">&quot;WScript.Shell&quot;</span>);</span></span><br><span class="line"><span class="javascript">        w.run(<span class="string">&#x27;notepad.exe e:/a.bat&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">    &#125;  </span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;form1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Run&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;return RunExe()&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ç®€å•ä½†æ˜¯ä¸é€šç”¨,åªæ”¯æŒIE</p></blockquote><h2 id="æ–¹æ³•2-URIScheme"><a href="#æ–¹æ³•2-URIScheme" class="headerlink" title="æ–¹æ³•2-URIScheme"></a>æ–¹æ³•2-URIScheme</h2><p>åˆ›å»ºæµç¨‹:</p><blockquote><p><code>CMD</code> -&gt; <code>regedit</code><br><code>é€‰ä¸­HKEY_CLASSES_ROOTå³å‡»</code> -&gt; <code>æ–°å»º é¡¹</code> -&gt; <code>myprotocol</code><br><code>é€‰ä¸­myprotocolå³å‡»</code> -&gt; <code>æ–°å»º é¡¹</code> -&gt; <code>DefaultIcon</code><br><code>é€‰ä¸­myprotocolå³å‡»</code> -&gt; <code>æ–°å»º é¡¹</code> -&gt; <code>Shell</code><br><code>é€‰ä¸­myprotocolå³å‡»</code> -&gt; <code>æ–°å»º å­—ç¬¦ä¸²å€¼</code> -&gt; <code>URL Protocol</code><br><code>é€‰ä¸­DefaultIcon</code> -&gt; <code>ä¿®æ”¹é»˜è®¤ å€¼ä¸ºC:\windows\notepad.exe</code><br><code>é€‰ä¸­Shellå³å‡»</code> -&gt; <code>æ–°å»º é¡¹</code> -&gt; <code>open</code><br><code>é€‰ä¸­openå³å‡»</code> -&gt; <code>æ–°å»º é¡¹</code> -&gt; <code>command</code><br><code>é€‰ä¸­commandå³å‡»</code> -&gt; <code>ä¿®æ”¹é»˜è®¤ å€¼ä¸ºC:\windows\notepad.exe %1</code></p></blockquote><p>å¯¼å‡ºçš„ç»“æœå¦‚ä¸‹:</p><figure class="highlight plaintext"><figcaption><span>myprotocol.reg</span><a href="/downloads/code/myprotocol.reg">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\myprotocol]</span><br><span class="line">@=&quot;ZM Protocol&quot;</span><br><span class="line">&quot;URL Protocol&quot;=&quot;E:\\test.bat %1&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\myprotocol\DefaultIcon]</span><br><span class="line">@=&quot;C:\\Windows\\notepad.exe&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\myprotocol\shell]</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\myprotocol\shell\open]</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\myprotocol\shell\open\command]</span><br><span class="line">@=&quot;E:\\test.bat %1&quot;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨æ–¹æ³•:<br>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>myprotocol://e:/a.bat/</code><br>æç¤ºé”™è¯¯çš„æ–‡ä»¶è·¯å¾„<br><strong>è¿™ä¸ªæ˜¯å› ä¸ºä¼ å…¥çš„å‚æ•°é”™è¯¯,æ‰“å°å‘ç°%1è¢«è®¾ç½®ä¸º<code>myprotocol://e:/a.bat/</code>,è€Œä¸æ˜¯é¢„æƒ³çš„<code>e:/a.bat</code></strong><br>å› æ­¤éœ€è¦å¤„ç†ä¼ å…¥çš„å‚æ•°</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">rem e:/test.bat</span></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> arg=%<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> arg1=<span class="variable">%arg:~13,-1%</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%arg1%</span></span><br><span class="line"><span class="built_in">start</span> notepad <span class="variable">%arg1%</span></span><br><span class="line"><span class="comment">rem pause</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­13æ˜¯<code>myprotocol://</code>çš„é•¿åº¦<br><code>%arg:~13,-1%</code>æ˜¯å–<code>arg</code>å­—ç¬¦ä¸²çš„ç¬¬13ä¸ª~å€’æ•°ç¬¬äºŒä¸ªçš„å­ä¸²</p><p>ä¸€åˆ‡OKäº†<br>ç°åœ¨htmlä¸­ç®€å•ä¸€è¡Œå°±å¯ä»¥è°ƒç”¨äº†<br><code>&lt;a href=&quot;myprotocol://e:/a.bat/&quot;&gt;æ‰“å¼€a.bat&lt;/a&gt;</code></p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li>[<a href="https://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx]">https://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx]</a></li><li>[<a href="http://www.voidcn.com/article/p-ehydagiu-uv.html]">http://www.voidcn.com/article/p-ehydagiu-uv.html]</a></li><li>[<a href="http://www.yihaomen.com/article/other/212.htm]">http://www.yihaomen.com/article/other/212.htm]</a></li><li>[<a href="http://www.jb51.net/article/37278.htm]">http://www.jb51.net/article/37278.htm]</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
            <tag> URIScheme </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹supervisorç®€å•é…ç½®</title>
      <link href="/2017/10/25/centos/centos-supervisor/"/>
      <url>/2017/10/25/centos/centos-supervisor/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>supervisorå°±æ˜¯ç”¨Pythonå¼€å‘çš„ä¸€å¥—é€šç”¨çš„è¿›ç¨‹ç®¡ç†ç¨‹åº,å¯ä»¥ç›‘æ§ç¨‹åºçŠ¶æ€, å¹¶ä¸”å¯ä»¥é‡å¯</p><span id="more"></span><h3 id="ç®€å•é…ç½®"><a href="#ç®€å•é…ç½®" class="headerlink" title="ç®€å•é…ç½®"></a>ç®€å•é…ç½®</h3><p>é…ç½®æ–‡ä»¶åœ¨<code>/etc/supervisor/conf.d</code>ç›®å½•ä¸‹<br>é…ç½®å¾ˆç®€å•,æ›´åŠ è¯¦ç»†çš„é…ç½®æŸ¥çœ‹<a href="http://www.supervisord.org/">http://www.supervisord.org/</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[program:frps]</span><br><span class="line">user=root</span><br><span class="line">directory=/root/frp/frp_server/</span><br><span class="line">command=/root/frp/frp_server/frps -c /root/frp/frp_server/frps.ini</span><br><span class="line">process_name=%(program_name)s</span><br><span class="line">autostart=true</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[program:kcptun]</span><br><span class="line">user=kcptun</span><br><span class="line">directory=/usr/local/kcptun</span><br><span class="line">command=/usr/local/kcptun/server_linux_386 -c &quot;/usr/local/kcptun/server-config.json&quot;</span><br><span class="line">process_name=%(program_name)s</span><br><span class="line">autostart=true</span><br><span class="line">redirect_stderr=true</span><br><span class="line">stdout_logfile=/var/log/kcptun/server.log</span><br><span class="line">stdout_logfile_maxbytes=1MB</span><br><span class="line">stdout_logfile_backups=0</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://www.supervisord.org/">http://www.supervisord.org/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> supervisor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹æŸ¥çœ‹å›¾ç‰‡/è§†é¢‘çš„åˆ›å»ºæ—¶é—´</title>
      <link href="/2017/10/20/centos/centos-image-videos-info/"/>
      <url>/2017/10/20/centos/centos-image-videos-info/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘åœ¨æ•´ç†æ‰‹æœºä¸Šçš„å›¾ç‰‡å’Œè§†é¢‘(æ²¡åŠæ³•,ç©ºé—´å¤ªå°äº†,è¯¥åˆ é™¤çš„å°±çš„åˆ é™¤)<br>ä½†æ˜¯å›¾ç‰‡/è§†é¢‘çš„å‘½åä¹±ä¸ƒå…«ç³Ÿçš„,éœ€è¦æŒ‰ç…§æ—¶é—´è¿›è¡Œå‘½å<br>ç”¨åˆ°ä¸¤ä¸ªå·¥å…·:<code>exiv2ï¼ˆæŸ¥çœ‹å›¾ç‰‡çš„exifä¿¡æ¯ï¼‰</code>,<code>mediainfoï¼ˆæŸ¥çœ‹è§†é¢‘çš„ä¿¡æ¯ï¼‰</code></p><span id="more"></span><h2 id="exiv2"><a href="#exiv2" class="headerlink" title="exiv2"></a>exiv2</h2><blockquote><p><code>yum install exiv2</code></p></blockquote><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><p><code>exiv2 a.jpg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">File name       : a.jpg</span><br><span class="line">...</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">## Image timestamp å³ä¸ºæ‹æ‘„æ—¶é—´</span></span></span><br><span class="line">Image timestamp : 2017:01:21 13:15:48</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å•ä¸ªï¼š<code>exiv2 -g &quot;Exif.Image.DateTime&quot; a.jpg</code><br>åˆ—å‡ºæ‰€æœ‰ï¼š<code>exiv2 -pt a.jpg</code></p><h3 id="ä¿®æ”¹exif"><a href="#ä¿®æ”¹exif" class="headerlink" title="ä¿®æ”¹exif"></a>ä¿®æ”¹exif</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">date=&quot;2020:01:01&quot;</span><br><span class="line">time=&quot;10:00:00&quot;</span><br><span class="line">exiv2 -M&quot;set Exif.Image.DateTime Ascii $date $time&quot; \</span><br><span class="line">      -M&quot;set Exif.Photo.DateTimeOriginal Ascii $date $time&quot; \</span><br><span class="line">      -M&quot;set Exif.Photo.DateTimeDigitized Ascii $date $time&quot; $file </span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤exif"><a href="#åˆ é™¤exif" class="headerlink" title="åˆ é™¤exif"></a>åˆ é™¤exif</h3><p><code>exiv2 rm a.jpg</code></p><h3 id="é‡å‘½å"><a href="#é‡å‘½å" class="headerlink" title="é‡å‘½å"></a>é‡å‘½å</h3><p><code>exiv2 -F -r &quot;IMG_%Y%m%d_%H%M%S&quot; rename *.jpg</code></p><blockquote><p>-F å¼ºåˆ¶é‡å‘½å<br>-r è‡ªå®šä¹‰åå­—æ ¼å¼</p></blockquote><h2 id="mediainfo"><a href="#mediainfo" class="headerlink" title="mediainfo"></a>mediainfo</h2><blockquote><p><code>yum install mediainfo</code><br><strong>éœ€è¦æœ‰epelæº</strong></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mediainfo 084503060416d183f2c33000.mp4</span></span><br><span class="line">General</span><br><span class="line">Complete name                            : 084503060416d183f2c33000.mp4</span><br><span class="line">...</span><br><span class="line">Encoded date                             : UTC 2016-04-06 00:45:10</span><br><span class="line">Tagged date                              : UTC 2016-04-06 00:45:10</span><br><span class="line">...</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">## Encoded date å³ä¸ºåˆ›å»ºæ—¶é—´,ä½†æ˜¯è¦æ³¨æ„æ˜¯UTCæ—¶é—´</span></span></span><br></pre></td></tr></table></figure><p>å‰©ä¸‹å°±æ˜¯è‡ªå·±å®ç°è„šæœ¬äº†</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://blog.sina.com.cn/s/blog_64a43f760100o0p3.html">http://blog.sina.com.cn/s/blog_64a43f760100o0p3.html</a></li><li><a href="http://tieba.baidu.com/p/3338501642">http://tieba.baidu.com/p/3338501642</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
          <category> exiv2 </category>
          
          <category> mediainfo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> exiv2 </tag>
            
            <tag> mediainfo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨svnå‘½ä»¤åˆå¹¶ç‰ˆæœ¬</title>
      <link href="/2017/09/30/shell/shell-svn-merge/"/>
      <url>/2017/09/30/shell/shell-svn-merge/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨svnå‘½ä»¤åˆå¹¶ç‰ˆæœ¬, ä¸€ä¸ªæ²¡æœ‰å®é™…ä½¿ç”¨è¿‡çš„è„šæœ¬, å¤‡ä»½ä¸‹</p><span id="more"></span><figure class="highlight sh"><figcaption><span>svn_merge.sh</span><a href="/downloads/code/svn_merge.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash - </span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#          FILE: svn_merge.sh</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#         USAGE: ./svn_merge.sh </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#   DESCRIPTION: </span></span><br><span class="line"><span class="comment">#               åˆå¹¶è„šæœ¬</span></span><br><span class="line"><span class="comment">#               1. æ ¹æ®ç‰ˆæœ¬ä¾æ¬¡åˆå¹¶</span></span><br><span class="line"><span class="comment">#               2. é‡åˆ°å†²çªä½¿ç”¨Ctrl-Cä¸­æ–­</span></span><br><span class="line"><span class="comment">#               3. è§£å†³å†²çªåå†æ¬¡æ‰§è¡Œ,ç»§ç»­åˆå¹¶</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#       OPTIONS: ---</span></span><br><span class="line"><span class="comment">#  REQUIREMENTS: ---</span></span><br><span class="line"><span class="comment">#          BUGS: ---</span></span><br><span class="line"><span class="comment">#         NOTES: ---</span></span><br><span class="line"><span class="comment">#        AUTHOR: kingwen0302, kingwen0302@msn.com</span></span><br><span class="line"><span class="comment">#  ORGANIZATION: </span></span><br><span class="line"><span class="comment">#       CREATED: 2017/5/12 16:15</span></span><br><span class="line"><span class="comment">#      REVISION:  ---</span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -o nounset                              <span class="comment"># Treat unset variables as an error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## é…ç½®</span></span><br><span class="line">SRC_SVN_URL=http://svn_url/server/trunk</span><br><span class="line">SVN_USER=<span class="string">&quot;svn_user&quot;</span></span><br><span class="line">SVN_PASS=<span class="string">&quot;svn_pass&quot;</span></span><br><span class="line"></span><br><span class="line">SRC_SVN_URL_BASE=$(basename <span class="variable">$SRC_SVN_URL</span>)</span><br><span class="line"></span><br><span class="line">CUR_DIR=$(<span class="built_in">cd</span> $(dirname <span class="variable">$0</span>); <span class="built_in">pwd</span>)</span><br><span class="line"><span class="comment">## å·²ç»åˆå¹¶æˆåŠŸçš„ç‰ˆæœ¬å·</span></span><br><span class="line">MERGE_SUCCESS_VERSION=<span class="variable">${CUR_DIR}</span>/versions</span><br><span class="line"><span class="comment">## å·²ç»åˆå¹¶æˆåŠŸçš„æ³¨é‡Š</span></span><br><span class="line">MERGE_SUCCESS_COMMENT=<span class="variable">${CUR_DIR}</span>/comment</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SVN_EDITOR=<span class="string">&quot;vim&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">svn_merge_one</span></span>(){</span><br><span class="line">    version=<span class="variable">$1</span></span><br><span class="line">    <span class="comment">## å¦‚æœsvnæ˜¯ä¸­æ–‡çš„è¯,è¦è¿‡æ»¤ä¸­æ–‡</span></span><br><span class="line">    merge_files=$(svn <span class="built_in">log</span> -r <span class="variable">${version}</span> -qv <span class="variable">${SRC_SVN_URL}</span> --username <span class="variable">${SVN_USER}</span> --password <span class="variable">${SVN_PASS}</span> | grep -v <span class="string">&quot;^r&quot;</span> | grep -v <span class="string">&quot;^Changed paths:&quot;</span> | grep -v <span class="string">&quot;^-------------&quot;</span> | awk <span class="string">&quot;{print \$1\$2}&quot;</span>)</span><br><span class="line"></span><br><span class="line">    base_merge_files=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable">$merge_files</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$base_merge_files</span> == <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            base_merge_files=$(basename <span class="variable">$f</span>)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            base_merge_files=<span class="string">&quot;<span class="variable">${base_merge_files}</span> <span class="subst">$(basename $f)</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$base_merge_files</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;==&gt;START MERGE <span class="variable">${version}</span> [<span class="variable">${base_merge_files}</span>]&quot;</span></span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable">${merge_files}</span>; <span class="keyword">do</span></span><br><span class="line">            svn_cmd=$(expr substr <span class="variable">$f</span> 1 1)</span><br><span class="line">            f=$(<span class="built_in">echo</span> <span class="variable">$f</span> | sed -e <span class="string">&quot;s/^.//&quot;</span> | sed -e <span class="string">&quot;s/<span class="variable">${SRC_SVN_URL_BASE}</span>//&quot;</span>  | sed -e <span class="string">&quot;s/\/\//\//g&quot;</span> | sed -e <span class="string">&quot;s/\/\//\//g&quot;</span>)</span><br><span class="line">            local_f=<span class="string">&quot;.<span class="variable">$f</span>&quot;</span></span><br><span class="line">            <span class="keyword">case</span> <span class="variable">$svn_cmd</span> <span class="keyword">in</span></span><br><span class="line">                A)</span><br><span class="line">                    tmp=<span class="string">&quot;svn copy --username <span class="variable">${SVN_USER}</span> --password <span class="variable">${SVN_PASS}</span> -r <span class="variable">$version</span> <span class="variable">${SRC_SVN_URL}</span><span class="variable">$f</span> <span class="variable">$local_f</span>&quot;</span></span><br><span class="line">                    ;;</span><br><span class="line">                M)</span><br><span class="line">                    <span class="comment">## tmp=&quot;svn merge --username ${SVN_USER} --password ${SVN_PASS} -r $((version-1)):$version --ignore-ancestry ${SRC_SVN_URL}$f $local_f&quot;</span></span><br><span class="line">                    tmp=<span class="string">&quot;svn merge --username <span class="variable">${SVN_USER}</span> --password <span class="variable">${SVN_PASS}</span> -c <span class="variable">$version</span> --ignore-ancestry <span class="variable">${SRC_SVN_URL}</span><span class="variable">$f</span> <span class="variable">$local_f</span>&quot;</span></span><br><span class="line">                    ;;</span><br><span class="line">                D)</span><br><span class="line">                    tmp=<span class="string">&quot;svn del <span class="variable">$local_f</span>&quot;</span></span><br><span class="line">                    ;;</span><br><span class="line">                *)</span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;æš‚ä¸æ”¯æŒçš„å‘½ä»¤&quot;</span></span><br><span class="line">                    <span class="built_in">exit</span></span><br><span class="line">                    ;;</span><br><span class="line">            <span class="keyword">esac</span></span><br><span class="line">            ttmp=$(<span class="variable">$tmp</span>)</span><br><span class="line">            <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;    [FAIL]<span class="variable">$ttmp</span>&quot;</span></span><br><span class="line">                <span class="built_in">exit</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;    [SUCCESS]<span class="variable">$f</span>&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## å†™å…¥åˆå¹¶æˆåŠŸç‰ˆæœ¬å·</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$version</span>&quot;</span> &gt;&gt; <span class="variable">${MERGE_SUCCESS_VERSION}</span></span><br><span class="line">        <span class="comment">## å†™å…¥åˆå¹¶æˆåŠŸæ—¥å¿—</span></span><br><span class="line">        svn <span class="built_in">log</span> -r <span class="variable">${version}</span> -v <span class="variable">${SRC_SVN_URL}</span> --username <span class="variable">${SVN_USER}</span> --password <span class="variable">${SVN_PASS}</span> | grep -v <span class="string">&quot;^r&quot;</span> | grep -v <span class="string">&quot;^Changed paths:&quot;</span> | grep -v <span class="string">&quot;^-------------&quot;</span> | grep -v <span class="string">&quot;^$&quot;</span> | grep -v <span class="string">&quot;^ &quot;</span> &gt;&gt; <span class="variable">${MERGE_SUCCESS_COMMENT}</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;---------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span> version1:version2 version3 &quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;---------------------&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## ç¡®ä¿æ–‡ä»¶å­˜åœ¨</span></span><br><span class="line">        touch <span class="variable">${MERGE_SUCCESS_VERSION}</span></span><br><span class="line">        touch <span class="variable">${MERGE_SUCCESS_COMMENT}</span></span><br><span class="line">        <span class="comment">## è·å–ç‰ˆæœ¬</span></span><br><span class="line">        f_version=$(<span class="built_in">echo</span> <span class="variable">$1</span> | cut -d : -f 1)</span><br><span class="line">        t_version=$(<span class="built_in">echo</span> <span class="variable">$1</span> | cut -d : -f 2)</span><br><span class="line">        <span class="keyword">for</span> version <span class="keyword">in</span> $(seq <span class="variable">$f_version</span> <span class="variable">$t_version</span>); <span class="keyword">do</span></span><br><span class="line">            <span class="comment">## æ˜¯å¦å·²ç»åˆå¹¶æˆåŠŸ</span></span><br><span class="line">            is_merge_success=0</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> $(cat <span class="variable">${MERGE_SUCCESS_VERSION}</span>); <span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">${v}</span>&quot;</span> == <span class="string">&quot;<span class="variable">$version</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                    is_merge_success=1</span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">            <span class="keyword">done</span></span><br><span class="line">            <span class="keyword">if</span> [ <span class="variable">$is_merge_success</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">                svn_merge_one <span class="variable">$version</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">mv <span class="variable">${MERGE_SUCCESS_VERSION}</span> <span class="variable">${MERGE_SUCCESS_VERSION}</span>_bak</span><br><span class="line">cat <span class="variable">${MERGE_SUCCESS_COMMENT}</span></span><br><span class="line">mv <span class="variable">${MERGE_SUCCESS_COMMENT}</span> <span class="variable">${MERGE_SUCCESS_COMMENT}</span>_bak</span><br></pre></td></tr></table></figure><p>ä¹±ç æ˜¯å› ä¸ºç¼–ç é—®é¢˜, åœ¨windowsä¸‹ä½¿ç”¨cp936</p><figure class="highlight sh"><figcaption><span>tor_merge.sh</span><a href="/downloads/code/tor_merge.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## kingwen0302</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Ï²ï¿½ï¿½ï¿½ï¿½ëµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½Ö§</span></span><br><span class="line"><span class="comment">## ï¿½ï¿½windowsï¿½ï¿½ï¿½ï¿½, ï¿½ï¿½Ë±ï¿½ï¿½ï¿½ï¿½ï¿½gbkï¿½ï¿½ï¿½ï¿½ï¿½ï¿½utf8</span></span><br><span class="line"><span class="comment">## ï¿½ï¿½Òªï¿½ï¿½×°git for windows</span></span><br><span class="line"><span class="comment">## sh tor_merge.sh ï¿½ï¿½Ö§ï¿½æ±¾ 1,3-4</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"></span><br><span class="line">CUR_DIR=$(<span class="built_in">cd</span> $(dirname <span class="variable">$0</span>); <span class="built_in">pwd</span>)</span><br><span class="line"><span class="comment">## ï¿½È¶ï¿½ï¿½ï¿½ï¿½Äµï¿½Ö·</span></span><br><span class="line"><span class="comment">## svnï¿½Ëºï¿½ï¿½ï¿½ï¿½ï¿½</span></span><br><span class="line">SVN_BASE_URL=<span class="string">&quot;svn://url/xxx&quot;</span></span><br><span class="line">SVN_PARAM=<span class="string">&quot;--username kingwen0302 --password xxxxx&quot;</span></span><br><span class="line"><span class="comment">## ï¿½Ï²ï¿½ï¿½ï¿½Ô´ï¿½ï¿½Ö·</span></span><br><span class="line">SRC_SVN_URL=<span class="string">&quot;<span class="variable">${SVN_BASE_URL}</span>/trunk_cn_s&quot;</span></span><br><span class="line"><span class="comment">## ï¿½ï¿½Ç°Ä¿Â¼ï¿½ï¿½ï¿½ ï¿½È¶ï¿½/ï¿½ï¿½Ö§ Ä¿Â¼</span></span><br><span class="line">RELATIVE_DIR=<span class="string">&quot;<span class="variable">$CUR_DIR</span>/../&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ## ï¿½ï¿½ï¿½ï¿½ï¿½È¶ï¿½ï¿½ï¿½/ï¿½ï¿½Ö§ï¿½ï¿½Ä¿Â¼</span></span><br><span class="line"><span class="comment">## DEST_DIR_LIST=(</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../trunk_kr_s&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../trunk_tw_s&quot;</span></span><br><span class="line"><span class="comment">## ## &quot;$CUR_DIR/../trunk_cn_s&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../trunk_vng_s&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../branch_cn/jysy_cn_2102700&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../branch_cn/jysy_cn_2102701&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../branch_kr/jysy_kr_2102700&quot;</span></span><br><span class="line"><span class="comment">## &quot;$CUR_DIR/../branch_vng/jysy_vn_2102700&quot;</span></span><br><span class="line"><span class="comment">## )</span></span><br><span class="line"></span><br><span class="line">DEST_DIR_LIST=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">find_branch_list</span></span>(){</span><br><span class="line">    MIN_VER=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ï¿½ï¿½Ñ° &gt;=<span class="variable">$MIN_VER</span> ï¿½æ±¾ï¿½Ä·ï¿½Ö§ ...&quot;</span></span><br><span class="line">    stable_dir=$(svn list <span class="variable">$SVN_BASE_URL</span> <span class="variable">$SVN_PARAM</span> | grep trunk_.*_s)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">${stable_dir[@]}</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;ï¿½ï¿½ï¿½ï¿½ï¿½È¶ï¿½ï¿½ï¿½: <span class="variable">$RELATIVE_DIR</span>/<span class="variable">$i</span>&quot;</span></span><br><span class="line">        DEST_DIR_LIST=<span class="string">&quot;<span class="variable">$DEST_DIR_LIST</span> <span class="variable">$RELATIVE_DIR</span>/<span class="variable">$i</span>&quot;</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    branch_dir=$(svn list <span class="variable">$SVN_BASE_URL</span> <span class="variable">$SVN_PARAM</span> | grep branch_.*)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">${branch_dir[@]}</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> $(svn list <span class="variable">$SVN_BASE_URL</span>/<span class="variable">$i</span> <span class="variable">$SVN_PARAM</span>); <span class="keyword">do</span></span><br><span class="line">            ver=$(<span class="built_in">echo</span> <span class="variable">$j</span> | grep -Eo <span class="string">&#x27;[0-9]+&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$ver</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">                ver=0</span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$ver</span>&quot;</span> -ge <span class="string">&quot;<span class="variable">$MIN_VER</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;ï¿½ï¿½ï¿½Ö·ï¿½Ö§: <span class="variable">$RELATIVE_DIR</span>/<span class="variable">$i</span>/<span class="variable">$j</span>&quot;</span></span><br><span class="line">                DEST_DIR_LIST=<span class="string">&quot;<span class="variable">$DEST_DIR_LIST</span> <span class="variable">$RELATIVE_DIR</span>/<span class="variable">$i</span>/<span class="variable">$j</span>&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## ï¿½Ï²ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Ö§</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">svn_merge_one</span></span>(){</span><br><span class="line">    dest_dir=<span class="variable">$1</span></span><br><span class="line">    version=<span class="variable">$2</span></span><br><span class="line">    <span class="comment">## ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Éµï¿½Ö·</span></span><br><span class="line">    dest_dir=<span class="string">&quot;<span class="subst">$(dirname $dest_dir)</span>/<span class="subst">$(basename $dest_dir)</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;<span class="variable">${dest_dir}</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        svn_dir=$(basename $(dirname <span class="variable">${dest_dir}</span>))/$(basename <span class="variable">${dest_dir}</span>)</span><br><span class="line">        svn co <span class="variable">$SVN_PARAM</span> <span class="variable">${SVN_BASE_URL}</span>/<span class="variable">$svn_dir</span> <span class="variable">$dest_dir</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ï¿½ï¿½ï¿½ï¿½Ä¿Â¼: <span class="variable">${dest_dir}</span>&quot;</span> &amp;&amp; <span class="built_in">cd</span> <span class="variable">$dest_dir</span> &amp;&amp; svn up</span><br><span class="line">    TortoiseProc /<span class="built_in">command</span>:merge /fromurl:<span class="variable">$SRC_SVN_URL</span> /revrange:<span class="variable">${version/:/-}</span> /path:<span class="string">&quot;*&quot;</span> /closeonend:1</span><br><span class="line">    TortoiseProc /<span class="built_in">command</span>:commit /path:<span class="string">&quot;*&quot;</span> /closeonend:1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">svn_merge</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Ô´Url: <span class="variable">${SRC_SVN_URL}</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ï¿½æ±¾: <span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="keyword">for</span> dest_dir <span class="keyword">in</span> <span class="variable">${DEST_DIR_LIST[@]}</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Ä¿ï¿½ï¿½ï¿½Ö§: <span class="variable">${dest_dir}</span>&quot;</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">&quot;ï¿½Ç·ï¿½Ï²ï¿½(Y|N):&quot;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$REPLY</span> <span class="keyword">in</span></span><br><span class="line">            Y|y)</span><br><span class="line">                svn_merge_one <span class="variable">$dest_dir</span> <span class="variable">$1</span></span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;ï¿½ï¿½È¡ï¿½ï¿½ï¿½Ë±ï¿½ï¿½ÎºÏ²ï¿½&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Ê¹ï¿½ï¿½1: <span class="variable">$0</span> BRANCH_VERSION ver,ver1:ver2&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Ê¹ï¿½ï¿½2: <span class="variable">$0</span> BRANCH_VERSION ver,ver1-ver2&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;example: <span class="variable">$0</span> 2102700 1000,10002-10005&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">BRANCH_VERSION=<span class="variable">$1</span></span><br><span class="line">SVN_VERSION=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$BRANCH_VERSION</span>&quot;</span> == <span class="string">&quot;&quot;</span> || <span class="string">&quot;<span class="variable">$SVN_VERSION</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">help</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    find_branch_list <span class="variable">$BRANCH_VERSION</span></span><br><span class="line">    svn_merge <span class="variable">${SVN_VERSION}</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> svn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svn </tag>
            
            <tag> shell </tag>
            
            <tag> merge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨libreofficeå°†xlsxè½¬æ¢ä¸ºhtmlæ–‡ä»¶</title>
      <link href="/2017/09/30/shell/shell-soffice/"/>
      <url>/2017/09/30/shell/shell-soffice/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨<code>libreoffice</code>å°†<code>xlsx</code>è½¬æ¢ä¸º<code>html</code>æ–‡ä»¶</p><span id="more"></span><figure class="highlight sh"><figcaption><span>xlsx2htm.sh</span><a href="/downloads/code/xlsx2htm.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">XLSX_DIR=<span class="string">&quot;E:/qqjy/plan/004 é…ç½®è¡¨&quot;</span></span><br><span class="line">OUT_DIR=<span class="string">&quot;E:/aaa&quot;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$XLSX_DIR</span>&quot;</span></span><br><span class="line">XLSX_FILES=$(ls | grep xlsx | awk <span class="string">&#x27;{printf(&quot;%s:&quot;, $0)}&#x27;</span>)</span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span>((1==1)); <span class="keyword">do</span></span><br><span class="line">    file=$(<span class="built_in">echo</span> <span class="variable">$XLSX_FILES</span> | cut -d <span class="string">&quot;:&quot;</span> -f<span class="variable">$i</span>)</span><br><span class="line">    i=$(expr <span class="variable">$i</span> + 1)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$file</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;convert <span class="variable">$file</span>&quot;</span></span><br><span class="line">        soffice --headless --invisible --convert-to htm <span class="string">&quot;<span class="variable">$file</span>&quot;</span> --outdir <span class="variable">$OUT_DIR</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> libreoffice </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> libreoffice </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOS6ä¸‹å®‰è£…php56</title>
      <link href="/2017/09/29/centos/centos-php56/"/>
      <url>/2017/09/29/centos/centos-php56/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>centos6é»˜è®¤å®‰è£…çš„æ˜¯php5.3<br>ç°åœ¨è¦å‡çº§åˆ°php5.6+</p><span id="more"></span><h3 id="å¸è½½æ—§ç‰ˆæœ¬php"><a href="#å¸è½½æ—§ç‰ˆæœ¬php" class="headerlink" title="å¸è½½æ—§ç‰ˆæœ¬php"></a>å¸è½½æ—§ç‰ˆæœ¬php</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove php php-common</span><br></pre></td></tr></table></figure><h3 id="å¢åŠ yumæº"><a href="#å¢åŠ yumæº" class="headerlink" title="å¢åŠ yumæº"></a>å¢åŠ yumæº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm</span><br></pre></td></tr></table></figure><h3 id="é‡æ–°å®‰è£…"><a href="#é‡æ–°å®‰è£…" class="headerlink" title="é‡æ–°å®‰è£…"></a>é‡æ–°å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php56w php56w-fpm php56w-gd php56w-mbstring php56w-mysql php56w-pdo php56w-xml</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.cnblogs.com/savokiss/p/6259816.html">http://www.cnblogs.com/savokiss/p/6259816.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang wxWidgets</title>
      <link href="/2017/09/28/erlang/erlang-wx/"/>
      <url>/2017/09/28/erlang/erlang-wx/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å·¥ä½œä¸­éœ€è¦å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹, æŸ¥çœ‹æ—¥å¿—æ—¶,æ¥å›åˆ‡æ¢æ¯”è¾ƒéº»çƒ¦<br>erlangæœ‰wxWidgetsç”¨æ¥å¼€å‘ç•Œé¢,ä¸œæ‹¼è¥¿å‡‘å‡ºä¸€ä¸ªç•Œé¢,æ•ˆæœå›¾å¦‚ä¸‹:<br><img src="/downloads/assets/wx.png" alt="æ•ˆæœå›¾å¦‚ä¸‹"></p><span id="more"></span><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight erl"><figcaption><span>server_ctl_gui.erl</span><a href="/downloads/code/server_ctl_gui.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% coding: latin-1</span></span><br><span class="line"><span class="comment">%%! -smp enable -name server_ctl_gui@127.0.0.1 -setcookie qqjy -noshell</span></span><br><span class="line"><span class="comment">%%%-----------------------------------------------</span></span><br><span class="line"><span class="comment">%%% ä¸€ä¸ªç•Œé¢ç®¡ç†æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%% escript server_ctl_gui.erl --log_file E:/qqjy/server_ctl_gui.log --project_root E:/qqjy/qqjy_server/config</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%% å·²çŸ¥é—®é¢˜:</span></span><br><span class="line"><span class="comment">%%% 1. åœ¨ä½¿ç”¨`RunHiddenConsole erl` å, `observer:start()`ä¼šå¤±æ•ˆ</span></span><br><span class="line"><span class="comment">%%%</span></span><br><span class="line"><span class="comment">%%%-----------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">&quot;wx/include/wx.hrl&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">&quot;kernel/include/file.hrl&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(APP_NAME, server_ctl_gui)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(DEBUG_MSG(Format)</span>, ?DEBUG_MSG<span class="params">(Format, [])</span>).</span><br><span class="line"><span class="comment">%% ?LINE + 1 åº”è¯¥æ˜¯å› ä¸º `-smp ...` çš„åŸå› </span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(DEBUG_MSG(Format, Args)</span>,</span><br><span class="line">        lists:foldl<span class="params">(</span></span><br><span class="line"><span class="params">          <span class="keyword">fun</span>(IO, Str) <span class="keyword">when</span> is_pid(IO) -&gt;</span></span><br><span class="line"><span class="params">                  io:format(IO, <span class="string">&quot;~s&quot;</span>, [Str]),</span></span><br><span class="line"><span class="params">                  Str;</span></span><br><span class="line"><span class="params">             (wx, Str) -&gt;</span></span><br><span class="line"><span class="params">                  <span class="keyword">case</span> get_env(parent_pid) <span class="keyword">of</span></span></span><br><span class="line"><span class="params">                      undefined -&gt;</span></span><br><span class="line"><span class="params">                          set_env(wx_log_list, get_env(wx_log_list, []) ++ [Str]);</span></span><br><span class="line"><span class="params">                      _ -&gt;</span></span><br><span class="line"><span class="params">                          lists:foreach(</span></span><br><span class="line"><span class="params">                            <span class="keyword">fun</span>(_X_) -&gt; get_env(parent_pid) ! {log_wx, Str} <span class="keyword">end</span>, </span></span><br><span class="line"><span class="params">                            get_env(wx_log_list, []) ++ [Str]),</span></span><br><span class="line"><span class="params">                          set_env(wx_log_list, [])</span></span><br><span class="line"><span class="params">                  <span class="keyword">end</span>,</span></span><br><span class="line"><span class="params">                  Str;</span></span><br><span class="line"><span class="params">             (_, Str) -&gt;</span></span><br><span class="line"><span class="params">                  io:format(<span class="string">&quot;~ts&quot;</span>, [Str]),</span></span><br><span class="line"><span class="params">                  Str</span></span><br><span class="line"><span class="params">          <span class="keyword">end</span>,</span></span><br><span class="line"><span class="params">          unicode:characters_to_binary(io_lib:format(<span class="string">&quot;~s ~p [line:~p] &quot;</span> ++ Format ++ <span class="string">&quot;~n&quot;</span>, [time_format(), self(), ?LINE + <span class="number">1</span> | Args])),</span></span><br><span class="line"><span class="params">          lists:usort([undefined, wx, application:get_env(?APP_NAME, log_pid, undefined)])</span></span><br><span class="line"><span class="params">         )</span>).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(wx_elem_cfg, {</span></span><br><span class="line"><span class="params">          id = <span class="number">0</span>,</span></span><br><span class="line"><span class="params">          name = <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="params">          type = <span class="number">0</span>, <span class="comment">%% button | text</span></span></span><br><span class="line"><span class="params">          start_cmd_list = [],  <span class="comment">%% å­—ç¬¦ä¸²å‘½ä»¤ | {call, {M, F, A}}, {mfa, {Fun, Args}}</span></span></span><br><span class="line"><span class="params">          over_cmd_list = [],</span></span><br><span class="line"><span class="params">          node = undefined,</span></span><br><span class="line"><span class="params">          log_file = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="params">         })</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(wx_elem_state, {</span></span><br><span class="line"><span class="params">          id = <span class="number">0</span>,</span></span><br><span class="line"><span class="params">          wx,</span></span><br><span class="line"><span class="params">          status = over, <span class="comment">%% over | start</span></span></span><br><span class="line"><span class="params">          log_pid</span></span><br><span class="line"><span class="params">         })</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(state, {</span></span><br><span class="line"><span class="params">          frame,</span></span><br><span class="line"><span class="params">          btn_list = [],</span></span><br><span class="line"><span class="params">          text_list = [],</span></span><br><span class="line"><span class="params">          log_wx,</span></span><br><span class="line"><span class="params">          pid</span></span><br><span class="line"><span class="params">         })</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_STR, <span class="string">&quot;ã€å¼€å¯ã€‘&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(CLOSE_STR, <span class="string">&quot;ã€å…³é—­ã€‘&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æŒ‰é’®</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(BUTTON_SIZE_X, <span class="number">100</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(BUTTON_SIZE_Y, <span class="number">30</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æ—¥å¿—æ¡†</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(TEXT_SIZE_X, <span class="number">1680</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(TEXT_SIZE_Y, <span class="number">400</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% åˆå§‹åŒ–æ˜¾ç¤ºè¡Œæ•°</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(SHOW_LINES_INIT, <span class="number">10</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(ERL_HEAD, <span class="string">&quot;RunHiddenConsole D:/erl6.2/bin/erl +P 6400 -smp auto -pa ../ebin -noshell -noinput -setcookie qqjy -boot start_sasl &quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(WERL_HEAD, <span class="string">&quot;start D:/erl6.2/bin/werl +P 6400 -smp auto -pa ../ebin -setcookie qqjy &quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% èŠ‚ç‚¹åå­—</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(NODE_GAME,  &#x27;qqjy_game1@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(NODE_GAME_2,&#x27;qqjy_game2@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(NODE_CROSS, &#x27;qqjy_cross1@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(NODE_MGR,   &#x27;qqjy_mgr1@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(NODE_FLASH, &#x27;qqjy_game_flash1@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% èŠ‚ç‚¹å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_GAME_CMD,     ?ERL_HEAD ++ <span class="string">&quot;-name &quot;</span> ++ atom_to_list(?NODE_GAME)   ++ <span class="string">&quot; -config run_game -s main server_start&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_GAME_2_CMD,   ?ERL_HEAD ++ <span class="string">&quot;-name &quot;</span> ++ atom_to_list(?NODE_GAME_2) ++ <span class="string">&quot; -config run_game2 -s main server_start&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_CROSS_CMD,    ?ERL_HEAD ++ <span class="string">&quot;-name &quot;</span> ++ atom_to_list(?NODE_CROSS)  ++ <span class="string">&quot; -config run_cross -s main server_start&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_MGR_CMD,      ?ERL_HEAD ++ <span class="string">&quot;-name &quot;</span> ++ atom_to_list(?NODE_MGR)    ++ <span class="string">&quot; -config run_mgr -s main server_start&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_FLASH_CMD,    ?ERL_HEAD ++ <span class="string">&quot;-name &quot;</span> ++ atom_to_list(?NODE_FLASH)  ++ <span class="string">&quot; -config flash -s main flash_start&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_MAKE,         ?WERL_HEAD ++ <span class="string">&quot;-eval \&quot;case u:d() of up_to_date -&gt; timer:sleep(5000), init:stop(); _ -&gt; error end\&quot;&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_MAKE_FUNC,    ?WERL_HEAD ++ <span class="string">&quot;-eval \&quot;case u:m([fair_1v1]) of up_to_date -&gt; timer:sleep(60000), init:stop(); _ -&gt; error end\&quot;&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_GAME_DEBUG,   ?WERL_HEAD ++ <span class="string">&quot;-name debug_1@127.0.0.1 -remsh &quot;</span>     ++ atom_to_list(?NODE_GAME))</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_CROSS_DEBUG,  ?WERL_HEAD ++ <span class="string">&quot;-name debug_cross@127.0.0.1 -remsh &quot;</span> ++ atom_to_list(?NODE_CROSS))</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_MGR_DEBUG,    ?WERL_HEAD ++ <span class="string">&quot;-name debug_mgr@127.0.0.1 -remsh &quot;</span>   ++ atom_to_list(?NODE_MGR))</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(START_GUI_DEBUG,    ?WERL_HEAD ++ <span class="string">&quot;-name debug_gui@127.0.0.1 -remsh &quot;</span>   ++ atom_to_list(&#x27;server_ctl_gui@<span class="number">127.0</span>.<span class="number">0.1</span>&#x27;))</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(FILE_GAME_LOG,  <span class="string">&quot;E:/qqjy/qqjy_server/logs/game_200001/console.txt&quot;</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(FILE_CROSS_LOG, <span class="string">&quot;E:/qqjy/qqjy_server/logs/cross/console.txt&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% ç©å®¶åˆ—è¡¨url</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(URL_PLAYER_LIST, <span class="string">&quot;http://127.0.0.1:7010/debug/user_list?is_show_guest=1&amp;last_days=10&amp;client=1&quot;</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æŒ‰é’®åˆ—è¡¨, æ¨ªå‘æ’åº</span></span><br><span class="line"><span class="function"><span class="title">wx_btn_list</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    [</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">101</span>, name = <span class="string">&quot;æ¸¸æˆæœ&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_GAME_CMD],</span><br><span class="line">        over_cmd_list = [{call, {main, shutdown, []}}],</span><br><span class="line">        node = ?NODE_GAME</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">1011</span>, name = <span class="string">&quot;æ¸¸æˆæœ2&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_GAME_2_CMD],</span><br><span class="line">        over_cmd_list = [{call, {main, shutdown, []}}],</span><br><span class="line">        node = ?NODE_GAME_2</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">102</span>, name = <span class="string">&quot;è·¨æœ&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_CROSS_CMD],</span><br><span class="line">        over_cmd_list = [{call, {main, shutdown, []}}],</span><br><span class="line">        node = ?NODE_CROSS</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">103</span>, name = <span class="string">&quot;ç®¡ç†æœ&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_MGR_CMD],</span><br><span class="line">        over_cmd_list = [{call, {main, shutdown, []}}],</span><br><span class="line">        node = ?NODE_MGR</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">104</span>, name = <span class="string">&quot;FLASH&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_FLASH_CMD],</span><br><span class="line">        over_cmd_list = [{call, {main, flash_stop, []}}],</span><br><span class="line">        node = ?NODE_FLASH</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">105</span>, name = <span class="string">&quot;ä¸€é”®å¯åŠ¨æ‰€æœ‰æœ&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [</span><br><span class="line">                          ?START_FLASH_CMD,</span><br><span class="line">                          ?START_MGR_CMD,</span><br><span class="line">                          ?START_CROSS_CMD,</span><br><span class="line">                          ?START_GAME_CMD</span><br><span class="line">                         ],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">106</span>, name = <span class="string">&quot;ç¼–è¯‘&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_MAKE],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">1061</span>, name = <span class="string">&quot;ç¼–è¯‘åŠŸèƒ½&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_MAKE_FUNC],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">107</span>, name = <span class="string">&quot;ç©å®¶åˆ—è¡¨&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [{mfa, {<span class="keyword">fun</span> wx_misc:launchDefaultBrowser/<span class="number">1</span>, [?URL_PLAYER_LIST]}}],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">108</span>, name = <span class="string">&quot;DEBUG_GAME&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_GAME_DEBUG],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">109</span>, name = <span class="string">&quot;DEBUG_CROSS&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_CROSS_DEBUG],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">110</span>, name = <span class="string">&quot;DEBUG_MGR&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_MGR_DEBUG],</span><br><span class="line">        node = undefined</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">111</span>, name = <span class="string">&quot;DEBUG_GUI&quot;</span>, type = button,</span><br><span class="line">        start_cmd_list = [?START_GUI_DEBUG],</span><br><span class="line">        node = undefined</span><br><span class="line">       }</span><br><span class="line">    ].</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æ—¥å¿—åˆ—è¡¨, çºµå‘æ’åº</span></span><br><span class="line">wx_text_list() -&gt;</span><br><span class="line">    [</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">201</span>, type = text, name = <span class="string">&quot;æ¸¸æˆæœæ—¥å¿—&quot;</span>,</span><br><span class="line">        log_file = ?FILE_GAME_LOG</span><br><span class="line">       },</span><br><span class="line">     #wx_elem_cfg{</span><br><span class="line">        id = <span class="number">202</span>, type = text, name = <span class="string">&quot;è·¨æœæ—¥å¿—&quot;</span>,</span><br><span class="line">        log_file = ?FILE_CROSS_LOG</span><br><span class="line">       }</span><br><span class="line">    ].</span><br><span class="line"></span><br><span class="line">main(Args) -&gt;</span><br><span class="line">    parse_args(Args),</span><br><span class="line">    application:load({application, ?APP_NAME, []}),</span><br><span class="line">    set_env(parent_pid, self()),</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨GUIç‰ˆ, Powered by kingwen0302&quot;</span>),</span><br><span class="line">    <span class="keyword">case</span> get_env(log_file) <span class="keyword">of</span></span><br><span class="line">        undefined -&gt; ?DEBUG_MSG(<span class="string">&quot;ç¼ºå°‘log_fileé…ç½®&quot;</span>);</span><br><span class="line">        LogFile -&gt;</span><br><span class="line">            {ok, IO} = file:open(LogFile, [append]),</span><br><span class="line">            set_env(log_pid, IO)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    State = make_window(),</span><br><span class="line">    self() ! {chk},</span><br><span class="line">    loop (State).</span><br><span class="line"></span><br><span class="line">make_window() -&gt;</span><br><span class="line">    <span class="keyword">case</span> get_env(project_root) <span class="keyword">of</span></span><br><span class="line">        undefined -&gt; ?DEBUG_MSG(<span class="string">&quot;ç¼ºå°‘project_rooté…ç½®&quot;</span>);</span><br><span class="line">        Dir -&gt; file:set_cwd(Dir)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    {ok, RootDir} = file:get_cwd(),</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;é¡¹ç›®ç›®å½•: ~s&quot;</span>, [RootDir]),</span><br><span class="line">    Server = wx:new(),</span><br><span class="line">    Frame = wxFrame:new(Server,</span><br><span class="line">                        -<span class="number">1</span>,</span><br><span class="line">                        <span class="string">&quot;QQJY-å›½æœ-å¼€å‘-èŠ‚ç‚¹ç®¡ç† POWERED BY kingwen0302&quot;</span>,</span><br><span class="line">                        [{size,{<span class="number">0</span>, <span class="number">0</span>}}, {style, ?wxDEFAULT_FRAME_STYLE bor ?wxMAXIMIZE}]</span><br><span class="line">                       ),</span><br><span class="line">    Panel = wxScrolledWindow:new(Frame),</span><br><span class="line">    wxPanel:setBackgroundColour(Panel, ?wxLIGHT_GREY),</span><br><span class="line"></span><br><span class="line">    Sz = wxBoxSizer:new(?wxVERTICAL),</span><br><span class="line"></span><br><span class="line">    ButtonSizer = wxStaticBoxSizer:new(?wxHORIZONTAL, Panel, [{label, <span class="string">&quot;å‘½ä»¤æŒ‰é’®&quot;</span>}]),</span><br><span class="line"></span><br><span class="line">    StockSz = wxGridSizer:new(<span class="number">0</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line"></span><br><span class="line">    BtnList = create_btn_list(Panel, wx_btn_list()),</span><br><span class="line">    SzFlags = [{proportion, <span class="number">0</span>}, {border, <span class="number">4</span>}, {flag, ?wxALL}],</span><br><span class="line">    [wxSizer:add(StockSz, Btn, SzFlags) || #wx_elem_state{wx = Btn} &lt;- BtnList],</span><br><span class="line">    wxSizer:add(ButtonSizer, StockSz, SzFlags),</span><br><span class="line"></span><br><span class="line">    Log = wxTextCtrl:new(Panel, <span class="number">0</span>, [</span><br><span class="line">                                                    {size, {<span class="number">1000</span>, <span class="number">100</span>}},</span><br><span class="line">                                                    {style, ?wxTE_READONLY bor ?wxTE_MULTILINE}</span><br><span class="line">                                                   ]),</span><br><span class="line">    wxSizer:add(ButtonSizer, Log, SzFlags),</span><br><span class="line">    wxSizer:add(Sz, ButtonSizer, SzFlags),</span><br><span class="line"></span><br><span class="line">    TextList = create_text_list(Panel, wx_text_list()),</span><br><span class="line">    Expand  = [{proportion, <span class="number">0</span>}, {border, <span class="number">4</span>}, {flag, ?wxALL bor ?wxEXPAND}],</span><br><span class="line">    Fun = <span class="keyword">fun</span>(#wx_elem_state{id = Id, wx = Text}) -&gt;</span><br><span class="line">                  Name = <span class="keyword">case</span> lists:keyfind(Id, #wx_elem_cfg.id, wx_text_list()) <span class="keyword">of</span></span><br><span class="line">                             #wx_elem_cfg{name = Name1} -&gt; Name1;</span><br><span class="line">                             _ -&gt; <span class="string">&quot;&quot;</span></span><br><span class="line">                         <span class="keyword">end</span>,</span><br><span class="line">                  TextSizer = wxStaticBoxSizer:new(?wxVERTICAL, Panel, [{label, Name}]),</span><br><span class="line">                  wxSizer:add(TextSizer, Text, Expand),</span><br><span class="line">                  {TextSizer, Expand}</span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    [wxSizer:add(Sz, TextSizer, Flag) || {TextSizer, Flag} &lt;- lists:map(Fun, TextList)],</span><br><span class="line"></span><br><span class="line">    wxWindow:setSizer(Panel, Sz),</span><br><span class="line">    wxSizer:layout(Sz),</span><br><span class="line">    wxWindow:refresh(Panel),</span><br><span class="line">    wxScrolledWindow:setScrollRate(Panel, <span class="number">5</span>, <span class="number">5</span>),</span><br><span class="line"></span><br><span class="line">    wxFrame:show(Frame),</span><br><span class="line"></span><br><span class="line">    wxFrame:connect(Frame, close_window),</span><br><span class="line">    wxPanel:connect(Panel, command_button_clicked),</span><br><span class="line"></span><br><span class="line">    #state{frame = Frame, btn_list = BtnList, text_list = TextList, log_wx = Log, pid = self()}.</span><br><span class="line"></span><br><span class="line">loop(State) -&gt;</span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        Msg -&gt;</span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">catch</span> do_loop(Msg, State) <span class="keyword">of</span></span><br><span class="line">                {&#x27;EXIT&#x27;, Reason} -&gt;</span><br><span class="line">                    ?DEBUG_MSG(<span class="string">&quot;Msg:~p Reason:~p&quot;</span>, [Msg, Reason]),</span><br><span class="line">                    loop(State);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    loop(State)</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% é€€å‡ºç•Œé¢</span></span><br><span class="line">do_loop(#wx{event=#wxClose{}}, #state{pid = Pid} = State) -&gt;</span><br><span class="line">    <span class="keyword">if</span></span><br><span class="line">        Pid =/= self() -&gt; Pid ! { -<span class="number">1</span> };</span><br><span class="line">        <span class="literal">true</span> -&gt; ok</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;~p Closing window&quot;</span>,[self()]),</span><br><span class="line">    close(State),</span><br><span class="line">    ok;</span><br><span class="line"><span class="comment">%% é€€å‡ºç•Œé¢</span></span><br><span class="line">do_loop(#wx{id = ?wxID_EXIT, event=#wxCommand{type = command_button_clicked} }, #state{pid = Pid} = State) -&gt;</span><br><span class="line">    <span class="keyword">if</span></span><br><span class="line">        Pid =/= self() -&gt; Pid ! { -<span class="number">1</span> };</span><br><span class="line">        <span class="literal">true</span> -&gt; ok</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;~p Closing window&quot;</span>,[self()]),</span><br><span class="line">    close(State),</span><br><span class="line">    ok;</span><br><span class="line"><span class="comment">%% æŒ‰é’®ç‚¹å‡»</span></span><br><span class="line">do_loop(#wx{id =Id, event=#wxCommand{type = command_button_clicked}}, #state{btn_list = BtnList} = State) -&gt;</span><br><span class="line">    Cfg = lists:keyfind(Id, #wx_elem_cfg.id, wx_btn_list()),</span><br><span class="line">    <span class="keyword">case</span> is_record(Cfg, wx_elem_cfg) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">false</span> -&gt; throw(ok);</span><br><span class="line">        <span class="literal">true</span> -&gt; skip</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    #wx_elem_cfg{start_cmd_list = StartCmdList, over_cmd_list = OverCmdList, node = Node} = Cfg,</span><br><span class="line">    Fun = <span class="keyword">fun</span>(Cmd) <span class="keyword">when</span> is_list(Cmd) -&gt;</span><br><span class="line">                  ?DEBUG_MSG(<span class="string">&quot;å­—ç¬¦ä¸²å‘½ä»¤: ~p&quot;</span>, [Cmd]),</span><br><span class="line">                  spawn(<span class="keyword">fun</span>() -&gt; os:cmd(Cmd) <span class="keyword">end</span>);</span><br><span class="line">             ({call, {M, F, A}}) -&gt;</span><br><span class="line">                  ?DEBUG_MSG(<span class="string">&quot;èŠ‚ç‚¹Call: rpc:call(~p, ~p, ~p, ~p)&quot;</span>, [Node, M, F, A]),</span><br><span class="line">                  rpc:call(Node, M, F, A);</span><br><span class="line">             ({mfa, {M, F, A}}) -&gt;</span><br><span class="line">                  ?DEBUG_MSG(<span class="string">&quot;å‡½æ•°è°ƒç”¨: ~p:~p Args:~p&quot;</span>, [M, F, A]),</span><br><span class="line">                  apply(M, F, A);</span><br><span class="line">             ({mfa, {F, A}}) -&gt;</span><br><span class="line">                  ?DEBUG_MSG(<span class="string">&quot;å‡½æ•°è°ƒç”¨: ~p Args:~p&quot;</span>, [F, A]),</span><br><span class="line">                  apply(F, A)</span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    <span class="keyword">case</span> lists:keyfind(Id, #wx_elem_state.id, BtnList) <span class="keyword">of</span></span><br><span class="line">        #wx_elem_state{status = over} -&gt;</span><br><span class="line">            ?DEBUG_MSG(<span class="string">&quot;å¼€å§‹ ~p&quot;</span>, [Id]),</span><br><span class="line">            lists:foreach(Fun, StartCmdList);</span><br><span class="line">        #wx_elem_state{status = start} -&gt;</span><br><span class="line">            ?DEBUG_MSG(<span class="string">&quot;å…³é—­ ~p&quot;</span>, [Id]),</span><br><span class="line">            lists:foreach(Fun, OverCmdList);</span><br><span class="line">        _ -&gt; skip</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    loop(State);</span><br><span class="line"><span class="comment">%% å®šæ—¶æ£€æŸ¥</span></span><br><span class="line">do_loop({chk}, #state{btn_list = BtnList, text_list = TextList, pid = Pid} = State) -&gt;</span><br><span class="line">    Fun = <span class="keyword">fun</span>(#wx_elem_state{id = Id, wx = Text, log_pid = LogPid} = Elem) -&gt;</span><br><span class="line">                  TailEXE = os:find_executable(<span class="string">&quot;tail&quot;</span>),</span><br><span class="line">                  <span class="keyword">case</span> lists:keyfind(Id, #wx_elem_cfg.id, wx_text_list()) <span class="keyword">of</span></span><br><span class="line">                      #wx_elem_cfg{log_file = LogFile} <span class="keyword">when</span> TailEXE =:= <span class="literal">false</span> -&gt;</span><br><span class="line">                          read_line(Id, Text, LogFile),</span><br><span class="line">                          Elem;</span><br><span class="line">                      #wx_elem_cfg{log_file = LogFile} <span class="keyword">when</span> LogPid =:= undefined -&gt;</span><br><span class="line">                          NewLogPid = spawn_link(<span class="keyword">fun</span>() -&gt; read_line_by_tail(Pid, TailEXE, Id, LogFile) <span class="keyword">end</span>),</span><br><span class="line">                          Elem#wx_elem_state{log_pid = NewLogPid};</span><br><span class="line">                      _ -&gt; Elem</span><br><span class="line">                  <span class="keyword">end</span></span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    NewTextList = lists:map(Fun, TextList),</span><br><span class="line"></span><br><span class="line">    Fun1 = <span class="keyword">fun</span>(#wx_elem_state{id = Id, wx = Btn} = Elem) -&gt;</span><br><span class="line">                   <span class="keyword">case</span> lists:keyfind(Id, #wx_elem_cfg.id, wx_btn_list()) <span class="keyword">of</span></span><br><span class="line">                       #wx_elem_cfg{name = Name, node = Node} <span class="keyword">when</span> Node =/= undefined -&gt;</span><br><span class="line">                           <span class="keyword">case</span> net_adm:ping(Node) <span class="keyword">of</span></span><br><span class="line">                               pong -&gt;</span><br><span class="line">                                   wxButton:setLabel(Btn, ?CLOSE_STR ++ Name),</span><br><span class="line">                                   Elem#wx_elem_state{status = start};</span><br><span class="line">                               _ -&gt;</span><br><span class="line">                                   wxButton:setLabel(Btn, ?START_STR ++ Name),</span><br><span class="line">                                   Elem#wx_elem_state{status = over}</span><br><span class="line">                           <span class="keyword">end</span>;</span><br><span class="line">                       _ -&gt; Elem</span><br><span class="line">                   <span class="keyword">end</span></span><br><span class="line">           <span class="keyword">end</span>,</span><br><span class="line">    NewBtnList = lists:map(Fun1, BtnList),</span><br><span class="line">    NewState = State#state{btn_list = NewBtnList, text_list = NewTextList},</span><br><span class="line">    <span class="comment">%% æ‰§è¡Œå®Œæˆååœ¨å¼€å¯ä¸‹æ¬¡å®šæ—¶å™¨</span></span><br><span class="line">    erlang:send_after(<span class="number">2000</span>, self(), {chk}),</span><br><span class="line">    loop(NewState);</span><br><span class="line"><span class="comment">%% ä½¿ç”¨portçš„æ—¥å¿—è¾“å‡º</span></span><br><span class="line">do_loop({log, Id, Data}, #state{text_list = TextList} = State) -&gt;</span><br><span class="line">    <span class="keyword">case</span> lists:keyfind(Id, #wx_elem_state.id, TextList) <span class="keyword">of</span></span><br><span class="line">        #wx_elem_state{wx = Text} -&gt;</span><br><span class="line">            wxTextCtrl:appendText(Text, Data ++ <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        _ -&gt;</span><br><span class="line">            ?DEBUG_MSG(<span class="string">&quot;Log: Id:~p&quot;</span>, [Id])</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    loop(State);</span><br><span class="line">do_loop({log_wx, Str}, #state{log_wx = Text} = State) -&gt;</span><br><span class="line">    wxTextCtrl:appendText(Text, Str),</span><br><span class="line">    loop(State);</span><br><span class="line">do_loop(Msg, State) -&gt;</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;not match:~p&quot;</span>, [Msg]),</span><br><span class="line">    loop(State).</span><br><span class="line"></span><br><span class="line">read_line_by_tail(Pid, TailEXE, Id, LogFile) -&gt;</span><br><span class="line">    process_flag(trap_exit, true),</span><br><span class="line">    PortOptions = [</span><br><span class="line">                   exit_status,</span><br><span class="line">                   {line, <span class="number">1024</span>},</span><br><span class="line">                   {args, [<span class="string">&quot;-F&quot;</span>, LogFile]},</span><br><span class="line">                   in</span><br><span class="line">                  ],</span><br><span class="line">    Port = erlang:open_port({spawn_executable, TailEXE}, PortOptions),</span><br><span class="line">    read_line_by_tail_loop(Pid, Id, Port).</span><br><span class="line">read_line_by_tail_loop(Pid, Id, Port) -&gt;</span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        {Port, {data, {eol, Data}}} -&gt;</span><br><span class="line">            Pid ! {log, Id, Data},</span><br><span class="line">            read_line_by_tail_loop(Pid, Id, Port);</span><br><span class="line">        {Port, {data, {noeol, Data}}} -&gt;</span><br><span class="line">            Pid ! {log, Id, Data},</span><br><span class="line">            read_line_by_tail_loop(Pid, Id, Port);</span><br><span class="line">        {close} -&gt;</span><br><span class="line">            <span class="comment">%% ç»“æŸç«¯å£å¼€çš„ç³»ç»Ÿè¿›ç¨‹</span></span><br><span class="line">            PortInfo = erlang:port_info(Port),</span><br><span class="line">            erlang:port_close(Port),</span><br><span class="line">            <span class="keyword">case</span> proplists:get_value(os_pid, PortInfo) <span class="keyword">of</span></span><br><span class="line">                undefined -&gt; skip;</span><br><span class="line">                OsPid -&gt; kill_by_os(OsPid)</span><br><span class="line">            <span class="keyword">end</span>,</span><br><span class="line">            ok;</span><br><span class="line">        Any -&gt;</span><br><span class="line">            ?DEBUG_MSG(<span class="string">&quot;Any:~p&quot;</span>, [Any]),</span><br><span class="line">            read_line_by_tail_loop(Pid, Id, Port)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% è‡ªå·±å®ç°çš„è¾“å‡º</span></span><br><span class="line"><span class="comment">%% åœ¨æ²¡æœ‰tailçš„æƒ…å†µä¸‹ä½¿ç”¨</span></span><br><span class="line">read_line(Id, Text, File) -&gt;</span><br><span class="line">    MaxLine = <span class="keyword">case</span> get_env({max_line, Id, File}) <span class="keyword">of</span></span><br><span class="line">                  undefined -&gt; max_line(File) - ?SHOW_LINES_INIT;</span><br><span class="line">                  MaxLine1 -&gt; MaxLine1</span><br><span class="line">              <span class="keyword">end</span>,</span><br><span class="line">    OldCTime = <span class="keyword">case</span> get_env({ctime, Id, File}) <span class="keyword">of</span></span><br><span class="line">                   undefined -&gt; get_ctime(File);</span><br><span class="line">                   CTime1 -&gt; CTime1</span><br><span class="line">               <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    NowCtime = get_ctime(File),</span><br><span class="line">    MaxLine = <span class="keyword">case</span> OldCTime =:= NowCtime <span class="keyword">of</span></span><br><span class="line">                  <span class="literal">true</span> -&gt; MaxLine;</span><br><span class="line">                  <span class="literal">false</span> -&gt;</span><br><span class="line">                      set_env({max_line, Id, File}, <span class="number">0</span>),</span><br><span class="line">                      <span class="number">0</span></span><br><span class="line">              <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> file:open(File, [read]) <span class="keyword">of</span></span><br><span class="line">        {ok, FD} -&gt;</span><br><span class="line">            set_env({max_line, Id, File}, MaxLine),</span><br><span class="line">            read_line(Id, Text, File, FD, <span class="number">1</span>, MaxLine);</span><br><span class="line">        _ -&gt;</span><br><span class="line">            set_env({max_line, Id, File}, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line">read_line(Id, Text, File, FD, Line, MaxLine) -&gt;</span><br><span class="line">    <span class="keyword">case</span> file:read_line(FD) <span class="keyword">of</span></span><br><span class="line">        {ok, Data} <span class="keyword">when</span> Line &gt; MaxLine -&gt;</span><br><span class="line">            wxTextCtrl:appendText(Text, Data),</span><br><span class="line">            set_env({max_line, Id, File}, Line),</span><br><span class="line">            read_line(Id, Text, File, FD, Line + <span class="number">1</span>, MaxLine);</span><br><span class="line">        {ok, _Data} -&gt;</span><br><span class="line">            read_line(Id, Text, File, FD, Line + <span class="number">1</span>, MaxLine);</span><br><span class="line">        eof -&gt;</span><br><span class="line">            file:close(FD)</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% è·å–æ–‡ä»¶æœ€å¤§è¡Œæ•°</span></span><br><span class="line">max_line(File) -&gt;</span><br><span class="line">    <span class="keyword">case</span> file:open(File, [read]) <span class="keyword">of</span></span><br><span class="line">        {ok, FD} -&gt; max_line(FD, <span class="number">0</span>);</span><br><span class="line">        _ -&gt; <span class="number">0</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line">max_line(FD, Line) -&gt;</span><br><span class="line">    <span class="keyword">case</span> file:read_line(FD) <span class="keyword">of</span></span><br><span class="line">        {ok, _Data} -&gt;</span><br><span class="line">            max_line(FD, Line + <span class="number">1</span>);</span><br><span class="line">        eof -&gt;</span><br><span class="line">            file:close(FD),</span><br><span class="line">            Line</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line">get_ctime(File) -&gt;</span><br><span class="line">    <span class="keyword">case</span> file:read_file_info(File) <span class="keyword">of</span></span><br><span class="line">        {ok, #file_info{ctime = Ctime}} -&gt; Ctime;</span><br><span class="line">        _ -&gt; undefined</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% åˆ›å»ºæŒ‰é’®</span></span><br><span class="line">create_btn_list(Panel, CfgList) -&gt;</span><br><span class="line">    Fun = <span class="keyword">fun</span>(#wx_elem_cfg{id = Id, name = Name}) -&gt;</span><br><span class="line">                  Btn = wxButton:new(Panel, Id, [{label, Name}, {size, {?BUTTON_SIZE_X, ?BUTTON_SIZE_Y}}]),</span><br><span class="line">                  <span class="comment">%% Btn = wxButton:new(Panel, Id, [{label, Name}]),</span></span><br><span class="line">                  #wx_elem_state{id = Id, wx = Btn}</span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    lists:map(Fun, CfgList).</span><br><span class="line"><span class="comment">%% åˆ›å»ºæ—¥å¿—æ¡†</span></span><br><span class="line">create_text_list(Panel, CfgList) -&gt;</span><br><span class="line">    Fun = <span class="keyword">fun</span>(#wx_elem_cfg{id = Id}) -&gt;</span><br><span class="line">                  Text = wxTextCtrl:new(Panel, Id, [</span><br><span class="line">                                                    {size, {?TEXT_SIZE_X, ?TEXT_SIZE_Y}},</span><br><span class="line">                                                    {style, ?wxTE_READONLY bor ?wxTE_MULTILINE}</span><br><span class="line">                                                   ]),</span><br><span class="line">                  <span class="comment">%% TextAttr = wxTextAttr:new(),</span></span><br><span class="line">                  <span class="comment">%% wxTextAttr:setBackgroundColour(TextAttr, {255, 0, 0}),</span></span><br><span class="line">                  <span class="comment">%% wxTextAttr:setFont(TextAttr, wxFont:new(20, ?wxDEFAULT, ?wxFONTSTYLE_NORMAL, ?wxFONTWEIGHT_NORMAL)),</span></span><br><span class="line">                  <span class="comment">%% %% TextAttr = wxTextAttr:new({255, 0, 0}, [</span></span><br><span class="line">                  <span class="comment">%% %%                             {colBack, {255, 0, 0}},</span></span><br><span class="line">                  <span class="comment">%% %%                             {font, wxFont:new(20, ?wxDEFAULT, ?wxFONTSTYLE_NORMAL, ?wxFONTWEIGHT_NORMAL)}</span></span><br><span class="line">                  <span class="comment">%% %%                            ]),</span></span><br><span class="line">                  <span class="comment">%% wxTextCtrl:setDefaultStyle(Text, TextAttr),</span></span><br><span class="line">                  #wx_elem_state{id = Id, wx = Text}</span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    lists:map(Fun, CfgList).</span><br><span class="line"></span><br><span class="line"><span class="comment">%% ç•Œé¢å…³é—­</span></span><br><span class="line">close(#state{frame = Frame, text_list = TextList}) -&gt;</span><br><span class="line">    Fun = <span class="keyword">fun</span>(#wx_elem_state{log_pid = Pid}) -&gt; Pid ! {close} <span class="keyword">end</span>,</span><br><span class="line">    lists:foreach(Fun, TextList),</span><br><span class="line">    timer:sleep(<span class="number">500</span>),</span><br><span class="line">    wxWindow:destroy(Frame),</span><br><span class="line">    wx:destroy(),</span><br><span class="line">    <span class="keyword">case</span> get_env(log_pid) <span class="keyword">of</span></span><br><span class="line">        undefined -&gt; skip;</span><br><span class="line">        IO -&gt; file:close(IO)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    kill_by_os(os:getpid()),</span><br><span class="line">    ok.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% ç»“æŸç³»ç»Ÿè¿›ç¨‹</span></span><br><span class="line">kill_by_os(OsPid) -&gt;</span><br><span class="line">    <span class="keyword">case</span> os:type() <span class="keyword">of</span></span><br><span class="line">        {win32, _} -&gt;</span><br><span class="line">            os:cmd(lists:concat([<span class="string">&quot;tskill &quot;</span>, OsPid]));</span><br><span class="line">        _ -&gt;</span><br><span class="line">            os:cmd(lists:concat([<span class="string">&quot;kill -9 &quot;</span>, OsPid]))</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% æ—¶é—´æ ¼å¼åŒ–</span></span><br><span class="line">time_format() -&gt;</span><br><span class="line">    {{Y, M, D}, {HH, MM, SS}} = calendar:universal_time_to_local_time(calendar:universal_time()),</span><br><span class="line">    I2L = <span class="keyword">fun</span>(I) <span class="keyword">when</span> I &lt; <span class="number">10</span>  -&gt; [$<span class="number">0</span>, $<span class="number">0</span>+I];</span><br><span class="line">             (I)              -&gt; integer_to_list(I)</span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    io_lib:format(<span class="string">&quot;~s-~s-~s ~s:~s:~s&quot;</span>, [I2L(Y), I2L(M), I2L(D), I2L(HH), I2L(MM), I2L(SS)]).</span><br><span class="line"></span><br><span class="line">parse_args([]) -&gt; ok;</span><br><span class="line">parse_args([Help|_]) <span class="keyword">when</span> Help =:= <span class="string">&quot;-h&quot;</span>;</span><br><span class="line">                          Help =:= <span class="string">&quot;--help&quot;</span> -&gt;</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;================================================&quot;</span>),</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;Args: --log_file FileName --project_root CfgDir &quot;</span>),</span><br><span class="line">    ?DEBUG_MSG(<span class="string">&quot;================================================&quot;</span>),</span><br><span class="line">    halt(<span class="number">0</span>);</span><br><span class="line">parse_args([<span class="string">&quot;--log_file&quot;</span>, FileName|OtherArgs]) -&gt;</span><br><span class="line">    set_env(log_file, FileName),</span><br><span class="line">    parse_args(OtherArgs);</span><br><span class="line">parse_args([<span class="string">&quot;--project_root&quot;</span>, DirName|OtherArgs]) -&gt;</span><br><span class="line">    set_env(project_root, DirName),</span><br><span class="line">    parse_args(OtherArgs);</span><br><span class="line">parse_args([_PosPar|OtherArgs]) -&gt;</span><br><span class="line">    parse_args(OtherArgs).</span><br><span class="line"></span><br><span class="line">set_env(Key, Val) -&gt;</span><br><span class="line">    application:set_env(?APP_NAME, Key, Val).</span><br><span class="line">get_env(Key) -&gt; get_env(Key, undefined).</span><br><span class="line">get_env(Key, Default) -&gt;</span><br><span class="line">    application:get_env(?APP_NAME, Key, Default).</span><br></pre></td></tr></table></figure><figure class="highlight bat"><figcaption><span>server_ctl_gui.bat</span><a href="/downloads/code/server_ctl_gui.bat">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> FILE_DIR=%~dp0</span><br><span class="line">RunHiddenConsole escript <span class="variable">%FILE_DIR%</span>/server_ctl_gui.erl --log_file <span class="variable">%FILE_DIR%</span>/server_ctl_gui.log --project_root E:/qqjy/qqjy_server/config</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
          <category> wxWidgets </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
            <tag> wxWidgets </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹å®‰è£…Letâ€™s Encryptè¯ä¹¦</title>
      <link href="/2017/09/15/centos/centos-letsencrypt/"/>
      <url>/2017/09/15/centos/centos-letsencrypt/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è‡ªå·±æ­å»ºçš„ç½‘ç«™æç¤ºä¸å®‰å…¨,å› æ­¤å®‰è£…äº†ä¸‹<code>Letâ€™s Encrypt</code>è¯ä¹¦</p><span id="more"></span><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><p><code>python2.7</code> <strong>ä¸éœ€è¦</strong><br><code>python2.7</code> <strong>ä¸éœ€è¦</strong><br><code>python2.7</code> <strong>ä¸éœ€è¦</strong></p><p>é‡è¦çš„äº‹æƒ…è¯´ä¸‰é, çœ‹æœ‰äº›æ–‡ç« è¯´éœ€è¦<code>python2.7</code><br>åœ¨centos6ä¸ŠæŠ˜è…¾äº†è®¸ä¹…,è¿˜æ˜¯æ— æ³•æˆåŠŸå®‰è£…è¯ä¹¦,è¯•ç€åˆ é™¤python2.7,é‡æ–°å®‰è£…,ä¸€åˆ‡ok</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/letsencrypt/letsencrypt</span><br><span class="line"><span class="built_in">cd</span> letsencrypt</span><br><span class="line">./letsencrypt-auto -email ä½ çš„é‚®ä»¶åœ°å€</span><br></pre></td></tr></table></figure><p>ä½ çš„é‚®ä»¶åœ°å€æ˜¯æ³¨å†Œç”¨çš„, ä¼šæœ‰ä¸€ä¸ªç¡®è®¤é‚®ä»¶å‘é€åˆ°ä½ çš„é‚®ç®±</p><p>æŒ‰ç…§æç¤º,ä¸€æ­¥ä¸€æ­¥æ“ä½œå³å¯(<code>nginx-&gt;all_web-&gt;redirect</code>)</p><p>ç”Ÿæˆçš„æ–‡ä»¶é»˜è®¤åœ¨<code>/etc/letsencrypt</code>ç›®å½•ä¸‹</p><p><code>Letâ€™s Encrypt</code>è¯ä¹¦æœ‰æ•ˆæœŸæ˜¯90å¤©, åˆ°æœŸé‡æ–°æ‰§è¡Œä¸€éå°±å¯ä»¥äº†<br>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤<code>./letsencrypt-auto renew</code></p><p><code>https://github.com/letsencrypt/letsencrypt</code>å®é™…ä¸Šå·²ç»æŒ‡å‘<code>https://github.com/certbot/certbot</code>,<br>åœ¨<code>https://certbot.eff.org/</code>ä¼¼ä¹æœ‰æ›´åŠ å‹å¥½çš„å®‰è£…æ–¹å¼, è‡ªå·±æ²¡æœ‰è¯•è¿‡, æœ‰ç²¾åŠ›çš„å¯ä»¥è¯•ä¸‹</p><p>ä½†æ˜¯ç”±äºè‡ªå·±æ­å»ºçš„ä¸ªåˆ«ç½‘ç«™å­˜åœ¨<code>é˜²æ­¢æ··åˆå†…å®¹</code>, <code>https://</code>ä¸å¯ç”¨, æ²¡åŠæ³•åªå¥½è¿˜åŸ</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> ($scheme != <span class="string">&quot;http&quot;</span>) &#123;</span><br><span class="line">  <span class="attribute">return</span> <span class="number">301</span> http://$host$request_uri;</span><br><span class="line">&#125; <span class="comment"># managed by Certbot</span></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.laozuo.org/7676.html">http://www.laozuo.org/7676.html</a></li><li><a href="http://www.jianshu.com/p/eaac0d082ba2">http://www.jianshu.com/p/eaac0d082ba2</a></li><li><code>å¸®åŠ©: ./letsencrypt-auto --help all</code></li><li><a href="https://letsencrypt.org/">https://letsencrypt.org/</a></li><li><a href="https://certbot.eff.org/">https://certbot.eff.org/</a></li><li><a href="http://www.laozuo.org/2573.html">http://www.laozuo.org/2573.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
          <category> Letâ€™s Encrypt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> Letâ€™s Encrypt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨shadowsocks + kcptun + privoxyæ­å»ºä»£ç†</title>
      <link href="/2017/07/15/other/other-shadowsocks/"/>
      <url>/2017/07/15/other/other-shadowsocks/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><table><thead><tr><th>socks5ä»£ç†</th><th>åŠ é€Ÿ</th><th>socks5è½¬http(s)ä»£ç†</th></tr></thead><tbody><tr><td>shadowsocks</td><td>kcptun(ç‰ºç‰²å¸¦å®½)</td><td>privoxy</td></tr></tbody></table><span id="more"></span><h2 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h2><ol><li>å›½å¤–æœåŠ¡å™¨(<strong>æ¬ç“¦å·¥æœ‰ä¸€é”®å®‰è£…sock5æœåŠ¡çš„è„šæœ¬</strong>)</li><li><a href="https://github.com/shadowsocks/shadowsocks-windows">https://github.com/shadowsocks/shadowsocks-windows</a></li><li><a href="https://github.com/xtaci/kcptun">https://github.com/xtaci/kcptun</a></li><li><a href="https://github.com/kuoruan/shell-scripts">https://github.com/kuoruan/shell-scripts</a></li><li><a href="https://www.privoxy.org/">https://www.privoxy.org/</a></li></ol><blockquote><p>å¦‚æœæ˜¯KVMçš„è¯, å¯ä»¥å¼€å¯<code>tcp_bbr</code>,é€Ÿåº¦ä¼šå¿«å¾ˆå¤š, <code>OpenVZ</code>å°±æ²¡åŠæ³•äº†,ä¸æ”¯æŒ</p></blockquote><h2 id="åä¸ºæ‰‹æœºå¼€å¯google-play"><a href="#åä¸ºæ‰‹æœºå¼€å¯google-play" class="headerlink" title="åä¸ºæ‰‹æœºå¼€å¯google play"></a>åä¸ºæ‰‹æœºå¼€å¯google play</h2><ol><li><code>æ‰‹æœºç®¡å®¶</code> -&gt; <code>æƒé™ç®¡ç†</code> -&gt; <code>åº”ç”¨</code> -&gt; <code>Google Play å•†åº—</code> -&gt; <code>ä¿¡ä»»æ­¤åº”ç”¨</code></li><li><code>æ‰‹æœºç®¡å®¶</code> -&gt; <code>æƒé™ç®¡ç†</code> -&gt; <code>åº”ç”¨</code> -&gt; <code>Google Play services for Instant Apps</code> -&gt; <code>ä¿¡ç”¨æ­¤åº”ç”¨</code></li><li>Shadowsocksé…ç½®æ–‡ä»¶<br><img src="/downloads/assets/shadowsocks.jpg" alt="ä»£ç†Googleå¼€å¤´çš„æ‰€æœ‰æœåŠ¡+ä¸‹è½½ç®¡ç†å™¨"></li></ol><h2 id="ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜"></a>ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜</h2><p>å®‰è£…å…¶ä»–è½¯ä»¶çš„æ—¶å€™ï¼Œç”±äºèµ„æºå ç”¨è¿‡é«˜ï¼ˆæ¯•ç«Ÿåªæœ‰512Mï¼‰ï¼Œå¯¼è‡´<code>shadowsocks</code>å’Œ<code>kcptun</code>å¼‚å¸¸é€€å‡ºï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯<code>GFW</code>çš„åŸå› ï¼Œæ’æŸ¥æ–¹æ³•ï¼š</p><ol><li>æ£€æŸ¥<code>ps aux | grep kcptun</code>ï¼Œ<code>service supervisord status</code></li><li>æ£€æŸ¥<code>ps aux | grep ssserver</code></li></ol><p>å¦‚æœæ²¡æœ‰å¯åŠ¨ï¼Œåˆ™é‡æ–°å¯åŠ¨</p>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
            <tag> socks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”Ÿæˆpacæ–‡ä»¶</title>
      <link href="/2017/05/26/other/other-pac/"/>
      <url>/2017/05/26/other/other-pac/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install gfwlist2pac</span><br><span class="line">curl -o gfwlist.txt https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</span><br><span class="line">gfwlist2pac -i gfwlist.txt -f pac.txt -p __PROXY__</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://github.com/itcook/gfwlist2pac">https://github.com/itcook/gfwlist2pac</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
            <tag> pac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä¸‹unixæ—¶é—´æˆ³å’Œæ—¥æœŸè½¬æ¢</title>
      <link href="/2017/05/23/erlang/erlang-time/"/>
      <url>/2017/05/23/erlang/erlang-time/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¶Šå—æ—¶åŒºä¸­,erlangä¸­unixæ—¶é—´æˆ³å’Œæ—¥æœŸè½¬æ¢é—®é¢˜</p><span id="more"></span><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>ç³»ç»Ÿ: <code>CENTOS 7</code><br>è¯­è¨€: <code>ERLANG OTP 17.5.3</code><br>æ—¶åŒº: <code>Asia/Ho_Chi_Minh</code></p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å…ˆæ¥çœ‹ä¸€æ®µä»£ç </p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% util.erl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(SECONDS_FROM_0_TO_1970, <span class="number">62167219200</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">date_to_time</span><span class="params">(&#123;&#123;_Y, _M, _D&#125;, &#123;_H, _Mi, _S&#125;&#125; = Date)</span> -&gt;</span></span><br><span class="line">    calendar:datetime_to_gregorian_seconds(Date) -</span><br><span class="line">    calendar:datetime_to_gregorian_seconds(calendar:universal_time_to_local_time(&#123;&#123;<span class="number">1970</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;&#125;)).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">seconds_to_localtime</span><span class="params">(Seconds)</span> -&gt;</span></span><br><span class="line">    DateTime = calendar:gregorian_seconds_to_datetime(Seconds+?SECONDS_FROM_0_TO_1970),</span><br><span class="line">    calendar:universal_time_to_local_time(DateTime).</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æ—¥æœŸå’Œunixæ—¶é—´æˆ³äº’è½¬çš„ä»£ç ,è²Œä¼¼æ²¡é”™,è¿è¡Œå¤§éƒ¨åˆ†æ—¶é—´ä¹Ÿæ²¡é”™<br>ä½†æ˜¯ä¿®æ”¹ä¸º<code>Asia/Ho_Chi_Minh</code>(ä¸œä¸ƒåŒº)(<code>cp -f /usr/share/zoneinfo/Asia/Ho_Chi_Minh /etc/localtime</code>)</p><p>æŸ¥çœ‹æ—¶åŒºä¹Ÿç¡®å®æ˜¯<code>+0700</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# date -R</span><br><span class="line">Mon, 22 May 2017 19:02:21 +0700</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; util:seconds_to_localtime(<span class="number">0</span>).</span><br><span class="line">&#123;&#123;<span class="number">1970</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>ç»æ’æŸ¥,å‘ç°<code>calendar:universal_time_to_local_time/1</code>å­˜åœ¨é—®é¢˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">39&gt; calendar:universal_time_to_local_time(&#123;&#123;1970,1,1&#125;,&#123;0,0,0&#125;&#125;).</span><br><span class="line">&#123;&#123;1970,1,1&#125;,&#123;8,0,0&#125;&#125;</span><br><span class="line"></span><br><span class="line">%% è¿™é‡Œåº”è¯¥æ˜¯&#123;7,0,0&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æ‰‹åŠ¨è¿›è¡Œæ—¶åŒºä¿®æ­£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Now = erlang:now(),</span><br><span class="line">LocalTime = calendar:now_to_local_time(Now),</span><br><span class="line">UTCTime = calendar:now_to_universal_time(Now),</span><br><span class="line"></span><br><span class="line">calendar:datetime_to_gregorian_seconds(LocalTime) -</span><br><span class="line">calendar:datetime_to_gregorian_seconds(UTCTime).</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% util.erl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(SECONDS_FROM_0_TO_1970, <span class="number">62167219200</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">date_to_time</span><span class="params">(&#123;&#123;_Y, _M, _D&#125;, &#123;_H, _Mi, _S&#125;&#125; = Date)</span> -&gt;</span></span><br><span class="line">    Now = erlang:now(),</span><br><span class="line">    LocalTime = calendar:now_to_local_time(Now),</span><br><span class="line">    UTCTime = calendar:now_to_universal_time(Now),</span><br><span class="line">    </span><br><span class="line">    calendar:datetime_to_gregorian_seconds(Date) -</span><br><span class="line">    calendar:datetime_to_gregorian_seconds(&#123;&#123;<span class="number">1970</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;&#125;) -</span><br><span class="line">    <span class="comment">%% æ—¶åŒºä¿®æ­£</span></span><br><span class="line">    calendar:datetime_to_gregorian_seconds(LocalTime) + </span><br><span class="line">    calendar:datetime_to_gregorian_seconds(UTCTime).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">seconds_to_localtime</span><span class="params">(Seconds)</span> -&gt;</span></span><br><span class="line">    Now = erlang:now(),</span><br><span class="line">    LocalTime = calendar:now_to_local_time(Now),</span><br><span class="line">    UTCTime = calendar:now_to_universal_time(Now),</span><br><span class="line"></span><br><span class="line">    Second1 = Seconds + ?SECONDS_FROM_0_TO_1970 + </span><br><span class="line">    <span class="comment">%% æ—¶åŒºä¿®æ­£</span></span><br><span class="line">    calendar:datetime_to_gregorian_seconds(LocalTime) - calendar:datetime_to_gregorian_seconds(UTCTime),</span><br><span class="line">    calendar:gregorian_seconds_to_datetime(Second1).</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellè¯»å–yamlæ–‡ä»¶</title>
      <link href="/2017/05/16/shell/shell-yaml/"/>
      <url>/2017/05/16/shell/shell-yaml/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Shellè¯»å–yamlæ–‡ä»¶</p><span id="more"></span><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># éæœ¬äººå®ç°</span></span></span><br><span class="line">function parse_yaml &#123;</span><br><span class="line">   local prefix=$2</span><br><span class="line">   local s=&#x27;[[:space:]]*&#x27; w=&#x27;[a-zA-Z0-9_]*&#x27; fs=$(echo @|tr @ &#x27;\034&#x27;)</span><br><span class="line">   sed -ne &quot;s|^\($s\):|\1|&quot; \</span><br><span class="line">        -e &quot;s|^\($s\)\($w\)$s:$s[\&quot;&#x27;]\(.*\)[\&quot;&#x27;]$s\$|\1$fs\2$fs\3|p&quot; \</span><br><span class="line">        -e &quot;s|^\($s\)\($w\)$s:$s\(.*\)$s\$|\1$fs\2$fs\3|p&quot; $1 |</span><br><span class="line">   awk -F$fs &#x27;&#123;</span><br><span class="line">      indent = length($1)/2;</span><br><span class="line">      vname[indent] = $2;</span><br><span class="line">      for (i in vname) &#123;if (i &gt; indent) &#123;delete vname[i]&#125;&#125;</span><br><span class="line">      if (length($3) &gt; 0) &#123;</span><br><span class="line">         vn=&quot;&quot;; for (i=0; i&lt;indent; i++) &#123;vn=(vn)(vname[i])(&quot;_&quot;)&#125;</span><br><span class="line">         printf(&quot;%s%s%s=\&quot;%s\&quot;\n&quot;, &quot;&#x27;$prefix&#x27;&quot;,vn, $2, $3);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># $1 æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># $2 å­—é¦–</span></span></span><br><span class="line">parse_yaml $1 $2</span><br></pre></td></tr></table></figure><p>å¯ä»¥é…åˆ<code>eval $(parse_yaml test.yaml)</code>å°†é…ç½®è¯»å‡ºæ¥</p><h2 id="å·²çŸ¥é—®é¢˜"><a href="#å·²çŸ¥é—®é¢˜" class="headerlink" title="å·²çŸ¥é—®é¢˜"></a>å·²çŸ¥é—®é¢˜</h2><p>è¯¥è„šæœ¬æ— æ³•è¯»å‡ºä¸‹é¢çš„æ ¼å¼</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">things:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">first</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">second</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">third</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://stackoverflow.com/questions/5014632/how-can-i-parse-a-yaml-file-from-a-linux-shell-script">http://stackoverflow.com/questions/5014632/how-can-i-parse-a-yaml-file-from-a-linux-shell-script</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> yaml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSæ­å»ºngrokæœåŠ¡</title>
      <link href="/2017/05/15/centos/centos-ngrok/"/>
      <url>/2017/05/15/centos/centos-ngrok/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è‡ªå»ºngrokæœåŠ¡</p><span id="more"></span><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="å®‰è£…GOLANG"><a href="#å®‰è£…GOLANG" class="headerlink" title="å®‰è£…GOLANG"></a>å®‰è£…GOLANG</h3><p>åœ¨<a href="https://golang.org/dl/">GOLANG</a>ä¸‹è½½1.4.3(<strong>1.4.3åœ¨ç¼–è¯‘æ—¶ç®€åŒ–å¾ˆå¤š,æ¨èä½¿ç”¨</strong>)ç‰ˆæœ¬çš„å®‰è£…åŒ…<br>ä½¿ç”¨<code>tar -C /usr/local  -xzf   go1.4.3.linux-386.tar.gz</code>å®‰è£…åˆ°<code>/usr/local/go</code>ç›®å½•ä¸‹<br>å¹¶æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;export GOROOT=/usr/local/go&#x27;&gt;&gt; ~/.bashrc</span><br><span class="line">echo &#x27;export PATH=$PATH:$GOROOT/bin&#x27;&gt;&gt; ~/.bashrc</span><br><span class="line">source  $HOME/.bashrc</span><br></pre></td></tr></table></figure><p>è¾“å…¥å‘½ä»¤<code>go</code>æ˜¯å¦æœ‰å¸®åŠ©</p><h3 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h3><p>å¢åŠ åŸŸåè§£æ:</p><blockquote><p>Aè®°å½• tunnel.è‡ªå·±çš„åŸŸå IPåœ°å€<br>Aè®°å½• *.tunnel.è‡ªå·±çš„åŸŸå IPåœ°å€</p></blockquote><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mercurial git bzr subversion</span><br></pre></td></tr></table></figure><h3 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h3><p>ä¿è¯<code>443</code>,<code>4443</code>ç«¯å£æ²¡æœ‰è¢«å ç”¨</p><h2 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h2><h3 id="ä¸‹è½½-amp-amp-é…ç½®"><a href="#ä¸‹è½½-amp-amp-é…ç½®" class="headerlink" title="ä¸‹è½½&amp;&amp;é…ç½®"></a>ä¸‹è½½&amp;&amp;é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cd $HOME &amp;&amp; git clone https://github.com/inconshreveable/ngrok.git</span><br><span class="line">echo &#x27;export GOPATH=$HOME/ngrok&#x27;&gt;&gt; ~/.bashrc </span><br><span class="line">source  $HOME/.bashrc</span><br><span class="line"></span><br><span class="line">## export NGROK_DOMAIN=&quot;tunnel.mydomain.com&quot;</span><br><span class="line">export NGROK_DOMAIN=&quot;tunnel.è‡ªå·±çš„åŸŸå&quot;</span><br><span class="line"></span><br><span class="line">cd ngrok</span><br><span class="line"></span><br><span class="line">openssl genrsa -out rootCA.key 2048</span><br><span class="line">openssl req -x509 -new -nodes -key rootCA.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -days 5000 -out rootCA.pem</span><br><span class="line">openssl genrsa -out device.key 2048</span><br><span class="line">openssl req -new -key device.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -out device.csr</span><br><span class="line">openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000</span><br><span class="line">cp rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class="line">cp device.crt assets/server/tls/snakeoil.crt</span><br><span class="line">cp device.key assets/server/tls/snakeoil.key</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="äº¤å‰ç¼–è¯‘"><a href="#äº¤å‰ç¼–è¯‘" class="headerlink" title="äº¤å‰ç¼–è¯‘"></a>äº¤å‰ç¼–è¯‘</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">## do_make æ²¡æœ‰éªŒè¯</span><br><span class="line">## ä½†æ˜¯æµç¨‹æ˜¯è¿™æ ·çš„</span><br><span class="line">## GOOSæ”¯æŒwindows,linux,darwin</span><br><span class="line">## GOARCHæ”¯æŒ386,amd64,arm</span><br><span class="line"></span><br><span class="line">## cd /usr/local/go/src/</span><br><span class="line">## GOOS=windows GOARCH=amd64 CGO_ENABLED=0 ./make.bash </span><br><span class="line">## cd ~/ngrok</span><br><span class="line">## GOOS=windows GOARCH=amd64 make release-server release-client</span><br><span class="line"></span><br><span class="line">function do_make()&#123;</span><br><span class="line">    GOOS=$1</span><br><span class="line">    GOARCH=$2</span><br><span class="line">    cd /usr/local/go/src/</span><br><span class="line">    GOOS=$&#123;GOOS&#125; GOARCH=$&#123;GOARCH&#125; CGO_ENABLED=0 ./make.bash</span><br><span class="line">    cd ~/ngrok</span><br><span class="line">    GOOS=$&#123;GOOS&#125; GOARCH=$&#123;GOARCH&#125; make release-server release-client</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">do_make linux 386</span><br><span class="line">do_make linux amd64</span><br><span class="line">do_make windows amd64</span><br><span class="line">do_make windows 386</span><br><span class="line">do_make darwin amd64</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><h3 id="æœåŠ¡ç«¯å¯åŠ¨"><a href="#æœåŠ¡ç«¯å¯åŠ¨" class="headerlink" title="æœåŠ¡ç«¯å¯åŠ¨"></a>æœåŠ¡ç«¯å¯åŠ¨</h3><p><code>bin/ngrokd -domain=&quot;$NGROK_DOMAIN&quot; -httpAddr=&quot;:8000&quot;</code></p><h3 id="å®¢æˆ·ç«¯å¯åŠ¨"><a href="#å®¢æˆ·ç«¯å¯åŠ¨" class="headerlink" title="å®¢æˆ·ç«¯å¯åŠ¨"></a>å®¢æˆ·ç«¯å¯åŠ¨</h3><p>ç¼–è¾‘<code>ngrok.cfg</code>æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server_addr: &quot;ngrok.è‡ªå·±çš„åŸŸå:4443&quot;</span><br><span class="line">trust_host_root_certs: false</span><br><span class="line"></span><br><span class="line">tunnels:</span><br><span class="line">    ssh:</span><br><span class="line">        remote_port: 40002</span><br><span class="line">        proto:</span><br><span class="line">            tcp: &quot;:22&quot;</span><br><span class="line">    web:</span><br><span class="line">        subdomain: aaa</span><br><span class="line">        proto:</span><br><span class="line">            http: &quot;:80&quot;</span><br></pre></td></tr></table></figure><p>ngrok â€“config=ngrok.cfg start ssh web</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://www.tuicool.com/articles/ZraURrq">http://www.tuicool.com/articles/ZraURrq</a></li><li><a href="http://www.sunnyos.com/article-show-48.html">http://www.sunnyos.com/article-show-48.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ngrok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>utf8ç¼–ç </title>
      <link href="/2017/05/09/erlang/erlang-unicode/"/>
      <url>/2017/05/09/erlang/erlang-unicode/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>YÌƒ</code>æ˜¯è¶Šå—è¯­<code>æ„å¤§åˆ©</code>çš„æ„æ€(ç½‘ä¸ŠæŸ¥çš„,æœªå¿…å‡†ç¡®,ä¸è¿‡è¿™ä¸ªä¸æ˜¯é‡ç‚¹)<br>ä»å­—é¢ä¸Šçœ‹åº”è¯¥æ˜¯1ä¸ªå­—ç¬¦<br>ç”¨erlangè½¬å‡ºæ¥çš„listä¹Ÿåº”è¯¥æ˜¯1ä¸ª<br>BUT â€¦.</p><span id="more"></span><p>é€šè¿‡<a href="http://utf8.supfree.net/">http://utf8.supfree.net/</a>ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šä¸­æ–‡<code>æˆ‘</code>çš„utf8ç¼–ç æ˜¯<code>&amp;#x6211;</code>,å¯¹åº”çš„10è¿›åˆ¶æ˜¯<code>25105</code>ã€‚<br>æˆ‘ä»¬ç»§ç»­çœ‹å­—ç¬¦<code>YÌƒ</code>,è¿™ä¸ªè½¬å‡ºæ¥çš„æ˜¯[89, 771]ï¼Œ<strong>æ€ä¹ˆæ˜¯ä¸¤ä¸ªå­—ç¬¦å‘¢ï¼Ÿï¼Ÿï¼Ÿ</strong></p><p>å…ˆæ¥ä¸ªæµ‹è¯•:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">t</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    A = &lt;&lt;<span class="string">&quot;YÌƒ&quot;</span>&gt;&gt;,</span><br><span class="line">    A1 = unicode:characters_to_list(A),</span><br><span class="line">    io:format(<span class="string">&quot;B1: ~w~n&quot;</span>, [A1]),</span><br><span class="line"></span><br><span class="line">    B = &lt;&lt;<span class="string">&quot;æˆ‘&quot;</span>&gt;&gt;,</span><br><span class="line">    B1 = unicode:characters_to_list(B),</span><br><span class="line">    io:format(<span class="string">&quot;C1: ~w~n&quot;</span>, [B1]).</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A1: [<span class="number">89</span>,<span class="number">771</span>]</span><br><span class="line">B1: [<span class="number">25105</span>]</span><br></pre></td></tr></table></figure><h2 id="unicodeç¼–ç è§„åˆ™"><a href="#unicodeç¼–ç è§„åˆ™" class="headerlink" title="unicodeç¼–ç è§„åˆ™"></a>unicodeç¼–ç è§„åˆ™</h2><table><thead><tr><th>Unicodeç¼–ç (16è¿›åˆ¶)</th><th>UTF-8 å­—èŠ‚æµ(äºŒè¿›åˆ¶)</th></tr></thead><tbody><tr><td>000000 - 00007F</td><td>0xxxxxxx</td></tr><tr><td>000080 - 0007FF</td><td>110xxxxx 10xxxxxx</td></tr><tr><td>000800 - 00FFFF</td><td>1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td>010000 - 10FFFF</td><td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td></tr></tbody></table><p>ä¸Šè¡¨æ˜¯utf8çš„ç¼–ç è§„åˆ™ï¼Œå…·ä½“å«ä¹‰è¯·çœ‹<a href="http://blog.sina.com.cn/s/blog_63733daa0100qe9n.html">å‚è€ƒæ–‡æ¡£-1</a></p><h2 id="é—®é¢˜ç»§ç»­"><a href="#é—®é¢˜ç»§ç»­" class="headerlink" title="é—®é¢˜ç»§ç»­"></a>é—®é¢˜ç»§ç»­</h2><p>ç»§ç»­æœ€å¼€å§‹çš„é—®é¢˜ â€¦</p><p><code>771</code>å¯¹åº”çš„16è¿›åˆ¶æ˜¯<code>0x303</code>ï¼Œåœ¨<code>000080 - 0007FF</code>èŒƒå›´å†…ï¼Œ<br><code>771</code>å¯¹åº”çš„2è¿›åˆ¶æ˜¯<code>01100 000011</code>ï¼Œå¯¹åº”è¡¨å¾—å‡ºï¼Œ<code>110 01100(204)  10 000011(131)</code>, æœ€ç»ˆç¼–ç æ˜¯<code>0xCC83</code></p><p>åŒä¸Šï¼Œ<code>89</code>å¯¹åº”çš„<code>01011001(89)</code>ï¼Œæœ€ç»ˆç¼–ç æ˜¯<code>0x59</code></p><p><strong>å› æ­¤ï¼Œå°½ç®¡çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªutf8å­—ç¬¦</strong></p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://blog.sina.com.cn/s/blog_63733daa0100qe9n.html">http://blog.sina.com.cn/s/blog_63733daa0100qe9n.html</a></li><li><a href="http://blog.csdn.net/sandyen/article/details/1108168">http://blog.csdn.net/sandyen/article/details/1108168</a></li><li><a href="http://utf8.supfree.net/">http://utf8.supfree.net/</a></li><li><a href="http://www.ynzd.org/">http://www.ynzd.org/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
          <category> utf8 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
            <tag> utf8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo nextä¸»é¢˜å‘</title>
      <link href="/2017/05/07/other/other-hexo-next/"/>
      <url>/2017/05/07/other/other-hexo-next/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨hexoæ­å»ºä¸ªäººBLOG<br>ä½¿ç”¨nextä¸»é¢˜,<strong>ä¸å¾—ä¸è¯´è¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„å†³å®š</strong>,å°½ç®¡githubä¸Šstarè¿˜æ¯”è¾ƒå¤š,ä½†æ˜¯é—®é¢˜å¤šå¤š<br>å¦‚æœæ‚¨ä¹Ÿæ‰“ç®—ä½¿ç”¨hexoæ­å»ºä¸ªäººBLOGçš„è¯,<strong>è¯·è°¨æ…ä½¿ç”¨nextä¸»é¢˜</strong></p><span id="more"></span><p>ä¸€ä¸ªæ— æ³•è§£å†³çš„é—®é¢˜,ä¸æ˜¯100%å‡ºç°,ä½†æ˜¯ç»å¤§éƒ¨åˆ†æ—¶é—´æ˜¯ä¼šé‡åˆ°çš„,èƒ½å¦é¡ºåˆ©å…¨çœ‹RP,è›‹ç–¼çš„è¦æ­»!!!</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Unhandled rejection <span class="built_in">Error</span>: ENOENT: no such file or directory, open <span class="string">&#x27;D:\blog\blog_www_debug.mingilin.com\themes\next\layout\_scripts\schemes\.swig&#x27;</span></span><br><span class="line">    at <span class="built_in">Error</span> (native)</span><br><span class="line">    at <span class="built_in">Object</span>.fs.openSync (fs.js:<span class="number">640</span>:<span class="number">18</span>)</span><br><span class="line">    at <span class="built_in">Object</span>.fs.readFileSync (fs.js:<span class="number">508</span>:<span class="number">33</span>)</span><br><span class="line">    at <span class="built_in">Object</span>.ret.load (D:\blog\blog_www_debug.mingilin.com\node_modules\swig\lib\loaders\filesystem.js:<span class="number">55</span>:<span class="number">15</span>)</span><br><span class="line">    at compileFile (D:\blog\blog_www_debug.mingilin.com\node_modules\swig\lib\swig.js:<span class="number">695</span>:<span class="number">31</span>)</span><br><span class="line">    at <span class="built_in">Object</span>.eval [<span class="keyword">as</span> tpl] (<span class="built_in">eval</span> at &lt;anonymous&gt; (D:\blog\blog_www_debug.mingilin.com\node_modules\swig\lib\swig.js:<span class="number">498</span>:<span class="number">13</span>), &lt;anonymous&gt;:<span class="number">837</span>:<span class="number">18</span>)</span><br><span class="line">    at compiled (D:\blog\blog_www_debug.mingilin.com\node_modules\swig\lib\swig.js:<span class="number">619</span>:<span class="number">18</span>)</span><br><span class="line">    at _compiled (D:\blog\blog_www_debug.mingilin.com\node_modules\hexo\lib\theme\view.js:<span class="number">127</span>:<span class="number">30</span>)</span><br><span class="line">    at View.render (D:\blog\blog_www_debug.mingilin.com\node_modules\hexo\lib\theme\view.js:<span class="number">29</span>:<span class="number">15</span>)</span><br><span class="line">    at D:\blog\blog_www_debug.mingilin.com\node_modules\hexo\lib\hexo\index.js:<span class="number">390</span>:<span class="number">25</span></span><br><span class="line">    at tryCatcher (D:\blog\blog_www_debug.mingilin.com\node_modules\bluebird\js\release\util.js:<span class="number">16</span>:<span class="number">23</span>)</span><br><span class="line">    at D:\blog\blog_www_debug.mingilin.com\node_modules\bluebird\js\release\method.js:<span class="number">15</span>:<span class="number">34</span></span><br><span class="line">    at RouteStream._read (D:\blog\blog_www_debug.mingilin.com\node_modules\hexo\lib\hexo\router.js:<span class="number">134</span>:<span class="number">3</span>)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:<span class="number">348</span>:<span class="number">10</span>)</span><br><span class="line">    at resume_ (_stream_readable.js:<span class="number">737</span>:<span class="number">12</span>)</span><br><span class="line">    at _combinedTickCallback (internal/process/next_tick.js:<span class="number">74</span>:<span class="number">11</span>)</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:<span class="number">98</span>:<span class="number">9</span>)</span><br></pre></td></tr></table></figure><p>ç™¾åº¦/GOOGLEäº†å„ç§è§£å†³æ–¹æ¡ˆ,ä¸‹é¢æ˜¯ç½‘ä¸Šæˆ–è€…ä¸ªäººä½¿ç”¨è¿‡çš„æ–¹æ¡ˆ:</p><ol><li><a href="http://codebeautify.org/yaml-validator">yaml-validator</a></li><li>ä¿®æ”¹æ–‡ä»¶ç¼–ç </li><li>è¯•è¿‡åœ¨<code>:</code>ååŠ <code>ç©ºæ ¼</code></li><li>ç¡®ä¿<a href="http://codebeautify.org/yaml-validator">yaml-validator</a>æ£€æµ‹é€šè¿‡å,å»æ‰æ–‡ä»¶æœ€åçš„ç©ºè¡Œ</li><li>ä½¿ç”¨debugæ¨¡å¼</li></ol><p><strong>ä½†æ˜¯é—®é¢˜ä¾ç„¶å­˜åœ¨</strong><br><strong>ä½†æ˜¯é—®é¢˜ä¾ç„¶å­˜åœ¨</strong><br><strong>ä½†æ˜¯é—®é¢˜ä¾ç„¶å­˜åœ¨</strong></p><p>æœ‰äººæœ‰æœ€ç»ˆè§£å†³æ–¹æ¡ˆå—???</p><p><strong>ç°åœ¨ä¸€ä¸ªä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ¯æ¬¡å¯åŠ¨å‰æ‰‹åŠ¨æ”¹åŠ¨ä¸»é¢˜ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶</strong></p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://github.com/iissnan/hexo-theme-next/issues/737">https://github.com/iissnan/hexo-theme-next/issues/737</a></li><li><a href="http://jianbing.github.io/2016/04/30/set-up-next/">http://jianbing.github.io/2016/04/30/set-up-next/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu serverä¿®æ”¹ä¸ºä¸­æ–‡</title>
      <link href="/2017/05/06/ubuntu/ubuntu-zh/"/>
      <url>/2017/05/06/ubuntu/ubuntu-zh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ubuntu serverä½¿ç”¨è‡ªå·±çš„<a href="https://github.com/kingwen0302/vim.git">vimé…ç½®</a>æ—¶,æç¤º<code>Cannot set language to &quot;zh_CN.UTF-8&quot;</code>é”™è¯¯,éœ€è¦ä¿®æ”¹è¯­è¨€ç¯å¢ƒ.</p><span id="more"></span><p>å…·ä½“é”™è¯¯å¦‚ä¸‹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vagrant@vagrant-ubuntu-trusty-64:~/.myvim/vimrc$ sudo vim /etc/default/locale </span><br><span class="line">Error detected while processing /home/vagrant/.myvim/vimrc/first.vim:</span><br><span class="line">line   14:</span><br><span class="line">E197: Cannot set language to &quot;zh_CN.UTF-8&quot;</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><ol><li><p>ä¿®æ”¹é…ç½®<br>ç¼–è¾‘<code>/etc/default/locale</code>,ä¿®æ”¹ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## sudo vim /etc/default/locale</span><br><span class="line">LANG=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LANGUAGE=&quot;zh_CN:zh&quot;</span><br></pre></td></tr></table></figure></li><li><p>ç„¶åæ‰§è¡Œ<code>sudo locale-gen zh_CN.UTF-8</code></p></li><li><p>é—®é¢˜è§£å†³</p></li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://blog.csdn.net/feihong247/article/details/7767889">http://blog.csdn.net/feihong247/article/details/7767889</a></li><li><a href="http://blog.sina.com.cn/s/blog_62dd23ed0100qzkl.html">http://blog.sina.com.cn/s/blog_62dd23ed0100qzkl.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntuå¿«é€Ÿè®¾ç½®æº</title>
      <link href="/2017/05/04/ubuntu/ubuntu-source/"/>
      <url>/2017/05/04/ubuntu/ubuntu-source/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ubuntué»˜è®¤æºä¸‹è½½é€Ÿåº¦åæ…¢,å›½å†…ç¯å¢ƒéœ€è¦ä¿®æ”¹æº.</p><span id="more"></span><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#</span></span> </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># å¿«é€Ÿä¿®æ”¹æºä¸ºaliyun</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#</span></span></span><br><span class="line"></span><br><span class="line">if [[ &quot;$(grep &#x27;aliyun&#x27; /etc/apt/sources.list)&quot; != &quot;&quot; ]]; then</span><br><span class="line">    echo &quot;[ERROR]å·²ç»ä¿®æ”¹!!!&quot;</span><br><span class="line">    exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">sudo mv /etc/apt/sources.list /etc/apt/sources.list.old</span><br><span class="line">grep -v &#x27;^#&#x27; /etc/apt/sources.list.old \</span><br><span class="line">| grep -v &#x27;^$&#x27; \</span><br><span class="line">| sed -e &#x27;s/archive.ubuntu.com/mirrors.aliyun.com/&#x27; -e &#x27;s/security.ubuntu.com/mirrors.aliyun.com/&#x27; \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ~/sources.list</span></span><br><span class="line">sudo mv ~/sources.list /etc/apt/sources.list</span><br><span class="line">echo &quot;[INFO]ä¿®æ”¹å®Œæˆ!!!&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ä¸€è¡Œä»£ç </span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># sudo mv /etc/apt/sources.list /etc/apt/sources.list.old &amp;&amp; grep -v &#x27;^#&#x27; /etc/apt/sources.list.old | grep -v &#x27;^$&#x27; | sed -e &#x27;s/archive.ubuntu.com/mirrors.aliyun.com/&#x27; -e &#x27;s/security.ubuntu.com/mirrors.aliyun.com/&#x27; &gt; ~/sources.list &amp;&amp; sudo mv ~/sources.list /etc/apt/sources.list &amp;&amp; echo &quot;[INFO]ä¿®æ”¹å®Œæˆ!!!&quot;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vagrantç®€å•ä½¿ç”¨</title>
      <link href="/2017/04/25/windows/windows-vagrant/"/>
      <url>/2017/04/25/windows/windows-vagrant/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vagrantæ˜¯ä¸€ä¸ªåŸºäºRubyçš„å·¥å…·ï¼Œç”¨äºåˆ›å»ºå’Œéƒ¨ç½²è™šæ‹ŸåŒ–å¼€å‘ç¯å¢ƒã€‚<br>å®ƒä½¿ç”¨Oracleçš„å¼€æºVirtualBoxè™šæ‹ŸåŒ–ç³»ç»Ÿï¼Œä½¿ç”¨Chefåˆ›å»ºè‡ªåŠ¨åŒ–è™šæ‹Ÿç¯å¢ƒã€‚</p><p>ä½¿ç”¨vagrantæ­å»ºå¼€å‘ç¯å¢ƒä¼˜åŠ¿:  </p><ul><li>è¿è¡Œå®Œå…¨éš”ç¦»;  </li><li>ç†Ÿæ‚‰linuxå¸¸ç”¨æ“ä½œ;  </li><li><em><strong>GUESTæ”¹æ—¶é—´ä¸å½±å“HOSTæ—¶é—´</strong></em>  </li></ul><span id="more"></span><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>éœ€è¦è½¯ä»¶:  </p><ul><li>GIT</li><li>VirtualBox-5.1.4-110228-Win</li><li>vagrant_1.8.5.msi</li><li>BOXæ–‡ä»¶</li></ul><p>å°†<code>the git root\usr\bin</code>åŠ å…¥ç¯å¢ƒå˜é‡, ç¡®ä¿<code>ssh</code>å‘½ä»¤å¯ç”¨</p><p><code>Virtualbox</code>å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œï¼š<br><code>VBoxManage.exe setextradata global &quot;VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled&quot; &quot;1&quot;</code></p><p>è®¾ç½®<code>Virtualbox</code>ä¸åŒæ­¥ç³»ç»Ÿæ—¶é—´</p><h2 id="åˆ›å»ºbox"><a href="#åˆ›å»ºbox" class="headerlink" title="åˆ›å»ºbox"></a>åˆ›å»ºbox</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">rem centos7æ˜¯è‡ªå®šä¹‰åå­—</span></span><br><span class="line"><span class="comment">rem E:\centos_7.boxæ˜¯boxæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">vagrant box add centos7 E:\centos_7.box</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®"><a href="#é¡¹ç›®" class="headerlink" title="é¡¹ç›®"></a>é¡¹ç›®</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">rem åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•(trunkæˆ–è€…qqjy_cn_ç‰ˆæœ¬å·)</span></span><br><span class="line"><span class="built_in">cd</span> project_path</span><br><span class="line"><span class="comment">rem åˆ›å»ºå¼€å‘ç¯å¢ƒ</span></span><br><span class="line">vagrant init centos7</span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿæˆ<code>Vagrantfile</code>æ–‡ä»¶ä¸­æ·»åŠ :</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">config.ssh.username = <span class="string">&quot;root&quot;</span></span><br><span class="line">config.ssh.password = <span class="string">&quot;vagrant&quot;</span></span><br><span class="line"><span class="comment"># ç«¯å£æ˜ å°„</span></span><br><span class="line">config.vm.network <span class="string">&quot;forwarded_port&quot;</span>, <span class="symbol">guest:</span> <span class="number">8101</span>, <span class="symbol">host:</span> <span class="number">47010</span></span><br><span class="line"><span class="comment"># å…±äº«æ–‡ä»¶å¤¹</span></span><br><span class="line">config.vm.synced_folder <span class="string">&quot;./&quot;</span>, <span class="string">&quot;/data/qqjy&quot;</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œè„šæœ¬</span></span><br><span class="line"><span class="comment"># éœ€è¦--provisionå‚æ•°</span></span><br><span class="line">config.vm.provision <span class="string">&quot;shell&quot;</span>, <span class="symbol">inline:</span> <span class="string">&lt;&lt;-SHELL</span></span><br><span class="line"><span class="string">  touch /root/.db_status</span></span><br><span class="line"><span class="string">  VER=$(cat /root/.db_status)</span></span><br><span class="line"><span class="string">  if [[ &quot;$VER&quot; == &quot;&quot; ]]; then</span></span><br><span class="line"><span class="string">    echo &quot;deal&quot; &gt; /root/.db_status</span></span><br><span class="line"><span class="string">    cd /data/qqjy/db_script &amp;&amp; mysql -uroot -p123456 -e &quot;create database qqjy_admin; use qqjy_admin; source admin.sql;&quot;</span></span><br><span class="line"><span class="string">  fi</span></span><br><span class="line"><span class="string">  cd /data/qqjy/script &amp;&amp; ./server_ctl.sh make &amp;&amp; ./server_ctl.sh start_all</span></span><br><span class="line"><span class="string">SHELL</span></span><br></pre></td></tr></table></figure><p>å¤šèŠ‚ç‚¹é…ç½®ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(<span class="string">&quot;2&quot;</span>) <span class="keyword">do</span> <span class="params">|config|</span></span><br><span class="line">    <span class="comment"># The most common configuration options are documented and commented below.</span></span><br><span class="line">    <span class="comment"># For a complete reference, please see the online documentation at</span></span><br><span class="line">    <span class="comment"># https://docs.vagrantup.com.</span></span><br><span class="line"></span><br><span class="line">    (<span class="number">1</span>..<span class="number">3</span>).each <span class="keyword">do</span> <span class="params">|i|</span></span><br><span class="line">        config.vm.define <span class="string">&quot;node<span class="subst">#&#123;i&#125;</span>&quot;</span> <span class="keyword">do</span> <span class="params">|node|</span></span><br><span class="line">            node.vm.box = <span class="string">&quot;centos7&quot;</span></span><br><span class="line"></span><br><span class="line">            node.ssh.username = <span class="string">&quot;root&quot;</span></span><br><span class="line">            node.ssh.password = <span class="string">&quot;vagrant&quot;</span></span><br><span class="line"></span><br><span class="line">            node.vm.hostname = <span class="string">&quot;node<span class="subst">#&#123;i&#125;</span>&quot;</span></span><br><span class="line">            node.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">22</span>, <span class="symbol">host:</span> <span class="string">&quot;2022<span class="subst">#&#123;i&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">            node.vm.provider <span class="string">&quot;virtualbox&quot;</span> <span class="keyword">do</span> <span class="params">|v|</span></span><br><span class="line">                v.name = <span class="string">&quot;node<span class="subst">#&#123;i&#125;</span>&quot;</span></span><br><span class="line">                <span class="keyword">if</span> i == <span class="number">1</span></span><br><span class="line">                    v.memory = <span class="number">512</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    v.memory = <span class="number">512</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                v.cpus = <span class="number">1</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>vagrant up --provision</code>å¯åŠ¨</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ol><li>å¯¼å‡ºbox<br>æ‰“å¼€virtualbox,æŸ¥çœ‹boxåç§°,ç„¶åä½¿ç”¨ï¼š<br><code>vagrant package --output centos7_64_1.box --base server_default_1472191933425_51781</code><br>å¯¼å‡ºè‡ªå·±çš„BOX</li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="https://wenku.baidu.com/view/a14d3fc5a1c7aa00b52acb38.html">https://wenku.baidu.com/view/a14d3fc5a1c7aa00b52acb38.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> vagrant </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> vagrant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GITHUBæé«˜è®¿é—®é€Ÿåº¦</title>
      <link href="/2017/03/09/github/github-speed/"/>
      <url>/2017/03/09/github/github-speed/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://github.com/">GITHUB</a>è™½ç„¶æœªè¢«å¢™,ä½†æ˜¯é€Ÿåº¦çœŸçš„ä¸æ•¢æ­ç»´</p><p>ä»ä¸Šé¢cloneä»£ç ç»å¸¸æ€§çš„å¤±è´¥, æœ‰ç‚¹æŠ“ç‹‚</p><span id="more"></span><h2 id="WEBè®¿é—®"><a href="#WEBè®¿é—®" class="headerlink" title="WEBè®¿é—®"></a>WEBè®¿é—®</h2><ol><li><p>åœ¨<code>http://tool.chinaz.com/dns</code>æŸ¥è¯¢<code>http://github.com</code></p></li><li><p>æ‰¾åˆ°<code>TTL</code>å€¼æœ€ä½çš„å“åº”IP <code>192.30.253.113</code></p></li><li><p>å°†<code>192.30.253.113 github.com</code>æ·»åŠ åˆ°<code>HOSTS</code>(<code>C:\Windows\System32\drivers\etc\hosts</code>)ä¸­</p></li></ol><h2 id="CLONE"><a href="#CLONE" class="headerlink" title="CLONE"></a>CLONE</h2><ol><li><p>è‡ªè¡ŒæŸ¥æ‰¾æ¢¯å­</p></li><li><p>é…ç½®</p><ol><li>GIT<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># git config --global http.proxy http://proxyuser:proxypwd@proxy.server.com:port</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># git config --global https.proxy https://proxyuser:proxypwd@proxy.server.com:port</span></span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:58365</span><br><span class="line">git config --global https.proxy https://127.0.0.1:58365</span><br></pre></td></tr></table></figure></li><li>SHELL<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ä»£ç†</span><br><span class="line">## export http_proxy=http://proxyuser:proxypwd@proxy.server.com:8080</span><br><span class="line">## export https_proxy=https://proxyuser:proxypwd@proxy.server.com:8080</span><br></pre></td></tr></table></figure></li><li>WINDOWS<br>æ·»åŠ <code>http_proxy</code>å’Œ<code>https_proxy</code>ç¯å¢ƒå˜é‡</li></ol></li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href="http://www.cnblogs.com/fengnovo/p/5959880.html">http://www.cnblogs.com/fengnovo/p/5959880.html</a></li><li><a href="http://www.tuicool.com/articles/a2m6fau">http://www.tuicool.com/articles/a2m6fau</a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä¸‹ssh daemon</title>
      <link href="/2017/01/22/erlang/erlang-ssh-daemon/"/>
      <url>/2017/01/22/erlang/erlang-ssh-daemon/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ›¾å¤šæ¬¡åœ¨windowsä¸‹å°è¯•<code>ssh:daemon/2</code>,ä½†æ˜¯æ¯æ¬¡ç”¨sshå®¢æˆ·ç«¯è¿æ¥éƒ½æç¤º<code>æ‰¾ä¸åˆ°åŒ¹é…çš„host keyç®—æ³•</code><br>åœ¨linuxä¸‹åˆå¯ä»¥,ä¸€ç›´è®¤ä¸ºæ˜¯è¯¥æ¥å£ä¸æ”¯æŒwindows,æ¯•ç«Ÿwindowsæœ¬èº«æ˜¯ä¸æ”¯æŒsshçš„</p><p>ä»Šå¤©åˆå°è¯•äº†ä¸‹, åŸæ¥æ˜¯è‡ªå·±é”™äº†</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;system_dir, string()&#125;</span><br><span class="line">Sets the system directory, containing the host key files that identifies the host keys for ssh. </span><br><span class="line">The default is /etc/ssh, note that for security reasons this directory is normally only accessible by the root user.</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæè¿°,é»˜è®¤æ˜¯<code>/etc/ssh</code>,ä½†æ˜¯windowsæ²¡æœ‰<code>/etc/ssh</code>,æ‰€ä»¥æç¤º<code>æ‰¾ä¸åˆ°åŒ¹é…çš„host keyç®—æ³•</code></p><h3 id="ç”Ÿæˆsystem-diréœ€è¦çš„key"><a href="#ç”Ÿæˆsystem-diréœ€è¦çš„key" class="headerlink" title="ç”Ÿæˆsystem_diréœ€è¦çš„key"></a>ç”Ÿæˆ<code>system_dir</code>éœ€è¦çš„key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -f config/ssh_daemon/ssh_host_rsa_key</span><br></pre></td></tr></table></figure><h3 id="erlangå¯åŠ¨"><a href="#erlangå¯åŠ¨" class="headerlink" title="erlangå¯åŠ¨"></a>erlangå¯åŠ¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1&gt; application:ensure_all_started(ssh).</span><br><span class="line">2&gt; &#123;ok, Pid&#125; = ssh:daemon(10000, [</span><br><span class="line">                                  &#123;system_dir, &quot;config/ssh_daemon&quot;&#125;, </span><br><span class="line">                                  %% æ–¹å¼1</span><br><span class="line">                                  &#123;user_passwords, [&#123;&quot;aaa&quot;, &quot;123456&quot;&#125;]&#125;,</span><br><span class="line">                                  %% æ–¹å¼2</span><br><span class="line">                                  &#123;pwdfun, fun(&quot;aaa&quot;, &quot;123456&quot;) -&gt; true; (_, _) -&gt; false end&#125; </span><br><span class="line">                                 ]).</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯æµ‹è¯•"><a href="#å®¢æˆ·ç«¯æµ‹è¯•" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•"></a>å®¢æˆ·ç«¯æµ‹è¯•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh aaa@127.0.0.1 -p 10000</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://erlang.org/doc/apps/ssh/using_ssh.html">http://erlang.org/doc/apps/ssh/using_ssh.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹å®‰è£…PHPæ’ä»¶memcache</title>
      <link href="/2016/10/08/windows/windows-memcache/"/>
      <url>/2016/10/08/windows/windows-memcache/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Windowsä¸‹å®‰è£…PHPæ’ä»¶memcache</p><span id="more"></span><h3 id="æŸ¥çœ‹PHPä¿¡æ¯"><a href="#æŸ¥çœ‹PHPä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹PHPä¿¡æ¯"></a>æŸ¥çœ‹PHPä¿¡æ¯</h3><p>ä½¿ç”¨<code>phpinfo()</code>æŸ¥çœ‹phpä¿¡æ¯</p><table><thead><tr><th>PHP Version 5.6.4</th><th></th></tr></thead><tbody><tr><td>Zend Extension Build</td><td>API220131226,<font color="red">TS</font>,VC11</td></tr><tr><td>PHP Extension Build</td><td>API20131226,<font color="red">TS</font>,VC11</td></tr><tr><td>Architecture</td><td><font color="red">x64</font></td></tr></tbody></table><p>ä»ä¸Šé¢çš„è¡¨,å¯ä»¥çœ‹å‡º:</p><ol><li>5.6ç‰ˆæœ¬</li><li>TS  - Thread Safe</li><li>x64 - 64ä½</li></ol><h3 id="ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„php-memcache"><a href="#ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„php-memcache" class="headerlink" title="ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„php_memcache"></a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„<code>php_memcache</code></h3><p><a href="https://pecl.php.net/package/memcache/3.0.8/windows">ä¸‹è½½åœ°å€</a></p><p>å°†è§£å‹åçš„<code>php_memcache</code>æ”¾åˆ°<code>php_root_path/ext</code>ç›®å½•ä¸‹</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## php.ini</span><br><span class="line">extension=php_memcache.dll</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>æŸ¥çœ‹<code>phpinfo()</code>, å¦‚æœå‡ºç°memcacheè¡¨ç¤ºå®‰è£…æˆåŠŸ</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.jb51.net/article/63601.htm">http://www.jb51.net/article/63601.htm</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> php </category>
          
          <category> memcache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> windows </tag>
            
            <tag> memcache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºåœ¨çº¿Epubé˜…è¯»å¹³å°</title>
      <link href="/2016/10/07/misc/misc-web-epub-reader/"/>
      <url>/2016/10/07/misc/misc-web-epub-reader/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¦‚æœæ‰‹æœº/PCä¸æƒ³å®‰è£…Epubé˜…è¯»è½¯ä»¶, å¯ä»¥è¯•ç€ä¸ªäººæ­å»ºä¸€ä¸ªåœ¨çº¿é˜…è¯»epubçš„å¹³å°</p><p>å¯ä»¥ä¿å­˜é˜…è¯»è¿›åº¦å¥¥, å…·ä½“å®ç°åŸç†è¿˜ä¸å¤ªæ¸…æ¥š</p><span id="more"></span><h3 id="éœ€è¦è½¯ä»¶"><a href="#éœ€è¦è½¯ä»¶" class="headerlink" title="éœ€è¦è½¯ä»¶"></a>éœ€è¦è½¯ä»¶</h3><ul><li>PHP</li><li>NGINX(Apache)</li><li><a href="http://calibre-ebook.com/">Calibre</a></li><li><a href="https://github.com/seblucas/cops">cops</a></li><li>nssm</li></ul><h3 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h3><ol><li><p>å®‰è£…calibre</p></li><li><p>ä½¿ç”¨nginxæ­å»ºcopsç¯å¢ƒ, å…·ä½“ç™¾åº¦</p></li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// config_local.php</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æŒ‡å‘Calibreçš„Calibre Libraryç›®å½•</span></span><br><span class="line"><span class="variable">$config</span>[<span class="string">&#x27;calibre_directory&#x27;</span>] = <span class="string">&#x27;E:/Calibre Portable/Calibre Library/&#x27;</span>;</span><br><span class="line"><span class="comment">// title</span></span><br><span class="line"><span class="variable">$config</span>[<span class="string">&#x27;cops_title_default&#x27;</span>] = <span class="string">&quot;EPUBé˜…è¯»å¹³å°&quot;</span>;</span><br><span class="line"><span class="comment">// æ˜¯å¦å…è®¸ä¸‹è½½ 0-å¦ 1-æ˜¯</span></span><br><span class="line"><span class="variable">$config</span>[<span class="string">&#x27;cops_use_url_rewriting&#x27;</span>] = <span class="string">&quot;0&quot;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsä¸‹æœåŠ¡ç®¡ç†-NSSM</title>
      <link href="/2016/10/05/windows/windows-nssm/"/>
      <url>/2016/10/05/windows/windows-nssm/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>NSSM - the Non-Sucking Service Manager</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>åœ¨<a href="http://nssm.cc/download">nssm.cc</a>ä¸‹è½½exeæ–‡ä»¶,æ·»åŠ åˆ°pathç¯å¢ƒ</p><h3 id="æ·»åŠ æœåŠ¡"><a href="#æ·»åŠ æœåŠ¡" class="headerlink" title="æ·»åŠ æœåŠ¡"></a>æ·»åŠ æœåŠ¡</h3><p>ä»¥gogsæœåŠ¡å®‰è£…ä¸ºä¾‹å­</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">ECHO</span> off</span><br><span class="line"></span><br><span class="line">:: This script relies on nssm.exe to work.</span><br><span class="line">:: Please, download it and make it available on the system <span class="built_in">path</span>,</span><br><span class="line">:: or <span class="built_in">copy</span> it to the gogs <span class="built_in">path</span>.</span><br><span class="line">:: https://nssm.cc/download</span><br><span class="line">:: This script itself should run <span class="keyword">in</span> the gogs <span class="built_in">path</span>, too.</span><br><span class="line">:: <span class="keyword">In</span> case of startup failure, please read carefully the log file.</span><br><span class="line">:: Make sure Gogs work running manually with &quot;gogs web&quot; before running</span><br><span class="line">:: this script.</span><br><span class="line">:: And, please, read carefully the installation docs first:</span><br><span class="line">:: https://gogs.io/docs/installation</span><br><span class="line">:: To unistall the service, run &quot;nssm remove gogs&quot; and restart Windows.</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">Set</span> the folder where you extracted Gogs. Omit the last slash.</span><br><span class="line"><span class="built_in">SET</span> gogspath=D:\gogs</span><br><span class="line"></span><br><span class="line">nssm install gogs &quot;<span class="variable">%gogspath%</span>\gogs.exe&quot;</span><br><span class="line">nssm <span class="built_in">set</span> gogs AppParameters &quot;web&quot;</span><br><span class="line">nssm <span class="built_in">set</span> gogs Description &quot;A painless self-hosted Git service.&quot;</span><br><span class="line">nssm <span class="built_in">set</span> gogs DisplayName &quot;Gogs - Go Git Service&quot;</span><br><span class="line">nssm <span class="built_in">set</span> gogs <span class="built_in">Start</span> SERVICE_DELAYED_AUTO_START</span><br><span class="line">nssm <span class="built_in">set</span> gogs AppStdout &quot;<span class="variable">%gogspath%</span>\gogs.log&quot;</span><br><span class="line">nssm <span class="built_in">start</span> gogs</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><blockquote><p><code>nssm install gogs</code>GUIæ–¹å¼å®‰è£…æœåŠ¡<br><code>nssm edit gogs</code>å¯ä»¥æ‰“å¼€GUIç•Œé¢,æ–¹ä¾¿é…ç½®</p></blockquote><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://nssm.cc/">http://nssm.cc</a></li><li><a href="https://gogs.io/docs/installation/run_as_windows_service">https://gogs.io/docs/installation/run_as_windows_service</a></li><li><code>nssm --help</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹ç»ˆç«¯æ˜¾ç¤ºxlsxå†…å®¹</title>
      <link href="/2016/09/07/centos/centos-xlsx2csv/"/>
      <url>/2016/09/07/centos/centos-xlsx2csv/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹, éœ€è¦åœ¨ç»ˆç«¯ä¸‹æŸ¥çœ‹xlsxä¸­çš„å†…å®¹<br>è¯¥è„šæœ¬ç›®çš„åœ¨æ­¤</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-pip -y</span><br><span class="line">pip install xlsx2csv</span><br></pre></td></tr></table></figure><h3 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h3><figure class="highlight bash"><figcaption><span>xlsx_to_csv.sh</span><a href="/downloads/code/xlsx_to_csv.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash - </span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#          FILE: xlsx_to_csv.sh</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#         USAGE: ./xlsx_to_csv.sh </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#   DESCRIPTION: linux å‘½ä»¤è¡Œä¸‹æŸ¥çœ‹xlsxæ–‡ä»¶</span></span><br><span class="line"><span class="comment">#                é€šè¿‡xlsx2csv</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#       OPTIONS: ---</span></span><br><span class="line"><span class="comment">#  REQUIREMENTS: ---</span></span><br><span class="line"><span class="comment">#          BUGS: ---</span></span><br><span class="line"><span class="comment">#         NOTES: ---</span></span><br><span class="line"><span class="comment">#        AUTHOR: YOUR NAME (), </span></span><br><span class="line"><span class="comment">#  ORGANIZATION: </span></span><br><span class="line"><span class="comment">#       CREATED: 2016/09/ 2 18:52</span></span><br><span class="line"><span class="comment">#      REVISION:  ---</span></span><br><span class="line"><span class="comment">#===============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -o nounset                              <span class="comment"># Treat unset variables as an error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç”Ÿæˆcsvæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">xlsx_to_csv</span></span>(){</span><br><span class="line">    <span class="comment">## åˆ é™¤æ‰€æœ‰æ—§ç‰ˆæ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $(ls | grep <span class="string">&quot;^xlsx2csv&quot;</span>); <span class="keyword">do</span></span><br><span class="line">        rm <span class="variable">$i</span> -f</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    file_name=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    xlsx2csv -s 0 -i <span class="string">&quot;<span class="variable">${file_name}</span>&quot;</span> | awk <span class="string">&#x27;/^--------/{++i}{print &gt; &quot;xlsx2csv&quot;i}&#x27;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">show</span></span>(){</span><br><span class="line">    file_name=<span class="variable">$1</span></span><br><span class="line">    <span class="comment"># cat $file_name | sed &#x27;2,10d&#x27; | sed &#x27;4,6d&#x27; | sed &#x27;s/,,,//g&#x27; | sed &#x27;s/,$//g&#x27; | column -t -s &quot;,&quot; -o &quot;|&quot; | more</span></span><br><span class="line">    cat <span class="variable">$file_name</span> | sed -e <span class="string">&#x27;2,10d&#x27;</span> | sed -e <span class="string">&#x27;4,6d&#x27;</span> -e <span class="string">&#x27;s/,,,//g&#x27;</span> -e <span class="string">&#x27;s/,$//g&#x27;</span> | column -t -s <span class="string">&quot;,&quot;</span> -o <span class="string">&quot;|&quot;</span> | more</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¾ç¤ºsubsheet</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">list_file</span></span>(){</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $(ls | grep <span class="string">&quot;^xlsx2csv&quot;</span>); <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$i</span> &quot;</span></span><br><span class="line">        grep -e <span class="string">&quot;^--------&quot;</span> <span class="variable">$i</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## help</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;----------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;gen filenmae&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;list&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;show xlsx2csvN&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;----------------------------&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">&quot;gen&quot;</span>) xlsx_to_csv <span class="string">&quot;<span class="variable">$2</span>&quot;</span>;;</span><br><span class="line">    <span class="string">&quot;show&quot;</span>) show <span class="variable">$2</span>;;</span><br><span class="line">    <span class="string">&quot;list&quot;</span>) list_file;;</span><br><span class="line">    *) <span class="built_in">help</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Administrator@PC-20160616ZYHV /c/e/q/s/test# bash zm_xlsx.sh 1</span><br><span class="line">----------------------------</span><br><span class="line">gen filenmae</span><br><span class="line">list</span><br><span class="line">show xlsx2csvN</span><br><span class="line">----------------------------</span><br><span class="line">Administrator@PC-20160616ZYHV /c/e/q/s/test# bash zm_xlsx.sh gen &quot;/cygdrive/e/qqjy/plan/004 é…ç½®è¡¨/039 é€èŠ±é…ç½®è¡¨.xlsx&quot; </span><br><span class="line">Administrator@PC-20160616ZYHV /c/e/q/s/test# bash zm_xlsx.sh list</span><br><span class="line">xlsx2csv1 -------- 1 - é€èŠ±é…ç½®è¡¨</span><br><span class="line">Administrator@PC-20160616ZYHV /c/e/q/s/test# bash zm_xlsx.sh show xlsx2csv1 </span><br><span class="line">-------- 1 - é€èŠ±é…ç½®è¡¨</span><br><span class="line">åç«¯Â·æ•°æ®ç±»å‹         |num |str          |num       |num           |num           |num           |num           |num</span><br><span class="line">åç«¯Â·å­—æ®µå           |id  |name         |tiem_id   |intimacy      |charm         |sweet_target  |sweet_me      |message</span><br><span class="line">å­—æ®µå                 |é²œèŠ±|åç§°         |å¯¹åº”é“å…·ID|å¢åŠ å½¼æ­¤äº²å¯†åº¦|å¢åŠ ç›®æ ‡é­…åŠ›å€¼|å¢åŠ ç›®æ ‡ç”œèœœåº¦|å¢åŠ è‡ªèº«ç”œèœœåº¦|ç³»ç»Ÿæ¨é€æ¶ˆæ¯</span><br><span class="line">                       |1   |ç«ç‘°*è‡³çœŸä¹‹æ‹|1290001   |2             |2             |1             |2             |69</span><br><span class="line">                       |2   |ç«ç‘°*ç™½å¤´ä¹‹æ‹|1290002   |100           |100           |50            |100           |70</span><br><span class="line">                       |3   |ç«ç‘°*åœ°ä¹…ä¹‹æ‹|1290003   |600           |600           |300           |600           |71</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> xlsx </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹å®‰è£…/é…ç½®cygwin</title>
      <link href="/2016/08/23/windows/windows-ssh/"/>
      <url>/2016/08/23/windows/windows-ssh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Windowsä¸‹å®‰è£…/é…ç½®cygwin</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ol><li>åœ¨<a href="https://www.cygwin.com/">Cygwin</a>ä¸‹è½½</li><li>[åºŸå¼ƒ] <code>Use Url</code>ä½¿ç”¨<a href="http://mirrors.163.com/cygwin/">http://mirrors.163.com/cygwin/</a></li><li>é€‰æ‹©<code>openssh</code>, <code>vim</code>, <code>curl</code>, <code>wget</code>, <code>git</code>å®‰è£…</li></ol><blockquote><p><code>CYGWIN</code>çš„ç”¨æˆ·ç›®å½•æ˜¯<code>C:\cygwin\home</code>, å¹¶éæ˜¯<code>C:\User</code>ç›®å½•, è¿™ä¸ªå’Œ<code>git for windows</code>æ˜¯ä¸ä¸€æ ·çš„</p></blockquote><h3 id="SSHé…ç½®"><a href="#SSHé…ç½®" class="headerlink" title="SSHé…ç½®"></a>SSHé…ç½®</h3><ol><li><code>ssh-host-config</code>, ä¸€è·¯<code>yes</code></li><li>é…ç½®(<code>/etc/sshd_config</code>)<blockquote><p>StrictModes no<br>PubkeyAuthentication yes<br>AuthorizedKeysFile    .ssh/authorized_keys<br>PasswordAuthentication no</p></blockquote></li><li><code>cygrunsrv.exe -S sshd</code></li></ol><h3 id="apt-cygå®‰è£…"><a href="#apt-cygå®‰è£…" class="headerlink" title="apt-cygå®‰è£…"></a>apt-cygå®‰è£…</h3><p><code>apt-cyg</code>æ˜¯<code>CYGWIN</code>ä¸‹çš„åŒ…ç®¡ç†å™¨, ç±»ä¼¼debainä¸‹çš„<code>apt-get</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/transcode-open/apt-cyg.git</span><br><span class="line">cd apt-cyg</span><br><span class="line">install apt-cyg /bin</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä½¿ç”¨ä¸­,å­˜åœ¨<code>remove</code>ä¸æˆåŠŸçš„æƒ…å†µ,å¯ä»¥ä½¿ç”¨<code>setup_x86.exe</code>æ‰§è¡Œå¸è½½æ“ä½œ</strong></p></blockquote><h3 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-cyg install zsh wget curl git</span><br><span class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¿è¡Œåæ…¢</strong></p></blockquote><h3 id="å·²çŸ¥é—®é¢˜"><a href="#å·²çŸ¥é—®é¢˜" class="headerlink" title="å·²çŸ¥é—®é¢˜"></a>å·²çŸ¥é—®é¢˜</h3><ol><li><code>Cygwin ssh Connection closed by ::1</code></li></ol><p>åœ¨Win7ä¸‹Cygwinä¸­ï¼Œä½¿ç”¨ssh localhostå‘½ä»¤ï¼Œå‡ºç°Connection closed by127.0.0.1çš„é—®é¢˜ã€‚<br>è§£å†³æ–¹æ¡ˆ:<br>    1. å¼€å§‹â€”â€”è¿è¡Œâ€”â€”services.msc<br>    2. å³é”®CYGWINsshdâ€”â€”å±æ€§â€”â€”ç™»å½•é€‰é¡¹å¡â€”â€”é€‰æ‹©â€œæ­¤è´¦æˆ·â€â€”â€”æµè§ˆâ€”â€”é«˜çº§â€”â€”ç«‹å³æŸ¥æ‰¾â€”â€”é€‰æ‹©ä½ çš„è´¦æˆ·åï¼ˆå¿…é¡»ä¸ºæ²»ç†å‘˜æƒé™ï¼‰â€”â€”è¾“è¿›å¯†ç ï¼ˆå¿…é¡»è¦æœ‰ï¼Œç©ºå¯†ç ä¸æ‰¿å—ï¼‰â€”â€”ç¡®å®šã€‚<br>    3. é‡å¯CYGWINsshdæ•ˆåŠ³å³å¯ã€‚è¿™æ ·å°±ä»¥ä½ çš„è´¦æˆ·çš„åä¹‰å¯åŠ¨äº†è¿™ä¸ªæ•ˆåŠ³ã€‚è€Œåssh localhostæˆåŠŸã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://blog.csdn.net/superbinbin1/article/details/10147421">http://blog.csdn.net/superbinbin1/article/details/10147421</a></li><li><a href="http://cyxu2004.blog.163.com/blog/static/4576871820144211116439/">http://cyxu2004.blog.163.com/blog/static/4576871820144211116439/</a></li><li><a href="http://www.blogjava.net/Man/archive/2013/03/12/396334.html">http://www.blogjava.net/Man/archive/2013/03/12/396334.html</a></li><li><a href="https://zhidao.baidu.com/question/305625180780734364.html">https://zhidao.baidu.com/question/305625180780734364.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
          <category> ssh </category>
          
          <category> cygwin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> windows </tag>
            
            <tag> cygwin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹æŒ‚è½½ftpæœåŠ¡å™¨</title>
      <link href="/2016/08/23/centos/centos-ftp/"/>
      <url>/2016/08/23/centos/centos-ftp/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½¿ç”¨curlftpfsæŒ‚è½½ftpæœåŠ¡å™¨åˆ°æœ¬åœ°</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install curlftpfs</span><br></pre></td></tr></table></figure><h3 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curlftpfs -o codepage=utf8 ftp://username:password@192.168.192.168 /ftp</span><br><span class="line"><span class="comment">## codepage:        ç¼–ç </span></span><br><span class="line"><span class="comment">## username:        FTPç”¨æˆ·å</span></span><br><span class="line"><span class="comment">## password:        FTPå¯†ç </span></span><br><span class="line"><span class="comment">## 192.168.1.111:   FTPåœ°å€</span></span><br><span class="line"><span class="comment">## /ftp:            å‡†å¤‡æŒ‚è½½åˆ°çš„è·¯å¾„</span></span><br></pre></td></tr></table></figure><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## fusermount -u /ftp</span></span><br><span class="line">umount /ftp</span><br></pre></td></tr></table></figure><h3 id="å¼€æœºæŒ‚è½½"><a href="#å¼€æœºæŒ‚è½½" class="headerlink" title="å¼€æœºæŒ‚è½½"></a>å¼€æœºæŒ‚è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;curlftpfs#username:password@192.168.1.111 /ftp fuse allow_other,uid=0,gid=0 0 0&quot;</span> &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ftp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æœºä¸Šä½¿ç”¨gidderæ­å»ºgitserver</title>
      <link href="/2016/07/23/mobile/mobile-gidder/"/>
      <url>/2016/07/23/mobile/mobile-gidder/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¯·è½¬åˆ°<a href="/2020/03/13/centos/centos-gitserver-list/">å‡ ç§å¸¸ç”¨git server</a></p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹æœº </category>
          
          <category> gidder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‰‹æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang 17+ map,recordäº’è½¬</title>
      <link href="/2016/06/08/erlang/erlang-map2record/"/>
      <url>/2016/06/08/erlang/erlang-map2record/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨OTP17+ç‰ˆæœ¬,å¢åŠ äº†mapsæ•°æ®ç»“æ„,mapsç›¸å¯¹recordæœ‰å¾ˆå¤šä¼˜è‰¯ç‰¹æ€§<br>ä½†æ˜¯,å¾ˆå¤šæ¨¡å—(ets,mnesia)è¿˜æ˜¯ä»¥recordä¸ºåŸºç¡€<br>maps,recordäº’è½¬å¾ˆæœ‰å¿…è¦</p><span id="more"></span><p>ç›´æ¥è´´ä»£ç :</p><figure class="highlight erlang"><figcaption><span>m2r.erl</span><a href="/downloads/code/m2r.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="comment">%% @doc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% @end</span></span><br><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="keyword">-module</span><span class="params">(m2r)</span>.</span><br><span class="line"><span class="keyword">-author</span><span class="params">(zhaoming)</span>.</span><br><span class="line">-version<span class="params">(<span class="number">1.0</span>)</span>.</span><br><span class="line">-date<span class="params">(&#x27;<span class="number">2016</span>-<span class="number">06</span>-<span class="number">08</span>&#x27;)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([</span></span><br><span class="line"><span class="params">         test/<span class="number">0</span></span></span><br><span class="line"><span class="params">        ])</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-record</span><span class="params">(mapRecord, {</span></span><br><span class="line"><span class="params">          a = <span class="number">1</span></span></span><br><span class="line"><span class="params">          ,b = <span class="number">3</span></span></span><br><span class="line"><span class="params">          ,c = <span class="number">2</span></span></span><br><span class="line"><span class="params">          ,d = <span class="number">4</span></span></span><br><span class="line"><span class="params">         })</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(map_to_record(Map, RecordName), </span></span><br><span class="line"><span class="params">        <span class="comment">%% list_to_tuple(</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%   lists:map( </span></span></span><br><span class="line"><span class="params">        <span class="comment">%%     fun({__K__, __V__}) -&gt; maps:get(__K__, Map, __V__) end, </span></span></span><br><span class="line"><span class="params">        <span class="comment">%%     lists:zip([RecordName|record_info(fields, RecordName)], tuple_to_list(#RecordName{}))</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%    )</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%  )</span></span></span><br><span class="line"><span class="params">        list_to_tuple( [maps:get(__K__, Map, __V__) || {__K__, __V__} &lt;- lists:zip([RecordName|record_info(fields, RecordName)], tuple_to_list(#RecordName{})) ] )</span></span><br><span class="line"><span class="params">       )</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(record_to_map(RecordName, Record),</span></span><br><span class="line"><span class="params">        <span class="comment">%% lists:foldl(</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%   fun({__K__, __V__}, __Map__) -&gt; maps:put(__K__, __V__, __Map__) end,</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%   #{}, </span></span></span><br><span class="line"><span class="params">        <span class="comment">%%   lists:zip([&#x27;__name__&#x27;|record_info(fields, RecordName)], tuple_to_list(Record))</span></span></span><br><span class="line"><span class="params">        <span class="comment">%%  )</span></span></span><br><span class="line"><span class="params">        maps:from_list(lists:zip([&#x27;__name__&#x27;|record_info(fields, RecordName)], tuple_to_list(Record)))</span></span><br><span class="line"><span class="params">       )</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">test</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    Map = #{&#x27;__name__&#x27; =&gt; mapRecord, <span class="string">&quot;a&quot;</span> =&gt; <span class="number">1</span>, b =&gt; <span class="number">2</span>},</span><br><span class="line">    io:format(<span class="string">&quot;~p~n&quot;</span>, [Map]),</span><br><span class="line">    K = <span class="number">1</span>,</span><br><span class="line">    R = ?map_to_record(Map, mapRecord),</span><br><span class="line">    io:format(<span class="string">&quot;~p~n&quot;</span>, [R]),</span><br><span class="line">    ?record_to_map(mapRecord, #mapRecord{}).</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rebar3é…ç½®ä½¿ç”¨</title>
      <link href="/2016/06/06/erlang/erlang-rebar3/"/>
      <url>/2016/06/06/erlang/erlang-rebar3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>rebar3</code>æ˜¯<code>erlang</code>ä¸‹çš„é…ç½®ç®¡ç†å·¥å…·.</p><span id="more"></span><h4 id="ç¼–è¯‘å®‰è£…rebar3"><a href="#ç¼–è¯‘å®‰è£…rebar3" class="headerlink" title="ç¼–è¯‘å®‰è£…rebar3"></a>ç¼–è¯‘å®‰è£…<code>rebar3</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/erlang/rebar3.git</span><br><span class="line"><span class="built_in">cd</span> rebar3</span><br><span class="line"><span class="comment">## linux</span></span><br><span class="line">./bootstrap</span><br><span class="line">rebar3 <span class="built_in">local</span> install</span><br><span class="line"><span class="comment">## æŒ‰ç…§æç¤º,å¢åŠ $PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## windows</span></span><br><span class="line">bootstrap.bat</span><br><span class="line"><span class="comment">## å°†ç”Ÿæˆçš„rebar3, rebar3.cmdæ”¾åˆ°pathç›®å½•ä¸‹</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## new template my_project_name</span></span><br><span class="line">rebar3 new release myapp</span><br></pre></td></tr></table></figure><p>ç›®å½•ç»“æ„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$tree</span> </span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ apps</span><br><span class="line">â”‚Â Â  â””â”€â”€ myapp</span><br><span class="line">â”‚Â Â      â””â”€â”€ src</span><br><span class="line">â”‚Â Â          â”œâ”€â”€ myapp_app.erl</span><br><span class="line">â”‚Â Â          â”œâ”€â”€ myapp.app.src</span><br><span class="line">â”‚Â Â          â””â”€â”€ myapp_sup.erl</span><br><span class="line">â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ sys.config      applicationsé…ç½®</span><br><span class="line">â”‚Â Â  â””â”€â”€ vm.args         å¯åŠ¨å‚æ•°</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ rebar.config        é¡¹ç›®å¼€å‘é…ç½®å‚æ•°</span><br><span class="line">â””â”€â”€ rebar.lock</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## rebar.config</span><br><span class="line">&#123;deps, [&#123;cowboy, <span class="string">&quot;1.0.1&quot;</span>&#125;]&#125;.</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## myapp.app.src</span><br><span class="line">&#123;applications, [kernel, stdlib, cowboy]&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## compileè‡ªåŠ¨getä¾èµ–</span></span><br><span class="line">rebar3 compile</span><br></pre></td></tr></table></figure><h4 id="é…ç½®applications"><a href="#é…ç½®applications" class="headerlink" title="é…ç½®applications"></a>é…ç½®applications</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">## sys.config</span><br><span class="line">[</span><br><span class="line">  &#123; myapp, []&#125;,</span><br><span class="line">  &#123;sasl,[</span><br><span class="line">    <span class="comment">%% minimise shell error logging</span></span><br><span class="line">    &#123;sasl_error_logger,false&#125;,</span><br><span class="line">    <span class="comment">%% only report errors</span></span><br><span class="line">    &#123;errlog_type,error&#125;,</span><br><span class="line">    <span class="comment">%% the log file directory</span></span><br><span class="line">    &#123;error_logger_mf_dir,<span class="string">&quot;./erl_logs&quot;</span>&#125;,</span><br><span class="line">    <span class="comment">%% bytes per logfile</span></span><br><span class="line">    &#123;error_logger_mf_maxbytes,<span class="number">10485760</span>&#125;, <span class="comment">% 10MB</span></span><br><span class="line">    <span class="comment">%% max mumber of log files</span></span><br><span class="line">    &#123;error_logger_mf_maxfiles,<span class="number">10</span>&#125;</span><br><span class="line">    ]&#125;,</span><br><span class="line">  &#123;kernel,[</span><br><span class="line">    &#123;inet_dist_listen_min, <span class="number">4370</span>&#125;,</span><br><span class="line">    &#123;inet_dist_listen_max, <span class="number">5370</span>&#125;</span><br><span class="line">    ]&#125;</span><br><span class="line">].</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rebar3 shell</span><br></pre></td></tr></table></figure><h4 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% å‘å¸ƒé€‰é¡¹</span></span><br><span class="line">&#123;relx, [</span><br><span class="line">        ...</span><br><span class="line">        &#123;include_erts, false&#125;,</span><br><span class="line">        &#123;include_src, false&#125;,</span><br><span class="line">        &#123;system_libs, false&#125;</span><br><span class="line">        ...</span><br><span class="line">       ]&#125;.</span><br><span class="line">&#123;profiles, [</span><br><span class="line">            &#123;prod, [</span><br><span class="line">                    &#123;relx, [</span><br><span class="line">                            &#123;include_erts, false&#125;</span><br><span class="line">                           ]&#125;</span><br><span class="line">                   ]&#125;</span><br><span class="line">           ]&#125;.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rebar3 release</span><br><span class="line">rebar3 as prod tar</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
            <tag> rebar3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlang shellä¸‹rrä½¿ç”¨</title>
      <link href="/2016/05/10/erlang/erlang-rr/"/>
      <url>/2016/05/10/erlang/erlang-rr/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ol><li><code>rr/1</code>æ˜¯<code>erlang shell</code>ä¸‹åŠ è½½<code>record</code>çš„å®šä¹‰;</li><li><code>rr</code>åªèƒ½åœ¨<code>erlang shell</code>ä¸‹è°ƒç”¨;</li><li>é¡¹ç›®ä¸­æœ‰Nå¤š<code>record</code>å®šä¹‰, éœ€è¦å¿«é€ŸåŠ è½½æ‰€æœ‰çš„å®šä¹‰;</li></ol><span id="more"></span><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">rr</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    HrlList = get_hrl_list(),</span><br><span class="line">    A = &lt;&lt;<span class="string">&quot;å¤åˆ¶ä¸‹é¢çš„ä»£ç æ‰§è¡Œ:&quot;</span>&gt;&gt;,</span><br><span class="line">    io:format(<span class="string">&quot;~ts~n&quot;</span>, [A]),</span><br><span class="line">    io:format(<span class="string">&quot;rp([rr(X) || X &lt;- [\&quot;~s\&quot;] ]).~n&quot;</span>, [string:join(HrlList, <span class="string">&quot;\&quot;,\&quot;&quot;</span>)]).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_hrl_list</span><span class="params">()</span> -&gt;</span></span><br><span class="line">    &#123;ok, [&#123;DirList, OptList&#125;]&#125; = file:consult(<span class="string">&quot;./Emakefile&quot;</span>),</span><br><span class="line">    F = <span class="keyword">fun</span>(Dir, L) -&gt;</span><br><span class="line">                WildCard = io_lib:format(<span class="string">&quot;~s.hrl&quot;</span>, [Dir]),</span><br><span class="line">                L ++ filelib:wildcard(WildCard)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">    F_1 = <span class="keyword">fun</span>(Opt, L) -&gt;</span><br><span class="line">                  <span class="keyword">case</span> Opt <span class="keyword">of</span></span><br><span class="line">                      &#123;i, Include&#125; -&gt;</span><br><span class="line">                          WildCard = io_lib:format(<span class="string">&quot;~s/*.hrl&quot;</span>, [Include]),</span><br><span class="line">                          L ++ filelib:wildcard(WildCard);</span><br><span class="line">                      _ -&gt; L</span><br><span class="line">                  <span class="keyword">end</span></span><br><span class="line">          <span class="keyword">end</span>,</span><br><span class="line">    FileList = lists:foldl(F, [], DirList) ++ lists:foldl(F_1, [], OptList),</span><br><span class="line">    FileList.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangç¼–è¯‘æŒ‡å®šæ–‡ä»¶</title>
      <link href="/2016/05/10/erlang/erlang-make/"/>
      <url>/2016/05/10/erlang/erlang-make/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å·¥ä½œä¸­,ç»å¸¸é‡åˆ°éœ€è¦åœä¸‹æ‰‹ä¸Šçš„åŠŸèƒ½ä¿®å¤ä»¥å¾€åŠŸèƒ½çš„bug<br>åªç¼–è¯‘æŒ‡å®šçš„æ–‡ä»¶å°±å¾ˆæœ‰å¿…è¦</p><span id="more"></span><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% @doc ç¼–è¯‘æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line"><span class="comment">%% @spec m([File::string()]) -&gt; up_to_date | error.</span></span><br><span class="line"><span class="comment">%% &lt;pre&gt;</span></span><br><span class="line"><span class="comment">%% m([&quot;a&quot;, &quot;b&quot;])</span></span><br><span class="line"><span class="comment">%% &lt;/pre&gt;</span></span><br><span class="line"><span class="function"><span class="title">m</span><span class="params">(FileList)</span> -&gt;</span></span><br><span class="line">    ComFileList = get_file_list(FileList, []),</span><br><span class="line">    Rtn = make:files(ComFileList),</span><br><span class="line">    Rtn.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_file_list</span><span class="params">([], FileList)</span> -&gt;</span> FileList;</span><br><span class="line"><span class="function"><span class="title">get_file_list</span><span class="params">([File|List], FileList)</span> -&gt;</span></span><br><span class="line">    &#123;ok, [&#123;DirList, _&#125;]&#125; = file:consult(<span class="string">&quot;./Emakefile&quot;</span>),</span><br><span class="line">    F = <span class="keyword">fun</span>(Dir, L) -&gt;</span><br><span class="line">                WildCard = io_lib:format(<span class="string">&quot;~s*~s*.erl&quot;</span>, [Dir, File]),</span><br><span class="line">                L ++ filelib:wildcard(WildCard)</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">    NewFileList = lists:foldl(F, [], DirList) ++ FileList,</span><br><span class="line">    get_file_list(List, NewFileList).</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹ä½¿ç”¨sendmailå‘é€htmlé‚®ä»¶</title>
      <link href="/2016/04/19/centos/centos-sendmail-html/"/>
      <url>/2016/04/19/centos/centos-sendmail-html/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ©ç”¨sendmailå‘é€å¸¦htmlæ ¼å¼çš„é‚®ä»¶</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install sendmail</span><br><span class="line">chkconfig sendmail on</span><br><span class="line">service sendmail start</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; mail.txt &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">From: kingwen@msn.com</span></span><br><span class="line"><span class="string">To: aaaa@qq.com</span></span><br><span class="line"><span class="string">Content-type: text/html;charset=UTF-8</span></span><br><span class="line"><span class="string">Subject: test</span></span><br><span class="line"><span class="string">&lt;style type=&quot;text/css&quot;&gt;</span></span><br><span class="line"><span class="string">.container div&#123; width: 300px; margin: 5px; border-style: solid; border-width: 0px; float: left; &#125;</span></span><br><span class="line"><span class="string">.container img&#123; width: 300px; height: auto; &#125;</span></span><br><span class="line"><span class="string">.container p&#123; text-align: center; margin: 0px; font-size: 20px; font-style: italic; &#125;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;https://item.taobao.com/item.htm?id=529495434637&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;https://gd4.alicdn.com/bao/uploaded/i4/TB1r.e5LVXXXXXDXpXXXXXXXXXX_!!0-item_pic.jpg&quot; alt=&quot;æ´»åŠ¨çˆ†æ¬¾2016æœ€æ–°çŸ­è¢–Aå­—è¿è¡£è£™æ½®æµç²¾å“ä¸ªæ€§&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;æ´»åŠ¨çˆ†æ¬¾2016æœ€æ–°çŸ­è¢–Aå­—è¿è¡£è£™æ½®æµç²¾å“ä¸ªæ€§&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">cat mail.txt | sendmail -t</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.linux521.com/2009/system/201206/18170.html">http://www.linux521.com/2009/system/201206/18170.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹SSHä»£ç†ä¸Šç½‘</title>
      <link href="/2016/04/13/centos/centos-ssh-proxy/"/>
      <url>/2016/04/13/centos/centos-ssh-proxy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¦‚æœæœ‰ä¸€å°å›½å¤–çš„æœåŠ¡å™¨, å¯ä»¥ä½¿ç”¨SSHå®ç°ä»£ç†ä¸Šç½‘.<br>è™šæ‹Ÿæœºç”¨æ¥è®¾ç½®ä»£ç†, ç‰©ç†æœºä½¿ç”¨ä»£ç†ä¸Šç½‘.<br>ä¹Ÿå¯ä»¥ä¸ç”¨è™šæ‹Ÿæœº, ç”¨windowsä¸‹å·²æœ‰çš„è½¯ä»¶.</p><span id="more"></span><h3 id="éœ€è¦è½¯ä»¶"><a href="#éœ€è¦è½¯ä»¶" class="headerlink" title="éœ€è¦è½¯ä»¶"></a>éœ€è¦è½¯ä»¶</h3><ul><li>virtualbox/vmware(å®‰è£…äº†linuxç³»ç»Ÿ)</li><li>chrome(å®‰è£…switchsharp)</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install tsocks sshpass screen -y</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">## -------------</span></span><br><span class="line"><span class="comment">## proxy.sh</span></span><br><span class="line"><span class="comment">## -------------</span></span><br><span class="line"><span class="built_in">set</span> -o nounset</span><br><span class="line">isOpen=$(netstat -ntlp | grep :1080)</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$isOpen</span> == <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    screen -dmS proxy sshpass -p password ssh -D *:1080 user@ip</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;finish&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line">tsocks wget -O google.html www.google.com</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/tsocks.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">server = 127.0.0.1</span></span><br><span class="line"><span class="string">server_type = 5</span></span><br><span class="line"><span class="string">server_port = 1080</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p><code>crontab -e</code>å¢åŠ :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * bash /your/path/proxy.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ssh </tag>
            
            <tag> proxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹å‘½ä»¤è¡Œå­—å…¸sdcv</title>
      <link href="/2016/03/31/centos/centos-dict/"/>
      <url>/2016/03/31/centos/centos-dict/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è‹±è¯­å¤ªçƒ‚,ç»å¸¸éœ€è¦ç”¨åˆ°å­—å…¸<br><code>sdcv</code>æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å­—å…¸,è°ƒç”¨çš„æ˜¯<code>stardict</code>çš„æ•°æ®æ–‡ä»¶<br><code>sdcv</code>==<code>stardict command line version</code></p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install -y glib2-devel gcc-c++ bzip2 tar</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/koreader/sdcv.git ~/sdcv</span><br><span class="line"><span class="built_in">cd</span> ~/sdcv </span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">rm ~/sdcv -rf</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å­—å…¸"><a href="#æ·»åŠ å­—å…¸" class="headerlink" title="æ·»åŠ å­—å…¸"></a>æ·»åŠ å­—å…¸</h3><ol><li>é¦–å…ˆç¡®å®šæ˜¯å¦å­˜åœ¨é»˜è®¤å­—å…¸ç›®å½•<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir -p /usr/share/stardict/dic</span><br><span class="line">wget http://download.huzheng.org/zh_CN/stardict-langdao-ec-gb-2.4.2.tar.bz2</span><br><span class="line">tar -xvjf stardict-langdao-ec-gb-2.4.2.tar.bz2 -C /usr/share/stardict/dic</span><br><span class="line">rm stardict-langdao-ec-gb-2.4.2.tar.bz2 -f</span><br><span class="line"></span><br><span class="line">wget http://download.huzheng.org/zh_CN/stardict-langdao-ce-gb-2.4.2.tar.bz2</span><br><span class="line">tar -xvjf stardict-langdao-ce-gb-2.4.2.tar.bz2 -C /usr/share/stardict/dic</span><br><span class="line">rm stardict-langdao-ce-gb-2.4.2.tar.bz2 -f</span><br><span class="line">yum install sdcv</span><br></pre></td></tr></table></figure>æ›´å¤šå­—å…¸å¯ä»¥è®¿é—®<a href="http://download.huzheng.org/zh_CN/">http://download.huzheng.org/zh_CN/</a></li></ol><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdcv hello</span><br></pre></td></tr></table></figure><p>è¯¦ç»†å‘½ä»¤å¯ä»¥ä½¿ç”¨<code>sdcv --help</code></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://ubuntumanual.org/posts/690/get-a-dictionary-on-your-console-using-sdcv">http://ubuntumanual.org/posts/690/get-a-dictionary-on-your-console-using-sdcv</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> sdcv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•ä¸‹windowsä¸‹å¸¸ç”¨è½¯ä»¶</title>
      <link href="/2016/03/30/windows/windows-software/"/>
      <url>/2016/03/30/windows/windows-software/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>PCå¸¸ç”¨è½¯ä»¶,å¤‡ä»½ä¸‹.</p><span id="more"></span><h2 id="èŠå¤©"><a href="#èŠå¤©" class="headerlink" title="èŠå¤©"></a>èŠå¤©</h2><ol><li><del>QQ</del></li><li>TIM</li><li>Wechat</li></ol><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><ol><li><a href="https://motrix.app/zh-CN/">motrix</a></li></ol><h2 id="ç¼–è¾‘å™¨"><a href="#ç¼–è¾‘å™¨" class="headerlink" title="ç¼–è¾‘å™¨"></a>ç¼–è¾‘å™¨</h2><ol><li><a href="https://github.com/kingwen0302/vim">VIM</a></li><li>Sublime Text</li><li><del>VS Code</del></li><li><del>Haroopad(MDç¼–è¾‘å™¨)</del></li></ol><h2 id="è™šæ‹Ÿæœº"><a href="#è™šæ‹Ÿæœº" class="headerlink" title="è™šæ‹Ÿæœº"></a>è™šæ‹Ÿæœº</h2><ol><li><a href="https://www.vagrantup.com/">Vagrant</a></li><li>virtualbox</li><li><del>VMware</del></li></ol><h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><ol><li>Chrome</li><li>Firefox Developer Edition</li></ol><h2 id="æ•ˆç‡"><a href="#æ•ˆç‡" class="headerlink" title="æ•ˆç‡"></a>æ•ˆç‡</h2><ol><li><del>Wox(å¿«æ·å¯åŠ¨å™¨)</del></li><li><del>WinDock</del></li><li>VistaSwitcher</li><li>Foxmail(é‚®ä»¶å®¢æˆ·ç«¯)</li><li><del>FileZilla(ftpå®¢æˆ·ç«¯)</del></li><li>FileZilla Server</li></ol><h2 id="é˜…è¯»å™¨"><a href="#é˜…è¯»å™¨" class="headerlink" title="é˜…è¯»å™¨"></a>é˜…è¯»å™¨</h2><ol><li>PDF-XChange</li><li><del>wps</del></li><li>calibre</li><li>Libre Office</li></ol><h2 id="å®‰å“æ¨¡æ‹Ÿå™¨"><a href="#å®‰å“æ¨¡æ‹Ÿå™¨" class="headerlink" title="å®‰å“æ¨¡æ‹Ÿå™¨"></a>å®‰å“æ¨¡æ‹Ÿå™¨</h2><ol><li>MuMuæ¨¡æ‹Ÿå™¨</li></ol><h2 id="å·¥ä½œç›¸å…³"><a href="#å·¥ä½œç›¸å…³" class="headerlink" title="å·¥ä½œç›¸å…³"></a>å·¥ä½œç›¸å…³</h2><ol><li><a href="https://gitforwindows.org/">Git for windows</a></li><li>TortoiseSVN</li><li>TortoiseGIT</li><li><a href="http://www.nssm.cc/">nssm</a></li><li><del>Mysql 5.5</del></li><li><a href="https://downloads.mariadb.org/">MariaDB 10.2</a></li><li>Navicat</li><li>WSL</li><li><del>XShell</del></li><li>MTPUTTY + <a href="https://www.putty.org/">PUTTY</a> + WinSCP</li><li><a href="https://conemu.github.io/">ConEmu</a>(DOSä»¿çœŸå™¨,å¥½ç”¨åˆ°æ²¡æœ‹å‹)</li><li><a href="http://meldmerge.org/">Meld</a>(æ–‡ä»¶å¯¹æ¯”å·¥å…·,å¼€æºå…è´¹)</li><li><a href="www.farmanager.com">Far</a>(å‘½ä»¤è¡Œæ–‡ä»¶ç®¡ç†å™¨ï¼Œä¸ªäººä¸æ˜¯å¾ˆæ„Ÿå†’)</li><li>Xming</li></ol><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ol><li><del>èŠ±ç”Ÿå£³(åŠ¨æ€åŸŸå)</del></li><li><del>lantern(ä»£ç†)</del></li><li>shadowsocks</li><li><a href="http://www.privoxy.org/">Privoxy</a></li><li><a href="https://github.com/fatedier/frp">frp</a></li><li><a href="https://hexo.io/">hexo</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>emakefileæµ‹è¯•</title>
      <link href="/2016/03/29/erlang/erlang-emakefile/"/>
      <url>/2016/03/29/erlang/erlang-emakefile/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¡¹ç›®ä¸­éœ€è¦å°†åŒä¸€ä»½çš„æºæ–‡ä»¶å‘å¸ƒåˆ°ä¸åŒçš„ç›®å½•, ä»¥å‰çš„åšæ³•æ˜¯ä¿®æ”¹<code>Emakefile</code>é…ç½®å,ä½¿ç”¨<code>erl -make</code>ç”Ÿæˆ,æœ‰ç‚¹éº»çƒ¦.</p><p>æˆ‘ä»¬çŸ¥é“,ç¼–è¯‘erlangä½¿ç”¨<code>erl -make</code>,è€Œ<code>erl -make</code>å®é™…ä¸Šè°ƒç”¨çš„<code>make:all().</code>, è€Œ<code>make:all().</code>ä¼šè¯»å–å½“å‰ç›®å½•ä¸‹çš„<code>Emakefile</code>æ–‡ä»¶,æ ¹æ®ç›¸åº”çš„é…ç½®æ¥ç¼–è¯‘æ–‡ä»¶.</p><p>å¦‚ä¸Š,ç›®å‰ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚æ— æ³•æ»¡è¶³:</p><ol><li>ä¸€ä¸ªæ–‡ä»¶ç¼–è¯‘åˆ°ä¸åŒçš„ç›®å½•ä¸‹;</li><li>è¯»å–Emakefile,ç„¶åä¿®æ”¹å…¶ä¸­éƒ¨åˆ†å‚æ•°åå†ç¼–è¯‘(æ¯”å¦‚,ä¿®æ”¹outdir);</li><li>å¦‚æœæœ‰Emakefile1, Emakefile2â€¦EmakefileN, æ€ä¹ˆæŒ‰ç…§æ¯ä¸ªç¼–è¯‘é€‰é¡¹ç¼–è¯‘?</li></ol><p>é‚£å¦‚ä½•å³ä½¿ç”¨<code>Emakefile</code>,åˆèƒ½å¤Ÿæ»¡è¶³ä¸Šé¢çš„éœ€æ±‚å‘¢?</p><span id="more"></span><p>æˆ‘ä»¬å…ˆæ¥åšä¸€äº›æµ‹è¯•, ç”¨åˆ°<code>erlang</code>çš„<code>make</code>å’Œ<code>compile</code>æ¨¡å—.<br>ç°åœ¨æˆ‘ä»¬æœ‰ç›®å½•ç»“æ„:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ebin</span><br><span class="line">â”œâ”€â”€ ebin1</span><br><span class="line">â”œâ”€â”€ Emakefile</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ a.erl</span><br></pre></td></tr></table></figure><h3 id="æ­£å¸¸çš„Emakefile"><a href="#æ­£å¸¸çš„Emakefile" class="headerlink" title="æ­£å¸¸çš„Emakefile"></a>æ­£å¸¸çš„Emakefile</h3><p>ä¸€ä¸ªæ­£å¸¸çš„<code>Emakefile</code>æ–‡ä»¶å†…å®¹:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;[<span class="string">&quot;./src/*&quot;</span>], [&#123;outdir, <span class="string">&quot;./ebin&quot;</span>&#125;]&#125;.</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½¿ç”¨<code>erl -make</code>ç¼–è¯‘, ç»“æœ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ebin</span><br><span class="line">â”‚Â Â  â””â”€â”€ a.beam</span><br><span class="line">â”œâ”€â”€ ebin1</span><br><span class="line">â”œâ”€â”€ Emakefile</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ a.erl</span><br></pre></td></tr></table></figure><p>æ­£ç¡®ç¼–è¯‘</p><h3 id="ç¼ºå°‘å‚æ•°çš„Emakefile"><a href="#ç¼ºå°‘å‚æ•°çš„Emakefile" class="headerlink" title="ç¼ºå°‘å‚æ•°çš„Emakefile"></a>ç¼ºå°‘å‚æ•°çš„Emakefile</h3><p>Emakefile</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;[<span class="string">&quot;./src/*&quot;</span>], []&#125;.</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; make:all([&#123;outdir, <span class="string">&quot;./ebin&quot;</span>&#125;]).</span><br><span class="line">Recompile: ./src/a</span><br><span class="line">up_to_date</span><br></pre></td></tr></table></figure><p><strong>ç»“æœå’Œé¢„æƒ³çš„ç»“æ„ä¸€è‡´</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ebin</span><br><span class="line">â”‚Â Â  â””â”€â”€ a.beam</span><br><span class="line">â”œâ”€â”€ ebin1</span><br><span class="line">â”œâ”€â”€ Emakefile</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ a.erl</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å·²ç»å­˜åœ¨çš„Emakefileå‚æ•°"><a href="#ä¿®æ”¹å·²ç»å­˜åœ¨çš„Emakefileå‚æ•°" class="headerlink" title="ä¿®æ”¹å·²ç»å­˜åœ¨çš„Emakefileå‚æ•°?"></a>ä¿®æ”¹å·²ç»å­˜åœ¨çš„Emakefileå‚æ•°?</h3><p>ä¸€ä¸ªæ­£å¸¸çš„Emakefile</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;[<span class="string">&quot;./src/*&quot;</span>], [&#123;outdir, <span class="string">&quot;./ebin&quot;</span>&#125;]&#125;.</span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç›®å½•<code>mkdir ebin1</code>,ä½œä¸ºç¼–è¯‘è¾“å‡ºç›®å½•<br>æ˜¾ç¤ºç¼–è¯‘å®Œæˆ</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; make:all([&#123;outdir, <span class="string">&quot;./ebin1&quot;</span>&#125;]).</span><br><span class="line">Recompile: ./src/a</span><br><span class="line">up_to_date </span><br></pre></td></tr></table></figure><p>çœ‹ä¸‹ç»“æœ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ebin</span><br><span class="line">â”‚Â Â  â””â”€â”€ a.beam</span><br><span class="line">â”œâ”€â”€ ebin1</span><br><span class="line">â”œâ”€â”€ Emakefile</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ a.erl</span><br></pre></td></tr></table></figure><p><em><strong>ç»“æœå¹¶æ²¡æœ‰å¦‚æˆ‘ä»¬é¢„æ–™çš„åœ¨ebin1ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶,è¿™è¯´æ˜makeçš„æ—¶å€™ä¼˜å…ˆEmakefileä¸­çš„å‚æ•°</strong></em></p><h3 id="å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜"><a href="#å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜" class="headerlink" title="å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜"></a>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜</h3><p>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜, è§£å†³æ–¹æ³•:</p><ol><li>Emakefileåªä¿ç•™å…¬æœ‰ç¼–è¯‘é€‰é¡¹, æ¯”å¦‚<code>&#123;i, &quot;include&quot;&#125;</code>ç­‰;</li><li>ä¸ªæ€§éƒ¨åˆ†,é€šè¿‡<code>make:all(Options).</code>çš„<code>Options</code>é€‰é¡¹ä¼ è¿›å», æ¯”å¦‚<code>&#123;outdir, &quot;./ebin&quot;&#125;</code>, <code>&#123;d, debug&#125;</code>ç­‰;</li></ol><p>ç°åœ¨è´´ä¸‹å°è„šæœ¬,å‡‘ä¸‹å­—æ•°:</p><figure class="highlight erlang"><figcaption><span>my_make.erl</span><a href="/downloads/code/my_make.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="comment">%% @doc</span></span><br><span class="line"><span class="comment">%% ä¸ªäººç¼–è¯‘æ¨¡å—</span></span><br><span class="line"><span class="comment">%% ç¼–è¯‘æ‰€æœ‰æ–‡ä»¶åˆ°ebin,ebin1,/data/t/ebin2ç›®å½•</span></span><br><span class="line"><span class="comment">%% erl -s my_make all ebin ebin1 /data/t/ebin2</span></span><br><span class="line"><span class="comment">%% ç¼–è¯‘å•ä¸ªæ–‡ä»¶åˆ°ebinç›®å½•</span></span><br><span class="line"><span class="comment">%% erl -s my_make file src/a ebin</span></span><br><span class="line"><span class="comment">%% @end</span></span><br><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="keyword">-module</span><span class="params">(my_make)</span>.</span><br><span class="line"><span class="keyword">-author</span><span class="params">(zhaoming)</span>.</span><br><span class="line">-version<span class="params">(<span class="number">1.0</span>)</span>.</span><br><span class="line">-date<span class="params">(&#x27;<span class="number">2016</span>-<span class="number">03</span>-<span class="number">29</span>&#x27;)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([all/<span class="number">1</span>, file/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">all</span><span class="params">([])</span> -&gt;</span> </span><br><span class="line">    msg(not_dir),</span><br><span class="line">    erlang:halt();</span><br><span class="line"><span class="function"><span class="title">all</span><span class="params">(OutDirList)</span> -&gt;</span> </span><br><span class="line">    timer:sleep(<span class="number">1000</span>),</span><br><span class="line">    io:format(<span class="string">&quot;~n&quot;</span>),</span><br><span class="line">    Result = do_make(OutDirList),</span><br><span class="line">    msg(Result),</span><br><span class="line">    erlang:halt().</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">do_make</span><span class="params">([])</span> -&gt;</span> up_to_date;</span><br><span class="line"><span class="function"><span class="title">do_make</span><span class="params">([OutDirAtom|OutDirList])</span> -&gt;</span></span><br><span class="line">    OutDir = atom_to_list(OutDirAtom),</span><br><span class="line">    Options = [{outdir, OutDir}, {d, debug}],</span><br><span class="line">    msg(io_lib:format(<span class="string">&quot;Dir:~p&quot;</span>, [filename:absname(OutDir)])),</span><br><span class="line">    <span class="keyword">case</span> filelib:is_dir(OutDir) <span class="keyword">of</span></span><br><span class="line">        <span class="literal">true</span> -&gt; ok;</span><br><span class="line">        <span class="literal">false</span> -&gt; </span><br><span class="line">            ok = filelib:ensure_dir(OutDir), </span><br><span class="line">            ok = file:make_dir(OutDir),</span><br><span class="line">            ok</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    <span class="keyword">case</span> make:all(Options) <span class="keyword">of</span> </span><br><span class="line">        up_to_date -&gt; do_make(OutDirList); </span><br><span class="line">        error -&gt; error</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">file</span><span class="params">([File, OutDirAtom|_])</span> -&gt;</span></span><br><span class="line">    do_file(File, OutDirAtom),</span><br><span class="line">    erlang:halt().</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">do_file</span><span class="params">(File, OutDirAtom)</span> -&gt;</span></span><br><span class="line">    {ok, [{_, Options}|_]} = file:consult(<span class="string">&quot;Emakefile&quot;</span>),</span><br><span class="line">    OutDir = atom_to_list(OutDirAtom),</span><br><span class="line">    R = compile:file(atom_to_list(File), Options ++ [{outdir, OutDir}, {d, debug}]),</span><br><span class="line">    msg(R).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Msg)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">case</span> Msg <span class="keyword">of</span></span><br><span class="line">        Msg <span class="keyword">when</span> is_list(Msg); is_binary(Msg) -&gt; </span><br><span class="line">            io:format(<span class="string">&quot;~s~n&quot;</span>, [Msg]);</span><br><span class="line">        _ -&gt; io:format(<span class="string">&quot;~p~n&quot;</span>, [Msg])</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹SQUIDå®‰è£…é…ç½®</title>
      <link href="/2016/03/24/centos/centos-squid/"/>
      <url>/2016/03/24/centos/centos-squid/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>å…¬å¸å†…ç½‘é™é€Ÿæ€ä¹ˆåŠ?</strong><br>è‹¥ä½ æ»¡è¶³å¦‚ä¸‹æ¡ä»¶,åˆ™å¯ä»¥é€šè¿‡<code>squid</code>ç®€å•é…ç½®å®ç°é«˜é€Ÿä¸Šç½‘.</p><ol><li>ä½ æœ‰æœåŠ¡å™¨æƒé™;</li><li>æœåŠ¡å™¨æ²¡æœ‰é™é€Ÿ;</li><li>æ˜¯ä¸ªâ€ä¸æ³•â€é’å¹´;</li></ol><p>åŒæ ·çš„,ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å®ç°é€šè¿‡ä»£ç†ä¸Šç½‘é™åˆ¶æŸäº›äººçš„â€ä¸æ³•â€è¡Œä¸º.<br>ä¸è¿‡,è¹­æœåŠ¡å™¨çš„ç½‘ç»œæ˜¯å¦å°±å±äºâ€ä¸æ³•â€è¡Œä¸ºå‘¢???</p><span id="more"></span><h3 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h3><p>é»˜è®¤:3128<br>å¯ä»¥åœ¨ squid.conf http_port ä¿®æ”¹</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install squid -y</span><br><span class="line">chkconfig squid on</span><br><span class="line">service squid start</span><br></pre></td></tr></table></figure><h4 id="ä¿®å¤è­¦å‘Š"><a href="#ä¿®å¤è­¦å‘Š" class="headerlink" title="ä¿®å¤è­¦å‘Š"></a>ä¿®å¤è­¦å‘Š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/squid/squid.conf</span></span><br><span class="line"><span class="comment">## åœ¨å¼€å¤´å¢åŠ </span></span><br><span class="line">visible_hostname .</span><br><span class="line"><span class="comment">## QQæ— æ³•å‘é€å›¾ç‰‡</span></span><br><span class="line">acl SSL_ports port 443 80</span><br></pre></td></tr></table></figure><p><a href="http://www.mingilin.com/downloads/code/squid.conf">Centosä¸‹çš„Squidé…ç½®æ–‡ä»¶</a></p><h3 id="æƒé™è®¾ç½®"><a href="#æƒé™è®¾ç½®" class="headerlink" title="æƒé™è®¾ç½®"></a>æƒé™è®¾ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å…è®¸è®¿é—®å¤–ç½‘çš„IP</span></span><br><span class="line">acl localnet src 10.0.0.0/8</span><br><span class="line">acl localnet src 172.16.0.0/12</span><br><span class="line"><span class="comment">## å…è®¸è®¿é—®çš„åŸŸå</span></span><br><span class="line">acl allowdomain dstdomain baidu.com</span><br><span class="line">acl allowdomain dstdomain www.baidu.com</span><br><span class="line">http_access deny !allowdomain</span><br><span class="line"><span class="comment">## å¢åŠ è®¿é—®æ—¶é—´é™åˆ¶</span></span><br><span class="line">acl time_time time MTWHF 08:00-12:00 13:00-22:00</span><br><span class="line"><span class="comment">## å¢åŠ æƒé™</span></span><br><span class="line">auth_param basic program /usr/lib64/squid/ncsa_auth /etc/squid/user.pass</span><br><span class="line">auth_param basic children 5</span><br><span class="line">auth_param basic credentialsttl 2 hours</span><br><span class="line">auth_param basic realm <span class="built_in">test</span>  <span class="comment">## test æ˜¯åˆ›å»ºçš„è§’è‰²</span></span><br><span class="line">acl auth_user proxy_auth REQUIRED</span><br><span class="line">http_access allow localnet time_time auth_user</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¢åŠ ä¸€ä¸ªtestå¸æˆ·</span></span><br><span class="line"><span class="comment">## htpasswdçš„ç”¨æ³•ï¼š</span></span><br><span class="line"><span class="comment">## å¢åŠ ç”¨æˆ·</span></span><br><span class="line">htpasswd -c /etc/squid/user.pass <span class="built_in">test</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š</span></span><br><span class="line">htpasswd -d /etc/squid/user.pass <span class="built_in">test</span></span><br><span class="line"><span class="comment">## åˆ é™¤ç”¨æˆ·ï¼š</span></span><br><span class="line">htpasswd -D /etc/squid/user.pass <span class="built_in">test</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> squid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹è®¿é—®windowså…±äº«ç›®å½•</title>
      <link href="/2016/03/23/centos/centos-samba/"/>
      <url>/2016/03/23/centos/centos-samba/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>windowsä¸‹åˆ†äº«çš„æœ€å¥½æ–¹å¼æ˜¯ç½‘ä¸Šé‚»å±…,å…±äº«ç›®å½•.<br>å¦‚æœlinuxä½œä¸ºå®¢æˆ·æœº(å°å¼æœº)ä½¿ç”¨çš„è¯,å…ä¸äº†è¦å’Œå…±äº«ç›®å½•æ‰“äº¤é“.<br>è®°å½•ä¸‹é€šè¿‡sambaè®¿é—®windowså…±äº«ç›®å½•,ä»¥åŠé‡åˆ°çš„é—®é¢˜.<br><em>samba4å·²ç»å‘å¸ƒ,å¯ä»¥ä½¿ç”¨samba4æ›¿æ¢ä¸‹æ–‡ä¸­çš„æ‰€æœ‰å‘½ä»¤.</em></p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## äº‹å®ä¸Šåªéœ€è¦samba-clientå³å¯</span></span><br><span class="line">yum -y install samba samba-client</span><br></pre></td></tr></table></figure><h3 id="linuxè®¿é—®windowså…±äº«ç›®å½•"><a href="#linuxè®¿é—®windowså…±äº«ç›®å½•" class="headerlink" title="linuxè®¿é—®windowså…±äº«ç›®å½•"></a>linuxè®¿é—®windowså…±äº«ç›®å½•</h3><h4 id="å‘½ä»¤è®¿é—®"><a href="#å‘½ä»¤è®¿é—®" class="headerlink" title="å‘½ä»¤è®¿é—®"></a>å‘½ä»¤è®¿é—®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ—å‡ºæ‰€æœ‰çš„å…±äº«ç›®å½•</span></span><br><span class="line">smbclient -L 192.168.6.65 -U Administrator</span><br><span class="line"><span class="comment">## è¾“å…¥å¯†ç </span></span><br><span class="line">smbclient -L 192.168.6.65 -U Administrator%123456</span><br><span class="line"><span class="comment">## è®¿é—®å…±äº«ç›®å½•</span></span><br><span class="line">smbclient //192.168.6.65/share -U Administrator%123456</span><br></pre></td></tr></table></figure><h4 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h4><ol><li><p>å‘½ä»¤æ–¹å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -t cifs -o username=Administrator,password=123456 //192.168.6.65/share /data/windows</span><br><span class="line">umount -l /data/windows</span><br></pre></td></tr></table></figure></li><li><p>fstabæ–¹å¼<br>ä¿®æ”¹<code>/etc/fstab</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åŠ å…¥fstab</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;//192.168.6.65/share /data/windows cifs defaults,username=Administrator,password=123456 0 0&quot;</span> &gt;&gt; /etc/fstab</span><br><span class="line"><span class="comment">## ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure></li></ol><h3 id="å¤±è´¥"><a href="#å¤±è´¥" class="headerlink" title="å¤±è´¥"></a>å¤±è´¥</h3><ol><li><p>tree connect failed: NT_STATUS_BAD_NETWORK_NAME<br>å…ˆæ£€æŸ¥æŒ‡å®šçš„æ–‡ä»¶ä»¶æ˜¯å¦å…±äº«äº†ï¼Œç„¶åæ£€æŸ¥å…±äº«ç›®å½•çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚</p></li><li><p>session setup failed: NT_STATUS_LOGON_FAILURE<br>æ£€æŸ¥ç”¨-UæŒ‡å®šçš„ç”¨æˆ·åæ˜¯å¦æ­£ç¡®ï¼›<br>åœ¨Windowsçš„å¼€å§‹èœå•ä¸­ï¼Œè¿è¡Œ<code>secpol.msc</code>ï¼Œæ‰“å¼€å®‰å…¨è®¾ç½®ï¼Œ<code>æœ¬åœ°ç­–ç•¥</code>-&gt;<code>å®‰å…¨é€‰é¡¹</code>-&gt; <code>ç½‘ç»œè®¿é—®ï¼šæœ¬åœ°è´¦æˆ·çš„å…±äº«å’Œå®‰å…¨æ¨¡å‹</code>-&gt;<code>é€‰æ‹©ç»å…¸ - å¯¹æœ¬åœ°ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä¸æ”¹å˜å…¶æœ¬æ¥èº«ä»½</code>ï¼›</p></li><li><p>session setup failed: NT_STATUS_LOGON_TYPE_NOT_GRANTED<br>åœ¨Windowsçš„å¼€å§‹èœå•ä¸­ï¼Œè¿è¡Œ<code>secpol.msc</code>ï¼Œæ‰“å¼€å®‰å…¨è®¾ç½®ï¼Œ<code>æœ¬åœ°ç­–ç•¥</code>-&gt;<code>ç”¨æˆ·æƒé™åˆ†é…</code>-&gt;<code>ä»ç½‘ç»œè®¿é—®æ­¤è®¡ç®—æœºï¼Œç¡®è®¤ä¸€ä¸‹æ˜¯å¦åŒ…å«æŒ‡å®šçš„ç”¨æˆ·</code>ï¼›</p></li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://free.meteor.blog.163.com/blog/static/110977532201252582527111/">http://free.meteor.blog.163.com/blog/static/110977532201252582527111/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> samba </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªåŠŸèƒ½å…¨é¢çš„Linuxç›¸å…³ç½‘ç«™</title>
      <link href="/2016/03/22/centos/centos-help/"/>
      <url>/2016/03/22/centos/centos-help/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‘ç°äº†ä¸€ä¸ªåŠŸèƒ½å…¨é¢çš„linuxå®‰è£…é…ç½®ç½‘ç«™: <a href="http://www.server-world.info/en">http://www.server-world.info/en</a></p><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tmuxinatorå®‰è£…é…ç½®</title>
      <link href="/2016/03/21/centos/centos-tmuxinator/"/>
      <url>/2016/03/21/centos/centos-tmuxinator/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Tmuxinatoræ˜¯ç®¡ç†tmuxçš„å·¥å…·.</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install tmuxinator</span><br></pre></td></tr></table></figure><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ol><li>æ”¯æŒ256è‰²<br>åœ¨<code>~/.bashrc</code>ä¸­å¢åŠ <code>export TERM=screen-256color-bce</code></li><li>æ–°å¢é…ç½®</li></ol><ul><li><code>tmuxinator new blog</code></li><li>é…ç½®æ–‡ä»¶åœ¨<code>~/.tmuxinator</code>ä¸‹</li></ul><h3 id="ç¼–è¾‘é…ç½®"><a href="#ç¼–è¾‘é…ç½®" class="headerlink" title="ç¼–è¾‘é…ç½®"></a>ç¼–è¾‘é…ç½®</h3><p>ä¸ªäººç®€å•é…ç½®,å°†<code>blog.conf</code>ä¿®æ”¹ä¸º<code>blog.yml</code></p><figure class="highlight ruby"><figcaption><span>blog.conf</span><a href="/downloads/code/blog.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ~/.tmuxinator/blog.yml</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">name:</span> blog</span><br><span class="line"><span class="symbol">root:</span> /data/blog</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional tmux socket</span></span><br><span class="line"><span class="comment"># socket_name: foo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Runs before everything. Use it to start daemons etc.</span></span><br><span class="line"><span class="comment"># pre: sudo /etc/rc.d/mysqld start</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Runs in each window and pane before window/pane specific commands. Useful for setting up interpreter versions.</span></span><br><span class="line"><span class="comment"># pre_window: rbenv shell 2.0.0-p247</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pass command line options to tmux. Useful for specifying a different tmux.conf.</span></span><br><span class="line"><span class="comment"># tmux_options: -f ~/.tmux.mac.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change the command to call tmux.  This can be used by derivatives/wrappers like byobu.</span></span><br><span class="line"><span class="comment"># tmux_command: byobu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifies (by name or index) which window will be selected on project startup. If not set, the first window is used.</span></span><br><span class="line"><span class="comment"># startup_window: logs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls whether the tmux session should be attached to automatically. Defaults to true.</span></span><br><span class="line"><span class="comment"># attach: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Runs after everything. Use it to attach to tmux with custom options etc.</span></span><br><span class="line"><span class="comment"># post: tmux -CC attach -t blog</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">windows:</span></span><br><span class="line">  - <span class="symbol">editor:</span> vim /data/blog/source/_post/centos</span><br><span class="line">  - <span class="symbol">server:</span> hexo serve</span><br><span class="line">  - <span class="symbol">cmd:</span></span><br></pre></td></tr></table></figure><p>è¯¦ç»†çš„é…ç½®è¯·æŸ¥çœ‹<code>man tmuxinator</code>,æˆ–è€…æŸ¥çœ‹<a href="http://hao.jobbole.com/tmuxinator/">å‚è€ƒæ–‡æ¡£</a></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://hao.jobbole.com/tmuxinator/">http://hao.jobbole.com/tmuxinator/</a></li><li><a href="https://github.com/tmuxinator/tmuxinator/issues/84">https://github.com/tmuxinator/tmuxinator/issues/84</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> tmux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹IPTABLESé…ç½®</title>
      <link href="/2016/03/18/centos/centos-iptables/"/>
      <url>/2016/03/18/centos/centos-iptables/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>iptablesä½œä¸ºcentosä¸‹çš„é»˜è®¤é˜²ç«å¢™,åŠŸèƒ½å¼ºå¤§çš„ä¸å¾—äº†.<br>åœ¨ä¸€äº›ç®€å•æƒ…å†µä¸‹,iptablesè¿˜å¯ä»¥å®ç°web server(nginx, apache)çš„ä¸€äº›ç®€å•åŠŸèƒ½.<br>iptableså¤ªå¼ºå¤§äº†,æ‰€ä»¥æˆ‘å¯¹iptablesçš„é…ç½®ä¸æ˜¯å¾ˆäº†è§£,åªè®°å½•ä¸€äº›å¸¸ç”¨çš„,å¤‡ä»½ä¸‹.</p><span id="more"></span><h3 id="å‡çº§æ ¸-å¯é€‰"><a href="#å‡çº§æ ¸-å¯é€‰" class="headerlink" title="å‡çº§æ ¸(å¯é€‰)"></a>å‡çº§æ ¸(å¯é€‰)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯èƒ½ç”¨åˆ°</span></span><br><span class="line">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br><span class="line">rpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm</span><br><span class="line">yum --enablerepo=elrepo-kernel install kernel-lt</span><br><span class="line">rpm -ql kernel-lt | grep xt_TEE</span><br></pre></td></tr></table></figure><h3 id="å¼€å¯linuxè·¯ç”±è½¬å‘åŠŸèƒ½"><a href="#å¼€å¯linuxè·¯ç”±è½¬å‘åŠŸèƒ½" class="headerlink" title="å¼€å¯linuxè·¯ç”±è½¬å‘åŠŸèƒ½"></a>å¼€å¯linuxè·¯ç”±è½¬å‘åŠŸèƒ½</h3><p>ç¼–è¾‘<code>/etc/sysctl.conf</code>æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward = 1</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>sysctl -p</code>ç«‹å³ç”Ÿæ•ˆ</p><h3 id="å†…ç½‘ç«¯å£è½¬å‘"><a href="#å†…ç½‘ç«¯å£è½¬å‘" class="headerlink" title="å†…ç½‘ç«¯å£è½¬å‘"></a>å†…ç½‘ç«¯å£è½¬å‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å°†80ç«¯å£è½¬å‘åˆ°4000</span></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 4000</span><br></pre></td></tr></table></figure><h3 id="å¤–ç½‘ç«¯å£è½¬å‘"><a href="#å¤–ç½‘ç«¯å£è½¬å‘" class="headerlink" title="å¤–ç½‘ç«¯å£è½¬å‘"></a>å¤–ç½‘ç«¯å£è½¬å‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å°†192.168.6.77:8000 è½¬å‘åˆ° 192.168.1.245:80</span></span><br><span class="line">iptables -t nat -A PREROUTING -d 192.168.6.77 -p tcp --dport 8000 -j DNAT --to-destination 192.168.1.245:80</span><br><span class="line">iptables -t nat -A POSTROUTING -d 192.168.1.245 -p tcp --dport 80 -j SNAT --to-source 192.168.6.77:8000</span><br></pre></td></tr></table></figure><h3 id="å¼€æ”¾ç«¯å£"><a href="#å¼€æ”¾ç«¯å£" class="headerlink" title="å¼€æ”¾ç«¯å£"></a>å¼€æ”¾ç«¯å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -A INPUT -p tcp -m state --state NEW -m tcp --dport 21 -j ACCEPT</span><br></pre></td></tr></table></figure><h3 id="æ¸…ç©ºæ‰€æœ‰çš„é…ç½®"><a href="#æ¸…ç©ºæ‰€æœ‰çš„é…ç½®" class="headerlink" title="æ¸…ç©ºæ‰€æœ‰çš„é…ç½®"></a>æ¸…ç©ºæ‰€æœ‰çš„é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -F</span><br><span class="line">iptables -F</span><br></pre></td></tr></table></figure><h3 id="ä¿å­˜é…ç½®"><a href="#ä¿å­˜é…ç½®" class="headerlink" title="ä¿å­˜é…ç½®"></a>ä¿å­˜é…ç½®</h3><p><code>service iptables save</code></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.server110.com/linux/201309/1365.html">http://www.server110.com/linux/201309/1365.html</a></li><li><a href="http://blog.chinaunix.net/uid-22780578-id-3346350.html">http://blog.chinaunix.net/uid-22780578-id-3346350.html</a></li><li><a href="http://www.linuxso.com/linuxpeixun/10332.html">http://www.linuxso.com/linuxpeixun/10332.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹pure-ftpdå®‰è£…é…ç½®</title>
      <link href="/2016/03/18/centos/centos-pure-ftpd/"/>
      <url>/2016/03/18/centos/centos-pure-ftpd/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€å¼€å§‹æ¥è§¦çš„<code>ftpæœåŠ¡å™¨</code>æ˜¯<code>vsftpd</code><br>æœ¬ç€æ¢ç´¢çš„ç²¾ç¥è¯•ç€å®‰è£…äº†ä¸‹<code>pure-ftpd</code><br>æ¯•ç«Ÿ<code>pure-ftpd</code>ä¹Ÿæ˜¯linuxä¸‹çš„ä¸‰å¤§ftpè½¯ä»¶ä¹‹ä¸€<br>å…ˆå¯¹æ¯”ä¸€ä¸‹:</p><table><thead><tr><th>â€“</th><th>vsftpd</th><th>pure-ftpd</th></tr></thead><tbody><tr><td>è®¾ç½®ç©ºå¯†ç </td><td>å¦</td><td>æ˜¯</td></tr><tr><td>æ”¯æŒæ’ä»¶</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>é…ç½®éš¾åº¦</td><td>éš¾</td><td>ç®€å•</td></tr><tr><td>å®‰å…¨æ€§</td><td>æ®è¯´é«˜ç‚¹</td><td></td></tr></tbody></table><span id="more"></span><h3 id="å®‰è£…é…ç½®"><a href="#å®‰è£…é…ç½®" class="headerlink" title="å®‰è£…é…ç½®"></a>å®‰è£…é…ç½®</h3><p><code>pure-ftpd</code>å®‰è£…é…ç½®è¾ƒ<code>vsftpd</code>è¦ç®€å•å¾ˆå¤šï¼Œç›´æ¥é™„ä¸Šè„šæœ¬ï¼›</p><figure class="highlight sh"><figcaption><span>pure-ftpd.sh</span><a href="/downloads/code/pure-ftpd.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --------------------------------------</span></span><br><span class="line"><span class="comment">## é…ç½®</span></span><br><span class="line"><span class="comment">## -------------------------------------</span></span><br><span class="line"><span class="comment">## åˆ›å»ºçš„è´¦æˆ·</span></span><br><span class="line">VUSER=ftp_user</span><br><span class="line"><span class="comment">## è´¦æˆ·çš„é»˜è®¤ç›®å½•</span></span><br><span class="line">DEFAULT_DIR=/data/ftp_user</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-----------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 1 - install&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 2 - add user&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;     ex. <span class="variable">$0</span> 2 username passwd&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;     help: man pure-pw&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 3 - uninstall&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-----------------------------&quot;</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">uninstall</span></span>(){</span><br><span class="line">    yum -y remove pure-ftpd</span><br><span class="line">    rm -rf /etc/pure-ftpd</span><br><span class="line">}</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">install</span></span>(){</span><br><span class="line">    uninstall</span><br><span class="line">    yum -y install pure-ftpd</span><br><span class="line">    <span class="comment">## ä¿®æ”¹é…ç½®   </span></span><br><span class="line">    cat &gt; /etc/pure-ftpd/pure-ftpd.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">ChrootEveryone              yes</span></span><br><span class="line"><span class="string">BrokenClientsCompatibility  yes</span></span><br><span class="line"><span class="string">MaxClientsNumber            50</span></span><br><span class="line"><span class="string">Daemonize                   yes</span></span><br><span class="line"><span class="string">MaxClientsPerIP             8</span></span><br><span class="line"><span class="string">VerboseLog                  yes</span></span><br><span class="line"><span class="string">DisplayDotFiles             no</span></span><br><span class="line"><span class="string">AnonymousOnly               no</span></span><br><span class="line"><span class="string">NoAnonymous                 yes</span></span><br><span class="line"><span class="string">SyslogFacility              ftp</span></span><br><span class="line"><span class="string">DontResolve                 yes</span></span><br><span class="line"><span class="string">MaxIdleTime                 15</span></span><br><span class="line"><span class="string">PureDB                      /etc/pure-ftpd/pureftpd.pdb</span></span><br><span class="line"><span class="string">PAMAuthentication           yes</span></span><br><span class="line"><span class="string">LimitRecursion              10000 8</span></span><br><span class="line"><span class="string">AnonymousCanCreateDirs      no</span></span><br><span class="line"><span class="string">MaxLoad                     4</span></span><br><span class="line"><span class="string">PassivePortRange            6000 7000</span></span><br><span class="line"><span class="string">AntiWarez                   yes</span></span><br><span class="line"><span class="string">Umask                       133:022</span></span><br><span class="line"><span class="string">MinUID                      100</span></span><br><span class="line"><span class="string">UseFtpUsers                 no</span></span><br><span class="line"><span class="string">AllowUserFXP                no</span></span><br><span class="line"><span class="string">AllowAnonymousFXP           no</span></span><br><span class="line"><span class="string">ProhibitDotFilesWrite       no</span></span><br><span class="line"><span class="string">ProhibitDotFilesRead        no</span></span><br><span class="line"><span class="string">AutoRename                  no</span></span><br><span class="line"><span class="string">AnonymousCantUpload         yes</span></span><br><span class="line"><span class="string">AltLog                      clf:/var/log/pureftpd.log</span></span><br><span class="line"><span class="string">CreateHomeDir               yes</span></span><br><span class="line"><span class="string">PIDFile                     /var/run/pure-ftpd.pid</span></span><br><span class="line"><span class="string">MaxDiskUsage                99</span></span><br><span class="line"><span class="string">CustomerProof               yes</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    <span class="comment">## å¢åŠ è™šæ‹Ÿè´¦å·çš„user</span></span><br><span class="line">    useradd -d <span class="variable">${DEFAULT_DIR}</span> -s /sbin/nologin <span class="variable">${VUSER}</span></span><br><span class="line">    <span class="comment">## å¢åŠ ç«¯å£</span></span><br><span class="line">    iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 6000:7000 -j ACCEPT</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">add_vuser</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;user can not empty.&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$2</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;pass can not empty.&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> </span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ftp_user=<span class="variable">$1</span></span><br><span class="line">    ftp_pass=<span class="variable">$2</span></span><br><span class="line">    mkdir -p <span class="variable">${DEFAULT_DIR}</span>/<span class="variable">${ftp_user}</span></span><br><span class="line">    chown <span class="variable">${VUSER}</span>:<span class="variable">${VUSER}</span> <span class="variable">${DEFAULT_DIR}</span>/<span class="variable">${ftp_user}</span> -R</span><br><span class="line">    pure-pw useradd <span class="variable">${ftp_user}</span> -u<span class="variable">${VUSER}</span> -d <span class="variable">${DEFAULT_DIR}</span>/<span class="variable">${ftp_user}</span></span><br><span class="line">    pure-pw mkdb</span><br><span class="line">    service pure-ftpd restart</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;add finish&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">[1]) install;;</span><br><span class="line">[2]) add_vuser <span class="variable">$2</span> <span class="variable">$3</span>;;</span><br><span class="line">[3]) uninstall;;</span><br><span class="line">*) <span class="built_in">help</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ol><li>å¦‚ä½•è®¾ç½®ç›®å½•åªè¯»æƒé™ï¼Ÿ</li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.lezhizhe.net/archives/129">http://www.lezhizhe.net/archives/129</a></li><li><a href="http://www.centoscn.com/image-text/install/2014/1120/4154.html">http://www.centoscn.com/image-text/install/2014/1120/4154.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ftp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹Aria2å®‰è£…ä»¥åŠå‰ç«¯é…ç½®</title>
      <link href="/2016/03/17/centos/centos-aria2/"/>
      <url>/2016/03/17/centos/centos-aria2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å…ˆæ¨èä¸€ä¸ªwindowsä¸‹åŸºäºaria2çš„ä¸‹è½½å·¥å…·<a href="https://motrix.app/zh-CN/">motrix</a></p><p>å…¬å¸é™åˆ¶äº†ç½‘ç»œ,æ— æ³•ä¸‹è½½å¤§çš„æ–‡ä»¶<br>BUTå†…ç½‘æœåŠ¡å™¨æ²¡æœ‰é™åˆ¶<br>ä½œä¸ºä¸€ä¸ªâ€ä¸æ³•â€é’å¹´,åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªä¸‹è½½æœº<br>ä¸‹è½½æœºå°†æ–‡ä»¶ä¸‹è½½åˆ°ftpç›®å½•ä¸‹,ä½¿ç”¨ftpåœ¨å†…ç½‘ä¸‹è½½</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install aria2</span><br></pre></td></tr></table></figure><p>æœ¬è„šæœ¬ä¾èµ–rpmforgeæºï¼Œéœ€è¦å…ˆæ·»åŠ æº</p><h3 id="æœ¬åœ°ä¸‹è½½"><a href="#æœ¬åœ°ä¸‹è½½" class="headerlink" title="æœ¬åœ°ä¸‹è½½"></a>æœ¬åœ°ä¸‹è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## http/ftp/httpsä¸‹è½½</span></span><br><span class="line">aria2c -c -s 5 http://aaa.com/a.txt</span><br><span class="line"><span class="comment">## BTä¸‹è½½</span></span><br><span class="line">aria2c ./æ—¥æœ¬çˆ±æƒ…åŠ¨ä½œç‰‡.torrent</span><br></pre></td></tr></table></figure><ul><li><code>-c</code>æ˜¯æ–­ç‚¹</li><li><code>-s</code>æ˜¯è¿æ¥æ•°</li></ul><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><ol><li><p>å¢åŠ é…ç½®æ–‡ä»¶<code>/etc/aria2/aria2.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/aria2</span><br><span class="line">cat &gt; /etc/aria2/aria2.conf &lt;&lt; EOF</span><br><span class="line">## ä¸‹è½½ç›®å½•</span><br><span class="line">dir=/data/ftpuser/down/webdown</span><br><span class="line">disable-ipv6=true</span><br><span class="line">enable-rpc=true</span><br><span class="line">rpc-allow-origin-all=true</span><br><span class="line">rpc-listen-all=true</span><br><span class="line">rpc-listen-port=6800</span><br><span class="line">continue=true</span><br><span class="line">max-concurrent-downloads=3</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li><li><p>å¼€æœºå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;sudo -u ftpuser aria2c --conf-path=/etc/aria2/aria2.conf&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure><p>é»˜è®¤ï¼Œ<code>rc.local</code>å†…çš„å‘½ä»¤æ˜¯ä»¥rootç”¨æˆ·è¿è¡Œçš„ï¼Œè‹¥aria2æ˜¯é…åˆå…¶ä»–ç¨‹åºï¼Œæ¯”å¦‚ftpæœåŠ¡å™¨ä¸€èµ·ä½¿ç”¨çš„è¯ï¼Œå»ºè®®ä»¥ftpç”¨æˆ·è¿è¡Œï¼Œå› æ­¤å¢åŠ <code>sudo -u ftpuser</code>å‰ç¼€ã€‚</p></li></ol><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ol><li><p>ä¸‹è½½<a href="https://github.com/binux/yaaw.git">YAAW</a>æˆ–è€…<a href="https://github.com/aa65535/yaaw-zh-hans.git">YAAWæ±‰åŒ–ç‰ˆ</a></p></li><li><p>æœç´ yaawä¸‹çš„æ–‡ä»¶ï¼Œå°†<code>localhost</code>ä¿®æ”¹ä¸ºå®é™…çš„IP</p></li><li><p>ä½¿ç”¨nginx/apacheé…ç½®æœåŠ¡å™¨</p></li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://phpquan.com/arm/raspberry-pi-aria2-yaaw-downloader/">http://phpquan.com/arm/raspberry-pi-aria2-yaaw-downloader/</a></li><li><a href="http://www.hx99.net/OS/Linux/201504/36603.html">http://www.hx99.net/OS/Linux/201504/36603.html</a></li><li><a href="http://my.oschina.net/7shell/blog/325120">http://my.oschina.net/7shell/blog/325120</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> aria2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹vsftpdå®‰è£…é…ç½®</title>
      <link href="/2016/03/16/centos/centos-vsftpd/"/>
      <url>/2016/03/16/centos/centos-vsftpd/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä»‹ç»vsftpdçš„å®‰è£…å’Œé…ç½®ï¼Œé…ç½®åçš„æ•ˆæœï¼š</p><ul><li>ç¦æ­¢åŒ¿åç™»å½•</li><li>æ”¯æŒè™šæ‹Ÿè´¦æˆ·</li></ul><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install vsftpd</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="ç¦æ­¢åŒ¿å"><a href="#ç¦æ­¢åŒ¿å" class="headerlink" title="ç¦æ­¢åŒ¿å"></a>ç¦æ­¢åŒ¿å</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">anonymous_enable=NO</span><br></pre></td></tr></table></figure><h4 id="é™åˆ¶åªèƒ½è®¿é—®æœ¬åœ°ç›®å½•"><a href="#é™åˆ¶åªèƒ½è®¿é—®æœ¬åœ°ç›®å½•" class="headerlink" title="é™åˆ¶åªèƒ½è®¿é—®æœ¬åœ°ç›®å½•"></a>é™åˆ¶åªèƒ½è®¿é—®æœ¬åœ°ç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">chroot_local_user=YES</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®æ”¯æŒè¢«åŠ¨æ¨¡å¼"><a href="#è®¾ç½®æ”¯æŒè¢«åŠ¨æ¨¡å¼" class="headerlink" title="è®¾ç½®æ”¯æŒè¢«åŠ¨æ¨¡å¼"></a>è®¾ç½®æ”¯æŒè¢«åŠ¨æ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">pasv_enable=YES</span><br><span class="line">pasv_min_port=6000</span><br><span class="line">pasv_max_port=7000</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ è™šæ‹Ÿè´¦å·"><a href="#å¢åŠ è™šæ‹Ÿè´¦å·" class="headerlink" title="å¢åŠ è™šæ‹Ÿè´¦å·"></a>å¢åŠ è™šæ‹Ÿè´¦å·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/vsftpd</span><br><span class="line">cat &gt; vuser &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">ftp1</span></span><br><span class="line"><span class="string">123456</span></span><br><span class="line"><span class="string">ftp2</span></span><br><span class="line"><span class="string">123456</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">db_load -T -t <span class="built_in">hash</span> -f vuser vuser.db</span><br><span class="line"></span><br><span class="line">useradd -d /data/vuser -s /sbin/nologin vuser</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ è™šæ‹Ÿè´¦å·çš„pamè®¤è¯"><a href="#å¢åŠ è™šæ‹Ÿè´¦å·çš„pamè®¤è¯" class="headerlink" title="å¢åŠ è™šæ‹Ÿè´¦å·çš„pamè®¤è¯"></a>å¢åŠ è™šæ‹Ÿè´¦å·çš„pamè®¤è¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/pam.d/vsftpd.vuser &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">auth required pam_userdb.so db=/etc/vsftpd/vuser </span></span><br><span class="line"><span class="string">account required pam_userdb.so db=/etc/vsftpd/vuser</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h4 id="å¼€å¯è™šæ‹Ÿè´¦å·"><a href="#å¼€å¯è™šæ‹Ÿè´¦å·" class="headerlink" title="å¼€å¯è™šæ‹Ÿè´¦å·"></a>å¼€å¯è™šæ‹Ÿè´¦å·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">guest_enable=YES</span><br><span class="line">guest_username=vuser</span><br><span class="line">pam_service_name=vsftpd.vuser</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ è™šæ‹Ÿè´¦å·ç™»å½•"><a href="#å¢åŠ è™šæ‹Ÿè´¦å·ç™»å½•" class="headerlink" title="å¢åŠ è™šæ‹Ÿè´¦å·ç™»å½•"></a>å¢åŠ è™šæ‹Ÿè´¦å·ç™»å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">anon_upload_enable=YES</span><br></pre></td></tr></table></figure><h4 id="ä¸åŒç”¨æˆ·å¢åŠ ä¸åŒæƒé™"><a href="#ä¸åŒç”¨æˆ·å¢åŠ ä¸åŒæƒé™" class="headerlink" title="ä¸åŒç”¨æˆ·å¢åŠ ä¸åŒæƒé™"></a>ä¸åŒç”¨æˆ·å¢åŠ ä¸åŒæƒé™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vsftpd.conf</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vuser_dir</span><br></pre></td></tr></table></figure><h4 id="æ¯ä¸ªè™šæ‹Ÿç”¨æˆ·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶"><a href="#æ¯ä¸ªè™šæ‹Ÿç”¨æˆ·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶" class="headerlink" title="æ¯ä¸ªè™šæ‹Ÿç”¨æˆ·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶"></a>æ¯ä¸ªè™šæ‹Ÿç”¨æˆ·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è™šæ‹Ÿè´¦æˆ·1</span></span><br><span class="line">cat &gt; /etc/vsftpd/vuser_dir/ftp1 &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">local_root=/data/FTP/ftpuser</span></span><br><span class="line"><span class="string">write_enable=YES</span></span><br><span class="line"><span class="string">anon_umask=022</span></span><br><span class="line"><span class="string">anon_world_readable_only=NO</span></span><br><span class="line"><span class="string">anon_upload_enable=YES</span></span><br><span class="line"><span class="string">anon_mkdir_write_enable=YES</span></span><br><span class="line"><span class="string">anon_other_write_enable=YES</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h4 id="å¢åŠ IPé™åˆ¶"><a href="#å¢åŠ IPé™åˆ¶" class="headerlink" title="å¢åŠ IPé™åˆ¶"></a>å¢åŠ IPé™åˆ¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;vsftpd:ALL&quot;</span> &gt;&gt; /etc/hosts.deny</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;vsftpd:192.168.1.0/255.255.255.0&quot;</span> &gt;&gt; /etc/hosts.allow</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;vsftpd:172.16.0.0/255.255.0.0&quot;</span> &gt;&gt; /etc/hosts.allow</span><br></pre></td></tr></table></figure><h3 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h3><p>CENTOS6ä¸‹vsftpdå¿«é€Ÿå®‰è£…+å¢åŠ è™šæ‹Ÿç”¨æˆ·çš„è„šæœ¬ï¼š</p><figure class="highlight bash"><figcaption><span>vsftpd.sh</span><a href="/downloads/code/vsftpd.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## --------------------------------------</span></span><br><span class="line"><span class="comment">## é…ç½®</span></span><br><span class="line"><span class="comment">## -------------------------------------</span></span><br><span class="line"><span class="comment">## åˆ›å»ºçš„è´¦æˆ·</span></span><br><span class="line">VUSER=ftp_v_user</span><br><span class="line"><span class="comment">## è´¦æˆ·çš„é»˜è®¤ç›®å½•</span></span><br><span class="line">DEFAULT_DIR=/data/ftp_v_user</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-----------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 1 - install&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 2 - add user&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;     ex. <span class="variable">$0</span> 2 username passwd&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 3 - uninstall vsftpd&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 4 - reload&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-----------------------------&quot;</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">uninstall</span></span>(){</span><br><span class="line">    yum -y remove vsftpd</span><br><span class="line">    rm -rf /etc/vsftpd</span><br><span class="line">}</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">install</span></span>(){</span><br><span class="line">    uninstall</span><br><span class="line">    yum -y install vsftpd</span><br><span class="line">    <span class="comment">## ä¿®æ”¹é…ç½®   </span></span><br><span class="line">    cat &gt; /etc/vsftpd/vsftpd.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">anonymous_enable=NO</span></span><br><span class="line"><span class="string">local_enable=YES</span></span><br><span class="line"><span class="string">write_enable=YES</span></span><br><span class="line"><span class="string">local_umask=022</span></span><br><span class="line"><span class="string">anon_upload_enable=YES</span></span><br><span class="line"><span class="string">dirmessage_enable=YES</span></span><br><span class="line"><span class="string">xferlog_enable=YES</span></span><br><span class="line"><span class="string">connect_from_port_20=YES</span></span><br><span class="line"><span class="string">xferlog_std_format=YES</span></span><br><span class="line"><span class="string">chroot_local_user=YES</span></span><br><span class="line"><span class="string">listen=YES</span></span><br><span class="line"><span class="string">userlist_enable=YES</span></span><br><span class="line"><span class="string">tcp_wrappers=YES</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">pasv_enable=YES</span></span><br><span class="line"><span class="string">pasv_min_port=6000</span></span><br><span class="line"><span class="string">pasv_max_port=7000</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">guest_enable=YES</span></span><br><span class="line"><span class="string">guest_username=${VUSER}</span></span><br><span class="line"><span class="string">pam_service_name=vsftpd.${VUSER}</span></span><br><span class="line"><span class="string">user_config_dir=/etc/vsftpd/${VUSER}_dir</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    <span class="comment">## å¢åŠ pamè®¤è¯</span></span><br><span class="line">    cat &gt; /etc/pam.d/vsftpd.<span class="variable">${VUSER}</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">auth required pam_userdb.so db=/etc/vsftpd/${VUSER}</span></span><br><span class="line"><span class="string">account required pam_userdb.so db=/etc/vsftpd/${VUSER}</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    <span class="comment">## å¢åŠ è™šæ‹Ÿç›®å½•</span></span><br><span class="line">    <span class="built_in">cd</span> /etc/vsftpd</span><br><span class="line">    touch <span class="variable">${VUSER}</span></span><br><span class="line">    mkdir <span class="variable">${VUSER}</span>_dir</span><br><span class="line">    <span class="comment">## å¢åŠ è™šæ‹Ÿè´¦å·çš„user</span></span><br><span class="line">    useradd -d <span class="variable">${DEFAULT_DIR}</span> -s /sbin/nologin <span class="variable">${VUSER}</span></span><br><span class="line">    <span class="comment">## å¢åŠ ç«¯å£</span></span><br><span class="line">    iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 20 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 6000:7000 -j ACCEPT</span><br><span class="line">    <span class="comment">## å¢åŠ è™šæ‹Ÿç”¨æˆ·</span></span><br><span class="line">    add_vuser ftptest ftptest</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">create_db</span></span>(){</span><br><span class="line">    db_load -T -t <span class="built_in">hash</span> -f /etc/vsftpd/<span class="variable">${VUSER}</span> /etc/vsftpd/<span class="variable">${VUSER}</span>.db</span><br><span class="line">    service vsftpd restart</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">add_vuser</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;user can not empty.&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$2</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;pass can not empty.&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> </span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ftp_user=<span class="variable">$1</span></span><br><span class="line">    ftp_pass=<span class="variable">$2</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$ftp_user</span> &gt;&gt; /etc/vsftpd/<span class="variable">${VUSER}</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$ftp_pass</span> &gt;&gt; /etc/vsftpd/<span class="variable">${VUSER}</span></span><br><span class="line">    mkdir -p <span class="variable">${DEFAULT_DIR}</span>/<span class="variable">${ftp_user}</span></span><br><span class="line">    chown <span class="variable">${VUSER}</span>:<span class="variable">${VUSER}</span> <span class="variable">${DEFAULT_DIR}</span>/<span class="variable">${ftp_user}</span> -R</span><br><span class="line">    cat &gt; /etc/vsftpd/<span class="variable">${VUSER}</span>_dir/<span class="variable">${ftp_user}</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">local_root=${DEFAULT_DIR}/${ftp_user}</span></span><br><span class="line"><span class="string">write_enable=YES</span></span><br><span class="line"><span class="string">anon_umask=022</span></span><br><span class="line"><span class="string">anon_world_readable_only=NO</span></span><br><span class="line"><span class="string">anon_upload_enable=YES</span></span><br><span class="line"><span class="string">anon_mkdir_write_enable=YES</span></span><br><span class="line"><span class="string">anon_other_write_enable=YES</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    create_db</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;add finish&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">[1]) install;;</span><br><span class="line">[2]) add_vuser <span class="variable">$2</span> <span class="variable">$3</span>;;</span><br><span class="line">[3]) uninstall;;</span><br><span class="line">[4]) create_db;;</span><br><span class="line">*) <span class="built_in">help</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.centoscn.com/CentosServer/ftp/2014/1215/4313.html">http://www.centoscn.com/CentosServer/ftp/2014/1215/4313.html</a></li><li><a href="http://jingyan.baidu.com/article/03b2f78c771db45ea237ae28.html">http://jingyan.baidu.com/article/03b2f78c771db45ea237ae28.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ftp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä¸‹sshè¿œç¨‹æ‰§è¡Œå‘½ä»¤</title>
      <link href="/2016/03/15/erlang/erlang-ssh/"/>
      <url>/2016/03/15/erlang/erlang-ssh/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸ªäººç®€å•è¯•äº†ä¸‹ç”¨erlangè‡ªå¸¦çš„sshæ¨¡å—è¿œç¨‹ç™»å½•</p><p>è°ƒç”¨å‘½ä»¤ï¼š</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_ssh:exec(<span class="string">&quot;192.168.6.77&quot;</span>, <span class="number">22</span>, [&#123;user, <span class="string">&quot;root&quot;</span>&#125;, &#123;password, <span class="string">&quot;123456&quot;</span>&#125;], <span class="string">&quot;export LANG=en.UTF-8 &amp;&amp; ls -l&quot;</span>).</span><br></pre></td></tr></table></figure><span id="more"></span><p>ä¸‹é¢è´´ä¸‹ä»£ç ï¼š</p><figure class="highlight erlang"><figcaption><span>my_ssh.erl</span><a href="/downloads/code/my_ssh.erl">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="comment">%% @doc</span></span><br><span class="line"><span class="comment">%% TODO æ¨¡å—æè¿°.</span></span><br><span class="line"><span class="comment">%% @end</span></span><br><span class="line"><span class="comment">%% ===========================================================================</span></span><br><span class="line"><span class="keyword">-module</span><span class="params">(my_ssh)</span>.</span><br><span class="line"><span class="keyword">-author</span><span class="params">(kingwen0302)</span>.</span><br><span class="line">-version<span class="params">(<span class="number">1.0</span>)</span>.</span><br><span class="line">-date<span class="params">(&#x27;<span class="number">2016</span>-<span class="number">03</span>-<span class="number">15</span>&#x27;)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-export</span><span class="params">([exec/<span class="number">4</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% @doc sshç™»å½•æ‰§è¡Œå‘½ä»¤è„šæœ¬</span></span><br><span class="line"><span class="comment">%% </span></span><br><span class="line"><span class="comment">%% for example:</span></span><br><span class="line"><span class="comment">%% ```</span></span><br><span class="line"><span class="comment">%% my_ssh:exec(&quot;192.168.6.77&quot;, 22, [{user, &quot;root&quot;}, {password, &quot;123456&quot;}], &quot;export LANG=en.UTF-8 &amp;&amp; ls -l&quot;).</span></span><br><span class="line"><span class="comment">%% &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">%% è¿™ä¸ªåªæ˜¯ä¸ªæµ‹è¯•è„šæœ¬</span></span><br><span class="line"><span class="comment">%% </span></span><br><span class="line"><span class="keyword">-spec</span> exec<span class="params">(Host, Port, Options, Cmd)</span> -&gt; Return when</span><br><span class="line">    Host        :: string<span class="params">()</span>,</span><br><span class="line">    Port        :: integer<span class="params">()</span>,</span><br><span class="line">    Options     :: list<span class="params">()</span>,</span><br><span class="line">    Cmd         :: string<span class="params">()</span>,</span><br><span class="line">    Return      :: {ExitStatus, Result},</span><br><span class="line">    ExitStatus  :: integer<span class="params">()</span>,</span><br><span class="line">    Result      :: string<span class="params">()</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">exec</span><span class="params">(Host, Port, Options, Cmd)</span> -&gt;</span></span><br><span class="line">    ssh:start(),</span><br><span class="line">    {ok, Ref} = ssh:connect(Host, Port, Options),</span><br><span class="line">    {ok, ChanID} = ssh_connection:session_channel(Ref, infinity),</span><br><span class="line">    <span class="keyword">case</span> ssh_connection:exec(Ref, ChanID, Cmd, infinity) <span class="keyword">of</span></span><br><span class="line">        success -&gt;</span><br><span class="line">            {ExitStatus, ReturnStr} = wait(Ref),</span><br><span class="line">            io:format(<span class="string">&quot;ExitStatus:~p~n&quot;</span>, [ExitStatus]),</span><br><span class="line">            io:format(<span class="string">&quot;ReturnStr:~n~s~n&quot;</span>, [ReturnStr]),</span><br><span class="line">            ok;</span><br><span class="line">        _ -&gt; error</span><br><span class="line">    <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">wait</span><span class="params">(Ref)</span> -&gt;</span></span><br><span class="line">    wait(Ref, <span class="number">0</span>, <span class="string">&quot;&quot;</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">wait</span><span class="params">(Ref, ExitStatus, Str)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        {ssh_cm, Ref, Msg} -&gt;</span><br><span class="line">            <span class="keyword">case</span> Msg <span class="keyword">of</span></span><br><span class="line">                {closed, _ChanID} -&gt;</span><br><span class="line">                    {ExitStatus, Str};</span><br><span class="line">                {data, _ChanID, _, RecvStr} -&gt;</span><br><span class="line">                    NewStr = io_lib:format(<span class="string">&quot;~s~s&quot;</span>, [Str, RecvStr]),</span><br><span class="line">                    wait(Ref, ExitStatus, NewStr);</span><br><span class="line">                {exit_status, _ChanID, Status} -&gt;</span><br><span class="line">                    wait(Ref, Status, Str);</span><br><span class="line">                _ -&gt;</span><br><span class="line">                    wait(Ref, ExitStatus, Str)</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://erlang.org/doc/apps/ssh/using_ssh.html">http://erlang.org/doc/apps/ssh/using_ssh.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹NGINX+PHPå®‰è£…åŠé…ç½®</title>
      <link href="/2016/03/15/centos/centos-nginx/"/>
      <url>/2016/03/15/centos/centos-nginx/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>CENTOSä¸‹NGINX+PHPç®€å•å®‰è£…é…ç½®</p><span id="more"></span><h2 id="è®¾ç½®æº"><a href="#è®¾ç½®æº" class="headerlink" title="è®¾ç½®æº"></a>è®¾ç½®æº</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## nginx.repo</span></span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install http://mirrors.ustc.edu.cn/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm</span><br><span class="line">yum -y install nginx</span><br><span class="line">yum -y install php php-common php-iconv php-mbstring php-fpm php-mysql php-pecl-ssh2</span><br></pre></td></tr></table></figure><h2 id="ç®€å•é…ç½®"><a href="#ç®€å•é…ç½®" class="headerlink" title="ç®€å•é…ç½®"></a>ç®€å•é…ç½®</h2><p>nginxçš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/nginx</code>ç›®å½•ä¸‹</p><h3 id="åŸºæœ¬è§„åˆ™"><a href="#åŸºæœ¬è§„åˆ™" class="headerlink" title="åŸºæœ¬è§„åˆ™"></a>åŸºæœ¬è§„åˆ™</h3><ol><li>ä¿®æ”¹è·¯å¾„<code>root or alias</code></li><li>è®¾ç½®php</li><li>é˜²ç«å¢™(å¼€æ”¾ç«¯å£80)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT</span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è‡ªå¯åŠ¨</span></span><br><span class="line">chkconfig php-fpm on</span><br><span class="line">chkconfig nginx on</span><br><span class="line"><span class="comment">## å¯åŠ¨æœåŠ¡</span></span><br><span class="line">service php-fpm restart</span><br><span class="line">service nginx restart</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨åŸŸå-ç«¯å£é…ç½®"><a href="#ä½¿ç”¨åŸŸå-ç«¯å£é…ç½®" class="headerlink" title="ä½¿ç”¨åŸŸå+ç«¯å£é…ç½®"></a><strong>ä½¿ç”¨åŸŸå+ç«¯å£é…ç½®</strong></h3><p>ä¾‹å¦‚: <code>www.baidu.com</code>, <code>www.baidu.com:8080</code><br><em><strong>éœ€è¦æ›´å¤šçš„åŸŸåå’Œç«¯å£</strong></em></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/nginx/conf.d/dev.game.com.conf</span></span><br><span class="line"><span class="comment">## è®¿é—®æ–¹å¼: dev.game.com</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>; </span><br><span class="line">    <span class="attribute">server_name</span>  dev.game.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123; </span><br><span class="line">        <span class="attribute">root</span>   /data/hero/server/php;</span><br><span class="line">        <span class="attribute">index</span>  index.php index.html index.htm;</span><br><span class="line">        <span class="comment">## æ˜¾ç¤ºç›®å½•</span></span><br><span class="line">        <span class="attribute">autoindex</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">autoindex_exact_size</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">autoindex_localtime</span> <span class="literal">on</span>;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">        <span class="attribute">root</span>           /data/hero/server/php;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">        <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">        <span class="attribute">fastcgi_connect_timeout</span> <span class="number">75</span>; </span><br><span class="line">        <span class="attribute">fastcgi_read_timeout</span> <span class="number">1200</span>;</span><br><span class="line">        <span class="attribute">fastcgi_send_timeout</span> <span class="number">1200</span>;</span><br><span class="line">        <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è™šæ‹Ÿç›®å½•é…ç½®"><a href="#ä½¿ç”¨è™šæ‹Ÿç›®å½•é…ç½®" class="headerlink" title="ä½¿ç”¨è™šæ‹Ÿç›®å½•é…ç½®"></a><strong>ä½¿ç”¨è™šæ‹Ÿç›®å½•é…ç½®</strong></h3><p>ä¾‹å¦‚: <code>learn.mingilin.com/rust</code>, <code>learn.mingilin.com/centos_daily</code><br><em><strong>åŒä¸€ä¸ªåŸŸåå’Œç«¯å£ä¸‹å¯ä»¥å»ºç«‹å¤šä¸ªç½‘ç«™</strong></em></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/nginx/conf.d/default.conf</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>; </span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/vhost.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/nginx/conf.d/vhost.d/dev.conf</span></span><br><span class="line"><span class="comment">## è®¿é—®æ–¹å¼: localhost/hero/server/php</span></span><br><span class="line"><span class="attribute">location</span> /hero/server/php &#123;</span><br><span class="line">    <span class="attribute">root</span>   /data;</span><br><span class="line">    <span class="comment">## alias /data/hero/server/php;</span></span><br><span class="line">    <span class="attribute">index</span>  index.php index.html index.htm;</span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">        <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">        <span class="attribute">fastcgi_connect_timeout</span> <span class="number">75</span>; </span><br><span class="line">        <span class="attribute">fastcgi_read_timeout</span> <span class="number">1200</span>;</span><br><span class="line">        <span class="attribute">fastcgi_send_timeout</span> <span class="number">1200</span>;</span><br><span class="line">        <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/nginx/conf.d/vhost.d/eat.conf</span></span><br><span class="line"><span class="comment">## è®¿é—®æ–¹å¼: localhost/eat</span></span><br><span class="line"><span class="attribute">location</span> /eat &#123;</span><br><span class="line">    <span class="attribute">root</span>    /data/help_doc;</span><br><span class="line">    <span class="attribute">index</span>   index.php index.html index.htm;</span><br><span class="line">    <span class="attribute">location</span> ~\.php$ &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">        <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">        <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>$document_rootçš„è®¾ç½®éå¸¸å…³é”®, å¦åˆ™phpæ— æ³•ä½¿ç”¨</strong></em></p></blockquote><h3 id="http-httpsä»£ç†"><a href="#http-httpsä»£ç†" class="headerlink" title="http/httpsä»£ç†"></a>http/httpsä»£ç†</h3><figure class="highlight nginx"><figcaption><span>server/8080.conf</span><a href="/downloads/code/nginx_proxy_conf\server\8080.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> proxy_server {</span><br><span class="line">    <span class="attribute">server</span> localhost:<span class="number">8081</span>;</span><br><span class="line">    <span class="attribute">server</span> localhost:<span class="number">8082</span>;</span><br><span class="line">    ip_hash;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span>      <span class="number">8080</span>;</span><br><span class="line">    <span class="attribute">location</span> / {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://proxy_server;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>   Host             $host;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>   X-Real-IP        $remote_addr;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        <span class="attribute">proxy_next_upstream</span> <span class="literal">error</span> timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class="line">        <span class="attribute">proxy_max_temp_file_size</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">proxy_connect_timeout</span>      <span class="number">90</span>;</span><br><span class="line">        <span class="attribute">proxy_send_timeout</span>         <span class="number">90</span>;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span>         <span class="number">90</span>;</span><br><span class="line">        <span class="attribute">proxy_buffer_size</span>          <span class="number">4k</span>;</span><br><span class="line">        <span class="attribute">proxy_buffers</span>              <span class="number">4</span> <span class="number">32k</span>;</span><br><span class="line">        <span class="attribute">proxy_busy_buffers_size</span>    <span class="number">64k</span>;</span><br><span class="line">        <span class="attribute">proxy_temp_file_write_size</span> <span class="number">64k</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨ip_hashçš„è½®è¯¢æ–¹æ³•,æ¯ä¸ªipåœ¨ä¸€å®šæ—¶é—´å†…ä¼šè¢«å›ºå®šçš„åç«¯æœåŠ¡å™¨<br>å¯ä»¥è§£å†³sessionå…±äº«é—®é¢˜</p><h3 id="tcpä»£ç†"><a href="#tcpä»£ç†" class="headerlink" title="tcpä»£ç†"></a>tcpä»£ç†</h3><p><strong>éœ€è¦ç¼–è¯‘æ—¶åŠ å…¥<code>--with-stream</code>å‚æ•°, ä½¿ç”¨<code>nginx -V</code>æŸ¥è¯¢</strong></p><figure class="highlight nginx"><figcaption><span>tcp/8083.conf</span><a href="/downloads/code/nginx_proxy_conf\tcp\8083.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">stream</span> {</span><br><span class="line">    <span class="attribute">upstream</span> mysqld {</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:3306</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="section">server</span> {</span><br><span class="line">        <span class="attribute">listen</span>      <span class="number">8083</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> mysqld;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><code>stream</code>å’Œ<code>http</code>æ˜¯åŒçº§ç›®å½•</p><figure class="highlight nginx"><figcaption><span>nginx.conf</span><a href="/downloads/code/nginx_proxy_conf\nginx.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#user  nobody;</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">error_log</span>  logs/error.log;</span><br><span class="line"><span class="attribute">error_log</span>  logs/error.log  <span class="literal">notice</span>;</span><br><span class="line"><span class="attribute">error_log</span>  logs/error.log  <span class="literal">info</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">events</span> {</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> {</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> d:/nginx/conf/server/*.conf;</span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="attribute">include</span> d:/nginx/conf/tcp/*.conf;</span><br></pre></td></tr></table></figure><h2 id="Windowsé…ç½®"><a href="#Windowsé…ç½®" class="headerlink" title="Windowsé…ç½®"></a>Windowsé…ç½®</h2><ol><li><p>é…ç½®ä¸LinuxåŸºæœ¬ç›¸åŒ, è¦ç‰¹æ®Šå¤„ç†ä¸‹å¯åŠ¨</p></li><li><p>è¦ä½¿ç”¨ç‰¹æ®Šçš„<a href="./../../res/RunHiddenConsole.exe">å·¥å…·</a>æ¥æ‰§è¡Œå¯åŠ¨</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">REM Windows ä¸‹æ— æ•ˆ</span></span><br><span class="line"><span class="comment">REM set PHP_FCGI_CHILDREN=5</span></span><br><span class="line"><span class="comment">REM æ¯ä¸ªè¿›ç¨‹å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°ï¼Œæˆ–è®¾ç½®ä¸º Windows ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">set</span> PHP_FCGI_MAX_REQUESTS=<span class="number">1000</span></span><br><span class="line"><span class="built_in">echo</span> Starting PHP FastCGI...</span><br><span class="line"><span class="function">D:</span></span><br><span class="line"><span class="function"><span class="title">cd</span> <span class="title">D</span>:/<span class="title">php</span></span></span><br><span class="line"><span class="function"><span class="title">RunHiddenConsole</span> <span class="title">D</span>:/<span class="title">php</span>/<span class="title">php</span>-<span class="title">cgi.exe</span> -<span class="title">b</span> 127.0.0.1:9000</span></span><br><span class="line"><span class="function"><span class="title">echo</span> <span class="title">Starting</span> <span class="title">nginx</span>...</span></span><br><span class="line"><span class="function"><span class="title">D</span>:</span></span><br><span class="line"><span class="function"><span class="title">cd</span> <span class="title">D</span>:/<span class="title">nginx</span></span></span><br><span class="line"><span class="function"><span class="title">RunHiddenConsole</span> <span class="title">D</span>:/<span class="title">nginx</span>/<span class="title">nginx.exe</span></span></span><br><span class="line"><span class="function"><span class="title">pause</span></span></span><br></pre></td></tr></table></figure> <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">REM stop_nginx.bat</span></span><br><span class="line"><span class="built_in">echo</span> Stopping nginx...</span><br><span class="line"><span class="built_in">taskkill</span> /F /IM nginx.exe &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="built_in">echo</span> Stopping PHP FastCGI...</span><br><span class="line"><span class="built_in">taskkill</span> /F /IM php-cgi.exe &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>nssm</code>æ³¨å†Œä¸ºæœåŠ¡å¯åŠ¨/å…³é—­</p></li><li><p>åœ¨erlå¸®åŠ©æ–‡æ¡£çš„æ—¶å€™,éœ€è¦æ‰‹åŠ¨è·³è½¬ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;0;url=doc/index.html&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> nginx </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä¸å…¶ä»–è¯­è¨€é€šä¿¡çš„å‡ ç§æ–¹å¼</title>
      <link href="/2016/03/10/erlang/erlang-communication/"/>
      <url>/2016/03/10/erlang/erlang-communication/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ä¸ªé¡¹ç›®çš„å¼€å‘å¯èƒ½æ¶‰åŠè‹¥å¹²ç§è¯­è¨€ï¼Œå‰ç«¯ã€åç«¯ã€åå°éƒ½æœ‰ä¸åŒçš„é€‚åˆçš„è¯­è¨€ï¼Œæ¯”å¦‚åœ¨æ¸¸æˆä¸­ï¼Œå‰ç«¯ç”¨<code>C+Lua</code>ï¼Œåç«¯ç”¨<code>Erlang</code>ï¼Œåå°ç”¨<code>PHP</code>ï¼Œä¸åŒè¯­è¨€ç›´æ¥çš„é€šä¿¡å°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œä¸‹é¢ç®€å•è®¨è®ºå‡ ç»„å¯èƒ½çš„å®ç°æ–¹å¼ï¼š</p><h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><h3 id="åŸºäºè‡ªå®šä¹‰åè®®çš„Socketè¯·æ±‚"><a href="#åŸºäºè‡ªå®šä¹‰åè®®çš„Socketè¯·æ±‚" class="headerlink" title="åŸºäºè‡ªå®šä¹‰åè®®çš„Socketè¯·æ±‚"></a>åŸºäºè‡ªå®šä¹‰åè®®çš„Socketè¯·æ±‚</h3><p>å‰ç«¯ï¼ˆæˆ–è€…åå°ï¼‰ä¸åç«¯çº¦å®šå¥½åè®®æ ¼å¼ï¼Œä»¥åè®®çš„æ–¹å¼é€šä¿¡ã€‚</p><h3 id="åŸºäºHTTPçš„è¯·æ±‚"><a href="#åŸºäºHTTPçš„è¯·æ±‚" class="headerlink" title="åŸºäºHTTPçš„è¯·æ±‚"></a>åŸºäºHTTPçš„è¯·æ±‚</h3><p>åç«¯æ¶è®¾ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå‰ç«¯ï¼ˆæˆ–è€…åå°ï¼‰é€šè¿‡HTTPè¯·æ±‚å°†éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ç»™åç«¯ã€‚</p><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p>Erlangå¼€å¯SSHæœåŠ¡å™¨ï¼Œå‰ç«¯ï¼ˆæˆ–è€…åå°ï¼‰é€šè¿‡æ’ä»¶SSHç™»å½•åˆ°ErlangæœåŠ¡å™¨ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Eshell V5.<span class="number">10.4</span>  (abort with ^G)</span><br><span class="line"><span class="number">1</span>&gt; ssh:start().</span><br><span class="line"><span class="number">2</span>&gt; ssh:daemon(<span class="number">10000</span>, [&#123;user_passwords, [&#123;<span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>&#125;]&#125;]).</span><br></pre></td></tr></table></figure><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# sshpass -p <span class="number">123456</span> ssh -p <span class="number">10000</span> root@<span class="number">127.0</span>.<span class="number">0.1</span> &#x27;lists:seq(<span class="number">1</span>, <span class="number">10</span>).&#x27;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlå¤šå®ä¾‹è„šæœ¬</title>
      <link href="/2016/03/10/mysql/mysql-instance/"/>
      <url>/2016/03/10/mysql/mysql-instance/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸ºä»€ä¹ˆå¤šå®ä¾‹"><a href="#ä¸ºä»€ä¹ˆå¤šå®ä¾‹" class="headerlink" title="ä¸ºä»€ä¹ˆå¤šå®ä¾‹"></a>ä¸ºä»€ä¹ˆå¤šå®ä¾‹</h2><ol><li>[å•å®ä¾‹]ç¼ºå°‘DBAï¼Œæ— æ³•ä¼˜åŒ–å•å®ä¾‹æ€§èƒ½ï¼›</li><li>[å•å®ä¾‹]ç³»ç»Ÿæœ¬èº«è®¾è®¡é—®é¢˜ï¼Œå½±å“å•å®ä¾‹æ€§èƒ½ï¼›</li><li>[å•å®ä¾‹]é¢„æ–™ä¹‹å¤–ï¼Œè€Œä¸”ä¸èƒ½é‡å¯æ•°æ®åº“ï¼›</li><li>[å¤šå®ä¾‹]å…‹æœä»¥ä¸Šç¼ºç‚¹ï¼›</li><li>[å¤šå®ä¾‹]æŸä¸ªå®ä¾‹å‡ºç°é—®é¢˜ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–å®ä¾‹ï¼›</li></ol><span id="more"></span><h2 id="å¤šå®ä¾‹è„šæœ¬"><a href="#å¤šå®ä¾‹è„šæœ¬" class="headerlink" title="å¤šå®ä¾‹è„šæœ¬"></a>å¤šå®ä¾‹è„šæœ¬</h2><figure class="highlight bash"><figcaption><span>mysql_instance.sh</span><a href="/downloads/code/mysql_instance.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">PORT=<span class="variable">${MYSQL_PORT}</span></span><br><span class="line">DB_PATH=<span class="variable">${MYSQL_PATH}</span></span><br><span class="line">CNF_PATH=/etc/my.cnf.<span class="variable">${PORT}</span></span><br><span class="line">SOCK_FILE=/tmp/mysql_<span class="variable">${PORT}</span>.sock</span><br><span class="line">DB_PASS=<span class="variable">${DB_PASSWORD}</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;åˆå§‹åŒ–æ•°æ®åº“&quot;</span></span><br><span class="line">mysql_install_db --user=mysql --datadir=<span class="variable">${DB_PATH}</span></span><br><span class="line"></span><br><span class="line">cat &gt; <span class="variable">${CNF_PATH}</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">port=${PORT}</span></span><br><span class="line"><span class="string">datadir=${DB_PATH}</span></span><br><span class="line"><span class="string">socket=${SOCK_FILE}</span></span><br><span class="line"><span class="string">user=mysql</span></span><br><span class="line"><span class="string">symbolic-links=0</span></span><br><span class="line"><span class="string">innodb_file_per_table</span></span><br><span class="line"><span class="string">max_connections=400</span></span><br><span class="line"><span class="string">[mysqld_safe]</span></span><br><span class="line"><span class="string">log-error=/var/log/mysqld_${PORT}.log</span></span><br><span class="line"><span class="string">pid-file=/var/run/mysqld/mysqld_${PORT}.pid</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹&quot;</span></span><br><span class="line">mysqld_safe --defaults-file=<span class="variable">${CNF_PATH}</span> 2&gt;&amp;1 &gt; /dev/null &amp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -S <span class="variable">${SOCK_FILE}</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;.&quot;</span></span><br><span class="line">    sleep 1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;åˆå§‹åŒ–å¯†ç &quot;</span></span><br><span class="line">mysqladmin -u root password <span class="variable">${DB_PASS}</span> -S <span class="variable">${SOCK_FILE}</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æƒé™è®¾ç½®&quot;</span></span><br><span class="line">cat &gt; tmp.sql &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;127.0.0.1&#x27; IDENTIFIED BY &#x27;${DB_PASS}&#x27;; </span></span><br><span class="line"><span class="string">flush privileges;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">mysql -uroot -p<span class="variable">${DB_PASS}</span> -S <span class="variable">${SOCK_FILE}</span> -e <span class="string">&quot;source tmp.sql;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å®Œæˆ&quot;</span></span><br><span class="line"><span class="comment">## å…³é—­æ•°æ®åº“</span></span><br><span class="line"><span class="comment">## mysqladmin -u root -p${DB_PASS} -S ${SOCK_FILE} shutdown</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangä¸‹httpè¯·æ±‚çš„å‡ ç§æ–¹å¼</title>
      <link href="/2016/03/10/erlang/erlang-httpc/"/>
      <url>/2016/03/10/erlang/erlang-httpc/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¸¸æˆå¼€å‘ä¸­,éœ€è¦å¯¹æ¥å¹³å°SDK<br>éªŒè¯æµç¨‹å¤§æ¦‚æ˜¯:</p><ol><li>å®¢æˆ·ç«¯ç™»å½•å¹³å°,è·å–authorize_code,å¹¶å‘é€ç»™æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯å‘å¹³å°éªŒè¯authorize_code,åŒæ—¶è·å¾—user_id</li><li>æœåŠ¡ç«¯éªŒè¯é€šè¿‡åè¿›è¡Œæ¸¸æˆç™»å½•</li></ol><p>éªŒè¯æ–¹å¼æœ‰<code>GET</code>,<code>POST</code>,<code>JSON</code>ç­‰æ–¹å¼,ç”¨åˆ°çš„æ˜¯<code>erlang</code>çš„<code>httpc</code>æ¨¡å—.</p><span id="more"></span><h4 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inets:start(),</span><br><span class="line">ssl:start().</span><br></pre></td></tr></table></figure><h4 id="GETæ–¹å¼"><a href="#GETæ–¹å¼" class="headerlink" title="GETæ–¹å¼"></a>GETæ–¹å¼</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Url = <span class="string">&quot;http://xxx.com?a=1&amp;b=2&amp;c=3&quot;</span>,</span><br><span class="line">httpc:request(get, &#123;Url, []&#125;, [&#123;timeout, <span class="number">20000</span>&#125;], []).</span><br></pre></td></tr></table></figure><h4 id="POSTæ–¹å¼"><a href="#POSTæ–¹å¼" class="headerlink" title="POSTæ–¹å¼"></a>POSTæ–¹å¼</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Url = <span class="string">&quot;http://xxx.com&quot;</span>,</span><br><span class="line">PostStr = <span class="string">&quot;a=1&amp;b=2&amp;c=3&quot;</span>,</span><br><span class="line">httpc:request(post, &#123;Url, [], <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>, PostStr&#125;, [&#123;version, <span class="string">&quot;HTTP/1.1&quot;</span>&#125;, &#123;timeout, <span class="number">10000</span>&#125;], []).</span><br></pre></td></tr></table></figure><h4 id="JSONæ–¹å¼"><a href="#JSONæ–¹å¼" class="headerlink" title="JSONæ–¹å¼"></a>JSONæ–¹å¼</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SendData= [&#123;<span class="string">&quot;sign&quot;</span>, MD5&#125;],</span><br><span class="line">SendJson = rfc4627:encode(to_rfc4627(SendData)),</span><br><span class="line">Url = <span class="string">&quot;http://xxx.com&quot;</span>,</span><br><span class="line">httpc:request(post, &#123;Url, [], <span class="string">&quot;application/json; charset=utf-8&quot;</span>, SendJson&#125;, [&#123;version, <span class="string">&quot;HTTP/1.1&quot;</span>&#125;, &#123;timeout, <span class="number">10000</span>&#125;], []).</span><br></pre></td></tr></table></figure><h4 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h4><ol><li>Url<br>åœ¨æ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ<code>Url=Url_1++Url_2</code>,ç”Ÿæˆçš„å­—ç¬¦ä¸²å¯èƒ½æ˜¯<code>Url= [123, 123, 33, 2]</code>ï¼Œä½¿ç”¨<code>Url = binary_to_list(list_to_binary(TmpUrl))</code>é¿å…ï¼›PostSträ¹Ÿç±»ä¼¼ï¼Œå¦‚æœå‚æ•°æ”¯æŒbinary()çš„è¯ï¼Œæœæ–­ä¼ é€’binary()ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
            <tag> httpc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centosä¸‹yumå®‰è£…erlang</title>
      <link href="/2016/03/10/erlang/erlang-yum-install/"/>
      <url>/2016/03/10/erlang/erlang-yum-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æºç å®‰è£…erlangå°½ç®¡æ€§èƒ½ä¸Šå¥½å¾ˆå¤šï¼Œä½†å„ç§å·¥å…·ä»¥åŠç¼–è¯‘å‚æ•°çš„è®¾ç½®ä¹Ÿæ˜¯ä¸€ä¸ªå¤´ç–¼çš„äº‹æƒ…ã€‚</p><p>yumå®‰è£…å…·æœ‰ç®€å•å¿«é€Ÿçš„ä¼˜ç‚¹ï¼š<br>ä¸‹é¢æ˜¯å¿«é€Ÿå®‰è£…erlangçš„è„šæœ¬</p><ul><li><p><code>R14</code>ç”¨<code>epel</code>æº</p></li><li><p><code>R16+</code>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line">rpm --import http://binaries.erlang-solutions.com/debian/erlang_solutions.asc</span><br><span class="line">wget -O /etc/yum.repos.d/erlang_solutions.repo  http://binaries.erlang-solutions.com/rpm/centos/erlang_solutions.repo</span><br><span class="line">yum install -y esl-erlang-R16B03</span><br></pre></td></tr></table></figure></li><li><p><code>R15</code>æˆ–è€…å…¶ä»–ç‰ˆæœ¬è¦ä¹ˆæ”¾å¼ƒï¼Œè¦ä¹ˆæºç å®‰è£…ï¼Œæ²¡æœ‰å…¶ä»–åŠæ³•äº†ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…ç³»ç»Ÿåˆ°Uç›˜</title>
      <link href="/2016/03/10/windows/windows-install-to-usb/"/>
      <url>/2016/03/10/windows/windows-install-to-usb/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å®‰è£…ç³»ç»Ÿåˆ°Uç›˜æ˜¯ä¸€ä¸ªä½œæ­»çš„ç©æ³•,ä¸”ä¸è¯´ioè¯»å†™é€Ÿåº¦,é©±åŠ¨ä¹Ÿæ˜¯ä¸€ä¸ªéº»çƒ¦çš„é—®é¢˜.<br>è™½ç„¶ä¸é½¿,ä½†æ˜¯è¿˜æ˜¯è¦çŸ¥é“æ€ä¹ˆä½œæ­».</p><span id="more"></span><h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><ul><li>virtualbox</li><li>Uç›˜</li></ul><!-- more --><h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><ul><li>åˆ›å»ºä¸€ä¸ªæ²¡æœ‰è™šæ‹Ÿç¡¬ç›˜çš„è™šæ‹Ÿæœº</li><li>å¯åŠ¨è™šæ‹Ÿæœº</li><li>è®¾å¤‡ -&gt; åˆ†é…USBè®¾å¤‡</li><li>finish</li></ul>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”Ÿæˆå°å›¾ç‰‡çš„æ•°æ®æµ</title>
      <link href="/2016/03/10/php/php-data-url/"/>
      <url>/2016/03/10/php/php-data-url/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç»å¸¸çœ‹åˆ°ä»£ç ä¸­æœ‰ä½¿ç”¨<code>&lt;img src=&quot;data:image/jpg;base64,xxxx&quot; /&gt;</code>æ ¼å¼çš„å›¾ç‰‡<br>ç”Ÿæˆå¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="variable">$img_file</span> = file_get_contents(<span class="string">&quot;a.png&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;data:image/jpg;base64,&quot;</span>.base64_encode(<span class="variable">$img_file</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>php a.php</code>ç”Ÿæˆ</p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VIMé…ç½®</title>
      <link href="/2016/03/10/vim/vim-install/"/>
      <url>/2016/03/10/vim/vim-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸°å¯Œçš„æ’ä»¶æˆå°±äº†ç¼–è¾‘å™¨ä¹‹ç¥<code>vim</code></p><p>ä¸ªäººçš„<a href="https://github.com/kingwen0302/vim.git">vimé…ç½®</a>æ‰˜ç®¡åœ¨<a href="https://github.com/">github</a>ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹(chui)ç‚¹(shui)ï¼š  </p><ul><li>é€‚åˆåœ¨linuxä¸‹ä½¿ç”¨ï¼›   </li><li>ä½¿ç”¨Bundleç®¡ç†æ’ä»¶ï¼Œåˆ†åˆ†é’Ÿå®Œæˆå®‰è£…ï¼ˆç½‘ç»œå¥½çš„æƒ…å†µï¼‰ï¼›   </li><li>å®‰è£…æ–¹ä¾¿ï¼Œå¯ä»¥æ”¾åˆ°ä»»ä½•æœ‰æƒé™è®¿é—®çš„ç›®å½•ï¼Œåªéœ€ç®€å•ä¿®æ”¹ä¸¤è¡Œé…ç½®å³å¯ï¼›  </li><li>é…ç½®ç®€å•ï¼Œæ¯ä¸ªæ’ä»¶ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œç®€å•ç®¡ç†ï¼› </li></ul>]]></content>
      
      
      <categories>
          
          <category> vim </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹å®‰è£…ubuntu</title>
      <link href="/2016/03/10/ubuntu/ubuntu-install/"/>
      <url>/2016/03/10/ubuntu/ubuntu-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h4><ul><li>EasyBCD</li><li>Ubuntu14.04</li><li>MbrFix</li></ul><p>ä¸‹è½½åœ°å€é—®ç™¾åº¦</p><span id="more"></span><h4 id="ç¡¬ç›˜å®‰è£…"><a href="#ç¡¬ç›˜å®‰è£…" class="headerlink" title="ç¡¬ç›˜å®‰è£…"></a>ç¡¬ç›˜å®‰è£…</h4><ul><li>å®‰è£…EasyBCD</li><li>è¿è¡ŒEasyBCD,æ·»åŠ æ–°æ¡ç›®-&gt;NeoGrub-&gt;å®‰è£…-&gt;é…ç½®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title Install Ubuntu</span><br><span class="line">root (hd0,0)</span><br><span class="line">kernel (hd0,0)/vmlinuz boot=casper iso-scan/filename=/ubuntu.iso ro quiet splash locale=zh_CN.UTF-8</span><br><span class="line">initrd (hd0,0)/initrd.lz</span><br></pre></td></tr></table></figure></li><li>å°†ubuntu.isoæ”¾åˆ°Cç›˜æ ¹ç›®å½•, è§£å‹å…¶ä¸­çš„**.diskæ–‡ä»¶å¤¹<strong>å’Œ</strong>initrd.lz<strong>å’Œ</strong>vmlinuz.efi**æ–‡ä»¶åˆ°Cç›˜æ ¹ç›®å½•<br>initrd.lz å’Œ mlinuz.efi åœ¨ casperæ–‡ä»¶å¤¹ä¸‹</li><li>å¤åˆ¶ä¸€ä»½vmlinuz.efi, æ”¹åä¸ºvmlinuz</li><li>é‡å¯è®¡ç®—æœº</li><li>é€‰æ‹©NeoGrubå¼•å¯¼å™¨</li><li>åŠ è½½ubuntuå, <strong>Ctrl+Alt+T</strong>æ‰“å¼€ç»ˆç«¯, è¾“å…¥<code>sudo umount -l /isodevice</code><br>å¯ä»¥å¤šè¾“å…¥å‡ æ¬¡, ç¡®ä¿</li><li>å®‰è£…</li><li>ä¿®å¤å¼•å¯¼<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ä¸€èˆ¬é»˜è®¤å°±ä¼šæ·»åŠ çš„</span></span><br><span class="line">sudo gedit /etc/default/grub</span><br><span class="line">GRUB_TIMEOUT=<span class="string">&quot;10&quot;</span></span><br><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure></li></ul><h3 id="å¸è½½ubuntu"><a href="#å¸è½½ubuntu" class="headerlink" title="å¸è½½ubuntu"></a>å¸è½½ubuntu</h3><ul><li>ä¸‹è½½MbrFix</li><li>ç®¡ç†å‘˜è¿è¡Œ-&gt;Cmd-&gt;åˆ‡æ¢åˆ°MbrFixæ‰€åœ¨ç›®å½•<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mbrfix /drive 0 fixmbr</span><br></pre></td></tr></table></figure></li><li>åœ¨windowsä¸‹å°†linuxçš„åˆ†åŒºåˆ é™¤</li><li>åˆ é™¤bcd<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rem ç®¡ç†å‘˜è¿è¡Œ-&gt;Cmd</span><br><span class="line">bcdedit</span><br><span class="line">bcdedit /delete &#123;default&#125;</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨easybcdåˆ é™¤</li></ul><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://www.linuxidc.com/Linux/2014-04/100369.htm">http://www.linuxidc.com/Linux/2014-04/100369.htm</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>erlangæ€§èƒ½è°ƒä¼˜</title>
      <link href="/2016/03/10/erlang/erlang/"/>
      <url>/2016/03/10/erlang/erlang/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><ol><li>é€šè¿‡<code>erlang:process_info(PID, reductions).</code>ç²—ç•¥è¯„ä¼°è¿›ç¨‹çš„è´Ÿè½½ï¼Œå¦‚æœå€¼ç›¸å¯¹å…¶ä»–è¿›ç¨‹å¾ˆå¤§çš„è¯ï¼Œè´Ÿè½½ä¼šå¾ˆé«˜ã€‚</li><li>ã€ä¸å»ºè®®ä½¿ç”¨ã€‘é€šè¿‡<code>spawn_opt/4</code>æ¥è®¾ç½®åƒåœ¾å›æ”¶ï¼Œ<code>erlang:system_info(fullsweep_after)</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>erl -env ERL_FULLSWEEP_AFTER 0</code>æ¥åŠ å¿«åƒåœ¾å›æ”¶ï¼Œè¿™ä¸ªå€¼å¯ä»¥è®¾ç½®ä¸º10~20ã€‚<span id="more"></span></li><li>åƒåœ¾å›æ”¶æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šå¯¼è‡´è¿›ç¨‹æŒ‚èµ·ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åªæœ‰ä¸€å°éƒ¨åˆ†æ´»è·ƒæ•°æ®(live data)ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¿«çš„æ“ä½œã€‚</li><li>åƒåœ¾å›æ”¶å¯ä»¥å¼ºåˆ¶æ‰§è¡Œ<code>erlang:garbage_collect(PID)</code>ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ã€‚</li><li>HiPE(High Performance Erlang) åœ¨è¿ç®—ä¸Šä¼šå¿«2-3å€ã€‚</li><li>èŠ‚ç‚¹è”é€š<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% è¿æ¥èŠ‚ç‚¹</span></span><br><span class="line">net_kernel:connect_node(&#x27;test@localhost&#x27;).</span><br><span class="line"><span class="comment">%% é™å®šæŒ‡å®šèŠ‚ç‚¹å¯ä»¥è”é€š</span></span><br><span class="line">net_kernnel:allow(Nodes).</span><br><span class="line"><span class="comment">%% è”é€šèŠ‚ç‚¹</span></span><br><span class="line">net_adm:ping(&#x27;test@localhost&#x27;).</span><br><span class="line"><span class="comment">%% ä¸»åŠ¨æ–­å¼€èŠ‚ç‚¹</span></span><br><span class="line">[net_kernel:disconnect(X) || X &lt;- nodes() -- [List_of_wanted_nodes]].</span><br><span class="line"><span class="comment">%% åœ¨rpc:callæ—¶ï¼Œä¼šè‡ªåŠ¨èŠ‚ç‚¹è”é€š</span></span><br><span class="line"><span class="comment">%% å¯ä»¥è®¾ç½®å–æ¶ˆè‡ªåŠ¨è”é€š</span></span><br><span class="line">erl -kernel dist_auto_connect never</span><br></pre></td></tr></table></figure></li><li><code>foo()</code> &gt; <code>bar:foo()</code> &gt; (<code>Mod:Func()</code> â‰ˆ<code>F()</code>) &gt; <code>apply(Mod, Func, Args)</code>ï¼ŒåŒ¿åå‡½æ•°å’Œapply/3åœ¨æ€§èƒ½ä¸Šæ˜¯æ¯”è¾ƒå·®çš„ï¼Œä½†æ˜¯åœ¨ä¸€èˆ¬çš„ç¼–ç¨‹ä¸­ï¼Œè¿™äº›å·®å¼‚å¯ä»¥å¿½ç•¥ã€‚</li><li>è¿›ç¨‹å­—å…¸éå¸¸çš„å¿«ï¼Œä½†æ˜¯æ‰“ç ´äº†å˜é‡ä¸å˜çš„åŸåˆ™ï¼Œå› æ­¤åœ¨ä¹¦ä¸­éƒ½ä¸å»ºè®®ä½¿ç”¨ï¼Œä½†æ˜¯ç¡®å®å¾ˆå¿«ï¼Œæ¯”etså¿«ä¸€ä¸ªæ•°é‡çº§ã€‚ä½†æ˜¯è¿™ä¸ªæµ‹è¯•ä¹Ÿåº”è¯¥å­˜åœ¨é—®é¢˜ï¼šetsæ˜¯è¿›ç¨‹å®ç°çš„ï¼Œè¿›ç¨‹å†…éƒ¨å’Œè¿›ç¨‹ä¹‹é—´çš„æ“ä½œæ¯”è¾ƒæ˜¯å¦ä¸å¤ªåˆç†å‘¢ï¼Ÿ  </li><li>è¿›ç¨‹é—´æ•°æ®å…±äº«çš„å‡ ç§æ–¹å¼ï¼š<ul><li>ç‹¬ç«‹è¿›ç¨‹ï¼ˆ<code>gen_server:call(PID, &#123;get, test&#125;)</code>ï¼‰</li><li>ETS</li><li>applicationï¼ˆ<code>application:get(APP, test)</code>ï¼‰</li><li>mochiglobalæ¨¡å—(åŠ¨æ€ç¼–è¯‘ï¼Œæ²¡æœ‰çœ‹ï¼‰</li></ul></li><li>å†…å­˜æ³„éœ²æ’æŸ¥<br>erlangä¸­çš„å†…å­˜æ³„éœ²æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯è¿›ç¨‹å†…éƒ¨é€»è¾‘ï¼Œä¸€ç±»æ˜¯æ²¡æœ‰æ­£å¸¸é”€æ¯è¿›ç¨‹ï¼š<br>è¿›ç¨‹å†…éƒ¨çš„é€šè¿‡<code>erlang:process_info(PID, memory)</code>æŒ‰ç…§memoryå ç”¨å¤§å°æ’åºï¼Œè·å¾—æœ€å ç”¨å†…å­˜çš„è¿›ç¨‹ã€‚<br>è¿›ç¨‹é—´é€šè¿‡shellçš„<code>i()</code>è·å¾—æ²¡æœ‰æ­£å¸¸é”€æ¯çš„è¿›ç¨‹PIDï¼Œç„¶å<code>erlang:process_info(PID)</code>åˆ†æã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> erlang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> erlang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GITHUB SSHç™»å½•</title>
      <link href="/2016/03/10/github/github-ssh-login/"/>
      <url>/2016/03/10/github/github-ssh-login/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>GITHUBæ”¯æŒ<code>https</code>,<code>ssh</code>ç™»å½•ï¼Œ<code>ssh</code>ç™»å½•æ–¹ä¾¿å¿«æ·ã€‚</p><span id="more"></span><h4 id="ç”Ÿæˆpublic-key"><a href="#ç”Ÿæˆpublic-key" class="headerlink" title="ç”Ÿæˆpublic key"></a>ç”Ÿæˆpublic key</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="comment">## è¿™æ­¥å¾ˆé‡è¦ï¼Œé»˜è®¤sshåªæ‰«æid_rsa</span></span><br><span class="line">cp è‡ªå·±çš„key id_rsa</span><br><span class="line">chmod 400 id_rsa</span><br></pre></td></tr></table></figure><h4 id="å°†keyåŠ å…¥githubä¸­ï¼š"><a href="#å°†keyåŠ å…¥githubä¸­ï¼š" class="headerlink" title="å°†keyåŠ å…¥githubä¸­ï¼š"></a>å°†keyåŠ å…¥githubä¸­ï¼š</h4><p><code>github</code> -&gt; <code>Settings</code> -&gt; <code>SSH keys</code> -&gt; <code>æ·»åŠ ssh</code></p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line"><span class="comment">## debug</span></span><br><span class="line">ssh -T -v git@github.com</span><br></pre></td></tr></table></figure><p>ç„¶å<code>git</code>æ“ä½œå°±ä¸éœ€è¦å¯†ç äº†</p><h4 id="å‚è€ƒæ–‡æ¡£ï¼š"><a href="#å‚è€ƒæ–‡æ¡£ï¼š" class="headerlink" title="å‚è€ƒæ–‡æ¡£ï¼š"></a>å‚è€ƒæ–‡æ¡£ï¼š</h4><p><a href="http://mqing720.blog.163.com/blog/static/2822000020152157483265/">gitè¿æ¥å¤±è´¥</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TMUXå®‰è£…é…ç½®</title>
      <link href="/2016/03/10/centos/centos-tmux/"/>
      <url>/2016/03/10/centos/centos-tmux/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>TMUXå®‰è£…é…ç½®</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><figcaption><span>install_tmux.sh</span><a href="/downloads/code/install_tmux.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">yum -y remove tmux</span><br><span class="line">yum -y install gcc kernel-devel make ncurses-devel</span><br><span class="line"></span><br><span class="line">curl -OL https://github.com/libevent/libevent/releases/download/release-2.0.22-stable/libevent-2.0.22-stable.tar.gz</span><br><span class="line">tar -xvzf libevent-2.0.22-stable.tar.gz</span><br><span class="line"><span class="built_in">cd</span> libevent-2.0.22-stable</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">curl -OL https://github.com/tmux/tmux/releases/download/2.1/tmux-2.1.tar.gz</span><br><span class="line">tar -xvzf tmux-2.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> tmux-2.1</span><br><span class="line">LDFLAGS=<span class="string">&quot;-L/usr/local/lib -Wl,-rpath=/usr/local/lib&quot;</span> ./configure --prefix=/usr/<span class="built_in">local</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><p>tmuxç±»ä¼¼screenï¼Œä½†æ˜¯åˆ†å±æ›´åŠ å¼ºå¤§</p><h3 id="tmuxé»˜è®¤çš„key"><a href="#tmuxé»˜è®¤çš„key" class="headerlink" title="tmuxé»˜è®¤çš„key"></a>tmuxé»˜è®¤çš„key</h3><p>ctrl+b</p><h3 id="å‡ ä¸ªæ¦‚å¿µ"><a href="#å‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="å‡ ä¸ªæ¦‚å¿µ"></a>å‡ ä¸ªæ¦‚å¿µ</h3><p>ä¼šè¯</p><p>çª—å£</p><p>pane</p><p>ä¸€ä¸ªä¼šè¯ä¸‹å¯ä»¥æœ‰å¤šä¸ªçª—å£ï¼ˆc-b wï¼‰ï¼Œä¸€ä¸ªçª—å£ä¸‹å¯ä»¥æœ‰å¤šä¸ªpaneï¼ˆc-b â€œ, c-b %ï¼‰</p><h3 id="å‡ ä¸ªå¸¸ç”¨çš„å¿«æ·é”®"><a href="#å‡ ä¸ªå¸¸ç”¨çš„å¿«æ·é”®" class="headerlink" title="å‡ ä¸ªå¸¸ç”¨çš„å¿«æ·é”®"></a>å‡ ä¸ªå¸¸ç”¨çš„å¿«æ·é”®</h3><table><thead><tr><th>å¿«æ·é”®</th><th>æè¿°</th></tr></thead><tbody><tr><td>C-b c</td><td>åˆ›å»ºä¸€ä¸ªæ–°çš„çª—å£</td></tr><tr><td>C-b n</td><td>åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£</td></tr><tr><td>C-b p</td><td>åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£</td></tr><tr><td>C-b l</td><td>æœ€åä¸€ä¸ªçª—å£,å’Œä¸Šä¸€ä¸ªçª—å£çš„æ¦‚å¿µä¸ä¸€æ ·å“Ÿ,è°è¯•è°çŸ¥é“</td></tr><tr><td>c-b w</td><td>é€šè¿‡ä¸Šä¸‹é”®é€‰æ‹©å½“å‰çª—å£ä¸­æ‰“å¼€çš„ä¼šè¯</td></tr><tr><td>C-b æ•°å­—</td><td>ç›´æ¥è·³åˆ°ä½ æŒ‰çš„æ•°å­—æ‰€åœ¨çš„çª—å£</td></tr><tr><td>C-b &amp;</td><td>é€€å‡ºå½“å‰çª—å£</td></tr><tr><td>C-b d</td><td>ä¸´æ—¶æ–­å¼€ä¼šè¯ æ–­å¼€ä»¥å,è¿˜å¯ä»¥è¿ä¸Šçš„å“Ÿ</td></tr><tr><td>C-b â€œ</td><td>åˆ†å‰²å‡ºæ¥ä¸€ä¸ªçª—å£</td></tr><tr><td>C-b %</td><td>åˆ†å‰²å‡ºæ¥ä¸€ä¸ªçª—å£</td></tr><tr><td>C-b o</td><td>åœ¨å°çª—å£ä¸­åˆ‡æ¢</td></tr><tr><td>C-b (æ–¹å‘é”®)</td><td>paneåˆ‡æ¢</td></tr><tr><td>C-b !</td><td>å…³é—­æ‰€æœ‰å°çª—å£</td></tr><tr><td>C-b x</td><td>å…³é—­å½“å‰å…‰æ ‡å¤„çš„å°çª—å£</td></tr><tr><td>C-b t</td><td>é’Ÿè¡¨</td></tr><tr><td>C-b pageup/pagedo</td><td></td></tr><tr><td>C-b Tab</td><td>å¼€å¯å…³é—­ä¾§è¾¹æ ï¼ˆéœ€è¦æ’ä»¶æ”¯æŒï¼‰</td></tr></tbody></table><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><ul><li><p><code>/etc/tmux.conf</code></p></li><li><p><code>~/.tmux.conf</code></p></li><li><p><code>C-b :</code>-&gt;<code>source ~/.tmux.conf</code>-&gt;<code>é…ç½®ç”Ÿæ•ˆ</code></p></li></ul><figure class="highlight bash"><figcaption><span>.tmux.conf</span><a href="/downloads/code/.tmux.conf">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">unbind C-a</span><br><span class="line"><span class="built_in">set</span> -g prefix C-b</span><br><span class="line"><span class="built_in">set</span> -g mouse on</span><br><span class="line"><span class="comment">## ä½¿ç”¨ctrl-b : -&gt; set mouse off å…³é—­ä½¿ç”¨é¼ æ ‡</span></span><br><span class="line">setw -g mode-keys vi</span><br><span class="line">setw -g utf8 on</span><br><span class="line"><span class="built_in">set</span> -g base-index 1</span><br><span class="line"><span class="built_in">set</span> -g pane-base-index 1</span><br><span class="line"><span class="built_in">set</span> -g monitor-activity off</span><br><span class="line"><span class="built_in">set</span> -g monitor-silence 0</span><br><span class="line"><span class="built_in">set</span> -g bell-action none</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -g @plugin <span class="string">&#x27;tmux-plugins/tpm&#x27;</span></span><br><span class="line"><span class="built_in">set</span> -g @plugin <span class="string">&#x27;tmux-plugins/tmux-sidebar&#x27;</span></span><br><span class="line"><span class="built_in">set</span> -g @plugin <span class="string">&#x27;tmux-plugins/tmux-logging&#x27;</span></span><br><span class="line">run <span class="string">&#x27;~/.tmux/plugins/tpm/tpm&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ–°å»ºä¸€ä¸ªæ–°çš„tmux</span></span><br><span class="line">tmux new-session -s name</span><br><span class="line"><span class="comment">## -2 æ˜¯æ”¯æŒ256è‰²ï¼Œå¦åˆ™vimçš„256è‰²ä¸æ”¯æŒ</span></span><br><span class="line">tmux -2 -f ~/.tmux.conf attach-session -t name</span><br></pre></td></tr></table></figure><h3 id="å¿«é€Ÿåˆ›å»ºsessionå°è„šæœ¬"><a href="#å¿«é€Ÿåˆ›å»ºsessionå°è„šæœ¬" class="headerlink" title="å¿«é€Ÿåˆ›å»ºsessionå°è„šæœ¬"></a>å¿«é€Ÿåˆ›å»ºsessionå°è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">## åˆ›å»ºä¸€ä¸ªä¼šè¯</span></span><br><span class="line">tmux new-session -d -s <span class="variable">$USER</span></span><br><span class="line"><span class="comment">## é‡å‘½åä¼šè¯çš„ç¬¬ä¸€ä¸ªçª—å£</span></span><br><span class="line">tmux rename-window -t <span class="variable">$USER</span> <span class="string">&#x27;dev&#x27;</span></span><br><span class="line"><span class="comment">## åˆ†å‰²ç¬¬ä¸€ä¸ªçª—å£</span></span><br><span class="line">tmux split-window -h -t <span class="variable">$USER</span></span><br><span class="line"><span class="comment">## åˆ†å‰²ç¬¬ä¸€ä¸ªçª—å£ä¸­çš„ç¬¬äºŒä¸ªpane</span></span><br><span class="line">tmux split-window -v -t <span class="variable">$USER</span>:0.1</span><br><span class="line"><span class="comment">## åœ¨ç¬¬ä¸€ä¸ªçª—å£ä¸­çš„ç¬¬ä¸€ä¸ªpaneè¿è¡Œtopå‘½ä»¤</span></span><br><span class="line">tmux send-keys -t <span class="variable">$USER</span>:0.0 <span class="string">&#x27;top&#x27;</span> C-m</span><br><span class="line"><span class="comment">## åˆ›å»ºä¸€ä¸ªæ–°çš„çª—å£</span></span><br><span class="line">tmux new-window -n <span class="string">&#x27;stable&#x27;</span> -t <span class="variable">$USER</span></span><br><span class="line"><span class="comment">## åˆ†å‰²æ–°çš„çª—å£</span></span><br><span class="line">tmux split-window -h -t <span class="variable">$USER</span>:1</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¹¶åˆ†å‰²çª—å£è„šæœ¬"><a href="#åˆ›å»ºå¹¶åˆ†å‰²çª—å£è„šæœ¬" class="headerlink" title="åˆ›å»ºå¹¶åˆ†å‰²çª—å£è„šæœ¬"></a>åˆ›å»ºå¹¶åˆ†å‰²çª—å£è„šæœ¬</h3><p>åŒ…å«ä¸€ä¸ªå‘é€å‘½ä»¤çª—å£å’ŒNä¸ªæ¥æ”¶å‘½ä»¤çª—å£</p><figure class="highlight bash"><figcaption><span>myTmux.sh</span><a href="/downloads/code/myTmux.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## -----------------------------------</span></span><br><span class="line"><span class="comment">## ç”Ÿæˆå¦‚ä¸‹çš„TMUXçª—å£</span></span><br><span class="line"><span class="comment">## pane1æ˜¯å‘é€å‘½ä»¤çª—å£</span></span><br><span class="line"><span class="comment">## å…¶ä»–panes(æ¥è¿‘ç­‰é«˜)æ˜¯æ¥æ”¶å‘½ä»¤çª—å£</span></span><br><span class="line"><span class="comment">## -----------------------------------</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## +-------------+------+</span></span><br><span class="line"><span class="comment">## |      0      |CMD:  |</span></span><br><span class="line"><span class="comment">## +-------------+      |</span></span><br><span class="line"><span class="comment">## |      3      |  1   |</span></span><br><span class="line"><span class="comment">## +-------------+      |</span></span><br><span class="line"><span class="comment">## |      2      |      |</span></span><br><span class="line"><span class="comment">## +-------------+------+</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"></span><br><span class="line"><span class="comment">## é…ç½®</span></span><br><span class="line">PANE_NUM=4</span><br><span class="line"></span><br><span class="line"><span class="comment">## -------------------------</span></span><br><span class="line"><span class="comment">## å†…éƒ¨å‡½æ•°</span></span><br><span class="line"><span class="comment">## -------------------------</span></span><br><span class="line">LOCAL_FILE=<span class="variable">$0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºtmux</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">create</span></span>(){</span><br><span class="line">    tmux new-session -d -s update</span><br><span class="line">    tmux split-window -h -t update -p 30</span><br><span class="line">    <span class="keyword">for</span>((index=0; index&lt;$((<span class="variable">$PANE_NUM</span>-<span class="number">1</span>));index++)); <span class="keyword">do</span></span><br><span class="line">        percent=$(( <span class="number">100</span>  / (<span class="variable">$PANE_NUM</span> - <span class="variable">$index</span>) ))</span><br><span class="line">        tmux split-window -v -t update:0.0 -p <span class="variable">$percent</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    tmux send-keys -t update:0.1 <span class="string">&quot;bash <span class="variable">${LOCAL_FILE}</span>&quot;</span> C-m</span><br><span class="line">    tmux send-keys -t update:0.1 <span class="string">&quot;bash <span class="variable">${LOCAL_FILE}</span> send all &#x27;clear&#x27;&quot;</span> C-m</span><br><span class="line">    tmux send-keys -t update:0.1 <span class="string">&quot;bash <span class="variable">${LOCAL_FILE}</span> confirm&quot;</span> C-m</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">send</span></span>(){</span><br><span class="line">    panes=<span class="variable">$1</span></span><br><span class="line">    cmd=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$panes</span> <span class="keyword">in</span></span><br><span class="line">        <span class="string">&quot;all&quot;</span>)</span><br><span class="line">            send_all <span class="string">&quot;<span class="variable">${cmd}</span>&quot;</span>;;</span><br><span class="line">        *)</span><br><span class="line">            send_one <span class="string">&quot;<span class="variable">$panes</span>&quot;</span> <span class="string">&quot;<span class="variable">$cmd</span>&quot;</span>;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">send_one</span></span>(){</span><br><span class="line">    pane=<span class="variable">$1</span></span><br><span class="line">    cmd=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    tmux send-keys -t update:0.<span class="variable">$pane</span> <span class="string">&quot;<span class="variable">${cmd}</span>&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">send_all</span></span>(){</span><br><span class="line">    cmd=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="keyword">for</span>((index=0; index&lt;=<span class="variable">$PANE_NUM</span>; index++));<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$index</span> -ne 1 ]]; <span class="keyword">then</span></span><br><span class="line">            tmux send-keys -t update:0.<span class="variable">$index</span> <span class="string">&quot;<span class="variable">${cmd}</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç¡®è®¤</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">confirm</span></span>(){</span><br><span class="line">    send all <span class="string">&quot;C-m&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¸®åŠ©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-------------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; create        -- åˆ›å»ºä¸€ä¸ªä¼šè¯&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; send pane cmd -- å‘é€ä¸€ä¸ªå‘½ä»¤&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;   pane å¯ä»¥æ˜¯ all or paneç¼–å·&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;   cmd ç”¨å¼•å·æ‹¬èµ·æ¥&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;   ctrl-b q æ˜¾ç¤ºpaneç¼–å·&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; confirm       -- å‘½ä»¤ç¡®è®¤&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;-------------------------------&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">&quot;create&quot;</span>)</span><br><span class="line">        create;;</span><br><span class="line">    <span class="string">&quot;send&quot;</span>)</span><br><span class="line">        send <span class="string">&quot;<span class="variable">$2</span>&quot;</span> <span class="string">&quot;<span class="variable">$3</span>&quot;</span>;;</span><br><span class="line">    <span class="string">&quot;confirm&quot;</span>)</span><br><span class="line">        confirm;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">help</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> tmux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSä¸‹å®‰è£…gitbook</title>
      <link href="/2016/03/10/centos/centos-gitbook/"/>
      <url>/2016/03/10/centos/centos-gitbook/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…gitbook</span></span><br><span class="line">yum install nodejs npm -y</span><br><span class="line">npm install gitbook-cli -g</span><br><span class="line">gitbook versions:install</span><br><span class="line"><span class="comment">## å®‰è£…ebook-convert</span></span><br><span class="line"><span class="comment">## ç”¨äºç”Ÿæˆepub,mobi,pdfæ ¼å¼çš„æ–‡ä»¶</span></span><br><span class="line">sudo -v &amp;&amp; wget -nv -O- https://raw.githubusercontent.com/kovidgoyal/calibre/master/setup/linux-installer.py | sudo python -c <span class="string">&quot;import sys; main=lambda:sys.stderr.write(&#x27;Download failed\n&#x27;); exec(sys.stdin.read()); main()&quot;</span></span><br><span class="line"><span class="comment">## ä¿®å¤ç”Ÿæˆepub,mobiæŠ¥é”™ </span></span><br><span class="line">yum install ImageMagick</span><br><span class="line">yum install ImageMagick-devel</span><br><span class="line"><span class="comment">## ä¿®å¤ç”ŸæˆpdfæŠ¥é”™</span></span><br><span class="line">yum install libXcomposite</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆ"><a href="#ç”Ÿæˆ" class="headerlink" title="ç”Ÿæˆ"></a>ç”Ÿæˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…æ’ä»¶</span></span><br><span class="line">gitbook install</span><br><span class="line"><span class="comment">## ç”Ÿæˆgitbook</span></span><br><span class="line">gitbook build</span><br><span class="line"><span class="comment">## æµ‹è¯•</span></span><br><span class="line">gitbook serve</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> gitbook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOS6å®‰è£…git1.8</title>
      <link href="/2016/03/10/centos/centos-git1.8/"/>
      <url>/2016/03/10/centos/centos-git1.8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>CENTOS6é€šè¿‡yumæºå®‰è£…git1.8</p><span id="more"></span><h3 id="å¢åŠ æº"><a href="#å¢åŠ æº" class="headerlink" title="å¢åŠ æº"></a>å¢åŠ æº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/git.repo https://gitlab.com/gitlab-org/gitlab-recipes/raw/master/install/centos/PUIAS_6_computational.repo</span><br></pre></td></tr></table></figure><h3 id="å¢åŠ key"><a href="#å¢åŠ key" class="headerlink" title="å¢åŠ key"></a>å¢åŠ key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/pki/rpm-gpg/RPM-GPG-KEY-puias http://springdale.math.ias.edu/data/puias/6/x86_64/os/RPM-GPG-KEY-puias &amp;&amp; rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-puias</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><code>yum install -y git</code></p><h3 id="å‘½ä»¤æ•´ç†"><a href="#å‘½ä»¤æ•´ç†" class="headerlink" title="å‘½ä»¤æ•´ç†"></a>å‘½ä»¤æ•´ç†</h3><ul><li><strong>git config</strong><ol><li>--global user.name â€œkingwen0302â€ </li><li>--global user.email â€œ<a href="mailto:&#x6b;&#105;&#x6e;&#x67;&#119;&#x65;&#x6e;&#48;&#x33;&#x30;&#x32;&#x40;&#x6d;&#115;&#110;&#46;&#99;&#x6f;&#x6d;">&#x6b;&#105;&#x6e;&#x67;&#119;&#x65;&#x6e;&#48;&#x33;&#x30;&#x32;&#x40;&#x6d;&#115;&#110;&#46;&#99;&#x6f;&#x6d;</a>â€œ</li><li>--global color.ui â€œautoâ€</li></ol></li></ul><p>æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åˆ°æš‚å­˜åŒº<br>ä¸€ä¸ªæ–‡ä»¶åœ¨<code>git add</code>å, å†æ¬¡ç¼–è¾‘å, <code>git commit</code>åªæäº¤<code>git add</code>ä¹‹å‰çš„ç¼–è¾‘</p><ol><li>-i äº¤äº’æ¨¡å¼</li><li>-p patchæ¨¡å¼</li></ol><ul><li><strong>git branch</strong><ol><li>æ— å‚æ•° åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯</li><li>branch_name åˆ›å»ºåˆ†æ”¯,å·²å½“å‰çš„æ‰€åœ¨åˆ†æ”¯ä¸ºçˆ¶</li><li>new_branch_name father_branch_name åˆ›å»ºåˆ†æ”¯</li><li>-d branch_name åˆ é™¤å·²ç»åˆå¹¶çš„åˆ†æ”¯,æ²¡æœ‰åˆå¹¶çš„ä¸èƒ½åˆ é™¤</li><li>-D branch_name å¼ºåˆ¶åˆ é™¤åˆ†æ”¯</li><li>-m old_branch_name new_branch_name åˆ†æ”¯æ”¹å</li></ol></li></ul><ul><li><p><strong>git checkout</strong></p><ol><li>branch_name åˆ‡æ¢åˆ°åˆ†æ”¯</li><li>-b branch_name exists_branch_name åˆ›å»ºåˆ†æ”¯branch_name&amp;&amp;åˆ‡æ¢åˆ°åˆ†æ”¯</li></ol></li><li><p><strong>git status</strong></p><ol><li>Changes to be commited(è¦æäº¤çš„å˜æ›´)</li><li>Changed but not updated(å°šæœªæš‚å­˜ä»¥å¤‡æäº¤çš„å˜æ›´)</li></ol></li><li><p><strong>git diff</strong></p><ol><li>æ— å‚æ•° å¯¹æ¯”æœªæš‚å­˜çš„æ”¹åŠ¨</li><li>â€“cached å¯¹æ¯”å·²æš‚å­˜çš„ä¸HEADçš„æ”¹åŠ¨</li><li>HEAD æ¯”è¾ƒå·¥ä½œç›®å½•æ ‘ä¸­æš‚å­˜å’Œæœªæš‚å­˜çš„æ”¹åŠ¨</li></ol></li><li><p><strong>git commit</strong></p><ol><li>-a æ‰€æœ‰æ–‡ä»¶æäº¤</li><li>-m æ³¨é‡Š å¯ä»¥æœ‰å¤šä¸ª-m</li><li>â€“amend å¢è¡¥æäº¤</li><li>-C HEAD å¤ç”¨HEADçš„æäº¤ç•™è¨€</li></ol></li><li><p><strong>git mv</strong></p></li><li><p><strong>.gitignore</strong></p><ol><li>.gitignore</li><li>.git/info/exclude</li></ol></li><li><p><strong>git merge</strong><br>ç›´æ¥åˆå¹¶(straight merge)<br>å‹åˆåˆå¹¶(squashed commits)<br>æ‹£é€‰åˆå¹¶(cherry-picking)</p><ol><li>be_merge_branch å°†be_merge_branchåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸­</li><li>â€“squash be_merge_branch å°†be_merge_branchåˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„æš‚å­˜åŒº, éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ<code>git commit</code>æ“ä½œ</li><li>git cherry-pick 321d76f å°†æäº¤åç§°ä¸º321d76fçš„åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li></ol></li><li><p><strong>git reset</strong></p><ol><li>â€“hard HEAD  é‡ç½®ä¸ºHEADç‰ˆæœ¬,åˆ é™¤æš‚å­˜/æœªæš‚å­˜çš„æ–‡ä»¶</li><li>HEAD é‡ç½®ä¸ºHEADç‰ˆæœ¬, æš‚å­˜/æœªæš‚å­˜çš„æ–‡ä»¶ä¸åˆ é™¤</li><li>HEAD^ é‡ç½®ä¸ºHEADå‰ä¸€ä¸ªç‰ˆæœ¬</li></ol></li><li><p><strong>git log</strong><br>^   HEAD<del>1 æ˜¯çˆ¶è®°å½•<br>^^  HEAD</del>2 æ˜¯çˆ·çˆ·è®°å½•<br>^^^ HEAD~3 æ˜¯çˆ¸çˆ¸çš„çˆ·çˆ·è®°å½•</p><ol><li>-N Nä¸ºæ•°å­— åˆ—å‡ºæœ€è¿‘Næ¡è®°å½•</li><li>â€“since=â€5 hoursâ€ æœ€è¿‘5å°æ—¶</li><li>â€“before=â€5 hoursâ€ 5å°æ—¶ä¹‹å‰</li><li>18f822e..HEAD ä»(18f822e HEAD]èŒƒå›´å†…çš„è®°å½•</li><li>â€“pretty=format:â€%h %sâ€ æ ¼å¼åŒ–</li></ol></li><li><p><strong>git diff</strong><br>diff é»˜è®¤æ˜¯ä¸å½“å‰ç›®å½•æ ‘è¿›è¡Œå¯¹æ¯”</p><ol><li>18f822e å¯¹æ¯”18f822eä¸å½“å‰ç›®å½•æ ‘å¯¹æ¯”</li><li>â€“stat tag/branch ç»Ÿè®¡ä»£ç æ”¹åŠ¨</li></ol></li><li><p><strong>git blame</strong></p><ol><li>file æ˜¾ç¤ºæ‰€æœ‰çš„ä»£ç è®°å½•</li><li>-L 12,13 file</li><li>-L 12,+2 file</li><li>-L 12,-2 file</li><li>-L â€œ/&lt;/body&gt;/â€œ,+2 file</li></ol></li><li><p><strong>git revert</strong></p></li><li><p><strong>git rebase</strong></p><ol><li>é‡æ–°æ’åºæäº¤</li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> git </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVNæœåŠ¡å™¨æ­å»º</title>
      <link href="/2016/03/10/centos/centos-svn/"/>
      <url>/2016/03/10/centos/centos-svn/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Subversionå®‰è£…,é…ç½®åŠæƒé™ç®¡ç†</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><code>yum install -y subversion</code></p><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svnserve --version</span><br><span class="line">whereis svnserve</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¤šç‰ˆæœ¬åº“"><a href="#åˆ›å»ºå¤šç‰ˆæœ¬åº“" class="headerlink" title="åˆ›å»ºå¤šç‰ˆæœ¬åº“"></a>åˆ›å»ºå¤šç‰ˆæœ¬åº“</h3><ul><li><p>åˆ›å»ºç›®å½•+åˆå§‹åŒ–ç‰ˆæœ¬åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/svn</span><br><span class="line"><span class="built_in">cd</span> /data/svn</span><br><span class="line"><span class="comment">## ç‰ˆæœ¬åº“1 </span></span><br><span class="line">mkdir svn_1</span><br><span class="line">svnadmin create svn_1</span><br><span class="line"><span class="comment">## ç‰ˆæœ¬åº“2 </span></span><br><span class="line">mkdir svn_2</span><br><span class="line">svnadmin create svn_2</span><br></pre></td></tr></table></figure></li><li><p>æƒé™ç®¡ç†<br>åœ¨æ¯ä¸ªç‰ˆæœ¬åº“ä¸‹é¢éƒ½æœ‰ä¸€ä¸ªconfæ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server conf]<span class="comment"># ls -l svn_1/conf</span></span><br><span class="line">æ€»ç”¨é‡ 12  </span><br><span class="line">-rw-r--r--. 1 root root 1080 4æœˆ  28 14:31 authz</span><br><span class="line">-rw-r--r--. 1 root root  309 4æœˆ  28 14:31 passwd</span><br><span class="line">-rw-r--r--. 1 root root 2283 4æœˆ  28 14:32 svnserve.conf</span><br><span class="line"><span class="comment">## passwdæ˜¯å¯†ç æ–‡ä»¶  </span></span><br><span class="line"><span class="comment">## authzæ˜¯æƒé™æ–‡ä»¶  </span></span><br><span class="line"><span class="comment">## svnserve.confæ˜¯æœ¬ç‰ˆæœ¬åº“çš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li></ul><p>ä½¿ç”¨ä¸€ä¸ªå¯†ç æ–‡ä»¶å’Œæƒé™æ–‡ä»¶ç®¡ç†æ‰€æœ‰ç‰ˆæœ¬åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp svn_1/conf/passwd passwd</span><br><span class="line">cp svn_1/conf/authz authz</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨svnç›®å½•ä¸‹çš„passwdå’Œauthzæ–‡ä»¶ç®¡ç†æ‰€æœ‰ç‰ˆæœ¬åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹å„ä¸ªç‰ˆæœ¬åº“çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /svn_1/conf/svnserve.conf</span><br><span class="line"><span class="comment">## ä¸å…è®¸åŒ¿å</span></span><br><span class="line">anon-access = none</span><br><span class="line">auth-access = write</span><br><span class="line"><span class="comment">## å¯†ç æ–‡ä»¶ä½ç½®</span></span><br><span class="line">password-db = ../../passwd</span><br><span class="line"><span class="comment">## æƒé™æ–‡ä»¶ä½ç½®</span></span><br><span class="line">authz-db = ../../authz</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ·»åŠ ç”¨æˆ·å, å¯†ç </span></span><br><span class="line">vim /data/svn/passwd</span><br><span class="line">admin = 123456</span><br><span class="line">user = 123456</span><br><span class="line">noauthz = 123456</span><br><span class="line"></span><br><span class="line"><span class="comment">## æƒé™é…ç½®</span></span><br><span class="line">vim /data/svn/authz</span><br><span class="line">[groups]</span><br><span class="line">g_admin = admin</span><br><span class="line">g_user = user</span><br><span class="line">[svn_1:/]</span><br><span class="line">@g_admin = rw</span><br><span class="line">[svn_1:/user]</span><br><span class="line">@g_user = rw</span><br><span class="line">[svn_1:/user/noauthz]</span><br><span class="line">noauthz =</span><br></pre></td></tr></table></figure><p>æƒé™ä½¿ç”¨è‡ªåº•è€Œä¸Šçš„æ–¹å¼è¿›è¡Œæ§åˆ¶,å¦‚æœåœ¨å½“å‰ç›®å½•ä¸‹æ— æ³•æ‰¾åˆ°è¯¥ç”¨æˆ·çš„æƒé™, åˆ™æŸ¥çœ‹ä¸Šä¸€çº§ç›®å½•æ˜¯å¦æœ‰æƒé™<br>,ç›´åˆ°æ ¹ç›®å½•ä½ç½®,ä¾‹å¦‚ä¸Šä¾‹:<br>    - æŸ¥çœ‹userç”¨æˆ·çš„æƒé™<br>    1. åœ¨è®¿é—®noauthzç›®å½•æ—¶,æ²¡æœ‰userçš„æƒé™é…ç½®,å‘ä¸Šä¸€çº§æŸ¥çœ‹<br>    2. åœ¨userç›®å½•ç”±userç”¨æˆ·çš„æƒé™é…ç½®,æ˜¯è¯»å†™, å› æ­¤,userç”¨æˆ·å…·æœ‰noauthzç›®å½•çš„æƒé™;<br>    - æŸ¥çœ‹nozuthzç”¨æˆ·çš„æƒé™<br>    1. è®¿é—®noauthzç›®å½•, noauthzæ²¡æœ‰è¯»å†™è¯¥æ–‡ä»¶çš„æƒé™,æ‰€ä»¥noauthzç”¨æˆ·æ²¡æœ‰noauthzç›®å½•æƒé™;</p><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><p><code>svnserve -d -r /data/svn</code><br>-d åå°è¿è¡Œ<br>-r svnçš„æ ¹ç›®å½•</p><h3 id="å¼€æœºå¯åŠ¨"><a href="#å¼€æœºå¯åŠ¨" class="headerlink" title="å¼€æœºå¯åŠ¨"></a>å¼€æœºå¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list | grep svnserve</span><br><span class="line">svnserve        0:å…³é—­  1:å…³é—­  2:å…³é—­  3:å…³é—­  4:å…³é—­  5:å…³é—­  6:å…³é—­</span><br><span class="line">chkconfig svnserve on</span><br><span class="line">svnserve        0:å…³é—­  1:å…³é—­  2:å¯ç”¨  3:å¯ç”¨  4:å¯ç”¨  5:å¯ç”¨  6:å…³é—­</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹åœ¨/etc/init.d/svnserveçš„å¯åŠ¨è„šæœ¬æ–‡ä»¶,æœ‰å¦‚ä¸‹ä»£ç :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f /etc/sysconfig/svnserve ]; <span class="keyword">then</span></span><br><span class="line">    . /etc/sysconfig/svnserve</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¢åŠ é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch /etc/sysconfig/svnserve</span><br><span class="line"><span class="comment">## å¢åŠ å†…å®¹</span></span><br><span class="line">OPTIONS=<span class="string">&quot;-r /data/svn/&quot;</span></span><br><span class="line"><span class="comment">## è¿™æ ·ä¸‹æ¬¡å¼€æœºå°±å¯ä»¥è‡ªåŠ¨å¯åŠ¨svnæœåŠ¡å™¨äº†</span></span><br></pre></td></tr></table></figure><h3 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h3><ol><li><p>ipæ”¹å˜å,ä¿®æ”¹svnåœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn switch --relocate svn://192.168.0.253/xxx svn://192.168.0.100/xxx --username xxx --password xxx</span><br></pre></td></tr></table></figure></li><li><p>svnæäº¤éƒ¨åˆ†æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svn status | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | è‡ªå®šä¹‰grep &gt; target.txt</span><br><span class="line">svn ci --targets target.txt</span><br></pre></td></tr></table></figure></li></ol><h3 id="HTTPæ”¯æŒ"><a href="#HTTPæ”¯æŒ" class="headerlink" title="HTTPæ”¯æŒ"></a>HTTPæ”¯æŒ</h3><p>svnsverveå’Œhttpä½¿ç”¨ä¸åŒçš„å¯†ç æ–‡ä»¶</p><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## apr,apr-utilå¾ˆå…³é”®</span></span><br><span class="line">yum install httpd apr apr-util httpd-devel</span><br><span class="line">yum install mod_dav_svn</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a>ä¿®æ”¹æƒé™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown apache:apache /data/svn -R</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå¯†ç "><a href="#ç”Ÿæˆå¯†ç " class="headerlink" title="ç”Ÿæˆå¯†ç "></a>ç”Ÿæˆå¯†ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data/svn</span><br><span class="line">htpasswd http_passwd zm1</span><br><span class="line">htpasswd http_passwd zm2</span><br><span class="line">htpasswd http_passwd zm3</span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vim /etc/httpd/conf.d/subversion.conf</span></span><br><span class="line">&lt;Location /svn&gt;</span><br><span class="line">DAV svn</span><br><span class="line">SVNParentPath /data/svn</span><br><span class="line">AuthType Basic</span><br><span class="line">AuthName <span class="string">&quot;Authorization SVN&quot;</span></span><br><span class="line">AuthzSVNAccessFile /data/svn/authz</span><br><span class="line">AuthUserFile /data/svn/http_passwd</span><br><span class="line">Require valid-user</span><br><span class="line">&lt;/Location&gt;</span><br></pre></td></tr></table></figure><h4 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure><h3 id="SVN-SSH"><a href="#SVN-SSH" class="headerlink" title="SVN+SSH"></a>SVN+SSH</h3><h4 id="å®¢æˆ·ç«¯è®¾ç½®"><a href="#å®¢æˆ·ç«¯è®¾ç½®" class="headerlink" title="å®¢æˆ·ç«¯è®¾ç½®"></a>å®¢æˆ·ç«¯è®¾ç½®</h4><ul><li><code>è®¾ç½®</code>-&gt;<code>Network</code>-&gt;<code>ssh client</code>-&gt;<code>TortoisePlink.exe</code>ï¼›</li><li>ä¸‹è½½<code>putty</code>, ä½¿ç”¨<code>PUTTYGEN.EXE</code>å°†openssh2æ ¼å¼çš„å¯†é’¥æ”¹æˆppkæ ¼å¼çš„,ä½¿ç”¨<code>PAGEANT.EXE</code>å¢åŠ å¯†é’¥ã€‚</li></ul><h4 id="svn-authz"><a href="#svn-authz" class="headerlink" title="svn authz"></a>svn authz</h4><p>åœ¨svnçš„authzç›®å½•ä¸­å¢åŠ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[/]</span><br><span class="line">root = rw</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•1"><a href="#æ–¹æ³•1" class="headerlink" title="æ–¹æ³•1"></a>æ–¹æ³•1</h4><p>åœ¨<code>~/.ssh/authorized_keys</code>å¯¹åº”çš„public keyå‰é¢å¢åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /data/svnä¸ºsvnçš„æ ¹ç›®å½•</span></span><br><span class="line"><span class="built_in">command</span>=<span class="string">&quot;/usr/bin/svnserve -t -r /data/svn --tunnel-user=root&quot;</span>,no-port-forwarding,no-pty,no-agent-forwarding,no-X11-forwarding</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span>=<span class="string">&quot;/usr/bin/svnserve -t -r /data/svn --tunnel-user=root&quot;</span>,no-port-forwarding,no-pty,no-agent-forwarding,no-X11-forwarding ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAwEXTRkzM+/R8NTIY34ZJDg8/UeXTr+2oFX2PPiCazqwUKiD55EzgMcvaZKvGZ9LcswuNc26febwZEfnQDl0HxbIlH+5tlDGk35A/WrLsi3uekTjkIDIw3Do2xb9QlnDtYXRs24lHExdJQJvV7fOdoG9ZCcdX+bU63q3Qj5DfFCpjmw5ocCVcvWTOOIG2wT++0Jxr6W3vBu6fuCVFq6siOEzXEBRx63pj7uYRNvCs6GsgbQnyKNRyZSiouyrb/qRj1AbqRWGBr8kEofgwwnP3xO61pyovZLOrJ9FsjUxTLaGACoGJioOgu4vqywYXnX3TYnYWgx7MPXb/ayhZtHXHqQ== kingwen@kingwen</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>svn co svn+ssh://root@192.168.1.245/p1</code> æ£€å‡ºé¡¹ç›®<br>æ­¤ç§æ–¹å¼è¯¥public keyå°†ä¸èƒ½ç™»å½•ssh</p><h4 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h4><p>ç›´æ¥ä½¿ç”¨ç»å¯¹è·¯å¾„checkouté¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /data/.svn_repos/p1ä¸ºé¡¹ç›®çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">svn co svn+ssh://root@192.168.1.245/data/.svn_repos/p1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> svn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VPNæœåŠ¡å™¨æ­å»º</title>
      <link href="/2016/03/10/centos/centos-vpn-server/"/>
      <url>/2016/03/10/centos/centos-vpn-server/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><span id="more"></span><h3 id="æœåŠ¡å™¨æ­å»º"><a href="#æœåŠ¡å™¨æ­å»º" class="headerlink" title="æœåŠ¡å™¨æ­å»º"></a>æœåŠ¡å™¨æ­å»º</h3><figure class="highlight bash"><figcaption><span>vpn.sh</span><a href="/downloads/code/vpn.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## #############################</span></span><br><span class="line"><span class="comment">## VPNæœåŠ¡å™¨å®‰è£…è„šæœ¬</span></span><br><span class="line"><span class="comment">## PASSWD_LEN, SERVER_IPè¦æ‰‹åŠ¨é…ç½®</span></span><br><span class="line"><span class="comment">## #############################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç”Ÿæˆçš„å¯†ç é•¿åº¦</span></span><br><span class="line">PASSWD_LEN=20</span><br><span class="line"><span class="comment">## æœåŠ¡å™¨IP</span></span><br><span class="line">SERVER_IP=</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">installVPN</span></span>(){</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;begin to install VPN services&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">## åˆªé™¤åŸæœ‰çš„pptpd&amp;ppp</span></span><br><span class="line">yum remove -y pptpd ppp</span><br><span class="line">iptables --flush POSTROUTING --table nat</span><br><span class="line">iptables --flush FORWARD</span><br><span class="line">rm -rf /etc/pptpd.conf</span><br><span class="line">rm -rf /etc/ppp</span><br><span class="line"></span><br><span class="line">    <span class="comment">## yumå®‰è£é™¤pptpdçš„åŒ…</span></span><br><span class="line">    yum install -y dkms kernel_ppp_mppe ppp</span><br><span class="line">yum -y install make libpcap iptables gcc-c++ logrotate tar cpio perl pam tcp_wrappers</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å®‰è£pptpd</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="subst">$(rpm -qa pptpd)</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        wget ftp://rpmfind.net/linux/epel/6/x86_64/pptpd-1.4.0-3.el6.x86_64.rpm</span><br><span class="line">        rpm -ivh pptpd-1.4.0-3.el6.x86_64.rpm</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## è‡ªåŠ¨åŒ–é…ç½®</span></span><br><span class="line">mknod /dev/ppp c 108 0 </span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;mknod /dev/ppp c 108 0&quot;</span> &gt;&gt; /etc/rc.local</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;echo 1 &gt; /proc/sys/net/ipv4/ip_forward&quot;</span> &gt;&gt; /etc/rc.local</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;localip 172.16.36.1&quot;</span> &gt;&gt; /etc/pptpd.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;remoteip 172.16.36.2-254&quot;</span> &gt;&gt; /etc/pptpd.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ms-dns 8.8.8.8&quot;</span> &gt;&gt; /etc/ppp/options.pptpd</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ms-dns 8.8.4.4&quot;</span> &gt;&gt; /etc/ppp/options.pptpd</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å¢åŠ å¯†ç </span></span><br><span class="line">pass=`openssl rand <span class="variable">${PASSWD_LEN}</span> -base64`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span> pass=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;vpn pptpd <span class="variable">${pass}</span> *&quot;</span> &gt;&gt; /etc/ppp/chap-secrets</span><br><span class="line"></span><br><span class="line">    <span class="comment">## é–‹æ”¾ç«¯å£</span></span><br><span class="line">    iptables --flush POSTROUTING --table nat</span><br><span class="line">iptables --flush FORWARD</span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.36.0/24 -j SNAT --to-source <span class="variable">${SERVER_IP}</span></span><br><span class="line">iptables -A FORWARD -p tcp --syn -s 172.16.36.0/24 -j TCPMSS --set-mss 1356</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 53 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 1723 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 47 -j ACCEPT</span><br><span class="line">    iptables -D INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">    iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">service iptables save</span><br><span class="line">    </span><br><span class="line">    <span class="comment">## è‡ªå¯åŠ¨</span></span><br><span class="line">chkconfig iptables on</span><br><span class="line">chkconfig pptpd on</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å¯åŠ¨</span></span><br><span class="line">service iptables restart</span><br><span class="line">service pptpd start</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;VPN service is installed, your VPN username is vpn, VPN password is <span class="variable">${pass}</span>&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">repaireVPN</span></span>(){</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;begin to repaire VPN&quot;</span>;</span><br><span class="line">    iptables --flush POSTROUTING --table nat</span><br><span class="line">iptables --flush FORWARD</span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.36.0/24 -j SNAT --to-source <span class="variable">${SERVER_IP}</span></span><br><span class="line">iptables -A FORWARD -p tcp --syn -s 172.16.36.0/24 -j TCPMSS --set-mss 1356</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 53 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 1723 -j ACCEPT</span><br><span class="line">    iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 47 -j ACCEPT</span><br><span class="line">    iptables -D INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">    iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line">service pptpd start</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">addVPNuser</span></span>(){</span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;input user name:&quot;</span></span><br><span class="line"><span class="built_in">read</span> username</span><br><span class="line">    userpassword=$(openssl rand <span class="variable">${PASSWD_LEN}</span> -base64)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;name: <span class="variable">${username}</span>  password: <span class="variable">${userpassword}</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;confirm(Y/N):&quot;</span></span><br><span class="line">    <span class="built_in">read</span> confirm</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$confirm</span> <span class="keyword">in</span></span><br><span class="line">        <span class="string">&quot;Y&quot;</span> | <span class="string">&quot;y&quot;</span> )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">${username}</span> pptpd <span class="variable">${userpassword}</span> *&quot;</span> &gt;&gt; /etc/ppp/chap-secrets</span><br><span class="line">        service iptables restart</span><br><span class="line">        service pptpd start</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;add user succeed&quot;</span></span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;add user fail&quot;</span></span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">delVPNuser</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;all users:&quot;</span></span><br><span class="line">    cat /etc/ppp/chap-secrets | grep -v <span class="string">&#x27;^#&#x27;</span> | awk <span class="string">&#x27;{print $1}&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;please select one:&quot;</span></span><br><span class="line">    <span class="built_in">read</span> vpn_user</span><br><span class="line">    cat /etc/ppp/chap-secrets | grep -v <span class="string">&quot;^<span class="variable">${vpn_user}</span> &quot;</span> &gt; /ect/ppp/chap-secrets</span><br><span class="line">    service iptables restart</span><br><span class="line">    service pptpd start</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;del user succeed&quot;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">getVPNInfo</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;VPN Server IP: <span class="variable">${SERVER_IP}</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;VPN Users:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;user | -- | password | * &quot;</span></span><br><span class="line">    cat /etc/ppp/chap-secrets | grep -v <span class="string">&#x27;^#&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;VPN link num:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> $(netstat -nat | grep ESTABLISHED | grep <span class="string">&#x27;:1723&#x27;</span> | wc -l)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">checkConf</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">${SERVER_IP}</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\033[31m[ERROR] please set server_ip \033[0m&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;which do you want to?input the number.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1. install VPN service&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2. repaire VPN service&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3. add VPN user&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4. VPN info&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;5. del VPN user&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;please select:&quot;</span></span><br><span class="line"><span class="built_in">read</span> num</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$num</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">[1] ) </span><br><span class="line">    checkConf</span><br><span class="line">    installVPN</span><br><span class="line">    ;;</span><br><span class="line">[2] ) </span><br><span class="line">    repaireVPN</span><br><span class="line">    ;;</span><br><span class="line">[3] ) </span><br><span class="line">    addVPNuser</span><br><span class="line">    ;;</span><br><span class="line">[4] ) </span><br><span class="line">    getVPNInfo</span><br><span class="line">    ;;</span><br><span class="line">[5] )</span><br><span class="line">    delVPNuser</span><br><span class="line">    ;;</span><br><span class="line">*) <span class="built_in">echo</span> <span class="string">&quot;nothing,exit&quot;</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æ•°æŸ¥çœ‹"><a href="#è¿æ¥æ•°æŸ¥çœ‹" class="headerlink" title="è¿æ¥æ•°æŸ¥çœ‹"></a>è¿æ¥æ•°æŸ¥çœ‹</h3><p><code>netstat -nat | grep ESTABLISHED | grep &#39;:1723&#39; | wc -l</code></p>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> vpn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rsyncæœåŠ¡å™¨æ­å»º</title>
      <link href="/2016/03/10/centos/centos-rsync/"/>
      <url>/2016/03/10/centos/centos-rsync/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install xinetd</span><br><span class="line">service xinetd restart</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="å¼€å¯"><a href="#å¼€å¯" class="headerlink" title="å¼€å¯"></a>å¼€å¯</h2><p>ç¼–è¾‘<code>/etc/xinetd.d/rsync</code>æ–‡ä»¶ï¼Œå°†<code>disable = yes</code>ä¿®æ”¹ä¸º<code>disable = no</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">service rsync</span><br><span class="line">&#123; </span><br><span class="line">    <span class="built_in">disable</span> = no</span><br><span class="line">    .......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>service xinetd restart</code>å¯åŠ¨</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/rsyncd.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">uid = root</span></span><br><span class="line"><span class="string">gid = root</span></span><br><span class="line"><span class="string">use chroot = no</span></span><br><span class="line"><span class="string">max connections = 20</span></span><br><span class="line"><span class="string">secrets file = /etc/rsyncd.secrets</span></span><br><span class="line"><span class="string">log file = /var/log/rsyncd.log</span></span><br><span class="line"><span class="string">pid file = /var/run/rsyncd.pid</span></span><br><span class="line"><span class="string">lock file /var/run/rsyncd.lock</span></span><br><span class="line"><span class="string">[name1]</span></span><br><span class="line"><span class="string">## ç›®å½•</span></span><br><span class="line"><span class="string">path = /data/.svn_repos     </span></span><br><span class="line"><span class="string">## ç”¨æˆ·å</span></span><br><span class="line"><span class="string">auth users = svn</span></span><br><span class="line"><span class="string">## æ˜¯å¦åªè¯» yesæ˜¯åªè¯», noæ˜¯å¯ä»¥ä¸Šä¼ </span></span><br><span class="line"><span class="string">read only = yes</span></span><br><span class="line"><span class="string">## è¿™ä¸ªä¸çŸ¥é“æ€ä¹ˆç”¨</span></span><br><span class="line"><span class="string">## write only = yes</span></span><br><span class="line"><span class="string">## è¿è¡Œçš„hosts</span></span><br><span class="line"><span class="string">hosts allow = 192.168.1.253</span></span><br><span class="line"><span class="string">## æ˜¯å¦åˆ—å‡ºè¯¥ç›®å½•</span></span><br><span class="line"><span class="string">list = true</span></span><br><span class="line"><span class="string">[name2]</span></span><br><span class="line"><span class="string">path = /data/hero/release/gameserver</span></span><br><span class="line"><span class="string">auth users = mjyx</span></span><br><span class="line"><span class="string">read only = yes</span></span><br><span class="line"><span class="string">hosts allow = 102.168.1.253</span></span><br><span class="line"><span class="string">list = true</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">cat &gt; /etc/rsyncd.secrets &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">## è´¦å·:å¯†ç </span></span><br><span class="line"><span class="string">svn:passwd</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">chmod 600 /etc/rsyncd.secrets</span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; rsync.pas &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">passwd</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">chmod 600 rsync.pas</span><br><span class="line"><span class="comment">## ä»è¿œç¨‹æ›´æ–°</span></span><br><span class="line">rsync -vazrtopguh --progress --password-file=rsync.pas svn@xxx.xxx.xxx.xxx::name1 name1</span><br><span class="line"><span class="comment">## å‘è¿œç¨‹æ¨é€</span></span><br><span class="line">rsync -vazrtopguh --delete --progress --password-file.rsync.pas æœ¬åœ°ç›®å½• svn@xxx.xxx.xxx.xxx::name1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> rsync </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSç½‘ç»œè®¾ç½®</title>
      <link href="/2016/03/10/centos/centos-net/"/>
      <url>/2016/03/10/centos/centos-net/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æœ‰çº¿ç½‘ç»œé…ç½®"><a href="#æœ‰çº¿ç½‘ç»œé…ç½®" class="headerlink" title="æœ‰çº¿ç½‘ç»œé…ç½®"></a>æœ‰çº¿ç½‘ç»œé…ç½®</h2><h3 id="IPè®¾ç½®"><a href="#IPè®¾ç½®" class="headerlink" title="IPè®¾ç½®"></a>IPè®¾ç½®</h3><ul><li>é»˜è®¤ä¸‹,centosæ²¡æœ‰å¼€å¯ç½‘ç»œ</li><li>ç½‘ç»œé…ç½®ç›®å½•: /etc/sysconfig/network-scripts/<span id="more"></span></li><li>ä¿®æ”¹é…ç½®<br><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€æœºå¯åŠ¨</span></span><br><span class="line">ONBOOT=yes </span><br><span class="line"><span class="comment"># è®¾ç½®é™æ€IP </span></span><br><span class="line"><span class="comment"># å¦‚æœè¦åŠ¨æ€,å¯ä»¥ä½¿ç”¨dhcp,ä¸€èˆ¬æƒ…å†µä¸‹, æœåŠ¡å™¨è®¾ç½®ä¸ºé™æ€IPæ¯”è¾ƒå¥½ </span></span><br><span class="line">BOOTPROTO=static </span><br><span class="line"><span class="comment"># IPåœ°å€ </span></span><br><span class="line">IPADDR=192.168.0.253 </span><br><span class="line"><span class="comment"># å­ç½‘æ©ç  </span></span><br><span class="line">NETMASK=255.255.255.0 </span><br><span class="line"><span class="comment"># ç½‘å…³ </span></span><br><span class="line">GATEWAY=192.168.0.1 </span><br></pre></td></tr></table></figure></li></ul><h3 id="åŸŸåè®¾ç½®"><a href="#åŸŸåè®¾ç½®" class="headerlink" title="åŸŸåè®¾ç½®"></a>åŸŸåè®¾ç½®</h3><ul><li>è®¾ç½®DNS</li><li>é…ç½®æ–‡ä»¶: /etc/resolv.conf</li><li>è®¾ç½®  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/resolv.conf</span><br><span class="line"><span class="comment">## DNSæœåŠ¡å™¨,ä¸‹é¢è¿™ä¸¤ä¸ªæ˜¯googleçš„,ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–</span></span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 1.2.4.8</span><br><span class="line"><span class="comment">## æœ€åè¦åŠ ä¸Šç½‘å…³nameserver 192.168.0.1</span></span><br></pre></td></tr></table></figure></li><li>é‡å¯<br>ä½¿ç”¨<code>/etc/init.d/network restart</code>é‡å¯ç½‘ç»œ</li></ul><h2 id="æ— é™ç½‘ç»œé…ç½®"><a href="#æ— é™ç½‘ç»œé…ç½®" class="headerlink" title="æ— é™ç½‘ç»œé…ç½®"></a>æ— é™ç½‘ç»œé…ç½®</h2><p>ä»¥wifi ID: my_wifi å¯†ç : wifi_pass  è®¤è¯æ–¹å¼ä¸ºWPA2-PSK ä¸ºä¾‹</p><h3 id="ç¡¬ä»¶æ£€æµ‹"><a href="#ç¡¬ä»¶æ£€æµ‹" class="headerlink" title="ç¡¬ä»¶æ£€æµ‹"></a>ç¡¬ä»¶æ£€æµ‹</h3><p>è¾“å…¥å‘½ä»¤<code>iwconfig</code> å¦‚æœå‡ºç°wlanX è¯æ˜é©±åŠ¨æ²¡æœ‰é—®é¢˜;</p><h3 id="ä¿®æ”¹wlan0é…ç½®"><a href="#ä¿®æ”¹wlan0é…ç½®" class="headerlink" title="ä¿®æ”¹wlan0é…ç½®"></a>ä¿®æ”¹wlan0é…ç½®</h3><p>ç¼–è¾‘<code>vim /etc/sysconfig/network-script/ifcfg-wlan0</code>,å¢åŠ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Wireless</span><br><span class="line">ESSID=<span class="string">&quot;my_wifi&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å†™å…¥å¯†ç "><a href="#å†™å…¥å¯†ç " class="headerlink" title="å†™å…¥å¯†ç "></a>å†™å…¥å¯†ç </h3><p>æ‰§è¡Œ<code>wpa_passphrase my_wifi wifi_pass &gt; /etc/wpa_supplicant/wpa_supplicant.conf</code>,ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç»“æœ</span></span><br><span class="line"><span class="comment">## /etc/wpa_supplicant/wpa_supplicant.conf,</span></span><br><span class="line">network=&#123;</span><br><span class="line">  ssid=<span class="string">&quot;my_wifi&quot;</span></span><br><span class="line">  <span class="comment">#psk=&quot;wifi_pass&quot;</span></span><br><span class="line">  psk=<span class="string">&quot;wifi_pass&quot;</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="wpa-supplicanté…ç½®"><a href="#wpa-supplicanté…ç½®" class="headerlink" title="wpa_supplicanté…ç½®"></a>wpa_supplicanté…ç½®</h3><p>ç¼–è¾‘<code>vim /etc/sysconfig/wpa_supplicant</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INTERFACES=<span class="string">&quot;-iwlan0&quot;</span></span><br><span class="line">DRIVERS=<span class="string">&quot;-Dwext&quot;</span></span><br><span class="line">OTHER_ARGS=<span class="string">&quot;-u -f /var/log/wpa_supplicant.log -P /var/run/wpa_supplicant.pid&quot;</span></span><br></pre></td></tr></table></figure><p>å¼€æœºå¯åŠ¨<code>chkconfig wpa_supplicant --level 3 on</code></p><h3 id="è¿æ¥my-wifi"><a href="#è¿æ¥my-wifi" class="headerlink" title="è¿æ¥my_wifi"></a>è¿æ¥my_wifi</h3><p>æ— çº¿æœç´¢: <code>iwlist wlan0 scan | grep ESSID</code><br>æ— çº¿è¿æ¥: <code>iwconfig wlan0 essid &quot;my_wifi&quot;</code><br>è·å–IP  : <code>dhclient wlan0</code><br>æµ‹è¯•    : <code>ping www.baidu.com</code></p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ol><li>NetworkManager å’Œ wpa_supplicant æ˜¯ä¸å…¼å®¹<br>å¦‚æœåªä½¿ç”¨æ— çº¿çš„è¯<br>è®¾ç½®æ¡Œé¢ç¯å¢ƒ<code>chkconfig NetworkManager --level 5 on</code><br>è®¾ç½®å‘½ä»¤è¡Œ<code>chkconfig wpa_supplicant --level 3 on</code></li></ol><h3 id="æœªè§£å†³"><a href="#æœªè§£å†³" class="headerlink" title="æœªè§£å†³"></a>æœªè§£å†³</h3><ol><li>å›ºå®šIPä¸çŸ¥é“æ€ä¹ˆè®¾ç½®?</li><li>è‡ªå¯åŠ¨ä¸çŸ¥é“æ€ä¹ˆè®¾ç½®, å¿…é¡»æ‰‹åŠ¨æ•²<code>dhclient wlan0</code></li></ol><h3 id="å·²çŸ¥é—®é¢˜ä¿®å¤"><a href="#å·²çŸ¥é—®é¢˜ä¿®å¤" class="headerlink" title="å·²çŸ¥é—®é¢˜ä¿®å¤"></a>å·²çŸ¥é—®é¢˜ä¿®å¤</h3><ol><li>device â€œeth0â€ does not seem to be present, delaying initialization<br>è¿™ä¸ªé—®é¢˜ä¸€èˆ¬æ˜¯æ›´æ¢ç½‘å¡æ‰€è‡´ï¼Œmacåœ°å€ä¸ä¸€è‡´<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ç½‘å¡mac</span></span><br><span class="line">ifconfig -a</span><br><span class="line">mv ifcfg-eth0 ifcfg-ethx</span><br><span class="line"><span class="comment">## ç¼–è¾‘ifcfg-ethx</span></span><br><span class="line">ä¿®æ”¹deviceçš„åç§°å’Œmacåœ°å€</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> linux </tag>
            
            <tag> ç½‘ç»œè®¾ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSæºè®¾ç½®</title>
      <link href="/2016/03/10/centos/centos-yum/"/>
      <url>/2016/03/10/centos/centos-yum/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç½‘ç»œæº"><a href="#ç½‘ç»œæº" class="headerlink" title="ç½‘ç»œæº"></a>ç½‘ç»œæº</h2><h3 id="rpmforge"><a href="#rpmforge" class="headerlink" title="rpmforge"></a>rpmforge</h3><p>rpmforgeè¢«CentOSç¤¾åŒºè®¤ä¸ºæ˜¯å®‰å…¨å’Œç¨³å®šçš„è½¯ä»¶åº“<br>åœ¨<a href="http://pkgs.repoforge.org/rpmforge-release/">http://pkgs.repoforge.org/rpmforge-release/</a> ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„rpmåŒ…   </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</span><br><span class="line"><span class="comment">## or</span></span><br><span class="line">yum install http://apt.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="epel"><a href="#epel" class="headerlink" title="epel"></a>epel</h3><p>åœ¨<a href="http://mirrors.ustc.edu.cn/fedora/epel/">http://mirrors.ustc.edu.cn/fedora/epel/</a>ä¸‹è½½æœ€æ–°çš„rpm<br><code>yum install http://mirrors.ustc.edu.cn/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm</code> </p><h3 id="puias"><a href="#puias" class="headerlink" title="puias"></a>puias</h3><p><em><strong>æœ‰Git1.9</strong></em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">wget /etc/yum.repos.d/PUIAS_6_computational.repo https://gitlab.com/gitlab-org/gitlab-recipes/raw/master/install/centos/PUIAS_6_computational.repo</span><br><span class="line">wget -O /etc/pki/rpm-gpg/RPM-GPG-KEY-puias http://springdale.math.ias.edu/data/puias/6/x86_64/os/RPM-GPG-KEY-puias</span><br><span class="line">rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-puias</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> PUIAS_6_computational</span><br><span class="line">yum -y install git</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">curl --silent --location https://rpm.nodesource.com/setup_4.x | bash -</span><br><span class="line">yum -y install nodejs</span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°æº"><a href="#æœ¬åœ°æº" class="headerlink" title="æœ¬åœ°æº"></a>æœ¬åœ°æº</h2><p>centos-dvd.isoä¸­å·²ç»åŒ…å«äº†å¾ˆå¤šå¸¸ç”¨çš„è½¯ä»¶, åœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨isoä¸­çš„æ–‡ä»¶è¿›è¡Œå®‰è£…;</p><ul><li><p>æŒ‚è½½ISO(é€šè¿‡ä¿®æ”¹fstabæ–‡ä»¶å®Œæˆ)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## vim /etc/fstab</span></span><br><span class="line"><span class="comment">## åœ¨æ–‡ä»¶çš„æœ€åæ·»åŠ </span></span><br><span class="line"><span class="comment">## isoç›®å½•                            æŒ‚è½½ä½ç½®             ç±»å‹    æ–¹å¼</span></span><br><span class="line">/data/yum_iso/CentOS-6.5-DVD1.iso    /media/CentOS_DVD_1 iso9660 loop,ro 0 0</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹æºé…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹æœ¬åœ°æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment">## é…ç½®æ–‡ä»¶åœ¨/etc/yum.repos.d/ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">## vim /etc/yum.repos.d/CentOS-Media.repo</span></span><br><span class="line">[c6-media]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Media</span><br><span class="line"><span class="comment">## æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">baseurl=file:///media/CentOS_DVD_1/</span><br><span class="line">gpgcheck=1</span><br><span class="line"><span class="comment">## 1è¡¨ç¤ºå¯ç”¨è¯¥æº</span></span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><p>å°†å…¶ä»–çš„repoä¸ºåç¼€çš„ä¿®æ”¹ä¸ºrepo_bakæˆ–è€…å…¶ä»–ç±»å‹çš„æ–‡ä»¶</p></li><li><p>é‡å¯<br><code>init 6</code></p></li><li><p>æ£€æŸ¥<br>ä½¿ç”¨<code>df -h</code>æ£€æŸ¥ï¼Œå¦‚æœå‡ºç°<code>/data/yum_iso/CentOS-6.5-DVD1.iso  4.2G  4.2G     0 100% /media/CentOS_DVD_1</code>è¡¨ç¤ºæˆåŠŸã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CENTOSå®‰è£…</title>
      <link href="/2016/03/10/centos/install-centos/"/>
      <url>/2016/03/10/centos/install-centos/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ol><li>ä½¿ç”¨win32diskimageå°†ä¸‹è½½å¥½çš„centos-dvd.isoåˆ»å½•åˆ°å‡†å¤‡å¥½çš„Uç›˜ä¸­.   <ul><li>UltraISOä¸èƒ½ç”¨,ä¼šæ— æ³•å¼•å¯¼  </li><li><a href="http://rufus.akeo.ie/?locale=zh_CN">rufus</a>ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©,æ²¡æœ‰æµ‹è¯•centosæ˜¯å¦å¯ç”¨,ä½†æ˜¯ubuntuå¯ç”¨    </li><li><a href="https://www.ventoy.net/cn/index.html">ventoy</a>ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©,ä¸è¿‡æ²¡æœ‰æµ‹è¯•è¿‡</li></ul></li><li>ä½¿ç”¨Uç›˜å®‰è£…,å…·ä½“å¯ä»¥ç™¾åº¦.</li></ol>]]></content>
      
      
      <categories>
          
          <category> centos </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoæœ¬åœ°ç¯å¢ƒå®‰è£…é…ç½®</title>
      <link href="/2016/03/09/install-hexo/"/>
      <url>/2016/03/09/install-hexo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ul><li>blog Gitä»“åº“</li><li>github page ä»“åº“</li><li>centos6.5</li></ul><span id="more"></span><h3 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h3><ol><li><p>ä¸‹è½½å¦‚ä¸‹å››ä¸ªæ–‡ä»¶ï¼›</p></li><li><p> ä¿®æ”¹<code>MY_BLOG_GIT_URL</code>, <code>MY_BLOG_THEME</code>, <code>MY_BLOG_THEME_NAME</code></p></li><li><p><code>bash install_hexo.sh 1</code></p><figure class="highlight bash"><figcaption><span>è„šæœ¬å…¥å£</span><a href="/downloads/code/install_hexo.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åšå®¢æ ¹ç›®å½•</span></span><br><span class="line">HEXO_ROOT_DIR=/data/blog</span><br><span class="line"><span class="comment">## åšå®¢æºæ–‡ä»¶ç›®å½•</span></span><br><span class="line">MY_BLOG_GIT_URL=<span class="string">&quot;git@git.coding.net:kingwen0302/kingwen0302.git&quot;</span></span><br><span class="line"><span class="comment">## åšå®¢ä¸»é¢˜</span></span><br><span class="line">MY_BLOG_THEME=<span class="string">&quot;https://github.com/tufu9441/maupassant-hexo.git&quot;</span></span><br><span class="line">MY_BLOG_THEME_NAME=maupassant</span><br><span class="line"><span class="comment">## å½“å‰ç›®å½•</span></span><br><span class="line">CUR_DIR=$(<span class="built_in">cd</span> $(dirname <span class="variable">$0</span>); <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">install_hexo</span></span>(){</span><br><span class="line">    yum remove nodejs npm -y</span><br><span class="line">    curl --silent --location https://rpm.nodesource.com/setup_4.x | bash -</span><br><span class="line">    yum install -y nodejs</span><br><span class="line">    <span class="comment">## npm install -g cnpm --registry=https://registry.npm.taobao.org</span></span><br><span class="line">    <span class="comment">## cnpm install hexo-cli -g</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">install</span></span>(){</span><br><span class="line">    hexo init <span class="variable">${HEXO_ROOT_DIR}</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">${HEXO_ROOT_DIR}</span></span><br><span class="line">    rm -rf <span class="built_in">source</span></span><br><span class="line">    git <span class="built_in">clone</span> <span class="variable">${MY_BLOG_GIT_URL}</span> <span class="built_in">source</span></span><br><span class="line">    rm -rf themes/landscape</span><br><span class="line">    git <span class="built_in">clone</span> <span class="variable">${MY_BLOG_THEME}</span> themes/<span class="variable">${MY_BLOG_THEME_NAME}</span></span><br><span class="line">    <span class="comment">## HEXOé…ç½®æ›¿æ¢</span></span><br><span class="line">    <span class="built_in">source</span> <span class="variable">${CUR_DIR}</span>/maupassant_config.sh</span><br><span class="line">    <span class="built_in">source</span> <span class="variable">${CUR_DIR}</span>/post.sh</span><br><span class="line">    <span class="comment">## THEMEé…ç½®æ›¿æ¢</span></span><br><span class="line">    <span class="built_in">source</span> <span class="variable">${CUR_DIR}</span>/maupassant_theme_config.sh</span><br><span class="line">    npm install</span><br><span class="line">    <span class="comment">## å®‰è£…deploy</span></span><br><span class="line">    npm install hexo-deployer-git --save</span><br><span class="line">    <span class="comment">## rssæ”¯æŒ</span></span><br><span class="line">    npm install hexo-generator-feed --save</span><br><span class="line">    <span class="comment">## sitemapæ”¯æŒ</span></span><br><span class="line">    npm install hexo-generator-sitemap --save</span><br><span class="line">    npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">    <span class="comment">## jadeæ¨¡ç‰ˆ</span></span><br><span class="line">    npm install hexo-renderer-jade --save</span><br><span class="line">    npm install hexo-renderer-sass --save</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">deploy</span></span>(){</span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">${HEXO_ROOT_DIR}</span>/<span class="built_in">source</span></span><br><span class="line">    git add .</span><br><span class="line">    git commit -m <span class="string">&quot;<span class="subst">$(date)</span> deploy&quot;</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">${HEXO_ROOT_DIR}</span></span><br><span class="line">    hexo g -d</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">help</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;------------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 0 -- install_hexo&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 1 -- install&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot; 2 -- deploy&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;------------------------------&quot;</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    [0]) install_hexo;;</span><br><span class="line">    [1]) install;;</span><br><span class="line">    [2]) deploy;;</span><br><span class="line">    *)   <span class="built_in">help</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>hexoçš„é…ç½®æ–‡ä»¶</span><a href="/downloads/code/maupassant_config.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: æƒ…æ–‡</span><br><span class="line">subtitle: è®°å½•ç‚¹ç‚¹æ»´æ»´</span><br><span class="line">description: </span><br><span class="line">author: kingwen0302</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone: Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line">url: http://www.mingilin.com</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line">source_dir: <span class="built_in">source</span></span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line">new_post_name: :title.md <span class="comment"># File name of new posts</span></span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line">external_link: <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: <span class="literal">false</span></span><br><span class="line">post_asset_folder: <span class="literal">false</span></span><br><span class="line">relative_link: <span class="literal">false</span></span><br><span class="line">future: <span class="literal">true</span></span><br><span class="line">highlight:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  line_number: <span class="literal">true</span></span><br><span class="line">  auto_detect: <span class="literal">true</span></span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line">per_page: 20</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="comment">## theme: landscape</span></span><br><span class="line">theme: maupassant</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  - <span class="built_in">type</span>: git</span><br><span class="line">    repository: git@git.coding.net:kingwen0302/kingwen0302.git</span><br><span class="line">    branch: coding-pages</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>maupassantä¸»é¢˜é…ç½®æ–‡ä»¶</span><a href="/downloads/code/maupassant_theme_config.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">fancybox: <span class="literal">true</span> <span class="comment">## If you want to use fancybox please set the value to true.</span></span><br><span class="line">duoshuo: kingwen0302 <span class="comment">## Your duoshuo_shortname, e.g. username</span></span><br><span class="line">disqus: <span class="comment">## Your disqus_shortname, e.g. username</span></span><br><span class="line">google_search: <span class="literal">true</span> <span class="comment">## Use Google search, true/false.</span></span><br><span class="line">baidu_search: <span class="comment">## Use Baidu search, true/false.</span></span><br><span class="line">swiftype: <span class="comment">## Your swiftype_key, e.g. m7b11ZrsT8Me7gzApciT</span></span><br><span class="line">tinysou: <span class="comment">## Your tinysou_key, e.g. 4ac092ad8d749fdc6293</span></span><br><span class="line">self_search: <span class="comment">## Use a jQuery-based local search engine, true/false.</span></span><br><span class="line">google_analytics: UA-74683107-1 <span class="comment">## Your Google Analytics tracking id, e.g. UA-42425684-2</span></span><br><span class="line">baidu_analytics: e340a0928b11036ca5deeaf890942c4b <span class="comment">## Your Baidu Analytics tracking id, e.g. 8006843039519956000</span></span><br><span class="line">shareto: <span class="literal">true</span> <span class="comment">## If you want to use the share button please set the value to true.</span></span><br><span class="line">busuanzi: <span class="literal">true</span> <span class="comment">## If you want to use Busuanzi page views please set the value to true.</span></span><br><span class="line"></span><br><span class="line">menu:</span><br><span class="line">  - page: home</span><br><span class="line">    directory: .</span><br><span class="line">    icon: fa-home</span><br><span class="line">  - page: archive</span><br><span class="line">    directory: archives/</span><br><span class="line">    icon: fa-archive</span><br><span class="line">  - page: about</span><br><span class="line">    directory: about/</span><br><span class="line">    icon: fa-user</span><br><span class="line">  - page: rss</span><br><span class="line">    directory: atom.xml</span><br><span class="line">    icon: fa-rss</span><br><span class="line"></span><br><span class="line">widgets: <span class="comment">## Six widgets in sidebar provided: search, category, tag, recent_posts, rencent_comments and links.</span></span><br><span class="line">  - search</span><br><span class="line">  - category</span><br><span class="line">  - tag</span><br><span class="line">  - recent_posts</span><br><span class="line">  - recent_comments</span><br><span class="line">  - links</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  - title: hexo</span><br><span class="line">    url: https://hexo.io/</span><br><span class="line">  - title: å± å¤«9441çš„åšå®¢</span><br><span class="line">    url: https://www.haomwei.com/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Static files</span></span><br><span class="line">js: js</span><br><span class="line">css: css</span><br><span class="line"></span><br><span class="line"><span class="comment"># Theme version</span></span><br><span class="line">version: 0.0.0</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>post.sh</span><a href="/downloads/code/post.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: {{ title }}</span><br><span class="line">date: {{ date }}</span><br><span class="line">tags:</span><br><span class="line">toc: <span class="literal">true</span></span><br><span class="line">categories: </span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä¸»åŠ¨æ¨é€ç™¾åº¦"><a href="#ä¸»åŠ¨æ¨é€ç™¾åº¦" class="headerlink" title="ä¸»åŠ¨æ¨é€ç™¾åº¦"></a>ä¸»åŠ¨æ¨é€ç™¾åº¦</h3><ol><li><p>æ’ä»¶å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install python-setuptools</span><br><span class="line">easy_install beautifulsoup4</span><br><span class="line">easy_install requests</span><br><span class="line">yum -y install python-lxml</span><br></pre></td></tr></table></figure></li><li><p>æ¨é€è„šæœ¬</p><figure class="highlight python"><figcaption><span>push.py</span><a href="/downloads/code/push.py">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author: LoveNight</span></span><br><span class="line"><span class="comment"># @Date:   2015-11-16 20:45:59</span></span><br><span class="line"><span class="comment"># @Last Modified by:   LoveNight</span></span><br><span class="line"><span class="comment"># @Last Modified time: 2015-11-18 18:07:19</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="keyword">as</span> BS</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">hexo åšå®¢ä¸“ç”¨ï¼Œå‘ç™¾åº¦ç«™é•¿å¹³å°æäº¤æ‰€æœ‰ç½‘å€</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æœ¬è„šæœ¬å¿…é¡»æ”¾åœ¨hexoåšå®¢çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼éœ€è¦å·²å®‰è£…ç”Ÿæˆç™¾åº¦ç«™ç‚¹åœ°å›¾çš„æ’ä»¶ã€‚</span></span><br><span class="line"><span class="string">ç™¾åº¦ç«™é•¿å¹³å°æäº¤é“¾æ¥ï¼šhttp://zhanzhang.baidu.com/linksubmit/index</span></span><br><span class="line"><span class="string">ä¸»åŠ¨æ¨é€ï¼šæœ€ä¸ºå¿«é€Ÿçš„æäº¤æ–¹å¼ï¼Œæ¨èæ‚¨å°†ç«™ç‚¹å½“å¤©æ–°äº§å‡ºé“¾æ¥ç«‹å³é€šè¿‡æ­¤æ–¹å¼æ¨é€ç»™ç™¾åº¦ï¼Œä»¥ä¿è¯æ–°é“¾æ¥å¯ä»¥åŠæ—¶è¢«ç™¾åº¦æ”¶å½•ã€‚</span></span><br><span class="line"><span class="string">ä»ä¸­æ‰¾åˆ°è‡ªå·±çš„æ¥å£è°ƒç”¨åœ°å€</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## url = å»ä¸Šé¢çš„é“¾æ¥æ‰¾è‡ªå·±çš„æ¨é€æ¥å£</span></span><br><span class="line">url = <span class="string">&quot;http://data.zz.baidu.com/urls?site=www.aaaa.com&amp;token=aaaa&quot;</span></span><br><span class="line">baidu_sitemap = os.path.join(sys.path[<span class="number">0</span>], <span class="string">&#x27;public&#x27;</span>, <span class="string">&#x27;baidusitemap.xml&#x27;</span>)</span><br><span class="line">google_sitemap = os.path.join(sys.path[<span class="number">0</span>], <span class="string">&#x27;public&#x27;</span>, <span class="string">&#x27;sitemap.xml&#x27;</span>)</span><br><span class="line">sitemap = [baidu_sitemap, google_sitemap]</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> (os.path.exists(baidu_sitemap) <span class="keyword">or</span> os.path.exists(</span><br><span class="line">    google_sitemap)), <span class="string">&quot;æ²¡æ‰¾åˆ°ä»»ä½•ç½‘ç«™åœ°å›¾ï¼Œè¯·æ£€æŸ¥ï¼&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»ç«™ç‚¹åœ°å›¾ä¸­è¯»å–ç½‘å€åˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getUrls</span>():</span></span><br><span class="line">    urls = []</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> sitemap:</span><br><span class="line">        <span class="keyword">if</span> os.path.exists(_):</span><br><span class="line">            <span class="comment"># with open(_, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(_, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                xml = f.read()</span><br><span class="line">            soup = BS(xml, <span class="string">&quot;xml&quot;</span>)</span><br><span class="line">            tags = soup.find_all(<span class="string">&quot;loc&quot;</span>)</span><br><span class="line">            urls += [x.string <span class="keyword">for</span> x <span class="keyword">in</span> tags]</span><br><span class="line">            <span class="keyword">if</span> _ == baidu_sitemap:</span><br><span class="line">                tags = soup.find_all(<span class="string">&quot;breadCrumb&quot;</span>, url=<span class="literal">True</span>)</span><br><span class="line">                urls += [x[<span class="string">&quot;url&quot;</span>] <span class="keyword">for</span> x <span class="keyword">in</span> tags]</span><br><span class="line">    <span class="keyword">return</span> urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># POSTæäº¤ç½‘å€åˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">postUrls</span>(<span class="params">urls</span>):</span></span><br><span class="line">    urls = <span class="built_in">set</span>(urls)  <span class="comment"># å…ˆå»é‡</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸€å…±æå–å‡º %s ä¸ªç½‘å€&quot;</span> % <span class="built_in">len</span>(urls))</span><br><span class="line">    data = <span class="string">&quot;\n&quot;</span>.join(urls)</span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> urls:</span><br><span class="line">        <span class="built_in">print</span> u</span><br><span class="line">    <span class="keyword">return</span> requests.post(url, data=data).text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    urls = getUrls()</span><br><span class="line">    result = postUrls(urls)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æäº¤ç»“æœï¼š&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">    <span class="comment">## msvcrt.getch()</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ol><li><a href="http://lovenight.github.io/2015/11/18/%E5%90%91%E7%99%BE%E5%BA%A6%E6%8E%A8%E9%80%81hexo%E5%8D%9A%E5%AE%A2%E6%89%80%E6%9C%89%E9%93%BE%E6%8E%A5%E7%9A%84Python%E8%84%9A%E6%9C%AC/">å‚è€ƒæ–‡æ¡£1</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
